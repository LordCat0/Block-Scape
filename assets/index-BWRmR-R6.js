(function(){const ze=document.createElement("link").relList;if(ze&&ze.supports&&ze.supports("modulepreload"))return;for(const G of document.querySelectorAll('link[rel="modulepreload"]'))p(G);new MutationObserver(G=>{for(const b of G)if(b.type==="childList")for(const I of b.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&p(I)}).observe(document,{childList:!0,subtree:!0});function u(G){const b={};return G.integrity&&(b.integrity=G.integrity),G.referrerPolicy&&(b.referrerPolicy=G.referrerPolicy),G.crossOrigin==="use-credentials"?b.credentials="include":G.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function p(G){if(G.ep)return;G.ep=!0;const b=u(G);fetch(G.href,b)}})();var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l$(Pe){return Pe&&Pe.__esModule&&Object.prototype.hasOwnProperty.call(Pe,"default")?Pe.default:Pe}var rf={exports:{}},n$={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function Dm(){if(x_)return n$;x_=1;var Pe=Symbol.for("react.transitional.element"),ze=Symbol.for("react.fragment");function u(p,G,b){var I=null;if(b!==void 0&&(I=""+b),G.key!==void 0&&(I=""+G.key),"key"in G){b={};for(var S in G)S!=="key"&&(b[S]=G[S])}else b=G;return G=b.ref,{$$typeof:Pe,type:p,key:I,ref:G!==void 0?G:null,props:b}}return n$.Fragment=ze,n$.jsx=u,n$.jsxs=u,n$}var B_;function xm(){return B_||(B_=1,rf.exports=Dm()),rf.exports}var ki=xm(),lf={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Bm(){if(P_)return Et;P_=1;var Pe=Symbol.for("react.transitional.element"),ze=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),I=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),V=Symbol.iterator;function j(N){return N===null||typeof N!="object"?null:(N=V&&N[V]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,O={};function P(N,W,q){this.props=N,this.context=W,this.refs=O,this.updater=q||A}P.prototype.isReactComponent={},P.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},P.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function w(){}w.prototype=P.prototype;function L(N,W,q){this.props=N,this.context=W,this.refs=O,this.updater=q||A}var J=L.prototype=new w;J.constructor=L,U(J,P.prototype),J.isPureReactComponent=!0;var x=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},Q=Object.prototype.hasOwnProperty;function te(N,W,q,Ce,Ae,Me){return q=Me.ref,{$$typeof:Pe,type:N,key:W,ref:q!==void 0?q:null,props:Me}}function fe(N,W){return te(N.type,W,void 0,void 0,void 0,N.props)}function oe(N){return typeof N=="object"&&N!==null&&N.$$typeof===Pe}function Se(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(q){return W[q]})}var Xe=/\/+/g;function Y(N,W){return typeof N=="object"&&N!==null&&N.key!=null?Se(""+N.key):W.toString(36)}function ve(){}function T(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ve,ve):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Ie(N,W,q,Ce,Ae){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var He=!1;if(N===null)He=!0;else switch(Me){case"bigint":case"string":case"number":He=!0;break;case"object":switch(N.$$typeof){case Pe:case ze:He=!0;break;case z:return He=N._init,Ie(He(N._payload),W,q,Ce,Ae)}}if(He)return Ae=Ae(N),He=Ce===""?"."+Y(N,0):Ce,x(Ae)?(q="",He!=null&&(q=He.replace(Xe,"$&/")+"/"),Ie(Ae,W,q,"",function(pt){return pt})):Ae!=null&&(oe(Ae)&&(Ae=fe(Ae,q+(Ae.key==null||N&&N.key===Ae.key?"":(""+Ae.key).replace(Xe,"$&/")+"/")+He)),W.push(Ae)),1;He=0;var yt=Ce===""?".":Ce+":";if(x(N))for(var Qe=0;Qe<N.length;Qe++)Ce=N[Qe],Me=yt+Y(Ce,Qe),He+=Ie(Ce,W,q,Me,Ae);else if(Qe=j(N),typeof Qe=="function")for(N=Qe.call(N),Qe=0;!(Ce=N.next()).done;)Ce=Ce.value,Me=yt+Y(Ce,Qe++),He+=Ie(Ce,W,q,Me,Ae);else if(Me==="object"){if(typeof N.then=="function")return Ie(T(N),W,q,Ce,Ae);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return He}function ce(N,W,q){if(N==null)return N;var Ce=[],Ae=0;return Ie(N,Ce,"","",function(Me){return W.call(q,Me,Ae++)}),Ce}function ue(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(q){(N._status===0||N._status===-1)&&(N._status=1,N._result=q)},function(q){(N._status===0||N._status===-1)&&(N._status=2,N._result=q)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var Fe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Oe(){}return Et.Children={map:ce,forEach:function(N,W,q){ce(N,function(){W.apply(this,arguments)},q)},count:function(N){var W=0;return ce(N,function(){W++}),W},toArray:function(N){return ce(N,function(W){return W})||[]},only:function(N){if(!oe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Et.Component=P,Et.Fragment=u,Et.Profiler=G,Et.PureComponent=L,Et.StrictMode=p,Et.Suspense=E,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Et.__COMPILER_RUNTIME={__proto__:null,c:function(N){return D.H.useMemoCache(N)}},Et.cache=function(N){return function(){return N.apply(null,arguments)}},Et.cloneElement=function(N,W,q){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var Ce=U({},N.props),Ae=N.key,Me=void 0;if(W!=null)for(He in W.ref!==void 0&&(Me=void 0),W.key!==void 0&&(Ae=""+W.key),W)!Q.call(W,He)||He==="key"||He==="__self"||He==="__source"||He==="ref"&&W.ref===void 0||(Ce[He]=W[He]);var He=arguments.length-2;if(He===1)Ce.children=q;else if(1<He){for(var yt=Array(He),Qe=0;Qe<He;Qe++)yt[Qe]=arguments[Qe+2];Ce.children=yt}return te(N.type,Ae,void 0,void 0,Me,Ce)},Et.createContext=function(N){return N={$$typeof:I,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:b,_context:N},N},Et.createElement=function(N,W,q){var Ce,Ae={},Me=null;if(W!=null)for(Ce in W.key!==void 0&&(Me=""+W.key),W)Q.call(W,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(Ae[Ce]=W[Ce]);var He=arguments.length-2;if(He===1)Ae.children=q;else if(1<He){for(var yt=Array(He),Qe=0;Qe<He;Qe++)yt[Qe]=arguments[Qe+2];Ae.children=yt}if(N&&N.defaultProps)for(Ce in He=N.defaultProps,He)Ae[Ce]===void 0&&(Ae[Ce]=He[Ce]);return te(N,Me,void 0,void 0,null,Ae)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(N){return{$$typeof:S,render:N}},Et.isValidElement=oe,Et.lazy=function(N){return{$$typeof:z,_payload:{_status:-1,_result:N},_init:ue}},Et.memo=function(N,W){return{$$typeof:C,type:N,compare:W===void 0?null:W}},Et.startTransition=function(N){var W=D.T,q={};D.T=q;try{var Ce=N(),Ae=D.S;Ae!==null&&Ae(q,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then(Oe,Fe)}catch(Me){Fe(Me)}finally{D.T=W}},Et.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Et.use=function(N){return D.H.use(N)},Et.useActionState=function(N,W,q){return D.H.useActionState(N,W,q)},Et.useCallback=function(N,W){return D.H.useCallback(N,W)},Et.useContext=function(N){return D.H.useContext(N)},Et.useDebugValue=function(){},Et.useDeferredValue=function(N,W){return D.H.useDeferredValue(N,W)},Et.useEffect=function(N,W,q){var Ce=D.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ce.useEffect(N,W)},Et.useId=function(){return D.H.useId()},Et.useImperativeHandle=function(N,W,q){return D.H.useImperativeHandle(N,W,q)},Et.useInsertionEffect=function(N,W){return D.H.useInsertionEffect(N,W)},Et.useLayoutEffect=function(N,W){return D.H.useLayoutEffect(N,W)},Et.useMemo=function(N,W){return D.H.useMemo(N,W)},Et.useOptimistic=function(N,W){return D.H.useOptimistic(N,W)},Et.useReducer=function(N,W,q){return D.H.useReducer(N,W,q)},Et.useRef=function(N){return D.H.useRef(N)},Et.useState=function(N){return D.H.useState(N)},Et.useSyncExternalStore=function(N,W,q){return D.H.useSyncExternalStore(N,W,q)},Et.useTransition=function(){return D.H.useTransition()},Et.version="19.1.0",Et}var U_;function mf(){return U_||(U_=1,lf.exports=Bm()),lf.exports}var Tl=mf(),af={exports:{}},r$={},uf={exports:{}},cf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function Pm(){return F_||(F_=1,function(Pe){function ze(ce,ue){var Fe=ce.length;ce.push(ue);e:for(;0<Fe;){var Oe=Fe-1>>>1,N=ce[Oe];if(0<G(N,ue))ce[Oe]=ue,ce[Fe]=N,Fe=Oe;else break e}}function u(ce){return ce.length===0?null:ce[0]}function p(ce){if(ce.length===0)return null;var ue=ce[0],Fe=ce.pop();if(Fe!==ue){ce[0]=Fe;e:for(var Oe=0,N=ce.length,W=N>>>1;Oe<W;){var q=2*(Oe+1)-1,Ce=ce[q],Ae=q+1,Me=ce[Ae];if(0>G(Ce,Fe))Ae<N&&0>G(Me,Ce)?(ce[Oe]=Me,ce[Ae]=Fe,Oe=Ae):(ce[Oe]=Ce,ce[q]=Fe,Oe=q);else if(Ae<N&&0>G(Me,Fe))ce[Oe]=Me,ce[Ae]=Fe,Oe=Ae;else break e}}return ue}function G(ce,ue){var Fe=ce.sortIndex-ue.sortIndex;return Fe!==0?Fe:ce.id-ue.id}if(Pe.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;Pe.unstable_now=function(){return b.now()}}else{var I=Date,S=I.now();Pe.unstable_now=function(){return I.now()-S}}var E=[],C=[],z=1,V=null,j=3,A=!1,U=!1,O=!1,P=!1,w=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function x(ce){for(var ue=u(C);ue!==null;){if(ue.callback===null)p(C);else if(ue.startTime<=ce)p(C),ue.sortIndex=ue.expirationTime,ze(E,ue);else break;ue=u(C)}}function D(ce){if(O=!1,x(ce),!U)if(u(E)!==null)U=!0,Q||(Q=!0,Y());else{var ue=u(C);ue!==null&&Ie(D,ue.startTime-ce)}}var Q=!1,te=-1,fe=5,oe=-1;function Se(){return P?!0:!(Pe.unstable_now()-oe<fe)}function Xe(){if(P=!1,Q){var ce=Pe.unstable_now();oe=ce;var ue=!0;try{e:{U=!1,O&&(O=!1,L(te),te=-1),A=!0;var Fe=j;try{t:{for(x(ce),V=u(E);V!==null&&!(V.expirationTime>ce&&Se());){var Oe=V.callback;if(typeof Oe=="function"){V.callback=null,j=V.priorityLevel;var N=Oe(V.expirationTime<=ce);if(ce=Pe.unstable_now(),typeof N=="function"){V.callback=N,x(ce),ue=!0;break t}V===u(E)&&p(E),x(ce)}else p(E);V=u(E)}if(V!==null)ue=!0;else{var W=u(C);W!==null&&Ie(D,W.startTime-ce),ue=!1}}break e}finally{V=null,j=Fe,A=!1}ue=void 0}}finally{ue?Y():Q=!1}}}var Y;if(typeof J=="function")Y=function(){J(Xe)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,T=ve.port2;ve.port1.onmessage=Xe,Y=function(){T.postMessage(null)}}else Y=function(){w(Xe,0)};function Ie(ce,ue){te=w(function(){ce(Pe.unstable_now())},ue)}Pe.unstable_IdlePriority=5,Pe.unstable_ImmediatePriority=1,Pe.unstable_LowPriority=4,Pe.unstable_NormalPriority=3,Pe.unstable_Profiling=null,Pe.unstable_UserBlockingPriority=2,Pe.unstable_cancelCallback=function(ce){ce.callback=null},Pe.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<ce?Math.floor(1e3/ce):5},Pe.unstable_getCurrentPriorityLevel=function(){return j},Pe.unstable_next=function(ce){switch(j){case 1:case 2:case 3:var ue=3;break;default:ue=j}var Fe=j;j=ue;try{return ce()}finally{j=Fe}},Pe.unstable_requestPaint=function(){P=!0},Pe.unstable_runWithPriority=function(ce,ue){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Fe=j;j=ce;try{return ue()}finally{j=Fe}},Pe.unstable_scheduleCallback=function(ce,ue,Fe){var Oe=Pe.unstable_now();switch(typeof Fe=="object"&&Fe!==null?(Fe=Fe.delay,Fe=typeof Fe=="number"&&0<Fe?Oe+Fe:Oe):Fe=Oe,ce){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=Fe+N,ce={id:z++,callback:ue,priorityLevel:ce,startTime:Fe,expirationTime:N,sortIndex:-1},Fe>Oe?(ce.sortIndex=Fe,ze(C,ce),u(E)===null&&ce===u(C)&&(O?(L(te),te=-1):O=!0,Ie(D,Fe-Oe))):(ce.sortIndex=N,ze(E,ce),U||A||(U=!0,Q||(Q=!0,Y()))),ce},Pe.unstable_shouldYield=Se,Pe.unstable_wrapCallback=function(ce){var ue=j;return function(){var Fe=j;j=ue;try{return ce.apply(this,arguments)}finally{j=Fe}}}}(cf)),cf}var H_;function Um(){return H_||(H_=1,uf.exports=Pm()),uf.exports}var hf={exports:{}},Is={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function Fm(){if(G_)return Is;G_=1;var Pe=mf();function ze(E){var C="https://react.dev/errors/"+E;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var z=2;z<arguments.length;z++)C+="&args[]="+encodeURIComponent(arguments[z])}return"Minified React error #"+E+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var p={d:{f:u,r:function(){throw Error(ze(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},G=Symbol.for("react.portal");function b(E,C,z){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:V==null?null:""+V,children:E,containerInfo:C,implementation:z}}var I=Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(E,C){if(E==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return Is.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,Is.createPortal=function(E,C){var z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(ze(299));return b(E,C,null,z)},Is.flushSync=function(E){var C=I.T,z=p.p;try{if(I.T=null,p.p=2,E)return E()}finally{I.T=C,p.p=z,p.d.f()}},Is.preconnect=function(E,C){typeof E=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,p.d.C(E,C))},Is.prefetchDNS=function(E){typeof E=="string"&&p.d.D(E)},Is.preinit=function(E,C){if(typeof E=="string"&&C&&typeof C.as=="string"){var z=C.as,V=S(z,C.crossOrigin),j=typeof C.integrity=="string"?C.integrity:void 0,A=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;z==="style"?p.d.S(E,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:V,integrity:j,fetchPriority:A}):z==="script"&&p.d.X(E,{crossOrigin:V,integrity:j,fetchPriority:A,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},Is.preinitModule=function(E,C){if(typeof E=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var z=S(C.as,C.crossOrigin);p.d.M(E,{crossOrigin:z,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&p.d.M(E)},Is.preload=function(E,C){if(typeof E=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var z=C.as,V=S(z,C.crossOrigin);p.d.L(E,z,{crossOrigin:V,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},Is.preloadModule=function(E,C){if(typeof E=="string")if(C){var z=S(C.as,C.crossOrigin);p.d.m(E,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:z,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else p.d.m(E)},Is.requestFormReset=function(E){p.d.r(E)},Is.unstable_batchedUpdates=function(E,C){return E(C)},Is.useFormState=function(E,C,z){return I.H.useFormState(E,C,z)},Is.useFormStatus=function(){return I.H.useHostTransitionStatus()},Is.version="19.1.0",Is}var V_;function Hm(){if(V_)return hf.exports;V_=1;function Pe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pe)}catch(ze){console.error(ze)}}return Pe(),hf.exports=Fm(),hf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function Gm(){if(z_)return r$;z_=1;var Pe=Um(),ze=mf(),u=Hm();function p(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function G(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function b(s){var o=s,r=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(r=o.return),s=o.return;while(s)}return o.tag===3?r:null}function I(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function S(s){if(b(s)!==s)throw Error(p(188))}function E(s){var o=s.alternate;if(!o){if(o=b(s),o===null)throw Error(p(188));return o!==s?null:s}for(var r=s,l=o;;){var c=r.return;if(c===null)break;var h=c.alternate;if(h===null){if(l=c.return,l!==null){r=l;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===r)return S(c),s;if(h===l)return S(c),o;h=h.sibling}throw Error(p(188))}if(r.return!==l.return)r=c,l=h;else{for(var f=!1,v=c.child;v;){if(v===r){f=!0,r=c,l=h;break}if(v===l){f=!0,l=c,r=h;break}v=v.sibling}if(!f){for(v=h.child;v;){if(v===r){f=!0,r=h,l=c;break}if(v===l){f=!0,l=h,r=c;break}v=v.sibling}if(!f)throw Error(p(189))}}if(r.alternate!==l)throw Error(p(190))}if(r.tag!==3)throw Error(p(188));return r.stateNode.current===r?s:o}function C(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=C(s),o!==null)return o;s=s.sibling}return null}var z=Object.assign,V=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),J=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),Se=Symbol.for("react.memo_cache_sentinel"),Xe=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:(s=Xe&&s[Xe]||s["@@iterator"],typeof s=="function"?s:null)}var ve=Symbol.for("react.client.reference");function T(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ve?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case P:return"Profiler";case O:return"StrictMode";case D:return"Suspense";case Q:return"SuspenseList";case oe:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case J:return(s.displayName||"Context")+".Provider";case L:return(s._context.displayName||"Context")+".Consumer";case x:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case te:return o=s.displayName||null,o!==null?o:T(s.type)||"Memo";case fe:o=s._payload,s=s._init;try{return T(s(o))}catch{}}return null}var Ie=Array.isArray,ce=ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Fe={pending:!1,data:null,method:null,action:null},Oe=[],N=-1;function W(s){return{current:s}}function q(s){0>N||(s.current=Oe[N],Oe[N]=null,N--)}function Ce(s,o){N++,Oe[N]=s.current,s.current=o}var Ae=W(null),Me=W(null),He=W(null),yt=W(null);function Qe(s,o){switch(Ce(He,o),Ce(Me,s),Ce(Ae,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?ic(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=ic(o),s=q$(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(Ae),Ce(Ae,s)}function pt(){q(Ae),q(Me),q(He)}function We(s){s.memoizedState!==null&&Ce(yt,s);var o=Ae.current,r=q$(o,s.type);o!==r&&(Ce(Me,s),Ce(Ae,r))}function Dt(s){Me.current===s&&(q(Ae),q(Me)),yt.current===s&&(q(yt),Cn._currentValue=Fe)}var be=Object.prototype.hasOwnProperty,Ge=Pe.unstable_scheduleCallback,_=Pe.unstable_cancelCallback,me=Pe.unstable_shouldYield,Ee=Pe.unstable_requestPaint,M=Pe.unstable_now,B=Pe.unstable_getCurrentPriorityLevel,se=Pe.unstable_ImmediatePriority,we=Pe.unstable_UserBlockingPriority,Be=Pe.unstable_NormalPriority,le=Pe.unstable_LowPriority,Ve=Pe.unstable_IdlePriority,Ye=Pe.log,k=Pe.unstable_setDisableYieldValue,qe=null,ut=null;function Ze(s){if(typeof Ye=="function"&&k(s),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(qe,s)}catch{}}var ht=Math.clz32?Math.clz32:wi,pi=Math.log,Ct=Math.LN2;function wi(s){return s>>>=0,s===0?32:31-(pi(s)/Ct|0)|0}var $=256,R=4194304;function ee(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ie(s,o,r){var l=s.pendingLanes;if(l===0)return 0;var c=0,h=s.suspendedLanes,f=s.pingedLanes;s=s.warmLanes;var v=l&134217727;return v!==0?(l=v&~h,l!==0?c=ee(l):(f&=v,f!==0?c=ee(f):r||(r=v&~s,r!==0&&(c=ee(r))))):(v=l&~h,v!==0?c=ee(v):f!==0?c=ee(f):r||(r=l&~s,r!==0&&(c=ee(r)))),c===0?0:o!==0&&o!==c&&(o&h)===0&&(h=c&-c,r=o&-o,h>=r||h===32&&(r&4194048)!==0)?o:c}function Ue(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function At(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ds(){var s=$;return $<<=1,($&4194048)===0&&($=256),s}function Os(){var s=R;return R<<=1,(R&62914560)===0&&(R=4194304),s}function Xi(s){for(var o=[],r=0;31>r;r++)o.push(s);return o}function g(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function y(s,o,r,l,c,h){var f=s.pendingLanes;s.pendingLanes=r,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=r,s.entangledLanes&=r,s.errorRecoveryDisabledLanes&=r,s.shellSuspendCounter=0;var v=s.entanglements,X=s.expirationTimes,he=s.hiddenUpdates;for(r=f&~r;0<r;){var Le=31-ht(r),xe=1<<Le;v[Le]=0,X[Le]=-1;var de=he[Le];if(de!==null)for(he[Le]=null,Le=0;Le<de.length;Le++){var Te=de[Le];Te!==null&&(Te.lane&=-536870913)}r&=~xe}l!==0&&K(s,l,0),h!==0&&c===0&&s.tag!==0&&(s.suspendedLanes|=h&~(f&~o))}function K(s,o,r){s.pendingLanes|=o,s.suspendedLanes&=~o;var l=31-ht(o);s.entangledLanes|=o,s.entanglements[l]=s.entanglements[l]|1073741824|r&4194090}function re(s,o){var r=s.entangledLanes|=o;for(s=s.entanglements;r;){var l=31-ht(r),c=1<<l;c&o|s[l]&o&&(s[l]|=o),r&=~c}}function Ne(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ke(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ct(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:Wp(s.type))}function Yi(s,o){var r=ue.p;try{return ue.p=s,o()}finally{ue.p=r}}var ps=Math.random().toString(36).slice(2),bi="__reactFiber$"+ps,Vt="__reactProps$"+ps,Rs="__reactContainer$"+ps,wa="__reactEvents$"+ps,Td="__reactListeners$"+ps,Ed="__reactHandles$"+ps,vc="__reactResources$"+ps,Wo="__reactMarker$"+ps;function El(s){delete s[bi],delete s[Vt],delete s[wa],delete s[Td],delete s[Ed]}function Dn(s){var o=s[bi];if(o)return o;for(var r=s.parentNode;r;){if(o=r[Rs]||r[bi]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(s=Je(s);s!==null;){if(r=s[bi])return r;s=Je(s)}return o}s=r,r=s.parentNode}return null}function xn(s){if(s=s[bi]||s[Rs]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function br(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(p(33))}function Qs(s){var o=s[vc];return o||(o=s[vc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Mi(s){s[Wo]=!0}var Sr=new Set,bd={};function Ro(s,o){vr(s,o),vr(s+"Capture",o)}function vr(s,o){for(bd[s]=o,s=0;s<o.length;s++)Sr.add(o[s])}var Ma=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Da={},Sd={};function yc(s){return be.call(Sd,s)?!0:be.call(Da,s)?!1:Ma.test(s)?Sd[s]=!0:(Da[s]=!0,!1)}function xa(s,o,r){if(yc(o))if(r===null)s.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var l=o.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+r)}}function yr(s,o,r){if(r===null)s.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+r)}}function eo(s,o,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttributeNS(o,r,""+l)}}var Ba,Pa;function Xo(s){if(Ba===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Ba=o&&o[1]||"",Pa=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ba+s+Pa}var bl=!1;function Ir(s,o){if(!s||bl)return"";bl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(o){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(Te){var de=Te}Reflect.construct(s,[],xe)}else{try{xe.call()}catch(Te){de=Te}s.call(xe.prototype)}}else{try{throw Error()}catch(Te){de=Te}(xe=s())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(Te){if(Te&&de&&typeof Te.stack=="string")return[Te.stack,de.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),f=h[0],v=h[1];if(f&&v){var X=f.split(`
`),he=v.split(`
`);for(c=l=0;l<X.length&&!X[l].includes("DetermineComponentFrameRoot");)l++;for(;c<he.length&&!he[c].includes("DetermineComponentFrameRoot");)c++;if(l===X.length||c===he.length)for(l=X.length-1,c=he.length-1;1<=l&&0<=c&&X[l]!==he[c];)c--;for(;1<=l&&0<=c;l--,c--)if(X[l]!==he[c]){if(l!==1||c!==1)do if(l--,c--,0>c||X[l]!==he[c]){var Le=`
`+X[l].replace(" at new "," at ");return s.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",s.displayName)),Le}while(1<=l&&0<=c);break}}}finally{bl=!1,Error.prepareStackTrace=r}return(r=s?s.displayName||s.name:"")?Xo(r):""}function a$(s){switch(s.tag){case 26:case 27:case 5:return Xo(s.type);case 16:return Xo("Lazy");case 13:return Xo("Suspense");case 19:return Xo("SuspenseList");case 0:case 15:return Ir(s.type,!1);case 11:return Ir(s.type.render,!1);case 1:return Ir(s.type,!0);case 31:return Xo("Activity");default:return""}}function Or(s){try{var o="";do o+=a$(s),s=s.return;while(s);return o}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function ji(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ua(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function u$(s){var o=Ua(s)?"checked":"value",r=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),l=""+s[o];if(!s.hasOwnProperty(o)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,h=r.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return c.call(this)},set:function(f){l=""+f,h.call(this,f)}}),Object.defineProperty(s,o,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(f){l=""+f},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Fa(s){s._valueTracker||(s._valueTracker=u$(s))}function vd(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var r=o.getValue(),l="";return s&&(l=Ua(s)?s.checked?"true":"false":s.value),s=l,s!==r?(o.setValue(s),!0):!1}function Cs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Si=/[\n"\\]/g;function Ki(s){return s.replace(Si,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ha(s,o,r,l,c,h,f,v){s.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?s.type=f:s.removeAttribute("type"),o!=null?f==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+ji(o)):s.value!==""+ji(o)&&(s.value=""+ji(o)):f!=="submit"&&f!=="reset"||s.removeAttribute("value"),o!=null?Co(s,f,ji(o)):r!=null?Co(s,f,ji(r)):l!=null&&s.removeAttribute("value"),c==null&&h!=null&&(s.defaultChecked=!!h),c!=null&&(s.checked=c&&typeof c!="function"&&typeof c!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?s.name=""+ji(v):s.removeAttribute("name")}function to(s,o,r,l,c,h,f,v){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(s.type=h),o!=null||r!=null){if(!(h!=="submit"&&h!=="reset"||o!=null))return;r=r!=null?""+ji(r):"",o=o!=null?""+ji(o):r,v||o===s.value||(s.value=o),s.defaultValue=o}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,s.checked=v?s.checked:!!l,s.defaultChecked=!!l,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(s.name=f)}function Co(s,o,r){o==="number"&&Cs(s.ownerDocument)===s||s.defaultValue===""+r||(s.defaultValue=""+r)}function Rr(s,o,r,l){if(s=s.options,o){o={};for(var c=0;c<r.length;c++)o["$"+r[c]]=!0;for(r=0;r<s.length;r++)c=o.hasOwnProperty("$"+s[r].value),s[r].selected!==c&&(s[r].selected=c),c&&l&&(s[r].defaultSelected=!0)}else{for(r=""+ji(r),o=null,c=0;c<s.length;c++){if(s[c].value===r){s[c].selected=!0,l&&(s[c].defaultSelected=!0);return}o!==null||s[c].disabled||(o=s[c])}o!==null&&(o.selected=!0)}}function Ic(s,o,r){if(o!=null&&(o=""+ji(o),o!==s.value&&(s.value=o),r==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=r!=null?""+ji(r):""}function Ga(s,o,r,l){if(o==null){if(l!=null){if(r!=null)throw Error(p(92));if(Ie(l)){if(1<l.length)throw Error(p(93));l=l[0]}r=l}r==null&&(r=""),o=r}r=ji(o),s.defaultValue=r,l=s.textContent,l===r&&l!==""&&l!==null&&(s.value=l)}function Bn(s,o){if(o){var r=s.firstChild;if(r&&r===s.lastChild&&r.nodeType===3){r.nodeValue=o;return}}s.textContent=o}var c$=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oc(s,o,r){var l=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":l?s.setProperty(o,r):typeof r!="number"||r===0||c$.has(o)?o==="float"?s.cssFloat=r:s[o]=(""+r).trim():s[o]=r+"px"}function Sl(s,o,r){if(o!=null&&typeof o!="object")throw Error(p(62));if(s=s.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||o!=null&&o.hasOwnProperty(l)||(l.indexOf("--")===0?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="");for(var c in o)l=o[c],o.hasOwnProperty(c)&&r[c]!==l&&Oc(s,c,l)}else for(var h in o)o.hasOwnProperty(h)&&Oc(s,h,o[h])}function Rc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),h$=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cr(s){return h$.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ac=null;function Nc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ar=null,io=null;function yd(s){var o=xn(s);if(o&&(s=o.stateNode)){var r=s[Vt]||null;e:switch(s=o.stateNode,o.type){case"input":if(Ha(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=s;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Ki(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var l=r[o];if(l!==s&&l.form===s.form){var c=l[Vt]||null;if(!c)throw Error(p(90));Ha(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(o=0;o<r.length;o++)l=r[o],l.form===s.form&&vd(l)}break e;case"textarea":Ic(s,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&Rr(s,!!r.multiple,o,!1)}}}var Va=!1;function Di(s,o,r){if(Va)return s(o,r);Va=!0;try{var l=s(o);return l}finally{if(Va=!1,(Ar!==null||io!==null)&&(Vu(),Ar&&(o=Ar,s=io,io=Ar=null,yd(o),s)))for(o=0;o<s.length;o++)yd(s[o])}}function Pn(s,o){var r=s.stateNode;if(r===null)return null;var l=r[Vt]||null;if(l===null)return null;r=l[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(s=s.type,l=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!l;break e;default:s=!1}if(s)return null;if(r&&typeof r!="function")throw Error(p(231,o,typeof r));return r}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vl=!1;if(so)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){vl=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{vl=!1}var Yo=null,za=null,yl=null;function Id(){if(yl)return yl;var s,o=za,r=o.length,l,c="value"in Yo?Yo.value:Yo.textContent,h=c.length;for(s=0;s<r&&o[s]===c[s];s++);var f=r-s;for(l=1;l<=f&&o[r-l]===c[h-l];l++);return yl=c.slice(s,1<l?1-l:void 0)}function Nr(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Ao(){return!0}function Wa(){return!1}function is(s){function o(r,l,c,h,f){this._reactName=r,this._targetInst=c,this.type=l,this.nativeEvent=h,this.target=f,this.currentTarget=null;for(var v in s)s.hasOwnProperty(v)&&(r=s[v],this[v]=r?r(h):h[v]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ao:Wa,this.isPropagationStopped=Wa,this}return z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),o}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=is(jo),Ol=z({},jo,{view:0,detail:0}),d$=is(Ol),Ko,Lc,Jo,qo=z({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Jo&&(Jo&&s.type==="mousemove"?(Ko=s.screenX-Jo.screenX,Lc=s.screenY-Jo.screenY):Lc=Ko=0,Jo=s),Ko)},movementY:function(s){return"movementY"in s?s.movementY:Lc}}),Lr=is(qo),Vs=z({},qo,{dataTransfer:0}),p$=is(Vs),$$=z({},Ol,{relatedTarget:0}),kc=is($$),g$=z({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),f$=is(g$),_$=z({},jo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),m$=is(_$),Od=z({},jo,{data:0}),Zo=is(Od),Rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E$(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=T$[s])?!!o[s]:!1}function wc(){return E$}var b$=z({},Ol,{key:function(s){if(s.key){var o=Rl[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Nr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Rd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(s){return s.type==="keypress"?Nr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Nr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),S$=is(b$),v$=z({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cd=is(v$),y$=z({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),I$=is(y$),Ad=z({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),O$=is(Ad),kr=z({},qo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Mc=is(kr),R$=z({},jo,{newState:0,oldState:0}),Cl=is(R$),Dc=[9,13,27,32],Xa=so&&"CompositionEvent"in window,wr=null;so&&"documentMode"in document&&(wr=document.documentMode);var xc=so&&"TextEvent"in window&&!wr,Ya=so&&(!Xa||wr&&8<wr&&11>=wr),Bc=" ",Nd=!1;function Pc(s,o){switch(s){case"keyup":return Dc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fn=!1;function Ld(s,o){switch(s){case"compositionend":return Uc(o);case"keypress":return o.which!==32?null:(Nd=!0,Bc);case"textInput":return s=o.data,s===Bc&&Nd?null:s;default:return null}}function kd(s,o){if(Fn)return s==="compositionend"||!Xa&&Pc(s,o)?(s=Id(),yl=za=Yo=null,Fn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ya&&o.locale!=="ko"?null:o.data;default:return null}}var wd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!wd[s.type]:o==="textarea"}function Md(s,o,r,l){Ar?io?io.push(l):io=[l]:Ar=l,o=Qu(o,"onChange"),0<o.length&&(r=new Il("onChange","change",null,r,l),s.push({event:r,listeners:o}))}var Qo=null,Mr=null;function Hc(s){Jh(s,0)}function Dr(s){var o=br(s);if(vd(o))return s}function oo(s,o){if(s==="change")return o}var Gc=!1;if(so){var ja;if(so){var xr="oninput"in document;if(!xr){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),xr=typeof Vc.oninput=="function"}ja=xr}else ja=!1;Gc=ja&&(!document.documentMode||9<document.documentMode)}function zc(){Qo&&(Qo.detachEvent("onpropertychange",Dd),Mr=Qo=null)}function Dd(s){if(s.propertyName==="value"&&Dr(Mr)){var o=[];Md(o,Mr,s,Nc(s)),Di(Hc,o)}}function Wc(s,o,r){s==="focusin"?(zc(),Qo=o,Mr=r,Qo.attachEvent("onpropertychange",Dd)):s==="focusout"&&zc()}function xd(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Dr(Mr)}function C$(s,o){if(s==="click")return Dr(o)}function A$(s,o){if(s==="input"||s==="change")return Dr(o)}function N$(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var $s=typeof Object.is=="function"?Object.is:N$;function Al(s,o){if($s(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var r=Object.keys(s),l=Object.keys(o);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var c=r[l];if(!be.call(o,c)||!$s(s[c],o[c]))return!1}return!0}function Br(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xc(s,o){var r=Br(s);s=0;for(var l;r;){if(r.nodeType===3){if(l=s+r.textContent.length,s<=o&&l>=o)return{node:r,offset:o-s};s=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Br(r)}}function Yc(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Yc(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Nl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Cs(s.document);o instanceof s.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)s=o.contentWindow;else break;o=Cs(s.document)}return o}function Ka(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var L$=so&&"documentMode"in document&&11>=document.documentMode,Pr=null,Ja=null,Ur=null,no=!1;function jc(s,o,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;no||Pr==null||Pr!==Cs(l)||(l=Pr,"selectionStart"in l&&Ka(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ur&&Al(Ur,l)||(Ur=l,l=Qu(Ja,"onSelect"),0<l.length&&(o=new Il("onSelect","select",null,o,r),s.push({event:o,listeners:l}),o.target=Pr)))}function en(s,o){var r={};return r[s.toLowerCase()]=o.toLowerCase(),r["Webkit"+s]="webkit"+o,r["Moz"+s]="moz"+o,r}var Fr={animationend:en("Animation","AnimationEnd"),animationiteration:en("Animation","AnimationIteration"),animationstart:en("Animation","AnimationStart"),transitionrun:en("Transition","TransitionRun"),transitionstart:en("Transition","TransitionStart"),transitioncancel:en("Transition","TransitionCancel"),transitionend:en("Transition","TransitionEnd")},Kc={},Bd={};so&&(Bd=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function Hn(s){if(Kc[s])return Kc[s];if(!Fr[s])return s;var o=Fr[s],r;for(r in o)if(o.hasOwnProperty(r)&&r in Bd)return Kc[s]=o[r];return s}var Jc=Hn("animationend"),Pd=Hn("animationiteration"),qc=Hn("animationstart"),k$=Hn("transitionrun"),Hr=Hn("transitionstart"),qa=Hn("transitioncancel"),Za=Hn("transitionend"),Qa=new Map,tn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tn.push("scrollEnd");function As(s,o){Qa.set(s,o),Ro(o,[s])}var eu=new WeakMap;function gs(s,o){if(typeof s=="object"&&s!==null){var r=eu.get(s);return r!==void 0?r:(o={value:s,source:o,stack:Or(o)},eu.set(s,o),o)}return{value:s,source:o,stack:Or(o)}}var Ot=[],Gr=0,Gn=0;function sn(){for(var s=Gr,o=Gn=Gr=0;o<s;){var r=Ot[o];Ot[o++]=null;var l=Ot[o];Ot[o++]=null;var c=Ot[o];Ot[o++]=null;var h=Ot[o];if(Ot[o++]=null,l!==null&&c!==null){var f=l.pending;f===null?c.next=c:(c.next=f.next,f.next=c),l.pending=c}h!==0&&Vr(r,c,h)}}function tu(s,o,r,l){Ot[Gr++]=s,Ot[Gr++]=o,Ot[Gr++]=r,Ot[Gr++]=l,Gn|=l,s.lanes|=l,s=s.alternate,s!==null&&(s.lanes|=l)}function iu(s,o,r,l){return tu(s,o,r,l),Ll(s)}function on(s,o){return tu(s,null,null,o),Ll(s)}function Vr(s,o,r){s.lanes|=r;var l=s.alternate;l!==null&&(l.lanes|=r);for(var c=!1,h=s.return;h!==null;)h.childLanes|=r,l=h.alternate,l!==null&&(l.childLanes|=r),h.tag===22&&(s=h.stateNode,s===null||s._visibility&1||(c=!0)),s=h,h=h.return;return s.tag===3?(h=s.stateNode,c&&o!==null&&(c=31-ht(r),s=h.hiddenUpdates,l=s[c],l===null?s[c]=[o]:l.push(o),o.lane=r|536870912),h):null}function Ll(s){if(50<ga)throw ga=0,zh=null,Error(p(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var zs={};function su(s,o,r,l){this.tag=s,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(s,o,r,l){return new su(s,o,r,l)}function ou(s){return s=s.prototype,!(!s||!s.isReactComponent)}function No(s,o){var r=s.alternate;return r===null?(r=ss(s.tag,o,s.key,s.mode),r.elementType=s.elementType,r.type=s.type,r.stateNode=s.stateNode,r.alternate=s,s.alternate=r):(r.pendingProps=o,r.type=s.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=s.flags&65011712,r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,o=s.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=s.sibling,r.index=s.index,r.ref=s.ref,r.refCleanup=s.refCleanup,r}function Ud(s,o){s.flags&=65011714;var r=s.alternate;return r===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=r.childLanes,s.lanes=r.lanes,s.child=r.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=r.memoizedProps,s.memoizedState=r.memoizedState,s.updateQueue=r.updateQueue,s.type=r.type,o=r.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function nu(s,o,r,l,c,h){var f=0;if(l=s,typeof s=="function")ou(s)&&(f=1);else if(typeof s=="string")f=Hp(s,r,Ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case oe:return s=ss(31,r,o,c),s.elementType=oe,s.lanes=h,s;case U:return nn(r.children,c,h,o);case O:f=8,c|=24;break;case P:return s=ss(12,r,o,c|2),s.elementType=P,s.lanes=h,s;case D:return s=ss(13,r,o,c),s.elementType=D,s.lanes=h,s;case Q:return s=ss(19,r,o,c),s.elementType=Q,s.lanes=h,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case w:case J:f=10;break e;case L:f=9;break e;case x:f=11;break e;case te:f=14;break e;case fe:f=16,l=null;break e}f=29,r=Error(p(130,s===null?"null":typeof s,"")),l=null}return o=ss(f,r,o,c),o.elementType=s,o.type=l,o.lanes=h,o}function nn(s,o,r,l){return s=ss(7,s,l,o),s.lanes=r,s}function Zc(s,o,r){return s=ss(6,s,null,o),s.lanes=r,s}function ru(s,o,r){return o=ss(4,s.children!==null?s.children:[],s.key,o),o.lanes=r,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var ro=[],zr=0,lu=null,au=0,Ns=[],Ji=0,rn=null,lo=1,Ws="";function Lo(s,o){ro[zr++]=au,ro[zr++]=lu,lu=s,au=o}function Fd(s,o,r){Ns[Ji++]=lo,Ns[Ji++]=Ws,Ns[Ji++]=rn,rn=s;var l=lo;s=Ws;var c=32-ht(l)-1;l&=~(1<<c),r+=1;var h=32-ht(o)+c;if(30<h){var f=c-c%5;h=(l&(1<<f)-1).toString(32),l>>=f,c-=f,lo=1<<32-ht(o)+c|r<<c|l,Ws=h+s}else lo=1<<h|r<<c|l,Ws=s}function Wr(s){s.return!==null&&(Lo(s,1),Fd(s,1,0))}function uu(s){for(;s===lu;)lu=ro[--zr],ro[zr]=null,au=ro[--zr],ro[zr]=null;for(;s===rn;)rn=Ns[--Ji],Ns[Ji]=null,Ws=Ns[--Ji],Ns[Ji]=null,lo=Ns[--Ji],Ns[Ji]=null}var xi=null,ri=null,Nt=!1,fs=null,Xs=!1,Ys=Error(p(519));function Vn(s){var o=Error(p(418,""));throw wl(gs(o,s)),Ys}function Hd(s){var o=s.stateNode,r=s.type,l=s.memoizedProps;switch(o[bi]=s,o[Vt]=l,r){case"dialog":mt("cancel",o),mt("close",o);break;case"iframe":case"object":case"embed":mt("load",o);break;case"video":case"audio":for(r=0;r<oi.length;r++)mt(oi[r],o);break;case"source":mt("error",o);break;case"img":case"image":case"link":mt("error",o),mt("load",o);break;case"details":mt("toggle",o);break;case"input":mt("invalid",o),to(o,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Fa(o);break;case"select":mt("invalid",o);break;case"textarea":mt("invalid",o),Ga(o,l.value,l.defaultValue,l.children),Fa(o)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||l.suppressHydrationWarning===!0||ec(o.textContent,r)?(l.popover!=null&&(mt("beforetoggle",o),mt("toggle",o)),l.onScroll!=null&&mt("scroll",o),l.onScrollEnd!=null&&mt("scrollend",o),l.onClick!=null&&(o.onclick=bs),o=!0):o=!1,o||Vn(s)}function Qc(s){for(xi=s.return;xi;)switch(xi.tag){case 5:case 13:Xs=!1;return;case 27:case 3:Xs=!0;return;default:xi=xi.return}}function kl(s){if(s!==xi)return!1;if(!Nt)return Qc(s),Nt=!0,!1;var o=s.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=s.type,r=!(r!=="form"&&r!=="button")||ed(s.type,s.memoizedProps)),r=!r),r&&ri&&Vn(s),Qc(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(r=s.data,r==="/$"){if(o===0){ri=Fs(s.nextSibling);break e}o--}else r!=="$"&&r!=="$!"&&r!=="$?"||o++;s=s.nextSibling}ri=null}}else o===27?(o=ri,yn(s.type)?(s=oc,oc=null,ri=s):ri=o):ri=xi?Fs(s.stateNode.nextSibling):null;return!0}function ao(){ri=xi=null,Nt=!1}function eh(){var s=fs;return s!==null&&(Qi===null?Qi=s:Qi.push.apply(Qi,s),fs=null),s}function wl(s){fs===null?fs=[s]:fs.push(s)}var th=W(null),zn=null,ko=null;function ln(s,o,r){Ce(th,o._currentValue),o._currentValue=r}function uo(s){s._currentValue=th.current,q(th)}function ih(s,o,r){for(;s!==null;){var l=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,l!==null&&(l.childLanes|=o)):l!==null&&(l.childLanes&o)!==o&&(l.childLanes|=o),s===r)break;s=s.return}}function sh(s,o,r,l){var c=s.child;for(c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){var f=c.child;h=h.firstContext;e:for(;h!==null;){var v=h;h=c;for(var X=0;X<o.length;X++)if(v.context===o[X]){h.lanes|=r,v=h.alternate,v!==null&&(v.lanes|=r),ih(h.return,r,s),l||(f=null);break e}h=v.next}}else if(c.tag===18){if(f=c.return,f===null)throw Error(p(341));f.lanes|=r,h=f.alternate,h!==null&&(h.lanes|=r),ih(f,r,s),f=null}else f=c.child;if(f!==null)f.return=c;else for(f=c;f!==null;){if(f===s){f=null;break}if(c=f.sibling,c!==null){c.return=f.return,f=c;break}f=f.return}c=f}}function Wn(s,o,r,l){s=null;for(var c=o,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var f=c.alternate;if(f===null)throw Error(p(387));if(f=f.memoizedProps,f!==null){var v=c.type;$s(c.pendingProps.value,f.value)||(s!==null?s.push(v):s=[v])}}else if(c===yt.current){if(f=c.alternate,f===null)throw Error(p(387));f.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(s!==null?s.push(Cn):s=[Cn])}c=c.return}s!==null&&sh(o,s,r,l),o.flags|=262144}function cu(s){for(s=s.firstContext;s!==null;){if(!$s(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Xn(s){zn=s,ko=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Fi(s){return Gd(zn,s)}function Ls(s,o){return zn===null&&Xn(s),Gd(s,o)}function Gd(s,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},ko===null){if(s===null)throw Error(p(308));ko=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else ko=ko.next=o;return r}var w$=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(r,l){s.push(l)}};this.abort=function(){o.aborted=!0,s.forEach(function(r){return r()})}},Ml=Pe.unstable_scheduleCallback,M$=Pe.unstable_NormalPriority,vi={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dl(){return{controller:new w$,data:new Map,refCount:0}}function xl(s){s.refCount--,s.refCount===0&&Ml(M$,function(){s.controller.abort()})}var Bl=null,oh=0,Yn=0,an=null;function Vd(s,o){if(Bl===null){var r=Bl=[];oh=0,Yn=qu(),an={status:"pending",value:void 0,then:function(l){r.push(l)}}}return oh++,o.then(hu,hu),o}function hu(){if(--oh===0&&Bl!==null){an!==null&&(an.status="fulfilled");var s=Bl;Bl=null,Yn=0,an=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function D$(s,o){var r=[],l={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return s.then(function(){l.status="fulfilled",l.value=o;for(var c=0;c<r.length;c++)(0,r[c])(o)},function(c){for(l.status="rejected",l.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),l}var zd=ce.S;ce.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Vd(s,o),zd!==null&&zd(s,o)};var jn=W(null);function nh(){var s=jn.current;return s!==null?s:Xt.pooledCache}function et(s,o){o===null?Ce(jn,jn.current):Ce(jn,o.pool)}function os(){var s=nh();return s===null?null:{parent:vi._currentValue,pool:s}}var $i=Error(p(460)),ti=Error(p(474)),ks=Error(p(542)),Kn={then:function(){}};function it(s){return s=s.status,s==="fulfilled"||s==="rejected"}function qt(){}function Wd(s,o,r){switch(r=s[r],r===void 0?s.push(o):r!==o&&(o.then(qt,qt),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,rh(s),s;default:if(typeof o.status=="string")o.then(qt,qt);else{if(s=Xt,s!==null&&100<s.shellSuspendCounter)throw Error(p(482));s=o,s.status="pending",s.then(function(l){if(o.status==="pending"){var c=o;c.status="fulfilled",c.value=l}},function(l){if(o.status==="pending"){var c=o;c.status="rejected",c.reason=l}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,rh(s),s}throw Pl=o,$i}}var Pl=null;function Xd(){if(Pl===null)throw Error(p(459));var s=Pl;return Pl=null,s}function rh(s){if(s===$i||s===ks)throw Error(p(483))}var un=!1;function Ul(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function wo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Mo(s,o,r){var l=s.updateQueue;if(l===null)return null;if(l=l.shared,(Lt&2)!==0){var c=l.pending;return c===null?o.next=o:(o.next=c.next,c.next=o),l.pending=o,o=Ll(s),Vr(s,null,r),o}return tu(s,l,o,r),Ll(s)}function Xr(s,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var l=o.lanes;l&=s.pendingLanes,r|=l,o.lanes=r,re(s,r)}}function Jn(s,o){var r=s.updateQueue,l=s.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var c=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var f={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};h===null?c=h=f:h=h.next=f,r=r.next}while(r!==null);h===null?c=h=o:h=h.next=o}else c=h=o;r={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},s.updateQueue=r;return}s=r.lastBaseUpdate,s===null?r.firstBaseUpdate=o:s.next=o,r.lastBaseUpdate=o}var lh=!1;function Fl(){if(lh){var s=an;if(s!==null)throw s}}function Hl(s,o,r,l){lh=!1;var c=s.updateQueue;un=!1;var h=c.firstBaseUpdate,f=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var X=v,he=X.next;X.next=null,f===null?h=he:f.next=he,f=X;var Le=s.alternate;Le!==null&&(Le=Le.updateQueue,v=Le.lastBaseUpdate,v!==f&&(v===null?Le.firstBaseUpdate=he:v.next=he,Le.lastBaseUpdate=X))}if(h!==null){var xe=c.baseState;f=0,Le=he=X=null,v=h;do{var de=v.lane&-536870913,Te=de!==v.lane;if(Te?(St&de)===de:(l&de)===de){de!==0&&de===Yn&&(lh=!0),Le!==null&&(Le=Le.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var H=s,nt=v;de=o;var Mt=r;switch(nt.tag){case 1:if(H=nt.payload,typeof H=="function"){xe=H.call(Mt,xe,de);break e}xe=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=nt.payload,de=typeof H=="function"?H.call(Mt,xe,de):H,de==null)break e;xe=z({},xe,de);break e;case 2:un=!0}}de=v.callback,de!==null&&(s.flags|=64,Te&&(s.flags|=8192),Te=c.callbacks,Te===null?c.callbacks=[de]:Te.push(de))}else Te={lane:de,tag:v.tag,payload:v.payload,callback:v.callback,next:null},Le===null?(he=Le=Te,X=xe):Le=Le.next=Te,f|=de;if(v=v.next,v===null){if(v=c.shared.pending,v===null)break;Te=v,v=Te.next,Te.next=null,c.lastBaseUpdate=Te,c.shared.pending=null}}while(!0);Le===null&&(X=xe),c.baseState=X,c.firstBaseUpdate=he,c.lastBaseUpdate=Le,h===null&&(c.shared.lanes=0),mn|=f,s.lanes=f,s.memoizedState=xe}}function Yr(s,o){if(typeof s!="function")throw Error(p(191,s));s.call(o)}function ah(s,o){var r=s.callbacks;if(r!==null)for(s.callbacks=null,s=0;s<r.length;s++)Yr(r[s],o)}var jr=W(null),Kr=W(0);function ws(s,o){s=qs,Ce(Kr,s),Ce(jr,o),qs=s|o.baseLanes}function pu(){Ce(Kr,qs),Ce(jr,jr.current)}function qn(){qs=Kr.current,q(jr),q(Kr)}var Hi=0,$t=null,Pt=null,gi=null,$u=!1,Ms=!1,Do=!1,Zn=0,Jr=0,qr=null,Yd=0;function fi(){throw Error(p(321))}function Gl(s,o){if(o===null)return!1;for(var r=0;r<o.length&&r<s.length;r++)if(!$s(s[r],o[r]))return!1;return!0}function gu(s,o,r,l,c,h){return Hi=h,$t=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ce.H=s===null||s.memoizedState===null?lp:ap,Do=!1,h=r(l,c),Do=!1,Ms&&(h=ch(o,r,l,c)),uh(s),h}function uh(s){ce.H=ea;var o=Pt!==null&&Pt.next!==null;if(Hi=0,gi=Pt=$t=null,$u=!1,Jr=0,qr=null,o)throw Error(p(300));s===null||Ii||(s=s.dependencies,s!==null&&cu(s)&&(Ii=!0))}function ch(s,o,r,l){$t=s;var c=0;do{if(Ms&&(qr=null),Jr=0,Ms=!1,25<=c)throw Error(p(301));if(c+=1,gi=Pt=null,s.updateQueue!=null){var h=s.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}ce.H=P$,h=o(r,l)}while(Ms);return h}function x$(){var s=ce.H,o=s.useState()[0];return o=typeof o.then=="function"?zl(o):o,s=s.useState()[0],(Pt!==null?Pt.memoizedState:null)!==s&&($t.flags|=1024),o}function fu(){var s=Zn!==0;return Zn=0,s}function hh(s,o,r){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~r}function Vl(s){if($u){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}$u=!1}Hi=0,gi=Pt=$t=null,Ms=!1,Jr=Zn=0,qr=null}function ns(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?$t.memoizedState=gi=s:gi=gi.next=s,gi}function yi(){if(Pt===null){var s=$t.alternate;s=s!==null?s.memoizedState:null}else s=Pt.next;var o=gi===null?$t.memoizedState:gi.next;if(o!==null)gi=o,Pt=s;else{if(s===null)throw $t.alternate===null?Error(p(467)):Error(p(310));Pt=s,s={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},gi===null?$t.memoizedState=gi=s:gi=gi.next=s}return gi}function Zr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(s){var o=Jr;return Jr+=1,qr===null&&(qr=[]),s=Wd(qr,s,o),o=$t,(gi===null?o.memoizedState:gi.next)===null&&(o=o.alternate,ce.H=o===null||o.memoizedState===null?lp:ap),s}function Wl(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return zl(s);if(s.$$typeof===J)return Fi(s)}throw Error(p(438,String(s)))}function Xl(s){var o=null,r=$t.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var l=$t.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(o={data:l.data.map(function(c){return c.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=Zr(),$t.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(s),l=0;l<s;l++)r[l]=Se;return o.index++,r}function js(s,o){return typeof o=="function"?o(s):o}function Qr(s){var o=yi();return Yl(o,Pt,s)}function Yl(s,o,r){var l=s.queue;if(l===null)throw Error(p(311));l.lastRenderedReducer=r;var c=s.baseQueue,h=l.pending;if(h!==null){if(c!==null){var f=c.next;c.next=h.next,h.next=f}o.baseQueue=c=h,l.pending=null}if(h=s.baseState,c===null)s.memoizedState=h;else{o=c.next;var v=f=null,X=null,he=o,Le=!1;do{var xe=he.lane&-536870913;if(xe!==he.lane?(St&xe)===xe:(Hi&xe)===xe){var de=he.revertLane;if(de===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),xe===Yn&&(Le=!0);else if((Hi&de)===de){he=he.next,de===Yn&&(Le=!0);continue}else xe={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},X===null?(v=X=xe,f=h):X=X.next=xe,$t.lanes|=de,mn|=de;xe=he.action,Do&&r(h,xe),h=he.hasEagerState?he.eagerState:r(h,xe)}else de={lane:xe,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},X===null?(v=X=de,f=h):X=X.next=de,$t.lanes|=xe,mn|=xe;he=he.next}while(he!==null&&he!==o);if(X===null?f=h:X.next=v,!$s(h,s.memoizedState)&&(Ii=!0,Le&&(r=an,r!==null)))throw r;s.memoizedState=h,s.baseState=f,s.baseQueue=X,l.lastRenderedState=h}return c===null&&(l.lanes=0),[s.memoizedState,l.dispatch]}function _u(s){var o=yi(),r=o.queue;if(r===null)throw Error(p(311));r.lastRenderedReducer=s;var l=r.dispatch,c=r.pending,h=o.memoizedState;if(c!==null){r.pending=null;var f=c=c.next;do h=s(h,f.action),f=f.next;while(f!==c);$s(h,o.memoizedState)||(Ii=!0),o.memoizedState=h,o.baseQueue===null&&(o.baseState=h),r.lastRenderedState=h}return[h,l]}function jd(s,o,r){var l=$t,c=yi(),h=Nt;if(h){if(r===void 0)throw Error(p(407));r=r()}else r=o();var f=!$s((Pt||c).memoizedState,r);f&&(c.memoizedState=r,Ii=!0),c=c.queue;var v=Tu.bind(null,l,c,s);if(ql(2048,8,v,[s]),c.getSnapshot!==o||f||gi!==null&&gi.memoizedState.tag&1){if(l.flags|=2048,Qn(9,Kl(),mu.bind(null,l,c,r,o),null),Xt===null)throw Error(p(349));h||(Hi&124)!==0||dh(l,o,r)}return r}function dh(s,o,r){s.flags|=16384,s={getSnapshot:o,value:r},o=$t.updateQueue,o===null?(o=Zr(),$t.updateQueue=o,o.stores=[s]):(r=o.stores,r===null?o.stores=[s]:r.push(s))}function mu(s,o,r,l){o.value=r,o.getSnapshot=l,Kd(o)&&Eu(s)}function Tu(s,o,r){return r(function(){Kd(o)&&Eu(s)})}function Kd(s){var o=s.getSnapshot;s=s.value;try{var r=o();return!$s(s,r)}catch{return!0}}function Eu(s){var o=on(s,2);o!==null&&Ts(o,s,2)}function ph(s){var o=ns();if(typeof s=="function"){var r=s;if(s=r(),Do){Ze(!0);try{r()}finally{Ze(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:s},o}function $h(s,o,r,l){return s.baseState=r,Yl(s,Pt,typeof l=="function"?l:js)}function B$(s,o,r,l,c){if(Ql(s))throw Error(p(485));if(s=o.action,s!==null){var h={payload:c,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){h.listeners.push(f)}};ce.T!==null?r(!0):h.isTransition=!1,l(h),r=o.pending,r===null?(h.next=o.pending=h,cn(o,h)):(h.next=r.next,o.pending=r.next=h)}}function cn(s,o){var r=o.action,l=o.payload,c=s.state;if(o.isTransition){var h=ce.T,f={};ce.T=f;try{var v=r(c,l),X=ce.S;X!==null&&X(f,v),gh(s,o,v)}catch(he){bu(s,o,he)}finally{ce.T=h}}else try{h=r(c,l),gh(s,o,h)}catch(he){bu(s,o,he)}}function gh(s,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){jl(s,o,l)},function(l){return bu(s,o,l)}):jl(s,o,r)}function jl(s,o,r){o.status="fulfilled",o.value=r,fh(o),s.state=r,o=s.pending,o!==null&&(r=o.next,r===o?s.pending=null:(r=r.next,o.next=r,cn(s,r)))}function bu(s,o,r){var l=s.pending;if(s.pending=null,l!==null){l=l.next;do o.status="rejected",o.reason=r,fh(o),o=o.next;while(o!==l)}s.action=null}function fh(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Su(s,o){return o}function _h(s,o){if(Nt){var r=Xt.formState;if(r!==null){e:{var l=$t;if(Nt){if(ri){t:{for(var c=ri,h=Xs;c.nodeType!==8;){if(!h){c=null;break t}if(c=Fs(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){ri=Fs(c.nextSibling),l=c.data==="F!";break e}}Vn(l)}l=!1}l&&(o=r[0])}}return r=ns(),r.memoizedState=r.baseState=o,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:o},r.queue=l,r=Ch.bind(null,$t,l),l.dispatch=r,l=ph(!1),h=Ru.bind(null,$t,!1,l.queue),l=ns(),c={state:o,dispatch:null,action:s,pending:null},l.queue=c,r=B$.bind(null,$t,c,h,r),c.dispatch=r,l.memoizedState=s,[o,r,!1]}function mh(s){var o=yi();return Th(o,Pt,s)}function Th(s,o,r){if(o=Yl(s,o,Su)[0],s=Qr(js)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var l=zl(o)}catch(f){throw f===$i?ks:f}else l=o;o=yi();var c=o.queue,h=c.dispatch;return r!==o.memoizedState&&($t.flags|=2048,Qn(9,Kl(),Jd.bind(null,c,r),null)),[l,h,s]}function Jd(s,o){s.action=o}function Eh(s){var o=yi(),r=Pt;if(r!==null)return Th(o,r,s);yi(),o=o.memoizedState,r=yi();var l=r.queue.dispatch;return r.memoizedState=s,[o,l,!1]}function Qn(s,o,r,l){return s={tag:s,create:r,deps:l,inst:o,next:null},o=$t.updateQueue,o===null&&(o=Zr(),$t.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=s.next=s:(l=r.next,r.next=s,s.next=l,o.lastEffect=s),s}function Kl(){return{destroy:void 0,resource:void 0}}function bh(){return yi().memoizedState}function Jl(s,o,r,l){var c=ns();l=l===void 0?null:l,$t.flags|=s,c.memoizedState=Qn(1|o,Kl(),r,l)}function ql(s,o,r,l){var c=yi();l=l===void 0?null:l;var h=c.memoizedState.inst;Pt!==null&&l!==null&&Gl(l,Pt.memoizedState.deps)?c.memoizedState=Qn(o,h,r,l):($t.flags|=s,c.memoizedState=Qn(1|o,h,r,l))}function qd(s,o){Jl(8390656,8,s,o)}function Zd(s,o){ql(2048,8,s,o)}function Qd(s,o){return ql(4,2,s,o)}function ep(s,o){return ql(4,4,s,o)}function tp(s,o){if(typeof o=="function"){s=s();var r=o(s);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function ip(s,o,r){r=r!=null?r.concat([s]):null,ql(4,4,tp.bind(null,o,s),r)}function Sh(){}function vh(s,o){var r=yi();o=o===void 0?null:o;var l=r.memoizedState;return o!==null&&Gl(o,l[1])?l[0]:(r.memoizedState=[s,o],s)}function yh(s,o){var r=yi();o=o===void 0?null:o;var l=r.memoizedState;if(o!==null&&Gl(o,l[1]))return l[0];if(l=s(),Do){Ze(!0);try{s()}finally{Ze(!1)}}return r.memoizedState=[l,o],l}function vu(s,o,r){return r===void 0||(Hi&1073741824)!==0?s.memoizedState=o:(s.memoizedState=r,s=Rp(),$t.lanes|=s,mn|=s,r)}function Ih(s,o,r,l){return $s(r,o)?r:jr.current!==null?(s=vu(s,r,l),$s(s,o)||(Ii=!0),s):(Hi&42)===0?(Ii=!0,s.memoizedState=r):(s=Rp(),$t.lanes|=s,mn|=s,o)}function Oh(s,o,r,l,c){var h=ue.p;ue.p=h!==0&&8>h?h:8;var f=ce.T,v={};ce.T=v,Ru(s,!1,o,r);try{var X=c(),he=ce.S;if(he!==null&&he(v,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var Le=D$(X,l);el(s,o,Le,ms(s))}else el(s,o,l,ms(s))}catch(xe){el(s,o,{then:function(){},status:"rejected",reason:xe},ms())}finally{ue.p=h,ce.T=f}}function sp(){}function yu(s,o,r,l){if(s.tag!==5)throw Error(p(476));var c=Iu(s).queue;Oh(s,c,o,Fe,r===null?sp:function(){return Zl(s),r(l)})}function Iu(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Fe,baseState:Fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:Fe},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:r},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Zl(s){var o=Iu(s).next.queue;el(s,o,{},ms())}function Ou(){return Fi(Cn)}function op(){return yi().memoizedState}function Rh(){return yi().memoizedState}function np(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var r=ms();s=wo(r);var l=Mo(o,s,r);l!==null&&(Ts(l,o,r),Xr(l,o,r)),o={cache:Dl()},s.payload=o;return}o=o.return}}function rp(s,o,r){var l=ms();r={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Ql(s)?Ah(o,r):(r=iu(s,o,r,l),r!==null&&(Ts(r,s,l),Nh(r,o,l)))}function Ch(s,o,r){var l=ms();el(s,o,r,l)}function el(s,o,r,l){var c={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ql(s))Ah(o,c);else{var h=s.alternate;if(s.lanes===0&&(h===null||h.lanes===0)&&(h=o.lastRenderedReducer,h!==null))try{var f=o.lastRenderedState,v=h(f,r);if(c.hasEagerState=!0,c.eagerState=v,$s(v,f))return tu(s,o,c,0),Xt===null&&sn(),!1}catch{}finally{}if(r=iu(s,o,c,l),r!==null)return Ts(r,s,l),Nh(r,o,l),!0}return!1}function Ru(s,o,r,l){if(l={lane:2,revertLane:qu(),action:l,hasEagerState:!1,eagerState:null,next:null},Ql(s)){if(o)throw Error(p(479))}else o=iu(s,r,l,2),o!==null&&Ts(o,s,2)}function Ql(s){var o=s.alternate;return s===$t||o!==null&&o===$t}function Ah(s,o){Ms=$u=!0;var r=s.pending;r===null?o.next=o:(o.next=r.next,r.next=o),s.pending=o}function Nh(s,o,r){if((r&4194048)!==0){var l=o.lanes;l&=s.pendingLanes,r|=l,o.lanes=r,re(s,r)}}var ea={readContext:Fi,use:Wl,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useLayoutEffect:fi,useInsertionEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useSyncExternalStore:fi,useId:fi,useHostTransitionStatus:fi,useFormState:fi,useActionState:fi,useOptimistic:fi,useMemoCache:fi,useCacheRefresh:fi},lp={readContext:Fi,use:Wl,useCallback:function(s,o){return ns().memoizedState=[s,o===void 0?null:o],s},useContext:Fi,useEffect:qd,useImperativeHandle:function(s,o,r){r=r!=null?r.concat([s]):null,Jl(4194308,4,tp.bind(null,o,s),r)},useLayoutEffect:function(s,o){return Jl(4194308,4,s,o)},useInsertionEffect:function(s,o){Jl(4,2,s,o)},useMemo:function(s,o){var r=ns();o=o===void 0?null:o;var l=s();if(Do){Ze(!0);try{s()}finally{Ze(!1)}}return r.memoizedState=[l,o],l},useReducer:function(s,o,r){var l=ns();if(r!==void 0){var c=r(o);if(Do){Ze(!0);try{r(o)}finally{Ze(!1)}}}else c=o;return l.memoizedState=l.baseState=c,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:c},l.queue=s,s=s.dispatch=rp.bind(null,$t,s),[l.memoizedState,s]},useRef:function(s){var o=ns();return s={current:s},o.memoizedState=s},useState:function(s){s=ph(s);var o=s.queue,r=Ch.bind(null,$t,o);return o.dispatch=r,[s.memoizedState,r]},useDebugValue:Sh,useDeferredValue:function(s,o){var r=ns();return vu(r,s,o)},useTransition:function(){var s=ph(!1);return s=Oh.bind(null,$t,s.queue,!0,!1),ns().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,r){var l=$t,c=ns();if(Nt){if(r===void 0)throw Error(p(407));r=r()}else{if(r=o(),Xt===null)throw Error(p(349));(St&124)!==0||dh(l,o,r)}c.memoizedState=r;var h={value:r,getSnapshot:o};return c.queue=h,qd(Tu.bind(null,l,h,s),[s]),l.flags|=2048,Qn(9,Kl(),mu.bind(null,l,h,r,o),null),r},useId:function(){var s=ns(),o=Xt.identifierPrefix;if(Nt){var r=Ws,l=lo;r=(l&~(1<<32-ht(l)-1)).toString(32)+r,o=""+o+"R"+r,r=Zn++,0<r&&(o+="H"+r.toString(32)),o+=""}else r=Yd++,o=""+o+"r"+r.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:Ou,useFormState:_h,useActionState:_h,useOptimistic:function(s){var o=ns();o.memoizedState=o.baseState=s;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=Ru.bind(null,$t,!0,r),r.dispatch=o,[s,o]},useMemoCache:Xl,useCacheRefresh:function(){return ns().memoizedState=np.bind(null,$t)}},ap={readContext:Fi,use:Wl,useCallback:vh,useContext:Fi,useEffect:Zd,useImperativeHandle:ip,useInsertionEffect:Qd,useLayoutEffect:ep,useMemo:yh,useReducer:Qr,useRef:bh,useState:function(){return Qr(js)},useDebugValue:Sh,useDeferredValue:function(s,o){var r=yi();return Ih(r,Pt.memoizedState,s,o)},useTransition:function(){var s=Qr(js)[0],o=yi().memoizedState;return[typeof s=="boolean"?s:zl(s),o]},useSyncExternalStore:jd,useId:op,useHostTransitionStatus:Ou,useFormState:mh,useActionState:mh,useOptimistic:function(s,o){var r=yi();return $h(r,Pt,s,o)},useMemoCache:Xl,useCacheRefresh:Rh},P$={readContext:Fi,use:Wl,useCallback:vh,useContext:Fi,useEffect:Zd,useImperativeHandle:ip,useInsertionEffect:Qd,useLayoutEffect:ep,useMemo:yh,useReducer:_u,useRef:bh,useState:function(){return _u(js)},useDebugValue:Sh,useDeferredValue:function(s,o){var r=yi();return Pt===null?vu(r,s,o):Ih(r,Pt.memoizedState,s,o)},useTransition:function(){var s=_u(js)[0],o=yi().memoizedState;return[typeof s=="boolean"?s:zl(s),o]},useSyncExternalStore:jd,useId:op,useHostTransitionStatus:Ou,useFormState:Eh,useActionState:Eh,useOptimistic:function(s,o){var r=yi();return Pt!==null?$h(r,Pt,s,o):(r.baseState=s,[s,r.queue.dispatch])},useMemoCache:Xl,useCacheRefresh:Rh},er=null,ta=0;function Cu(s){var o=ta;return ta+=1,er===null&&(er=[]),Wd(er,s,o)}function ia(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Au(s,o){throw o.$$typeof===V?Error(p(525)):(s=Object.prototype.toString.call(o),Error(p(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function _e(s){var o=s._init;return o(s._payload)}function hn(s){function o(ne,Z){if(s){var pe=ne.deletions;pe===null?(ne.deletions=[Z],ne.flags|=16):pe.push(Z)}}function r(ne,Z){if(!s)return null;for(;Z!==null;)o(ne,Z),Z=Z.sibling;return null}function l(ne){for(var Z=new Map;ne!==null;)ne.key!==null?Z.set(ne.key,ne):Z.set(ne.index,ne),ne=ne.sibling;return Z}function c(ne,Z){return ne=No(ne,Z),ne.index=0,ne.sibling=null,ne}function h(ne,Z,pe){return ne.index=pe,s?(pe=ne.alternate,pe!==null?(pe=pe.index,pe<Z?(ne.flags|=67108866,Z):pe):(ne.flags|=67108866,Z)):(ne.flags|=1048576,Z)}function f(ne){return s&&ne.alternate===null&&(ne.flags|=67108866),ne}function v(ne,Z,pe,ke){return Z===null||Z.tag!==6?(Z=Zc(pe,ne.mode,ke),Z.return=ne,Z):(Z=c(Z,pe),Z.return=ne,Z)}function X(ne,Z,pe,ke){var tt=pe.type;return tt===U?Le(ne,Z,pe.props.children,ke,pe.key):Z!==null&&(Z.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===fe&&_e(tt)===Z.type)?(Z=c(Z,pe.props),ia(Z,pe),Z.return=ne,Z):(Z=nu(pe.type,pe.key,pe.props,null,ne.mode,ke),ia(Z,pe),Z.return=ne,Z)}function he(ne,Z,pe,ke){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==pe.containerInfo||Z.stateNode.implementation!==pe.implementation?(Z=ru(pe,ne.mode,ke),Z.return=ne,Z):(Z=c(Z,pe.children||[]),Z.return=ne,Z)}function Le(ne,Z,pe,ke,tt){return Z===null||Z.tag!==7?(Z=nn(pe,ne.mode,ke,tt),Z.return=ne,Z):(Z=c(Z,pe),Z.return=ne,Z)}function xe(ne,Z,pe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Zc(""+Z,ne.mode,pe),Z.return=ne,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case j:return pe=nu(Z.type,Z.key,Z.props,null,ne.mode,pe),ia(pe,Z),pe.return=ne,pe;case A:return Z=ru(Z,ne.mode,pe),Z.return=ne,Z;case fe:var ke=Z._init;return Z=ke(Z._payload),xe(ne,Z,pe)}if(Ie(Z)||Y(Z))return Z=nn(Z,ne.mode,pe,null),Z.return=ne,Z;if(typeof Z.then=="function")return xe(ne,Cu(Z),pe);if(Z.$$typeof===J)return xe(ne,Ls(ne,Z),pe);Au(ne,Z)}return null}function de(ne,Z,pe,ke){var tt=Z!==null?Z.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return tt!==null?null:v(ne,Z,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case j:return pe.key===tt?X(ne,Z,pe,ke):null;case A:return pe.key===tt?he(ne,Z,pe,ke):null;case fe:return tt=pe._init,pe=tt(pe._payload),de(ne,Z,pe,ke)}if(Ie(pe)||Y(pe))return tt!==null?null:Le(ne,Z,pe,ke,null);if(typeof pe.then=="function")return de(ne,Z,Cu(pe),ke);if(pe.$$typeof===J)return de(ne,Z,Ls(ne,pe),ke);Au(ne,pe)}return null}function Te(ne,Z,pe,ke,tt){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ne=ne.get(pe)||null,v(Z,ne,""+ke,tt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case j:return ne=ne.get(ke.key===null?pe:ke.key)||null,X(Z,ne,ke,tt);case A:return ne=ne.get(ke.key===null?pe:ke.key)||null,he(Z,ne,ke,tt);case fe:var Tt=ke._init;return ke=Tt(ke._payload),Te(ne,Z,pe,ke,tt)}if(Ie(ke)||Y(ke))return ne=ne.get(pe)||null,Le(Z,ne,ke,tt,null);if(typeof ke.then=="function")return Te(ne,Z,pe,Cu(ke),tt);if(ke.$$typeof===J)return Te(ne,Z,pe,Ls(Z,ke),tt);Au(Z,ke)}return null}function H(ne,Z,pe,ke){for(var tt=null,Tt=null,lt=Z,ot=Z=0,Li=null;lt!==null&&ot<pe.length;ot++){lt.index>ot?(Li=lt,lt=null):Li=lt.sibling;var It=de(ne,lt,pe[ot],ke);if(It===null){lt===null&&(lt=Li);break}s&&lt&&It.alternate===null&&o(ne,lt),Z=h(It,Z,ot),Tt===null?tt=It:Tt.sibling=It,Tt=It,lt=Li}if(ot===pe.length)return r(ne,lt),Nt&&Lo(ne,ot),tt;if(lt===null){for(;ot<pe.length;ot++)lt=xe(ne,pe[ot],ke),lt!==null&&(Z=h(lt,Z,ot),Tt===null?tt=lt:Tt.sibling=lt,Tt=lt);return Nt&&Lo(ne,ot),tt}for(lt=l(lt);ot<pe.length;ot++)Li=Te(lt,ne,ot,pe[ot],ke),Li!==null&&(s&&Li.alternate!==null&&lt.delete(Li.key===null?ot:Li.key),Z=h(Li,Z,ot),Tt===null?tt=Li:Tt.sibling=Li,Tt=Li);return s&&lt.forEach(function(kn){return o(ne,kn)}),Nt&&Lo(ne,ot),tt}function nt(ne,Z,pe,ke){if(pe==null)throw Error(p(151));for(var tt=null,Tt=null,lt=Z,ot=Z=0,Li=null,It=pe.next();lt!==null&&!It.done;ot++,It=pe.next()){lt.index>ot?(Li=lt,lt=null):Li=lt.sibling;var kn=de(ne,lt,It.value,ke);if(kn===null){lt===null&&(lt=Li);break}s&&lt&&kn.alternate===null&&o(ne,lt),Z=h(kn,Z,ot),Tt===null?tt=kn:Tt.sibling=kn,Tt=kn,lt=Li}if(It.done)return r(ne,lt),Nt&&Lo(ne,ot),tt;if(lt===null){for(;!It.done;ot++,It=pe.next())It=xe(ne,It.value,ke),It!==null&&(Z=h(It,Z,ot),Tt===null?tt=It:Tt.sibling=It,Tt=It);return Nt&&Lo(ne,ot),tt}for(lt=l(lt);!It.done;ot++,It=pe.next())It=Te(lt,ne,ot,It.value,ke),It!==null&&(s&&It.alternate!==null&&lt.delete(It.key===null?ot:It.key),Z=h(It,Z,ot),Tt===null?tt=It:Tt.sibling=It,Tt=It);return s&&lt.forEach(function(ng){return o(ne,ng)}),Nt&&Lo(ne,ot),tt}function Mt(ne,Z,pe,ke){if(typeof pe=="object"&&pe!==null&&pe.type===U&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case j:e:{for(var tt=pe.key;Z!==null;){if(Z.key===tt){if(tt=pe.type,tt===U){if(Z.tag===7){r(ne,Z.sibling),ke=c(Z,pe.props.children),ke.return=ne,ne=ke;break e}}else if(Z.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===fe&&_e(tt)===Z.type){r(ne,Z.sibling),ke=c(Z,pe.props),ia(ke,pe),ke.return=ne,ne=ke;break e}r(ne,Z);break}else o(ne,Z);Z=Z.sibling}pe.type===U?(ke=nn(pe.props.children,ne.mode,ke,pe.key),ke.return=ne,ne=ke):(ke=nu(pe.type,pe.key,pe.props,null,ne.mode,ke),ia(ke,pe),ke.return=ne,ne=ke)}return f(ne);case A:e:{for(tt=pe.key;Z!==null;){if(Z.key===tt)if(Z.tag===4&&Z.stateNode.containerInfo===pe.containerInfo&&Z.stateNode.implementation===pe.implementation){r(ne,Z.sibling),ke=c(Z,pe.children||[]),ke.return=ne,ne=ke;break e}else{r(ne,Z);break}else o(ne,Z);Z=Z.sibling}ke=ru(pe,ne.mode,ke),ke.return=ne,ne=ke}return f(ne);case fe:return tt=pe._init,pe=tt(pe._payload),Mt(ne,Z,pe,ke)}if(Ie(pe))return H(ne,Z,pe,ke);if(Y(pe)){if(tt=Y(pe),typeof tt!="function")throw Error(p(150));return pe=tt.call(pe),nt(ne,Z,pe,ke)}if(typeof pe.then=="function")return Mt(ne,Z,Cu(pe),ke);if(pe.$$typeof===J)return Mt(ne,Z,Ls(ne,pe),ke);Au(ne,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,Z!==null&&Z.tag===6?(r(ne,Z.sibling),ke=c(Z,pe),ke.return=ne,ne=ke):(r(ne,Z),ke=Zc(pe,ne.mode,ke),ke.return=ne,ne=ke),f(ne)):r(ne,Z)}return function(ne,Z,pe,ke){try{ta=0;var tt=Mt(ne,Z,pe,ke);return er=null,tt}catch(lt){if(lt===$i||lt===ks)throw lt;var Tt=ss(29,lt,null,ne.mode);return Tt.lanes=ke,Tt.return=ne,Tt}finally{}}}var sa=hn(!0),Nu=hn(!1),Zt=W(null),ye=null;function qi(s){var o=s.alternate;Ce(_i,_i.current&1),Ce(Zt,s),ye===null&&(o===null||jr.current!==null||o.memoizedState!==null)&&(ye=s)}function Kt(s){if(s.tag===22){if(Ce(_i,_i.current),Ce(Zt,s),ye===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(ye=s)}}else tr()}function tr(){Ce(_i,_i.current),Ce(Zt,Zt.current)}function xo(s){q(Zt),ye===s&&(ye=null),q(_i)}var _i=W(0);function Bo(s){for(var o=s;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||sc(r)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function oa(s,o,r,l){o=s.memoizedState,r=r(l,o),r=r==null?o:z({},o,r),s.memoizedState=r,s.lanes===0&&(s.updateQueue.baseState=r)}var dn={enqueueSetState:function(s,o,r){s=s._reactInternals;var l=ms(),c=wo(l);c.payload=o,r!=null&&(c.callback=r),o=Mo(s,c,l),o!==null&&(Ts(o,s,l),Xr(o,s,l))},enqueueReplaceState:function(s,o,r){s=s._reactInternals;var l=ms(),c=wo(l);c.tag=1,c.payload=o,r!=null&&(c.callback=r),o=Mo(s,c,l),o!==null&&(Ts(o,s,l),Xr(o,s,l))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var r=ms(),l=wo(r);l.tag=2,o!=null&&(l.callback=o),o=Mo(s,l,r),o!==null&&(Ts(o,s,r),Xr(o,s,r))}};function Lh(s,o,r,l,c,h,f){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(l,h,f):o.prototype&&o.prototype.isPureReactComponent?!Al(r,l)||!Al(c,h):!0}function up(s,o,r,l){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,l),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,l),o.state!==s&&dn.enqueueReplaceState(o,o.state,null)}function ir(s,o){var r=o;if("ref"in o){r={};for(var l in o)l!=="ref"&&(r[l]=o[l])}if(s=s.defaultProps){r===o&&(r=z({},r));for(var c in s)r[c]===void 0&&(r[c]=s[c])}return r}var Lu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function ku(s){Lu(s)}function wu(s){console.error(s)}function kh(s){Lu(s)}function Mu(s,o){try{var r=s.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(l){setTimeout(function(){throw l})}}function cp(s,o,r){try{var l=s.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function wh(s,o,r){return r=wo(r),r.tag=3,r.payload={element:null},r.callback=function(){Mu(s,o)},r}function U$(s){return s=wo(s),s.tag=3,s}function hp(s,o,r,l){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var h=l.value;s.payload=function(){return c(h)},s.callback=function(){cp(o,r,l)}}var f=r.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){cp(o,r,l),typeof c!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var v=l.stack;this.componentDidCatch(l.value,{componentStack:v!==null?v:""})})}function F$(s,o,r,l,c){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(o=r.alternate,o!==null&&Wn(o,r,c,!0),r=Zt.current,r!==null){switch(r.tag){case 13:return ye===null?Wh():r.alternate===null&&ii===0&&(ii=3),r.flags&=-257,r.flags|=65536,r.lanes=c,l===Kn?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([l]):o.add(l),Yh(s,l,c)),!1;case 22:return r.flags|=65536,l===Kn?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([l]):r.add(l)),Yh(s,l,c)),!1}throw Error(p(435,r.tag))}return Yh(s,l,c),Wh(),!1}if(Nt)return o=Zt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=c,l!==Ys&&(s=Error(p(422),{cause:l}),wl(gs(s,r)))):(l!==Ys&&(o=Error(p(423),{cause:l}),wl(gs(o,r))),s=s.current.alternate,s.flags|=65536,c&=-c,s.lanes|=c,l=gs(l,r),c=wh(s.stateNode,l,c),Jn(s,c),ii!==4&&(ii=2)),!1;var h=Error(p(520),{cause:l});if(h=gs(h,r),or===null?or=[h]:or.push(h),ii!==4&&(ii=2),o===null)return!0;l=gs(l,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,s=c&-c,r.lanes|=s,s=wh(r.stateNode,l,s),Jn(r,s),!1;case 1:if(o=r.type,h=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(bo===null||!bo.has(h))))return r.flags|=65536,c&=-c,r.lanes|=c,c=U$(c),hp(c,s,r,l),Jn(r,c),!1}r=r.return}while(r!==null);return!1}var Mh=Error(p(461)),Ii=!1;function Gi(s,o,r,l){o.child=s===null?Nu(o,null,r,l):sa(o,s.child,r,l)}function Dh(s,o,r,l,c){r=r.render;var h=o.ref;if("ref"in l){var f={};for(var v in l)v!=="ref"&&(f[v]=l[v])}else f=l;return Xn(o),l=gu(s,o,r,f,h,c),v=fu(),s!==null&&!Ii?(hh(s,o,c),Oi(s,o,c)):(Nt&&v&&Wr(o),o.flags|=1,Gi(s,o,l,c),o.child)}function dp(s,o,r,l,c){if(s===null){var h=r.type;return typeof h=="function"&&!ou(h)&&h.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=h,H$(s,o,h,l,c)):(s=nu(r.type,null,l,o,o.mode,c),s.ref=o.ref,s.return=o,o.child=s)}if(h=s.child,!po(s,c)){var f=h.memoizedProps;if(r=r.compare,r=r!==null?r:Al,r(f,l)&&s.ref===o.ref)return Oi(s,o,c)}return o.flags|=1,s=No(h,l),s.ref=o.ref,s.return=o,o.child=s}function H$(s,o,r,l,c){if(s!==null){var h=s.memoizedProps;if(Al(h,l)&&s.ref===o.ref)if(Ii=!1,o.pendingProps=l=h,po(s,c))(s.flags&131072)!==0&&(Ii=!0);else return o.lanes=s.lanes,Oi(s,o,c)}return $e(s,o,r,l,c)}function pp(s,o,r){var l=o.pendingProps,c=l.children,h=s!==null?s.memoizedState:null;if(l.mode==="hidden"){if((o.flags&128)!==0){if(l=h!==null?h.baseLanes|r:r,s!==null){for(c=o.child=s.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;o.childLanes=h&~l}else o.childLanes=0,o.child=null;return $p(s,o,l,r)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&et(o,h!==null?h.cachePool:null),h!==null?ws(o,h):pu(),Kt(o);else return o.lanes=o.childLanes=536870912,$p(s,o,h!==null?h.baseLanes|r:r,r)}else h!==null?(et(o,h.cachePool),ws(o,h),tr(),o.memoizedState=null):(s!==null&&et(o,null),pu(),tr());return Gi(s,o,c,r),o.child}function $p(s,o,r,l){var c=nh();return c=c===null?null:{parent:vi._currentValue,pool:c},o.memoizedState={baseLanes:r,cachePool:c},s!==null&&et(o,null),pu(),Kt(o),s!==null&&Wn(s,o,l,!0),null}function Ks(s,o){var r=o.ref;if(r===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(p(284));(s===null||s.ref!==r)&&(o.flags|=4194816)}}function $e(s,o,r,l,c){return Xn(o),r=gu(s,o,r,l,void 0,c),l=fu(),s!==null&&!Ii?(hh(s,o,c),Oi(s,o,c)):(Nt&&l&&Wr(o),o.flags|=1,Gi(s,o,r,c),o.child)}function gp(s,o,r,l,c,h){return Xn(o),o.updateQueue=null,r=ch(o,l,r,c),uh(s),l=fu(),s!==null&&!Ii?(hh(s,o,h),Oi(s,o,h)):(Nt&&l&&Wr(o),o.flags|=1,Gi(s,o,r,h),o.child)}function fp(s,o,r,l,c){if(Xn(o),o.stateNode===null){var h=zs,f=r.contextType;typeof f=="object"&&f!==null&&(h=Fi(f)),h=new r(l,h),o.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=dn,o.stateNode=h,h._reactInternals=o,h=o.stateNode,h.props=l,h.state=o.memoizedState,h.refs={},Ul(o),f=r.contextType,h.context=typeof f=="object"&&f!==null?Fi(f):zs,h.state=o.memoizedState,f=r.getDerivedStateFromProps,typeof f=="function"&&(oa(o,r,f,l),h.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(f=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),f!==h.state&&dn.enqueueReplaceState(h,h.state,null),Hl(o,l,h,c),Fl(),h.state=o.memoizedState),typeof h.componentDidMount=="function"&&(o.flags|=4194308),l=!0}else if(s===null){h=o.stateNode;var v=o.memoizedProps,X=ir(r,v);h.props=X;var he=h.context,Le=r.contextType;f=zs,typeof Le=="object"&&Le!==null&&(f=Fi(Le));var xe=r.getDerivedStateFromProps;Le=typeof xe=="function"||typeof h.getSnapshotBeforeUpdate=="function",v=o.pendingProps!==v,Le||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v||he!==f)&&up(o,h,l,f),un=!1;var de=o.memoizedState;h.state=de,Hl(o,l,h,c),Fl(),he=o.memoizedState,v||de!==he||un?(typeof xe=="function"&&(oa(o,r,xe,l),he=o.memoizedState),(X=un||Lh(o,r,X,l,de,he,f))?(Le||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(o.flags|=4194308)):(typeof h.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=l,o.memoizedState=he),h.props=l,h.state=he,h.context=f,l=X):(typeof h.componentDidMount=="function"&&(o.flags|=4194308),l=!1)}else{h=o.stateNode,du(s,o),f=o.memoizedProps,Le=ir(r,f),h.props=Le,xe=o.pendingProps,de=h.context,he=r.contextType,X=zs,typeof he=="object"&&he!==null&&(X=Fi(he)),v=r.getDerivedStateFromProps,(he=typeof v=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(f!==xe||de!==X)&&up(o,h,l,X),un=!1,de=o.memoizedState,h.state=de,Hl(o,l,h,c),Fl();var Te=o.memoizedState;f!==xe||de!==Te||un||s!==null&&s.dependencies!==null&&cu(s.dependencies)?(typeof v=="function"&&(oa(o,r,v,l),Te=o.memoizedState),(Le=un||Lh(o,r,Le,l,de,Te,X)||s!==null&&s.dependencies!==null&&cu(s.dependencies))?(he||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,Te,X),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,Te,X)),typeof h.componentDidUpdate=="function"&&(o.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof h.componentDidUpdate!="function"||f===s.memoizedProps&&de===s.memoizedState||(o.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===s.memoizedProps&&de===s.memoizedState||(o.flags|=1024),o.memoizedProps=l,o.memoizedState=Te),h.props=l,h.state=Te,h.context=X,l=Le):(typeof h.componentDidUpdate!="function"||f===s.memoizedProps&&de===s.memoizedState||(o.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||f===s.memoizedProps&&de===s.memoizedState||(o.flags|=1024),l=!1)}return h=l,Ks(s,o),l=(o.flags&128)!==0,h||l?(h=o.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:h.render(),o.flags|=1,s!==null&&l?(o.child=sa(o,s.child,null,c),o.child=sa(o,null,r,c)):Gi(s,o,r,c),o.memoizedState=h.state,s=o.child):s=Oi(s,o,c),s}function _p(s,o,r,l){return ao(),o.flags|=256,Gi(s,o,r,l),o.child}var mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Du(s){return{baseLanes:s,cachePool:os()}}function xh(s,o,r){return s=s!==null?s.childLanes&~r:0,o&&(s|=ci),s}function na(s,o,r){var l=o.pendingProps,c=!1,h=(o.flags&128)!==0,f;if((f=h)||(f=s!==null&&s.memoizedState===null?!1:(_i.current&2)!==0),f&&(c=!0,o.flags&=-129),f=(o.flags&32)!==0,o.flags&=-33,s===null){if(Nt){if(c?qi(o):tr(),Nt){var v=ri,X;if(X=v){e:{for(X=v,v=Xs;X.nodeType!==8;){if(!v){v=null;break e}if(X=Fs(X.nextSibling),X===null){v=null;break e}}v=X}v!==null?(o.memoizedState={dehydrated:v,treeContext:rn!==null?{id:lo,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},X=ss(18,null,null,0),X.stateNode=v,X.return=o,o.child=X,xi=o,ri=null,X=!0):X=!1}X||Vn(o)}if(v=o.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return sc(v)?o.lanes=32:o.lanes=536870912,null;xo(o)}return v=l.children,l=l.fallback,c?(tr(),c=o.mode,v=ra({mode:"hidden",children:v},c),l=nn(l,c,r,null),v.return=o,l.return=o,v.sibling=l,o.child=v,c=o.child,c.memoizedState=Du(r),c.childLanes=xh(s,f,r),o.memoizedState=mp,l):(qi(o),xu(o,v))}if(X=s.memoizedState,X!==null&&(v=X.dehydrated,v!==null)){if(h)o.flags&256?(qi(o),o.flags&=-257,o=co(s,o,r)):o.memoizedState!==null?(tr(),o.child=s.child,o.flags|=128,o=null):(tr(),c=l.fallback,v=o.mode,l=ra({mode:"visible",children:l.children},v),c=nn(c,v,r,null),c.flags|=2,l.return=o,c.return=o,l.sibling=c,o.child=l,sa(o,s.child,null,r),l=o.child,l.memoizedState=Du(r),l.childLanes=xh(s,f,r),o.memoizedState=mp,o=c);else if(qi(o),sc(v)){if(f=v.nextSibling&&v.nextSibling.dataset,f)var he=f.dgst;f=he,l=Error(p(419)),l.stack="",l.digest=f,wl({value:l,source:null,stack:null}),o=co(s,o,r)}else if(Ii||Wn(s,o,r,!1),f=(r&s.childLanes)!==0,Ii||f){if(f=Xt,f!==null&&(l=r&-r,l=(l&42)!==0?1:Ne(l),l=(l&(f.suspendedLanes|r))!==0?0:l,l!==0&&l!==X.retryLane))throw X.retryLane=l,on(s,l),Ts(f,s,l),Mh;v.data==="$?"||Wh(),o=co(s,o,r)}else v.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=X.treeContext,ri=Fs(v.nextSibling),xi=o,Nt=!0,fs=null,Xs=!1,s!==null&&(Ns[Ji++]=lo,Ns[Ji++]=Ws,Ns[Ji++]=rn,lo=s.id,Ws=s.overflow,rn=o),o=xu(o,l.children),o.flags|=4096);return o}return c?(tr(),c=l.fallback,v=o.mode,X=s.child,he=X.sibling,l=No(X,{mode:"hidden",children:l.children}),l.subtreeFlags=X.subtreeFlags&65011712,he!==null?c=No(he,c):(c=nn(c,v,r,null),c.flags|=2),c.return=o,l.return=o,l.sibling=c,o.child=l,l=c,c=o.child,v=s.child.memoizedState,v===null?v=Du(r):(X=v.cachePool,X!==null?(he=vi._currentValue,X=X.parent!==he?{parent:he,pool:he}:X):X=os(),v={baseLanes:v.baseLanes|r,cachePool:X}),c.memoizedState=v,c.childLanes=xh(s,f,r),o.memoizedState=mp,l):(qi(o),r=s.child,s=r.sibling,r=No(r,{mode:"visible",children:l.children}),r.return=o,r.sibling=null,s!==null&&(f=o.deletions,f===null?(o.deletions=[s],o.flags|=16):f.push(s)),o.child=r,o.memoizedState=null,r)}function xu(s,o){return o=ra({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function ra(s,o){return s=ss(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function co(s,o,r){return sa(o,s.child,null,r),s=xu(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Tp(s,o,r){s.lanes|=o;var l=s.alternate;l!==null&&(l.lanes|=o),ih(s.return,o,r)}function tl(s,o,r,l,c){var h=s.memoizedState;h===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:c}:(h.isBackwards=o,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=r,h.tailMode=c)}function ho(s,o,r){var l=o.pendingProps,c=l.revealOrder,h=l.tail;if(Gi(s,o,l.children,r),l=_i.current,(l&2)!==0)l=l&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Tp(s,r,o);else if(s.tag===19)Tp(s,r,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}l&=1}switch(Ce(_i,l),c){case"forwards":for(r=o.child,c=null;r!==null;)s=r.alternate,s!==null&&Bo(s)===null&&(c=r),r=r.sibling;r=c,r===null?(c=o.child,o.child=null):(c=r.sibling,r.sibling=null),tl(o,!1,c,r,h);break;case"backwards":for(r=null,c=o.child,o.child=null;c!==null;){if(s=c.alternate,s!==null&&Bo(s)===null){o.child=c;break}s=c.sibling,c.sibling=r,r=c,c=s}tl(o,!0,r,null,h);break;case"together":tl(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Oi(s,o,r){if(s!==null&&(o.dependencies=s.dependencies),mn|=o.lanes,(r&o.childLanes)===0)if(s!==null){if(Wn(s,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(p(153));if(o.child!==null){for(s=o.child,r=No(s,s.pendingProps),o.child=r,r.return=o;s.sibling!==null;)s=s.sibling,r=r.sibling=No(s,s.pendingProps),r.return=o;r.sibling=null}return o.child}function po(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&cu(s)))}function $o(s,o,r){switch(o.tag){case 3:Qe(o,o.stateNode.containerInfo),ln(o,vi,s.memoizedState.cache),ao();break;case 27:case 5:We(o);break;case 4:Qe(o,o.stateNode.containerInfo);break;case 10:ln(o,o.type,o.memoizedProps.value);break;case 13:var l=o.memoizedState;if(l!==null)return l.dehydrated!==null?(qi(o),o.flags|=128,null):(r&o.child.childLanes)!==0?na(s,o,r):(qi(o),s=Oi(s,o,r),s!==null?s.sibling:null);qi(o);break;case 19:var c=(s.flags&128)!==0;if(l=(r&o.childLanes)!==0,l||(Wn(s,o,r,!1),l=(r&o.childLanes)!==0),c){if(l)return ho(s,o,r);o.flags|=128}if(c=o.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ce(_i,_i.current),l)break;return null;case 22:case 23:return o.lanes=0,pp(s,o,r);case 24:ln(o,vi,s.memoizedState.cache)}return Oi(s,o,r)}function Bh(s,o,r){if(s!==null)if(s.memoizedProps!==o.pendingProps)Ii=!0;else{if(!po(s,r)&&(o.flags&128)===0)return Ii=!1,$o(s,o,r);Ii=(s.flags&131072)!==0}else Ii=!1,Nt&&(o.flags&1048576)!==0&&Fd(o,au,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var l=o.elementType,c=l._init;if(l=c(l._payload),o.type=l,typeof l=="function")ou(l)?(s=ir(l,s),o.tag=1,o=fp(null,o,l,s,r)):(o.tag=0,o=$e(null,o,l,s,r));else{if(l!=null){if(c=l.$$typeof,c===x){o.tag=11,o=Dh(null,o,l,s,r);break e}else if(c===te){o.tag=14,o=dp(null,o,l,s,r);break e}}throw o=T(l)||l,Error(p(306,o,""))}}return o;case 0:return $e(s,o,o.type,o.pendingProps,r);case 1:return l=o.type,c=ir(l,o.pendingProps),fp(s,o,l,c,r);case 3:e:{if(Qe(o,o.stateNode.containerInfo),s===null)throw Error(p(387));l=o.pendingProps;var h=o.memoizedState;c=h.element,du(s,o),Hl(o,l,null,r);var f=o.memoizedState;if(l=f.cache,ln(o,vi,l),l!==h.cache&&sh(o,[vi],r,!0),Fl(),l=f.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:f.cache},o.updateQueue.baseState=h,o.memoizedState=h,o.flags&256){o=_p(s,o,l,r);break e}else if(l!==c){c=gs(Error(p(424)),o),wl(c),o=_p(s,o,l,r);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ri=Fs(s.firstChild),xi=o,Nt=!0,fs=null,Xs=!0,r=Nu(o,null,l,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ao(),l===c){o=Oi(s,o,r);break e}Gi(s,o,l,r)}o=o.child}return o;case 26:return Ks(s,o),s===null?(r=lc(o.type,null,o.pendingProps,null))?o.memoizedState=r:Nt||(r=o.type,s=o.pendingProps,l=vo(He.current).createElement(r),l[bi]=o,l[Vt]=s,Ni(l,r,s),Mi(l),o.stateNode=l):o.memoizedState=lc(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return We(o),s===null&&Nt&&(l=o.stateNode=dl(o.type,o.pendingProps,He.current),xi=o,Xs=!0,c=ri,yn(o.type)?(oc=c,ri=Fs(l.firstChild)):ri=c),Gi(s,o,o.pendingProps.children,r),Ks(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Nt&&((c=l=ri)&&(l=Go(l,o.type,o.pendingProps,Xs),l!==null?(o.stateNode=l,xi=o,ri=Fs(l.firstChild),Xs=!1,c=!0):c=!1),c||Vn(o)),We(o),c=o.type,h=o.pendingProps,f=s!==null?s.memoizedProps:null,l=h.children,ed(c,h)?l=null:f!==null&&ed(c,f)&&(o.flags|=32),o.memoizedState!==null&&(c=gu(s,o,x$,null,null,r),Cn._currentValue=c),Ks(s,o),Gi(s,o,l,r),o.child;case 6:return s===null&&Nt&&((s=r=ri)&&(r=es(r,o.pendingProps,Xs),r!==null?(o.stateNode=r,xi=o,ri=null,s=!0):s=!1),s||Vn(o)),null;case 13:return na(s,o,r);case 4:return Qe(o,o.stateNode.containerInfo),l=o.pendingProps,s===null?o.child=sa(o,null,l,r):Gi(s,o,l,r),o.child;case 11:return Dh(s,o,o.type,o.pendingProps,r);case 7:return Gi(s,o,o.pendingProps,r),o.child;case 8:return Gi(s,o,o.pendingProps.children,r),o.child;case 12:return Gi(s,o,o.pendingProps.children,r),o.child;case 10:return l=o.pendingProps,ln(o,o.type,l.value),Gi(s,o,l.children,r),o.child;case 9:return c=o.type._context,l=o.pendingProps.children,Xn(o),c=Fi(c),l=l(c),o.flags|=1,Gi(s,o,l,r),o.child;case 14:return dp(s,o,o.type,o.pendingProps,r);case 15:return H$(s,o,o.type,o.pendingProps,r);case 19:return ho(s,o,r);case 31:return l=o.pendingProps,r=o.mode,l={mode:l.mode,children:l.children},s===null?(r=ra(l,r),r.ref=o.ref,o.child=r,r.return=o,o=r):(r=No(s.child,l),r.ref=o.ref,o.child=r,r.return=o,o=r),o;case 22:return pp(s,o,r);case 24:return Xn(o),l=Fi(vi),s===null?(c=nh(),c===null&&(c=Xt,h=Dl(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=r),c=h),o.memoizedState={parent:l,cache:c},Ul(o),ln(o,vi,c)):((s.lanes&r)!==0&&(du(s,o),Hl(o,null,null,r),Fl()),c=s.memoizedState,h=o.memoizedState,c.parent!==l?(c={parent:l,cache:l},o.memoizedState=c,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=c),ln(o,vi,l)):(l=h.cache,ln(o,vi,l),l!==c.cache&&sh(o,[vi],r,!0))),Gi(s,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(p(156,o.tag))}function Ds(s){s.flags|=4}function Bi(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Gp(o)){if(o=Zt.current,o!==null&&((St&4194048)===St?ye!==null:(St&62914560)!==St&&(St&536870912)===0||o!==ye))throw Pl=Kn,ti;s.flags|=8192}}function Ri(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Os():536870912,s.lanes|=o,pa|=o)}function Bu(s,o){if(!Nt)switch(s.tailMode){case"hidden":o=s.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?s.tail=null:r.sibling=null;break;case"collapsed":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:l.sibling=null}}function _t(s){var o=s.alternate!==null&&s.alternate.child===s.child,r=0,l=0;if(o)for(var c=s.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=s,c=c.sibling;else for(c=s.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=s,c=c.sibling;return s.subtreeFlags|=l,s.childLanes=r,o}function G$(s,o,r){var l=o.pendingProps;switch(uu(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return r=o.stateNode,l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),uo(vi),pt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(s===null||s.child===null)&&(kl(o)?Ds(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,eh())),_t(o),null;case 26:return r=o.memoizedState,s===null?(Ds(o),r!==null?(_t(o),Bi(o,r)):(_t(o),o.flags&=-16777217)):r?r!==s.memoizedState?(Ds(o),_t(o),Bi(o,r)):(_t(o),o.flags&=-16777217):(s.memoizedProps!==l&&Ds(o),_t(o),o.flags&=-16777217),null;case 27:Dt(o),r=He.current;var c=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==l&&Ds(o);else{if(!l){if(o.stateNode===null)throw Error(p(166));return _t(o),null}s=Ae.current,kl(o)?Hd(o):(s=dl(c,l,r),o.stateNode=s,Ds(o))}return _t(o),null;case 5:if(Dt(o),r=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==l&&Ds(o);else{if(!l){if(o.stateNode===null)throw Error(p(166));return _t(o),null}if(s=Ae.current,kl(o))Hd(o);else{switch(c=vo(He.current),s){case 1:s=c.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=c.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=c.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?c.createElement(r,{is:l.is}):c.createElement(r)}}s[bi]=o,s[Vt]=l;e:for(c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}o.stateNode=s;e:switch(Ni(s,r,l),r){case"button":case"input":case"select":case"textarea":s=!!l.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ds(o)}}return _t(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==l&&Ds(o);else{if(typeof l!="string"&&o.stateNode===null)throw Error(p(166));if(s=He.current,kl(o)){if(s=o.stateNode,r=o.memoizedProps,l=null,c=xi,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}s[bi]=o,s=!!(s.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||ec(s.nodeValue,r)),s||Vn(o)}else s=vo(s).createTextNode(l),s[bi]=o,o.stateNode=s}return _t(o),null;case 13:if(l=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(c=kl(o),l!==null&&l.dehydrated!==null){if(s===null){if(!c)throw Error(p(318));if(c=o.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[bi]=o}else ao(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),c=!1}else c=eh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),c=!0;if(!c)return o.flags&256?(xo(o),o):(xo(o),null)}if(xo(o),(o.flags&128)!==0)return o.lanes=r,o;if(r=l!==null,s=s!==null&&s.memoizedState!==null,r){l=o.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==c&&(l.flags|=2048)}return r!==s&&r&&(o.child.flags|=8192),Ri(o,o.updateQueue),_t(o),null;case 4:return pt(),s===null&&cl(o.stateNode.containerInfo),_t(o),null;case 10:return uo(o.type),_t(o),null;case 19:if(q(_i),c=o.memoizedState,c===null)return _t(o),null;if(l=(o.flags&128)!==0,h=c.rendering,h===null)if(l)Bu(c,!1);else{if(ii!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(h=Bo(s),h!==null){for(o.flags|=128,Bu(c,!1),s=h.updateQueue,o.updateQueue=s,Ri(o,s),o.subtreeFlags=0,s=r,r=o.child;r!==null;)Ud(r,s),r=r.sibling;return Ce(_i,_i.current&1|2),o.child}s=s.sibling}c.tail!==null&&M()>$a&&(o.flags|=128,l=!0,Bu(c,!1),o.lanes=4194304)}else{if(!l)if(s=Bo(h),s!==null){if(o.flags|=128,l=!0,s=s.updateQueue,o.updateQueue=s,Ri(o,s),Bu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!Nt)return _t(o),null}else 2*M()-c.renderingStartTime>$a&&r!==536870912&&(o.flags|=128,l=!0,Bu(c,!1),o.lanes=4194304);c.isBackwards?(h.sibling=o.child,o.child=h):(s=c.last,s!==null?s.sibling=h:o.child=h,c.last=h)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.renderingStartTime=M(),o.sibling=null,s=_i.current,Ce(_i,l?s&1|2:s&1),o):(_t(o),null);case 22:case 23:return xo(o),qn(),l=o.memoizedState!==null,s!==null?s.memoizedState!==null!==l&&(o.flags|=8192):l&&(o.flags|=8192),l?(r&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),r=o.updateQueue,r!==null&&Ri(o,r.retryQueue),r=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),l=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),l!==r&&(o.flags|=2048),s!==null&&q(jn),null;case 24:return r=null,s!==null&&(r=s.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),uo(vi),_t(o),null;case 25:return null;case 30:return null}throw Error(p(156,o.tag))}function zt(s,o){switch(uu(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return uo(vi),pt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Dt(o),null;case 13:if(xo(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(p(340));ao()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return q(_i),null;case 4:return pt(),null;case 10:return uo(o.type),null;case 22:case 23:return xo(o),qn(),s!==null&&q(jn),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return uo(vi),null;case 25:return null;default:return null}}function la(s,o){switch(uu(o),o.tag){case 3:uo(vi),pt();break;case 26:case 27:case 5:Dt(o);break;case 4:pt();break;case 13:xo(o);break;case 19:q(_i);break;case 10:uo(o.type);break;case 22:case 23:xo(o),qn(),s!==null&&q(jn);break;case 24:uo(vi)}}function aa(s,o){try{var r=o.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var c=l.next;r=c;do{if((r.tag&s)===s){l=void 0;var h=r.create,f=r.inst;l=h(),f.destroy=l}r=r.next}while(r!==c)}}catch(v){Rt(o,o.return,v)}}function pn(s,o,r){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var h=c.next;l=h;do{if((l.tag&s)===s){var f=l.inst,v=f.destroy;if(v!==void 0){f.destroy=void 0,c=o;var X=r,he=v;try{he()}catch(Le){Rt(c,X,Le)}}}l=l.next}while(l!==h)}}catch(Le){Rt(o,o.return,Le)}}function ua(s){var o=s.updateQueue;if(o!==null){var r=s.stateNode;try{ah(o,r)}catch(l){Rt(s,s.return,l)}}}function Ep(s,o,r){r.props=ir(s.type,s.memoizedProps),r.state=s.memoizedState;try{r.componentWillUnmount()}catch(l){Rt(s,o,l)}}function li(s,o){try{var r=s.ref;if(r!==null){switch(s.tag){case 26:case 27:case 5:var l=s.stateNode;break;case 30:l=s.stateNode;break;default:l=s.stateNode}typeof r=="function"?s.refCleanup=r(l):r.current=l}}catch(c){Rt(s,o,c)}}function rs(s,o){var r=s.ref,l=s.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(c){Rt(s,o,c)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){Rt(s,o,c)}else r.current=null}function go(s){var o=s.type,r=s.memoizedProps,l=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(c){Rt(s,s.return,c)}}function Pu(s,o,r){try{var l=s.stateNode;hl(l,s.type,r,o),l[Vt]=o}catch(c){Rt(s,s.return,c)}}function Ph(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&yn(s.type)||s.tag===4}function Uh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ph(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&yn(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function fo(s,o,r){var l=s.tag;if(l===5||l===6)s=s.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(s,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(s),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=bs));else if(l!==4&&(l===27&&yn(s.type)&&(r=s.stateNode,o=null),s=s.child,s!==null))for(fo(s,o,r),s=s.sibling;s!==null;)fo(s,o,r),s=s.sibling}function Wt(s,o,r){var l=s.tag;if(l===5||l===6)s=s.stateNode,o?r.insertBefore(s,o):r.appendChild(s);else if(l!==4&&(l===27&&yn(s.type)&&(r=s.stateNode),s=s.child,s!==null))for(Wt(s,o,r),s=s.sibling;s!==null;)Wt(s,o,r),s=s.sibling}function Fh(s){var o=s.stateNode,r=s.memoizedProps;try{for(var l=s.type,c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Ni(o,l,r),o[bi]=s,o[Vt]=r}catch(h){Rt(s,s.return,h)}}var _o=!1,ai=!1,De=!1,ae=typeof WeakSet=="function"?WeakSet:Set,at=null;function bt(s,o){if(s=s.containerInfo,gt=wt,s=Nl(s),Ka(s)){if("selectionStart"in s)var r={start:s.selectionStart,end:s.selectionEnd};else e:{r=(r=s.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var f=0,v=-1,X=-1,he=0,Le=0,xe=s,de=null;t:for(;;){for(var Te;xe!==r||c!==0&&xe.nodeType!==3||(v=f+c),xe!==h||l!==0&&xe.nodeType!==3||(X=f+l),xe.nodeType===3&&(f+=xe.nodeValue.length),(Te=xe.firstChild)!==null;)de=xe,xe=Te;for(;;){if(xe===s)break t;if(de===r&&++he===c&&(v=f),de===h&&++Le===l&&(X=f),(Te=xe.nextSibling)!==null)break;xe=de,de=xe.parentNode}xe=Te}r=v===-1||X===-1?null:{start:v,end:X}}else r=null}r=r||{start:0,end:0}}else r=null;for(tc={focusedElem:s,selectionRange:r},wt=!1,at=o;at!==null;)if(o=at,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,at=s;else for(;at!==null;){switch(o=at,h=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&h!==null){s=void 0,r=o,c=h.memoizedProps,h=h.memoizedState,l=r.stateNode;try{var H=ir(r.type,c,r.elementType===r.type);s=l.getSnapshotBeforeUpdate(H,h),l.__reactInternalSnapshotBeforeUpdate=s}catch(nt){Rt(r,r.return,nt)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,r=s.nodeType,r===9)Sa(s);else if(r===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Sa(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(p(163))}if(s=o.sibling,s!==null){s.return=o.return,at=s;break}at=o.return}}function bp(s,o,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:xs(s,r),l&4&&aa(5,r);break;case 1:if(xs(s,r),l&4)if(s=r.stateNode,o===null)try{s.componentDidMount()}catch(f){Rt(r,r.return,f)}else{var c=ir(r.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(c,o,s.__reactInternalSnapshotBeforeUpdate)}catch(f){Rt(r,r.return,f)}}l&64&&ua(r),l&512&&li(r,r.return);break;case 3:if(xs(s,r),l&64&&(s=r.updateQueue,s!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{ah(s,o)}catch(f){Rt(r,r.return,f)}}break;case 27:o===null&&l&4&&Fh(r);case 26:case 5:xs(s,r),o===null&&l&4&&go(r),l&512&&li(r,r.return);break;case 12:xs(s,r);break;case 13:xs(s,r),l&4&&ui(s,r),l&64&&(s=r.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(r=ju.bind(null,r),vg(s,r))));break;case 22:if(l=r.memoizedState!==null||_o,!l){o=o!==null&&o.memoizedState!==null||ai,c=_o;var h=ai;_o=l,(ai=o)&&!h?_n(s,r,(r.subtreeFlags&8772)!==0):xs(s,r),_o=c,ai=h}break;case 30:break;default:xs(s,r)}}function $n(s){var o=s.alternate;o!==null&&(s.alternate=null,$n(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&El(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qt=null,ls=!1;function gn(s,o,r){for(r=r.child;r!==null;)sr(s,o,r),r=r.sibling}function sr(s,o,r){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(qe,r)}catch{}switch(r.tag){case 26:ai||rs(r,o),gn(s,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ai||rs(r,o);var l=Qt,c=ls;yn(r.type)&&(Qt=r.stateNode,ls=!1),gn(s,o,r),pl(r.stateNode),Qt=l,ls=c;break;case 5:ai||rs(r,o);case 6:if(l=Qt,c=ls,Qt=null,gn(s,o,r),Qt=l,ls=c,Qt!==null)if(ls)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(r.stateNode)}catch(h){Rt(r,o,h)}else try{Qt.removeChild(r.stateNode)}catch(h){Rt(r,o,h)}break;case 18:Qt!==null&&(ls?(s=Qt,ba(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.stateNode),Aa(s)):ba(Qt,r.stateNode));break;case 4:l=Qt,c=ls,Qt=r.stateNode.containerInfo,ls=!0,gn(s,o,r),Qt=l,ls=c;break;case 0:case 11:case 14:case 15:ai||pn(2,r,o),ai||pn(4,r,o),gn(s,o,r);break;case 1:ai||(rs(r,o),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Ep(r,o,l)),gn(s,o,r);break;case 21:gn(s,o,r);break;case 22:ai=(l=ai)||r.memoizedState!==null,gn(s,o,r),ai=l;break;default:gn(s,o,r)}}function ui(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Aa(s)}catch(r){Rt(o,o.return,r)}}function Hh(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new ae),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new ae),o;default:throw Error(p(435,s.tag))}}function Uu(s,o){var r=Hh(s);o.forEach(function(l){var c=rl.bind(null,s,l);r.has(l)||(r.add(l),l.then(c,c))})}function Zi(s,o){var r=o.deletions;if(r!==null)for(var l=0;l<r.length;l++){var c=r[l],h=s,f=o,v=f;e:for(;v!==null;){switch(v.tag){case 27:if(yn(v.type)){Qt=v.stateNode,ls=!1;break e}break;case 5:Qt=v.stateNode,ls=!1;break e;case 3:case 4:Qt=v.stateNode.containerInfo,ls=!0;break e}v=v.return}if(Qt===null)throw Error(p(160));sr(h,f,c),Qt=null,ls=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)ca(o,s),o=o.sibling}var as=null;function ca(s,o){var r=s.alternate,l=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Zi(o,s),_s(s),l&4&&(pn(3,s,s.return),aa(3,s),pn(5,s,s.return));break;case 1:Zi(o,s),_s(s),l&512&&(ai||r===null||rs(r,r.return)),l&64&&_o&&(s=s.updateQueue,s!==null&&(l=s.callbacks,l!==null&&(r=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var c=as;if(Zi(o,s),_s(s),l&512&&(ai||r===null||rs(r,r.return)),l&4){var h=r!==null?r.memoizedState:null;if(l=s.memoizedState,r===null)if(l===null)if(s.stateNode===null){e:{l=s.type,r=s.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Wo]||h[bi]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(l),c.head.insertBefore(h,c.querySelector("head > title"))),Ni(h,l,r),h[bi]=s,Mi(h),l=h;break e;case"link":var f=dr("link","href",c).get(l+(r.href||""));if(f){for(var v=0;v<f.length;v++)if(h=f[v],h.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&h.getAttribute("rel")===(r.rel==null?null:r.rel)&&h.getAttribute("title")===(r.title==null?null:r.title)&&h.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){f.splice(v,1);break t}}h=c.createElement(l),Ni(h,l,r),c.head.appendChild(h);break;case"meta":if(f=dr("meta","content",c).get(l+(r.content||""))){for(v=0;v<f.length;v++)if(h=f[v],h.getAttribute("content")===(r.content==null?null:""+r.content)&&h.getAttribute("name")===(r.name==null?null:r.name)&&h.getAttribute("property")===(r.property==null?null:r.property)&&h.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&h.getAttribute("charset")===(r.charSet==null?null:r.charSet)){f.splice(v,1);break t}}h=c.createElement(l),Ni(h,l,r),c.head.appendChild(h);break;default:throw Error(p(468,l))}h[bi]=s,Mi(h),l=h}s.stateNode=l}else rd(c,s.type,s.stateNode);else s.stateNode=vt(c,l,s.memoizedProps);else h!==l?(h===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):h.count--,l===null?rd(c,s.type,s.stateNode):vt(c,l,s.memoizedProps)):l===null&&s.stateNode!==null&&Pu(s,s.memoizedProps,r.memoizedProps)}break;case 27:Zi(o,s),_s(s),l&512&&(ai||r===null||rs(r,r.return)),r!==null&&l&4&&Pu(s,s.memoizedProps,r.memoizedProps);break;case 5:if(Zi(o,s),_s(s),l&512&&(ai||r===null||rs(r,r.return)),s.flags&32){c=s.stateNode;try{Bn(c,"")}catch(Te){Rt(s,s.return,Te)}}l&4&&s.stateNode!=null&&(c=s.memoizedProps,Pu(s,c,r!==null?r.memoizedProps:c)),l&1024&&(De=!0);break;case 6:if(Zi(o,s),_s(s),l&4){if(s.stateNode===null)throw Error(p(162));l=s.memoizedProps,r=s.stateNode;try{r.nodeValue=l}catch(Te){Rt(s,s.return,Te)}}break;case 3:if(cc=null,c=as,as=$l(o.containerInfo),Zi(o,s),as=c,_s(s),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Aa(o.containerInfo)}catch(Te){Rt(s,s.return,Te)}De&&(De=!1,V$(s));break;case 4:l=as,as=$l(s.stateNode.containerInfo),Zi(o,s),_s(s),as=l;break;case 12:Zi(o,s),_s(s);break;case 13:Zi(o,s),_s(s),s.child.flags&8192&&s.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(nr=M()),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,Uu(s,l)));break;case 22:c=s.memoizedState!==null;var X=r!==null&&r.memoizedState!==null,he=_o,Le=ai;if(_o=he||c,ai=Le||X,Zi(o,s),ai=Le,_o=he,_s(s),l&8192)e:for(o=s.stateNode,o._visibility=c?o._visibility&-2:o._visibility|1,c&&(r===null||X||_o||ai||fn(s)),r=null,o=s;;){if(o.tag===5||o.tag===26){if(r===null){X=r=o;try{if(h=X.stateNode,c)f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{v=X.stateNode;var xe=X.memoizedProps.style,de=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;v.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(Te){Rt(X,X.return,Te)}}}else if(o.tag===6){if(r===null){X=o;try{X.stateNode.nodeValue=c?"":X.memoizedProps}catch(Te){Rt(X,X.return,Te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}l&4&&(l=s.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Uu(s,r))));break;case 19:Zi(o,s),_s(s),l&4&&(l=s.updateQueue,l!==null&&(s.updateQueue=null,Uu(s,l)));break;case 30:break;case 21:break;default:Zi(o,s),_s(s)}}function _s(s){var o=s.flags;if(o&2){try{for(var r,l=s.return;l!==null;){if(Ph(l)){r=l;break}l=l.return}if(r==null)throw Error(p(160));switch(r.tag){case 27:var c=r.stateNode,h=Uh(s);Wt(s,h,c);break;case 5:var f=r.stateNode;r.flags&32&&(Bn(f,""),r.flags&=-33);var v=Uh(s);Wt(s,v,f);break;case 3:case 4:var X=r.stateNode.containerInfo,he=Uh(s);fo(s,he,X);break;default:throw Error(p(161))}}catch(Le){Rt(s,s.return,Le)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function V$(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;V$(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function xs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)bp(s,o.alternate,o),o=o.sibling}function fn(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:pn(4,o,o.return),fn(o);break;case 1:rs(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&Ep(o,o.return,r),fn(o);break;case 27:pl(o.stateNode);case 26:case 5:rs(o,o.return),fn(o);break;case 22:o.memoizedState===null&&fn(o);break;case 30:fn(o);break;default:fn(o)}s=s.sibling}}function _n(s,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var l=o.alternate,c=s,h=o,f=h.flags;switch(h.tag){case 0:case 11:case 15:_n(c,h,r),aa(4,h);break;case 1:if(_n(c,h,r),l=h,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(he){Rt(l,l.return,he)}if(l=h,c=l.updateQueue,c!==null){var v=l.stateNode;try{var X=c.shared.hiddenCallbacks;if(X!==null)for(c.shared.hiddenCallbacks=null,c=0;c<X.length;c++)Yr(X[c],v)}catch(he){Rt(l,l.return,he)}}r&&f&64&&ua(h),li(h,h.return);break;case 27:Fh(h);case 26:case 5:_n(c,h,r),r&&l===null&&f&4&&go(h),li(h,h.return);break;case 12:_n(c,h,r);break;case 13:_n(c,h,r),r&&f&4&&ui(c,h);break;case 22:h.memoizedState===null&&_n(c,h,r),li(h,h.return);break;case 30:break;default:_n(c,h,r)}o=o.sibling}}function dt(s,o){var r=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==r&&(s!=null&&s.refCount++,r!=null&&xl(r))}function Gh(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&xl(s))}function Vi(s,o,r,l){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Po(s,o,r,l),o=o.sibling}function Po(s,o,r,l){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Vi(s,o,r,l),c&2048&&aa(9,o);break;case 1:Vi(s,o,r,l);break;case 3:Vi(s,o,r,l),c&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&xl(s)));break;case 12:if(c&2048){Vi(s,o,r,l),s=o.stateNode;try{var h=o.memoizedProps,f=h.id,v=h.onPostCommit;typeof v=="function"&&v(f,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(X){Rt(o,o.return,X)}}else Vi(s,o,r,l);break;case 13:Vi(s,o,r,l);break;case 23:break;case 22:h=o.stateNode,f=o.alternate,o.memoizedState!==null?h._visibility&2?Vi(s,o,r,l):Js(s,o):h._visibility&2?Vi(s,o,r,l):(h._visibility|=2,mo(s,o,r,l,(o.subtreeFlags&10256)!==0)),c&2048&&dt(f,o);break;case 24:Vi(s,o,r,l),c&2048&&Gh(o.alternate,o);break;default:Vi(s,o,r,l)}}function mo(s,o,r,l,c){for(c=c&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var h=s,f=o,v=r,X=l,he=f.flags;switch(f.tag){case 0:case 11:case 15:mo(h,f,v,X,c),aa(8,f);break;case 23:break;case 22:var Le=f.stateNode;f.memoizedState!==null?Le._visibility&2?mo(h,f,v,X,c):Js(h,f):(Le._visibility|=2,mo(h,f,v,X,c)),c&&he&2048&&dt(f.alternate,f);break;case 24:mo(h,f,v,X,c),c&&he&2048&&Gh(f.alternate,f);break;default:mo(h,f,v,X,c)}o=o.sibling}}function Js(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=s,l=o,c=l.flags;switch(l.tag){case 22:Js(r,l),c&2048&&dt(l.alternate,l);break;case 24:Js(r,l),c&2048&&Gh(l.alternate,l);break;default:Js(r,l)}o=o.sibling}}var To=8192;function Ci(s){if(s.subtreeFlags&To)for(s=s.child;s!==null;)Sp(s),s=s.sibling}function Sp(s){switch(s.tag){case 26:Ci(s),s.flags&To&&s.memoizedState!==null&&zo(as,s.memoizedState,s.memoizedProps);break;case 5:Ci(s);break;case 3:case 4:var o=as;as=$l(s.stateNode.containerInfo),Ci(s),as=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=To,To=16777216,Ci(s),To=o):Ci(s));break;default:Ci(s)}}function vp(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function ha(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var l=o[r];at=l,z$(l,s)}vp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)yp(s),s=s.sibling}function yp(s){switch(s.tag){case 0:case 11:case 15:ha(s),s.flags&2048&&pn(9,s,s.return);break;case 3:ha(s);break;case 12:ha(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Fu(s)):ha(s);break;default:ha(s)}}function Fu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var l=o[r];at=l,z$(l,s)}vp(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:pn(8,o,o.return),Fu(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,Fu(o));break;default:Fu(o)}s=s.sibling}}function z$(s,o){for(;at!==null;){var r=at;switch(r.tag){case 0:case 11:case 15:pn(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:xl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,at=l;else e:for(r=s;at!==null;){l=at;var c=l.sibling,h=l.return;if($n(l),l===r){at=null;break e}if(c!==null){c.return=h,at=c;break e}at=h}}}var Ip={getCacheForType:function(s){var o=Fi(vi),r=o.data.get(s);return r===void 0&&(r=s(),o.data.set(s,r)),r}},W$=typeof WeakMap=="function"?WeakMap:Map,Lt=0,Xt=null,ft=null,St=0,Ht=0,Bs=null,Ai=!1,jt=!1,il=!1,qs=0,ii=0,mn=0,Eo=0,da=0,ci=0,pa=0,or=null,Qi=null,Hu=!1,nr=0,$a=1/0,Gu=null,bo=null,Pi=0,Tn=null,Uo=null,sl=0,Vh=0,En=null,Op=null,ga=0,zh=null;function ms(){if((Lt&2)!==0&&St!==0)return St&-St;if(ce.T!==null){var s=Yn;return s!==0?s:qu()}return ct()}function Rp(){ci===0&&(ci=(St&536870912)===0||Nt?ds():536870912);var s=Zt.current;return s!==null&&(s.flags|=32),ci}function Ts(s,o,r){(s===Xt&&(Ht===2||Ht===9)||s.cancelPendingCommit!==null)&&(rr(s,0),Sn(s,St,ci,!1)),g(s,r),((Lt&2)===0||s!==Xt)&&(s===Xt&&((Lt&2)===0&&(Eo|=r),ii===4&&Sn(s,St,ci,!1)),us(s))}function Cp(s,o,r){if((Lt&6)!==0)throw Error(p(327));var l=!r&&(o&124)===0&&(o&s.expiredLanes)===0||Ue(s,o),c=l?Y$(s,o):nl(s,o,!0),h=l;do{if(c===0){jt&&!l&&Sn(s,o,0,!1);break}else{if(r=s.current.alternate,h&&!bn(r)){c=nl(s,o,!1),h=!1;continue}if(c===2){if(h=o,s.errorRecoveryDisabledLanes&h)var f=0;else f=s.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){o=f;e:{var v=s;c=or;var X=v.current.memoizedState.isDehydrated;if(X&&(rr(v,f).flags|=256),f=nl(v,f,!1),f!==2){if(il&&!X){v.errorRecoveryDisabledLanes|=h,Eo|=h,c=4;break e}h=Qi,Qi=c,h!==null&&(Qi===null?Qi=h:Qi.push.apply(Qi,h))}c=f}if(h=!1,c!==2)continue}}if(c===1){rr(s,0),Sn(s,o,0,!0);break}e:{switch(l=s,h=c,h){case 0:case 1:throw Error(p(345));case 4:if((o&4194048)!==o)break;case 6:Sn(l,o,ci,!Ai);break e;case 2:Qi=null;break;case 3:case 5:break;default:throw Error(p(329))}if((o&62914560)===o&&(c=nr+300-M(),10<c)){if(Sn(l,o,ci,!Ai),ie(l,0,!0)!==0)break e;l.timeoutHandle=Up(Ap.bind(null,l,r,Qi,Gu,Hu,o,ci,Eo,pa,Ai,h,2,-0,0),c);break e}Ap(l,r,Qi,Gu,Hu,o,ci,Eo,pa,Ai,h,0,-0,0)}}break}while(!0);us(s)}function Ap(s,o,r,l,c,h,f,v,X,he,Le,xe,de,Te){if(s.timeoutHandle=-1,xe=o.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(Ti={stylesheets:null,count:0,unsuspend:ya},Sp(o),xe=Rn(),xe!==null)){s.cancelPendingCommit=xe(ur.bind(null,s,o,h,r,l,c,f,v,X,Le,1,de,Te)),Sn(s,h,f,!he);return}ur(s,o,h,r,l,c,f,v,X)}function bn(s){for(var o=s;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var c=r[l],h=c.getSnapshot;c=c.value;try{if(!$s(h(),c))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Sn(s,o,r,l){o&=~da,o&=~Eo,s.suspendedLanes|=o,s.pingedLanes&=~o,l&&(s.warmLanes|=o),l=s.expirationTimes;for(var c=o;0<c;){var h=31-ht(c),f=1<<h;l[h]=-1,c&=~f}r!==0&&K(s,r,o)}function Vu(){return(Lt&6)===0?(cr(0),!1):!0}function zu(){if(ft!==null){if(Ht===0)var s=ft.return;else s=ft,ko=zn=null,Vl(s),er=null,ta=0,s=ft;for(;s!==null;)la(s.alternate,s),s=s.return;ft=null}}function rr(s,o){var r=s.timeoutHandle;r!==-1&&(s.timeoutHandle=-1,Z$(r)),r=s.cancelPendingCommit,r!==null&&(s.cancelPendingCommit=null,r()),zu(),Xt=s,ft=r=No(s.current,null),St=o,Ht=0,Bs=null,Ai=!1,jt=Ue(s,o),il=!1,pa=ci=da=Eo=mn=ii=0,Qi=or=null,Hu=!1,(o&8)!==0&&(o|=o&32);var l=s.entangledLanes;if(l!==0)for(s=s.entanglements,l&=o;0<l;){var c=31-ht(l),h=1<<c;o|=s[c],l&=~h}return qs=o,sn(),r}function Np(s,o){$t=null,ce.H=ea,o===$i||o===ks?(o=Xd(),Ht=3):o===ti?(o=Xd(),Ht=4):Ht=o===Mh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Bs=o,ft===null&&(ii=1,Mu(s,gs(o,s.current)))}function hi(){var s=ce.H;return ce.H=ea,s===null?ea:s}function ol(){var s=ce.A;return ce.A=Ip,s}function Wh(){ii=4,Ai||(St&4194048)!==St&&Zt.current!==null||(jt=!0),(mn&134217727)===0&&(Eo&134217727)===0||Xt===null||Sn(Xt,St,ci,!1)}function nl(s,o,r){var l=Lt;Lt|=2;var c=hi(),h=ol();(Xt!==s||St!==o)&&(Gu=null,rr(s,o)),o=!1;var f=ii;e:do try{if(Ht!==0&&ft!==null){var v=ft,X=Bs;switch(Ht){case 8:zu(),f=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(o=!0);var he=Ht;if(Ht=0,Bs=null,Fo(s,v,X,he),r&&jt){f=0;break e}break;default:he=Ht,Ht=0,Bs=null,Fo(s,v,X,he)}}X$(),f=ii;break}catch(Le){Np(s,Le)}while(!0);return o&&s.shellSuspendCounter++,ko=zn=null,Lt=l,ce.H=c,ce.A=h,ft===null&&(Xt=null,St=0,sn()),f}function X$(){for(;ft!==null;)lr(ft)}function Y$(s,o){var r=Lt;Lt|=2;var l=hi(),c=ol();Xt!==s||St!==o?(Gu=null,$a=M()+500,rr(s,o)):jt=Ue(s,o);e:do try{if(Ht!==0&&ft!==null){o=ft;var h=Bs;t:switch(Ht){case 1:Ht=0,Bs=null,Fo(s,o,h,1);break;case 2:case 9:if(it(h)){Ht=0,Bs=null,Lp(o);break}o=function(){Ht!==2&&Ht!==9||Xt!==s||(Ht=7),us(s)},h.then(o,o);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:it(h)?(Ht=0,Bs=null,Lp(o)):(Ht=0,Bs=null,Fo(s,o,h,7));break;case 5:var f=null;switch(ft.tag){case 26:f=ft.memoizedState;case 5:case 27:var v=ft;if(!f||Gp(f)){Ht=0,Bs=null;var X=v.sibling;if(X!==null)ft=X;else{var he=v.return;he!==null?(ft=he,di(he)):ft=null}break t}}Ht=0,Bs=null,Fo(s,o,h,5);break;case 6:Ht=0,Bs=null,Fo(s,o,h,6);break;case 8:zu(),ii=6;break e;default:throw Error(p(462))}}j$();break}catch(Le){Np(s,Le)}while(!0);return ko=zn=null,ce.H=l,ce.A=c,Lt=r,ft!==null?0:(Xt=null,St=0,sn(),ii)}function j$(){for(;ft!==null&&!me();)lr(ft)}function lr(s){var o=Bh(s.alternate,s,qs);s.memoizedProps=s.pendingProps,o===null?di(s):ft=o}function Lp(s){var o=s,r=o.alternate;switch(o.tag){case 15:case 0:o=gp(r,o,o.pendingProps,o.type,void 0,St);break;case 11:o=gp(r,o,o.pendingProps,o.type.render,o.ref,St);break;case 5:Vl(o);default:la(r,o),o=ft=Ud(o,qs),o=Bh(r,o,qs)}s.memoizedProps=s.pendingProps,o===null?di(s):ft=o}function Fo(s,o,r,l){ko=zn=null,Vl(o),er=null,ta=0;var c=o.return;try{if(F$(s,c,o,r,St)){ii=1,Mu(s,gs(r,s.current)),ft=null;return}}catch(h){if(c!==null)throw ft=c,h;ii=1,Mu(s,gs(r,s.current)),ft=null;return}o.flags&32768?(Nt||l===1?s=!0:jt||(St&536870912)!==0?s=!1:(Ai=s=!0,(l===2||l===9||l===3||l===6)&&(l=Zt.current,l!==null&&l.tag===13&&(l.flags|=16384))),ar(o,s)):di(o)}function di(s){var o=s;do{if((o.flags&32768)!==0){ar(o,Ai);return}s=o.return;var r=G$(o.alternate,o,qs);if(r!==null){ft=r;return}if(o=o.sibling,o!==null){ft=o;return}ft=o=s}while(o!==null);ii===0&&(ii=5)}function ar(s,o){do{var r=zt(s.alternate,s);if(r!==null){r.flags&=32767,ft=r;return}if(r=s.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(s=s.sibling,s!==null)){ft=s;return}ft=s=r}while(s!==null);ii=6,ft=null}function ur(s,o,r,l,c,h,f,v,X){s.cancelPendingCommit=null;do fa();while(Pi!==0);if((Lt&6)!==0)throw Error(p(327));if(o!==null){if(o===s.current)throw Error(p(177));if(h=o.lanes|o.childLanes,h|=Gn,y(s,r,h,f,v,X),s===Xt&&(ft=Xt=null,St=0),Uo=o,Tn=s,sl=r,Vh=h,En=c,Op=l,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Mp(Be,function(){return Yu(),null})):(s.callbackNode=null,s.callbackPriority=0),l=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||l){l=ce.T,ce.T=null,c=ue.p,ue.p=2,f=Lt,Lt|=4;try{bt(s,o,r)}finally{Lt=f,ue.p=c,ce.T=l}}Pi=1,Wu(),Xu(),kp()}}function Wu(){if(Pi===1){Pi=0;var s=Tn,o=Uo,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=ce.T,ce.T=null;var l=ue.p;ue.p=2;var c=Lt;Lt|=4;try{ca(o,s);var h=tc,f=Nl(s.containerInfo),v=h.focusedElem,X=h.selectionRange;if(f!==v&&v&&v.ownerDocument&&Yc(v.ownerDocument.documentElement,v)){if(X!==null&&Ka(v)){var he=X.start,Le=X.end;if(Le===void 0&&(Le=he),"selectionStart"in v)v.selectionStart=he,v.selectionEnd=Math.min(Le,v.value.length);else{var xe=v.ownerDocument||document,de=xe&&xe.defaultView||window;if(de.getSelection){var Te=de.getSelection(),H=v.textContent.length,nt=Math.min(X.start,H),Mt=X.end===void 0?nt:Math.min(X.end,H);!Te.extend&&nt>Mt&&(f=Mt,Mt=nt,nt=f);var ne=Xc(v,nt),Z=Xc(v,Mt);if(ne&&Z&&(Te.rangeCount!==1||Te.anchorNode!==ne.node||Te.anchorOffset!==ne.offset||Te.focusNode!==Z.node||Te.focusOffset!==Z.offset)){var pe=xe.createRange();pe.setStart(ne.node,ne.offset),Te.removeAllRanges(),nt>Mt?(Te.addRange(pe),Te.extend(Z.node,Z.offset)):(pe.setEnd(Z.node,Z.offset),Te.addRange(pe))}}}}for(xe=[],Te=v;Te=Te.parentNode;)Te.nodeType===1&&xe.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<xe.length;v++){var ke=xe[v];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}wt=!!gt,tc=gt=null}finally{Lt=c,ue.p=l,ce.T=r}}s.current=o,Pi=2}}function Xu(){if(Pi===2){Pi=0;var s=Tn,o=Uo,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=ce.T,ce.T=null;var l=ue.p;ue.p=2;var c=Lt;Lt|=4;try{bp(s,o.alternate,o)}finally{Lt=c,ue.p=l,ce.T=r}}Pi=3}}function kp(){if(Pi===4||Pi===3){Pi=0,Ee();var s=Tn,o=Uo,r=sl,l=Op;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Pi=5:(Pi=0,Uo=Tn=null,wp(s,s.pendingLanes));var c=s.pendingLanes;if(c===0&&(bo=null),Ke(r),o=o.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(qe,o,void 0,(o.current.flags&128)===128)}catch{}if(l!==null){o=ce.T,c=ue.p,ue.p=2,ce.T=null;try{for(var h=s.onRecoverableError,f=0;f<l.length;f++){var v=l[f];h(v.value,{componentStack:v.stack})}}finally{ce.T=o,ue.p=c}}(sl&3)!==0&&fa(),us(s),c=s.pendingLanes,(r&4194090)!==0&&(c&42)!==0?s===zh?ga++:(ga=0,zh=s):ga=0,cr(0)}}function wp(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,xl(o)))}function fa(s){return Wu(),Xu(),kp(),Yu()}function Yu(){if(Pi!==5)return!1;var s=Tn,o=Vh;Vh=0;var r=Ke(sl),l=ce.T,c=ue.p;try{ue.p=32>r?32:r,ce.T=null,r=En,En=null;var h=Tn,f=sl;if(Pi=0,Uo=Tn=null,sl=0,(Lt&6)!==0)throw Error(p(331));var v=Lt;if(Lt|=4,yp(h.current),Po(h,h.current,f,r),Lt=v,cr(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(qe,h)}catch{}return!0}finally{ue.p=c,ce.T=l,wp(s,o)}}function Xh(s,o,r){o=gs(r,o),o=wh(s.stateNode,o,2),s=Mo(s,o,2),s!==null&&(g(s,2),us(s))}function Rt(s,o,r){if(s.tag===3)Xh(s,s,r);else for(;o!==null;){if(o.tag===3){Xh(o,s,r);break}else if(o.tag===1){var l=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(bo===null||!bo.has(l))){s=gs(r,s),r=U$(2),l=Mo(o,r,2),l!==null&&(hp(r,l,o,s),g(l,2),us(l));break}}o=o.return}}function Yh(s,o,r){var l=s.pingCache;if(l===null){l=s.pingCache=new W$;var c=new Set;l.set(o,c)}else c=l.get(o),c===void 0&&(c=new Set,l.set(o,c));c.has(r)||(il=!0,c.add(r),s=K$.bind(null,s,o,r),o.then(s,s))}function K$(s,o,r){var l=s.pingCache;l!==null&&l.delete(o),s.pingedLanes|=s.suspendedLanes&r,s.warmLanes&=~r,Xt===s&&(St&r)===r&&(ii===4||ii===3&&(St&62914560)===St&&300>M()-nr?(Lt&2)===0&&rr(s,0):da|=r,pa===St&&(pa=0)),us(s)}function si(s,o){o===0&&(o=Os()),s=on(s,o),s!==null&&(g(s,o),us(s))}function ju(s){var o=s.memoizedState,r=0;o!==null&&(r=o.retryLane),si(s,r)}function rl(s,o){var r=0;switch(s.tag){case 13:var l=s.stateNode,c=s.memoizedState;c!==null&&(r=c.retryLane);break;case 19:l=s.stateNode;break;case 22:l=s.stateNode._retryCache;break;default:throw Error(p(314))}l!==null&&l.delete(o),si(s,r)}function Mp(s,o){return Ge(s,o)}var So=null,ll=null,_a=!1,al=!1,Ku=!1,mi=0;function us(s){s!==ll&&s.next===null&&(ll===null?So=ll=s:ll=ll.next=s),al=!0,_a||(_a=!0,Bp())}function cr(s,o){if(!Ku&&al){Ku=!0;do for(var r=!1,l=So;l!==null;){if(s!==0){var c=l.pendingLanes;if(c===0)var h=0;else{var f=l.suspendedLanes,v=l.pingedLanes;h=(1<<31-ht(42|s)+1)-1,h&=c&~(f&~v),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(r=!0,hr(l,h))}else h=St,h=ie(l,l===Xt?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Ue(l,h)||(r=!0,hr(l,h));l=l.next}while(r);Ku=!1}}function Ju(){ul()}function ul(){al=_a=!1;var s=0;mi!==0&&(id()&&(s=mi),mi=0);for(var o=M(),r=null,l=So;l!==null;){var c=l.next,h=Dp(l,o);h===0?(l.next=null,r===null?So=c:r.next=c,c===null&&(ll=r)):(r=l,(s!==0||(h&3)!==0)&&(al=!0)),l=c}cr(s)}function Dp(s,o){for(var r=s.suspendedLanes,l=s.pingedLanes,c=s.expirationTimes,h=s.pendingLanes&-62914561;0<h;){var f=31-ht(h),v=1<<f,X=c[f];X===-1?((v&r)===0||(v&l)!==0)&&(c[f]=At(v,o)):X<=o&&(s.expiredLanes|=v),h&=~v}if(o=Xt,r=St,r=ie(s,s===o?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l=s.callbackNode,r===0||s===o&&(Ht===2||Ht===9)||s.cancelPendingCommit!==null)return l!==null&&l!==null&&_(l),s.callbackNode=null,s.callbackPriority=0;if((r&3)===0||Ue(s,r)){if(o=r&-r,o===s.callbackPriority)return o;switch(l!==null&&_(l),Ke(r)){case 2:case 8:r=we;break;case 32:r=Be;break;case 268435456:r=Ve;break;default:r=Be}return l=xp.bind(null,s),r=Ge(r,l),s.callbackPriority=o,s.callbackNode=r,o}return l!==null&&l!==null&&_(l),s.callbackPriority=2,s.callbackNode=null,2}function xp(s,o){if(Pi!==0&&Pi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var r=s.callbackNode;if(fa()&&s.callbackNode!==r)return null;var l=St;return l=ie(s,s===Xt?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),l===0?null:(Cp(s,l,o),Dp(s,M()),s.callbackNode!=null&&s.callbackNode===r?xp.bind(null,s):null)}function hr(s,o){if(fa())return null;Cp(s,o,!0)}function Bp(){Q$(function(){(Lt&6)!==0?Ge(se,Ju):ul()})}function qu(){return mi===0&&(mi=ds()),mi}function Ps(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Cr(""+s)}function ma(s,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,s.id&&r.setAttribute("form",s.id),o.parentNode.insertBefore(r,o),s=new FormData(s),r.parentNode.removeChild(r),s}function Pp(s,o,r,l,c){if(o==="submit"&&r&&r.stateNode===c){var h=Ps((c[Vt]||null).action),f=l.submitter;f&&(o=(o=f[Vt]||null)?Ps(o.formAction):f.getAttribute("formAction"),o!==null&&(h=o,f=null));var v=new Il("action","action",null,l,c);s.push({event:v,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(mi!==0){var X=f?ma(c,f):new FormData(c);yu(r,{pending:!0,data:X,method:c.method,action:h},null,X)}}else typeof h=="function"&&(v.preventDefault(),X=f?ma(c,f):new FormData(c),yu(r,{pending:!0,data:X,method:c.method,action:h},h,X))},currentTarget:c}]})}}for(var Zu=0;Zu<tn.length;Zu++){var jh=tn[Zu],J$=jh.toLowerCase(),Kh=jh[0].toUpperCase()+jh.slice(1);As(J$,"on"+Kh)}As(Jc,"onAnimationEnd"),As(Pd,"onAnimationIteration"),As(qc,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(k$,"onTransitionRun"),As(Hr,"onTransitionStart"),As(qa,"onTransitionCancel"),As(Za,"onTransitionEnd"),vr("onMouseEnter",["mouseout","mouseover"]),vr("onMouseLeave",["mouseout","mouseover"]),vr("onPointerEnter",["pointerout","pointerover"]),vr("onPointerLeave",["pointerout","pointerover"]),Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Us=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oi));function Jh(s,o){o=(o&4)!==0;for(var r=0;r<s.length;r++){var l=s[r],c=l.event;l=l.listeners;e:{var h=void 0;if(o)for(var f=l.length-1;0<=f;f--){var v=l[f],X=v.instance,he=v.currentTarget;if(v=v.listener,X!==h&&c.isPropagationStopped())break e;h=v,c.currentTarget=he;try{h(c)}catch(Le){Lu(Le)}c.currentTarget=null,h=X}else for(f=0;f<l.length;f++){if(v=l[f],X=v.instance,he=v.currentTarget,v=v.listener,X!==h&&c.isPropagationStopped())break e;h=v,c.currentTarget=he;try{h(c)}catch(Le){Lu(Le)}c.currentTarget=null,h=X}}}}function mt(s,o){var r=o[wa];r===void 0&&(r=o[wa]=new Set);var l=s+"__bubble";r.has(l)||(kt(o,s,2,!1),r.add(l))}function qh(s,o,r){var l=0;o&&(l|=4),kt(r,s,l,o)}var cs="_reactListening"+Math.random().toString(36).slice(2);function cl(s){if(!s[cs]){s[cs]=!0,Sr.forEach(function(r){r!=="selectionchange"&&(Us.has(r)||qh(r,!1,s),qh(r,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[cs]||(o[cs]=!0,qh("selectionchange",!1,o))}}function kt(s,o,r,l){switch(Wp(o)){case 2:var c=ig;break;case 8:c=ad;break;default:c=$r}r=c.bind(null,o,r,s),c=void 0,!vl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(c=!0),l?c!==void 0?s.addEventListener(o,r,{capture:!0,passive:c}):s.addEventListener(o,r,!0):c!==void 0?s.addEventListener(o,r,{passive:c}):s.addEventListener(o,r,!1)}function ni(s,o,r,l,c){var h=l;if((o&1)===0&&(o&2)===0&&l!==null)e:for(;;){if(l===null)return;var f=l.tag;if(f===3||f===4){var v=l.stateNode.containerInfo;if(v===c)break;if(f===4)for(f=l.return;f!==null;){var X=f.tag;if((X===3||X===4)&&f.stateNode.containerInfo===c)return;f=f.return}for(;v!==null;){if(f=Dn(v),f===null)return;if(X=f.tag,X===5||X===6||X===26||X===27){l=h=f;continue e}v=v.parentNode}}l=l.return}Di(function(){var he=h,Le=Nc(r),xe=[];e:{var de=Qa.get(s);if(de!==void 0){var Te=Il,H=s;switch(s){case"keypress":if(Nr(r)===0)break e;case"keydown":case"keyup":Te=S$;break;case"focusin":H="focus",Te=kc;break;case"focusout":H="blur",Te=kc;break;case"beforeblur":case"afterblur":Te=kc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=p$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=I$;break;case Jc:case Pd:case qc:Te=f$;break;case Za:Te=O$;break;case"scroll":case"scrollend":Te=d$;break;case"wheel":Te=Mc;break;case"copy":case"cut":case"paste":Te=m$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Cd;break;case"toggle":case"beforetoggle":Te=Cl}var nt=(o&4)!==0,Mt=!nt&&(s==="scroll"||s==="scrollend"),ne=nt?de!==null?de+"Capture":null:de;nt=[];for(var Z=he,pe;Z!==null;){var ke=Z;if(pe=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||pe===null||ne===null||(ke=Pn(Z,ne),ke!=null&&nt.push(Ho(Z,ke,pe))),Mt)break;Z=Z.return}0<nt.length&&(de=new Te(de,H,null,r,Le),xe.push({event:de,listeners:nt}))}}if((o&7)===0){e:{if(de=s==="mouseover"||s==="pointerover",Te=s==="mouseout"||s==="pointerout",de&&r!==Ac&&(H=r.relatedTarget||r.fromElement)&&(Dn(H)||H[Rs]))break e;if((Te||de)&&(de=Le.window===Le?Le:(de=Le.ownerDocument)?de.defaultView||de.parentWindow:window,Te?(H=r.relatedTarget||r.toElement,Te=he,H=H?Dn(H):null,H!==null&&(Mt=b(H),nt=H.tag,H!==Mt||nt!==5&&nt!==27&&nt!==6)&&(H=null)):(Te=null,H=he),Te!==H)){if(nt=Lr,ke="onMouseLeave",ne="onMouseEnter",Z="mouse",(s==="pointerout"||s==="pointerover")&&(nt=Cd,ke="onPointerLeave",ne="onPointerEnter",Z="pointer"),Mt=Te==null?de:br(Te),pe=H==null?de:br(H),de=new nt(ke,Z+"leave",Te,r,Le),de.target=Mt,de.relatedTarget=pe,ke=null,Dn(Le)===he&&(nt=new nt(ne,Z+"enter",H,r,Le),nt.target=pe,nt.relatedTarget=Mt,ke=nt),Mt=ke,Te&&H)t:{for(nt=Te,ne=H,Z=0,pe=nt;pe;pe=vn(pe))Z++;for(pe=0,ke=ne;ke;ke=vn(ke))pe++;for(;0<Z-pe;)nt=vn(nt),Z--;for(;0<pe-Z;)ne=vn(ne),pe--;for(;Z--;){if(nt===ne||ne!==null&&nt===ne.alternate)break t;nt=vn(nt),ne=vn(ne)}nt=null}else nt=null;Te!==null&&Zh(xe,de,Te,nt,!1),H!==null&&Mt!==null&&Zh(xe,Mt,H,nt,!0)}}e:{if(de=he?br(he):window,Te=de.nodeName&&de.nodeName.toLowerCase(),Te==="select"||Te==="input"&&de.type==="file")var tt=oo;else if(Fc(de))if(Gc)tt=A$;else{tt=xd;var Tt=Wc}else Te=de.nodeName,!Te||Te.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?he&&Rc(he.elementType)&&(tt=oo):tt=C$;if(tt&&(tt=tt(s,he))){Md(xe,tt,r,Le);break e}Tt&&Tt(s,de,he),s==="focusout"&&he&&de.type==="number"&&he.memoizedProps.value!=null&&Co(de,"number",de.value)}switch(Tt=he?br(he):window,s){case"focusin":(Fc(Tt)||Tt.contentEditable==="true")&&(Pr=Tt,Ja=he,Ur=null);break;case"focusout":Ur=Ja=Pr=null;break;case"mousedown":no=!0;break;case"contextmenu":case"mouseup":case"dragend":no=!1,jc(xe,r,Le);break;case"selectionchange":if(L$)break;case"keydown":case"keyup":jc(xe,r,Le)}var lt;if(Xa)e:{switch(s){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Fn?Pc(s,r)&&(ot="onCompositionEnd"):s==="keydown"&&r.keyCode===229&&(ot="onCompositionStart");ot&&(Ya&&r.locale!=="ko"&&(Fn||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Fn&&(lt=Id()):(Yo=Le,za="value"in Yo?Yo.value:Yo.textContent,Fn=!0)),Tt=Qu(he,ot),0<Tt.length&&(ot=new Zo(ot,s,null,r,Le),xe.push({event:ot,listeners:Tt}),lt?ot.data=lt:(lt=Uc(r),lt!==null&&(ot.data=lt)))),(lt=xc?Ld(s,r):kd(s,r))&&(ot=Qu(he,"onBeforeInput"),0<ot.length&&(Tt=new Zo("onBeforeInput","beforeinput",null,r,Le),xe.push({event:Tt,listeners:ot}),Tt.data=lt)),Pp(xe,s,he,r,Le)}Jh(xe,o)})}function Ho(s,o,r){return{instance:s,listener:o,currentTarget:r}}function Qu(s,o){for(var r=o+"Capture",l=[];s!==null;){var c=s,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=Pn(s,r),c!=null&&l.unshift(Ho(s,c,h)),c=Pn(s,o),c!=null&&l.push(Ho(s,c,h))),s.tag===3)return l;s=s.return}return[]}function vn(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Zh(s,o,r,l,c){for(var h=o._reactName,f=[];r!==null&&r!==l;){var v=r,X=v.alternate,he=v.stateNode;if(v=v.tag,X!==null&&X===l)break;v!==5&&v!==26&&v!==27||he===null||(X=he,c?(he=Pn(r,h),he!=null&&f.unshift(Ho(r,he,X))):c||(he=Pn(r,h),he!=null&&f.push(Ho(r,he,X)))),r=r.return}f.length!==0&&s.push({event:o,listeners:f})}var Ta=/\r\n?/g,Ea=/\u0000|\uFFFD/g;function Es(s){return(typeof s=="string"?s:""+s).replace(Ta,`
`).replace(Ea,"")}function ec(s,o){return o=Es(o),Es(s)===o}function bs(){}function xt(s,o,r,l,c,h){switch(r){case"children":typeof l=="string"?o==="body"||o==="textarea"&&l===""||Bn(s,l):(typeof l=="number"||typeof l=="bigint")&&o!=="body"&&Bn(s,""+l);break;case"className":yr(s,"class",l);break;case"tabIndex":yr(s,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(s,r,l);break;case"style":Sl(s,l,h);break;case"data":if(o!=="object"){yr(s,"data",l);break}case"src":case"href":if(l===""&&(o!=="a"||r!=="href")){s.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(r);break}l=Cr(""+l),s.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){s.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(r==="formAction"?(o!=="input"&&xt(s,o,"name",c.name,c,null),xt(s,o,"formEncType",c.formEncType,c,null),xt(s,o,"formMethod",c.formMethod,c,null),xt(s,o,"formTarget",c.formTarget,c,null)):(xt(s,o,"encType",c.encType,c,null),xt(s,o,"method",c.method,c,null),xt(s,o,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){s.removeAttribute(r);break}l=Cr(""+l),s.setAttribute(r,l);break;case"onClick":l!=null&&(s.onclick=bs);break;case"onScroll":l!=null&&mt("scroll",s);break;case"onScrollEnd":l!=null&&mt("scrollend",s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(p(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(p(60));s.innerHTML=r}}break;case"multiple":s.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":s.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){s.removeAttribute("xlink:href");break}r=Cr(""+l),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(r,""+l):s.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(r,""):s.removeAttribute(r);break;case"capture":case"download":l===!0?s.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?s.setAttribute(r,l):s.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?s.setAttribute(r,l):s.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?s.removeAttribute(r):s.setAttribute(r,l);break;case"popover":mt("beforetoggle",s),mt("toggle",s),xa(s,"popover",l);break;case"xlinkActuate":eo(s,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":eo(s,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":eo(s,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":eo(s,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":eo(s,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":eo(s,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":eo(s,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":eo(s,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":eo(s,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":xa(s,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Cc.get(r)||r,xa(s,r,l))}}function Qh(s,o,r,l,c,h){switch(r){case"style":Sl(s,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(p(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(p(60));s.innerHTML=r}}break;case"children":typeof l=="string"?Bn(s,l):(typeof l=="number"||typeof l=="bigint")&&Bn(s,""+l);break;case"onScroll":l!=null&&mt("scroll",s);break;case"onScrollEnd":l!=null&&mt("scrollend",s);break;case"onClick":l!=null&&(s.onclick=bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bd.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),o=r.slice(2,c?r.length-7:void 0),h=s[Vt]||null,h=h!=null?h[r]:null,typeof h=="function"&&s.removeEventListener(o,h,c),typeof l=="function")){typeof h!="function"&&h!==null&&(r in s?s[r]=null:s.hasAttribute(r)&&s.removeAttribute(r)),s.addEventListener(o,l,c);break e}r in s?s[r]=l:l===!0?s.setAttribute(r,""):xa(s,r,l)}}}function Ni(s,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",s),mt("load",s);var l=!1,c=!1,h;for(h in r)if(r.hasOwnProperty(h)){var f=r[h];if(f!=null)switch(h){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,o));default:xt(s,o,h,f,r,null)}}c&&xt(s,o,"srcSet",r.srcSet,r,null),l&&xt(s,o,"src",r.src,r,null);return;case"input":mt("invalid",s);var v=h=f=c=null,X=null,he=null;for(l in r)if(r.hasOwnProperty(l)){var Le=r[l];if(Le!=null)switch(l){case"name":c=Le;break;case"type":f=Le;break;case"checked":X=Le;break;case"defaultChecked":he=Le;break;case"value":h=Le;break;case"defaultValue":v=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(p(137,o));break;default:xt(s,o,l,Le,r,null)}}to(s,h,v,X,he,f,c,!1),Fa(s);return;case"select":mt("invalid",s),l=f=h=null;for(c in r)if(r.hasOwnProperty(c)&&(v=r[c],v!=null))switch(c){case"value":h=v;break;case"defaultValue":f=v;break;case"multiple":l=v;default:xt(s,o,c,v,r,null)}o=h,r=f,s.multiple=!!l,o!=null?Rr(s,!!l,o,!1):r!=null&&Rr(s,!!l,r,!0);return;case"textarea":mt("invalid",s),h=c=l=null;for(f in r)if(r.hasOwnProperty(f)&&(v=r[f],v!=null))switch(f){case"value":l=v;break;case"defaultValue":c=v;break;case"children":h=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(p(91));break;default:xt(s,o,f,v,r,null)}Ga(s,l,c,h),Fa(s);return;case"option":for(X in r)if(r.hasOwnProperty(X)&&(l=r[X],l!=null))switch(X){case"selected":s.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:xt(s,o,X,l,r,null)}return;case"dialog":mt("beforetoggle",s),mt("toggle",s),mt("cancel",s),mt("close",s);break;case"iframe":case"object":mt("load",s);break;case"video":case"audio":for(l=0;l<oi.length;l++)mt(oi[l],s);break;case"image":mt("error",s),mt("load",s);break;case"details":mt("toggle",s);break;case"embed":case"source":case"link":mt("error",s),mt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in r)if(r.hasOwnProperty(he)&&(l=r[he],l!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,o));default:xt(s,o,he,l,r,null)}return;default:if(Rc(o)){for(Le in r)r.hasOwnProperty(Le)&&(l=r[Le],l!==void 0&&Qh(s,o,Le,l,r,void 0));return}}for(v in r)r.hasOwnProperty(v)&&(l=r[v],l!=null&&xt(s,o,v,l,r,null))}function hl(s,o,r,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,f=null,v=null,X=null,he=null,Le=null;for(Te in r){var xe=r[Te];if(r.hasOwnProperty(Te)&&xe!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":X=xe;default:l.hasOwnProperty(Te)||xt(s,o,Te,null,l,xe)}}for(var de in l){var Te=l[de];if(xe=r[de],l.hasOwnProperty(de)&&(Te!=null||xe!=null))switch(de){case"type":h=Te;break;case"name":c=Te;break;case"checked":he=Te;break;case"defaultChecked":Le=Te;break;case"value":f=Te;break;case"defaultValue":v=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(p(137,o));break;default:Te!==xe&&xt(s,o,de,Te,l,xe)}}Ha(s,f,v,X,he,Le,h,c);return;case"select":Te=f=v=de=null;for(h in r)if(X=r[h],r.hasOwnProperty(h)&&X!=null)switch(h){case"value":break;case"multiple":Te=X;default:l.hasOwnProperty(h)||xt(s,o,h,null,l,X)}for(c in l)if(h=l[c],X=r[c],l.hasOwnProperty(c)&&(h!=null||X!=null))switch(c){case"value":de=h;break;case"defaultValue":v=h;break;case"multiple":f=h;default:h!==X&&xt(s,o,c,h,l,X)}o=v,r=f,l=Te,de!=null?Rr(s,!!r,de,!1):!!l!=!!r&&(o!=null?Rr(s,!!r,o,!0):Rr(s,!!r,r?[]:"",!1));return;case"textarea":Te=de=null;for(v in r)if(c=r[v],r.hasOwnProperty(v)&&c!=null&&!l.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:xt(s,o,v,null,l,c)}for(f in l)if(c=l[f],h=r[f],l.hasOwnProperty(f)&&(c!=null||h!=null))switch(f){case"value":de=c;break;case"defaultValue":Te=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(p(91));break;default:c!==h&&xt(s,o,f,c,l,h)}Ic(s,de,Te);return;case"option":for(var H in r)if(de=r[H],r.hasOwnProperty(H)&&de!=null&&!l.hasOwnProperty(H))switch(H){case"selected":s.selected=!1;break;default:xt(s,o,H,null,l,de)}for(X in l)if(de=l[X],Te=r[X],l.hasOwnProperty(X)&&de!==Te&&(de!=null||Te!=null))switch(X){case"selected":s.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:xt(s,o,X,de,l,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in r)de=r[nt],r.hasOwnProperty(nt)&&de!=null&&!l.hasOwnProperty(nt)&&xt(s,o,nt,null,l,de);for(he in l)if(de=l[he],Te=r[he],l.hasOwnProperty(he)&&de!==Te&&(de!=null||Te!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(p(137,o));break;default:xt(s,o,he,de,l,Te)}return;default:if(Rc(o)){for(var Mt in r)de=r[Mt],r.hasOwnProperty(Mt)&&de!==void 0&&!l.hasOwnProperty(Mt)&&Qh(s,o,Mt,void 0,l,de);for(Le in l)de=l[Le],Te=r[Le],!l.hasOwnProperty(Le)||de===Te||de===void 0&&Te===void 0||Qh(s,o,Le,de,l,Te);return}}for(var ne in r)de=r[ne],r.hasOwnProperty(ne)&&de!=null&&!l.hasOwnProperty(ne)&&xt(s,o,ne,null,l,de);for(xe in l)de=l[xe],Te=r[xe],!l.hasOwnProperty(xe)||de===Te||de==null&&Te==null||xt(s,o,xe,de,l,Te)}var gt=null,tc=null;function vo(s){return s.nodeType===9?s:s.ownerDocument}function ic(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q$(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function ed(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var td=null;function id(){var s=window.event;return s&&s.type==="popstate"?s===td?!1:(td=s,!0):(td=null,!1)}var Up=typeof setTimeout=="function"?setTimeout:void 0,Z$=typeof clearTimeout=="function"?clearTimeout:void 0,sd=typeof Promise=="function"?Promise:void 0,Q$=typeof queueMicrotask=="function"?queueMicrotask:typeof sd<"u"?function(s){return sd.resolve(null).then(s).catch(eg)}:Up;function eg(s){setTimeout(function(){throw s})}function yn(s){return s==="head"}function ba(s,o){var r=o,l=0,c=0;do{var h=r.nextSibling;if(s.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"){if(0<l&&8>l){r=l;var f=s.ownerDocument;if(r&1&&pl(f.documentElement),r&2&&pl(f.body),r&4)for(r=f.head,pl(r),f=r.firstChild;f;){var v=f.nextSibling,X=f.nodeName;f[Wo]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&f.rel.toLowerCase()==="stylesheet"||r.removeChild(f),f=v}}if(c===0){s.removeChild(h),Aa(o);return}c--}else r==="$"||r==="$?"||r==="$!"?c++:l=r.charCodeAt(0)-48;else l=0;r=h}while(r);Aa(o)}function Sa(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Sa(r),El(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}s.removeChild(r)}}function Go(s,o,r,l){for(;s.nodeType===1;){var c=r;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!l&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(l){if(!s[Wo])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(h=s.getAttribute("rel"),h==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(h!==c.rel||s.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||s.getAttribute("title")!==(c.title==null?null:c.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(h=s.getAttribute("src"),(h!==(c.src==null?null:c.src)||s.getAttribute("type")!==(c.type==null?null:c.type)||s.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&s.getAttribute("name")===h)return s}else return s;if(s=Fs(s.nextSibling),s===null)break}return null}function es(s,o,r){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Fs(s.nextSibling),s===null))return null;return s}function sc(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function vg(s,o){var r=s.ownerDocument;if(s.data!=="$?"||r.readyState==="complete")o();else{var l=function(){o(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),s._reactRetry=l}}function Fs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var oc=null;function Je(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var r=s.data;if(r==="$"||r==="$!"||r==="$?"){if(o===0)return s;o--}else r==="/$"&&o++}s=s.previousSibling}return null}function dl(s,o,r){switch(o=vo(r),s){case"html":if(s=o.documentElement,!s)throw Error(p(452));return s;case"head":if(s=o.head,!s)throw Error(p(453));return s;case"body":if(s=o.body,!s)throw Error(p(454));return s;default:throw Error(p(451))}}function pl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);El(s)}var Ss=new Map,Fp=new Set;function $l(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ei=ue.d;ue.d={f:gl,r:yg,D:Vo,C:tg,L:Hs,m:Bt,X:rc,S:In,M:od};function gl(){var s=ei.f(),o=Vu();return s||o}function yg(s){var o=xn(s);o!==null&&o.tag===5&&o.type==="form"?Zl(o):ei.r(s)}var va=typeof document>"u"?null:document;function nc(s,o,r){var l=va;if(l&&typeof o=="string"&&o){var c=Ki(o);c='link[rel="'+s+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Fp.has(c)||(Fp.add(c),s={rel:s,crossOrigin:r,href:o},l.querySelector(c)===null&&(o=l.createElement("link"),Ni(o,"link",s),Mi(o),l.head.appendChild(o)))}}function Vo(s){ei.D(s),nc("dns-prefetch",s,null)}function tg(s,o){ei.C(s,o),nc("preconnect",s,o)}function Hs(s,o,r){ei.L(s,o,r);var l=va;if(l&&s&&o){var c='link[rel="preload"][as="'+Ki(o)+'"]';o==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+Ki(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+Ki(r.imageSizes)+'"]')):c+='[href="'+Ki(s)+'"]';var h=c;switch(o){case"style":h=yo(s);break;case"script":h=vs(s)}Ss.has(h)||(s=z({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:s,as:o},r),Ss.set(h,s),l.querySelector(c)!==null||o==="style"&&l.querySelector(ac(h))||o==="script"&&l.querySelector(Yt(h))||(o=l.createElement("link"),Ni(o,"link",s),Mi(o),l.head.appendChild(o)))}}function Bt(s,o){ei.m(s,o);var r=va;if(r&&s){var l=o&&typeof o.as=="string"?o.as:"script",c='link[rel="modulepreload"][as="'+Ki(l)+'"][href="'+Ki(s)+'"]',h=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=vs(s)}if(!Ss.has(h)&&(s=z({rel:"modulepreload",href:s},o),Ss.set(h,s),r.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Yt(h)))return}l=r.createElement("link"),Ni(l,"link",s),Mi(l),r.head.appendChild(l)}}}function In(s,o,r){ei.S(s,o,r);var l=va;if(l&&s){var c=Qs(l).hoistableStyles,h=yo(s);o=o||"default";var f=c.get(h);if(!f){var v={loading:0,preload:null};if(f=l.querySelector(ac(h)))v.loading=5;else{s=z({rel:"stylesheet",href:s,"data-precedence":o},r),(r=Ss.get(h))&&nd(s,r);var X=f=l.createElement("link");Mi(X),Ni(X,"link",s),X._p=new Promise(function(he,Le){X.onload=he,X.onerror=Le}),X.addEventListener("load",function(){v.loading|=1}),X.addEventListener("error",function(){v.loading|=2}),v.loading|=4,uc(f,o,l)}f={type:"stylesheet",instance:f,count:1,state:v},c.set(h,f)}}}function rc(s,o){ei.X(s,o);var r=va;if(r&&s){var l=Qs(r).hoistableScripts,c=vs(s),h=l.get(c);h||(h=r.querySelector(Yt(c)),h||(s=z({src:s,async:!0},o),(o=Ss.get(c))&&On(s,o),h=r.createElement("script"),Mi(h),Ni(h,"link",s),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function od(s,o){ei.M(s,o);var r=va;if(r&&s){var l=Qs(r).hoistableScripts,c=vs(s),h=l.get(c);h||(h=r.querySelector(Yt(c)),h||(s=z({src:s,async:!0,type:"module"},o),(o=Ss.get(c))&&On(s,o),h=r.createElement("script"),Mi(h),Ni(h,"link",s),r.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function lc(s,o,r,l){var c=(c=He.current)?$l(c):null;if(!c)throw Error(p(446));switch(s){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=yo(r.href),r=Qs(c).hoistableStyles,l=r.get(o),l||(l={type:"style",instance:null,count:0,state:null},r.set(o,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){s=yo(r.href);var h=Qs(c).hoistableStyles,f=h.get(s);if(f||(c=c.ownerDocument||c,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(s,f),(h=c.querySelector(ac(s)))&&!h._p&&(f.instance=h,f.state.loading=5),Ss.has(s)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ss.set(s,r),h||Ut(c,s,r,f.state))),o&&l===null)throw Error(p(528,""));return f}if(o&&l!==null)throw Error(p(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=vs(r),r=Qs(c).hoistableScripts,l=r.get(o),l||(l={type:"script",instance:null,count:0,state:null},r.set(o,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,s))}}function yo(s){return'href="'+Ki(s)+'"'}function ac(s){return'link[rel="stylesheet"]['+s+"]"}function Zs(s){return z({},s,{"data-precedence":s.precedence,precedence:null})}function Ut(s,o,r,l){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=s.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),Ni(o,"link",r),Mi(o),s.head.appendChild(o))}function vs(s){return'[src="'+Ki(s)+'"]'}function Yt(s){return"script[async]"+s}function vt(s,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var l=s.querySelector('style[data-href~="'+Ki(r.href)+'"]');if(l)return o.instance=l,Mi(l),l;var c=z({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(s.ownerDocument||s).createElement("style"),Mi(l),Ni(l,"style",c),uc(l,r.precedence,s),o.instance=l;case"stylesheet":c=yo(r.href);var h=s.querySelector(ac(c));if(h)return o.state.loading|=4,o.instance=h,Mi(h),h;l=Zs(r),(c=Ss.get(c))&&nd(l,c),h=(s.ownerDocument||s).createElement("link"),Mi(h);var f=h;return f._p=new Promise(function(v,X){f.onload=v,f.onerror=X}),Ni(h,"link",l),o.state.loading|=4,uc(h,r.precedence,s),o.instance=h;case"script":return h=vs(r.src),(c=s.querySelector(Yt(h)))?(o.instance=c,Mi(c),c):(l=r,(c=Ss.get(h))&&(l=z({},r),On(l,c)),s=s.ownerDocument||s,c=s.createElement("script"),Mi(c),Ni(c,"link",l),s.head.appendChild(c),o.instance=c);case"void":return null;default:throw Error(p(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(l=o.instance,o.state.loading|=4,uc(l,r.precedence,s));return o.instance}function uc(s,o,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,h=c,f=0;f<l.length;f++){var v=l[f];if(v.dataset.precedence===o)h=v;else if(h!==c)break}h?h.parentNode.insertBefore(s,h.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(s,o.firstChild))}function nd(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function On(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var cc=null;function dr(s,o,r){if(cc===null){var l=new Map,c=cc=new Map;c.set(r,l)}else c=cc,l=c.get(r),l||(l=new Map,c.set(r,l));if(l.has(s))return l;for(l.set(s,null),r=r.getElementsByTagName(s),c=0;c<r.length;c++){var h=r[c];if(!(h[Wo]||h[bi]||s==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var f=h.getAttribute(o)||"";f=s+f;var v=l.get(f);v?v.push(h):l.set(f,[h])}}return l}function rd(s,o,r){s=s.ownerDocument||s,s.head.insertBefore(r,o==="title"?s.querySelector("head > title"):null)}function Hp(s,o,r){if(r===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Gp(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ti=null;function ya(){}function zo(s,o,r){if(Ti===null)throw Error(p(475));var l=Ti;if(o.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var c=yo(r.href),h=s.querySelector(ac(c));if(h){s=h._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(l.count++,l=ts.bind(l),s.then(l,l)),o.state.loading|=4,o.instance=h,Mi(h);return}h=s.ownerDocument||s,r=Zs(r),(c=Ss.get(c))&&nd(r,c),h=h.createElement("link"),Mi(h);var f=h;f._p=new Promise(function(v,X){f.onload=v,f.onerror=X}),Ni(h,"link",r),o.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(l.count++,o=ts.bind(l),s.addEventListener("load",o),s.addEventListener("error",o))}}function Rn(){if(Ti===null)throw Error(p(475));var s=Ti;return s.stylesheets&&s.count===0&&pr(s,s.stylesheets),0<s.count?function(o){var r=setTimeout(function(){if(s.stylesheets&&pr(s,s.stylesheets),s.unsuspend){var l=s.unsuspend;s.unsuspend=null,l()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(r)}}:null}function ts(){if(this.count--,this.count===0){if(this.stylesheets)pr(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var hc=null;function pr(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,hc=new Map,o.forEach(ld,s),hc=null,ts.call(s))}function ld(s,o){if(!(o.state.loading&4)){var r=hc.get(s);if(r)var l=r.get(null);else{r=new Map,hc.set(s,r);for(var c=s.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var f=c[h];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(r.set(f.dataset.precedence,f),l=f)}l&&r.set(null,l)}c=o.instance,f=c.getAttribute("data-precedence"),h=r.get(f)||l,h===l&&r.set(null,c),r.set(f,c),this.count++,l=ts.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),h?h.parentNode.insertBefore(c,h.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(c,s.firstChild)),o.state.loading|=4}}var Cn={$$typeof:J,Provider:null,Consumer:null,_currentValue:Fe,_currentValue2:Fe,_threadCount:0};function dc(s,o,r,l,c,h,f,v){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.hiddenUpdates=Xi(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Ia(s,o,r,l,c,h,f,v,X,he,Le,xe){return s=new dc(s,o,r,f,v,X,he,xe),o=1,h===!0&&(o|=24),h=ss(3,null,null,o),s.current=h,h.stateNode=s,o=Dl(),o.refCount++,s.pooledCache=o,o.refCount++,h.memoizedState={element:l,isDehydrated:r,cache:o},Ul(h),s}function pc(s){return s?(s=zs,s):zs}function Vp(s,o,r,l,c,h){c=pc(c),l.context===null?l.context=c:l.pendingContext=c,l=wo(o),l.payload={element:r},h=h===void 0?null:h,h!==null&&(l.callback=h),r=Mo(s,l,o),r!==null&&(Ts(r,s,o),Xr(r,s,o))}function zp(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var r=s.retryLane;s.retryLane=r!==0&&r<o?r:o}}function $c(s,o){zp(s,o),(s=s.alternate)&&zp(s,o)}function Io(s){if(s.tag===13){var o=on(s,67108864);o!==null&&Ts(o,s,67108864),$c(s,67108864)}}var wt=!0;function ig(s,o,r,l){var c=ce.T;ce.T=null;var h=ue.p;try{ue.p=2,$r(s,o,r,l)}finally{ue.p=h,ce.T=c}}function ad(s,o,r,l){var c=ce.T;ce.T=null;var h=ue.p;try{ue.p=8,$r(s,o,r,l)}finally{ue.p=h,ce.T=c}}function $r(s,o,r,l){if(wt){var c=gc(l);if(c===null)ni(s,o,l,fc,r),sg(s,l);else if(Xp(c,s,o,r,l))l.stopPropagation();else if(sg(s,l),o&4&&-1<Ig.indexOf(s)){for(;c!==null;){var h=xn(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var f=ee(h.pendingLanes);if(f!==0){var v=h;for(v.pendingLanes|=2,v.entangledLanes|=2;f;){var X=1<<31-ht(f);v.entanglements[1]|=X,f&=~X}us(h),(Lt&6)===0&&($a=M()+500,cr(0))}}break;case 13:v=on(h,2),v!==null&&Ts(v,h,2),Vu(),$c(h,2)}if(h=gc(l),h===null&&ni(s,o,l,fc,r),h===c)break;c=h}c!==null&&l.stopPropagation()}else ni(s,o,l,null,r)}}function gc(s){return s=Nc(s),zi(s)}var fc=null;function zi(s){if(fc=null,s=Dn(s),s!==null){var o=b(s);if(o===null)s=null;else{var r=o.tag;if(r===13){if(s=I(o),s!==null)return s;s=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return fc=s,null}function Wp(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(B()){case se:return 2;case we:return 8;case Be:case le:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var ud=!1,Oo=null,An=null,Nn=null,_c=new Map,Oa=new Map,Ln=[],Ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sg(s,o){switch(s){case"focusin":case"focusout":Oo=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":_c.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oa.delete(o.pointerId)}}function Ra(s,o,r,l,c,h){return s===null||s.nativeEvent!==h?(s={blockedOn:o,domEventName:r,eventSystemFlags:l,nativeEvent:h,targetContainers:[c]},o!==null&&(o=xn(o),o!==null&&Io(o)),s):(s.eventSystemFlags|=l,o=s.targetContainers,c!==null&&o.indexOf(c)===-1&&o.push(c),s)}function Xp(s,o,r,l,c){switch(o){case"focusin":return Oo=Ra(Oo,s,o,r,l,c),!0;case"dragenter":return An=Ra(An,s,o,r,l,c),!0;case"mouseover":return Nn=Ra(Nn,s,o,r,l,c),!0;case"pointerover":var h=c.pointerId;return _c.set(h,Ra(_c.get(h)||null,s,o,r,l,c)),!0;case"gotpointercapture":return h=c.pointerId,Oa.set(h,Ra(Oa.get(h)||null,s,o,r,l,c)),!0}return!1}function Yp(s){var o=Dn(s.target);if(o!==null){var r=b(o);if(r!==null){if(o=r.tag,o===13){if(o=I(r),o!==null){s.blockedOn=o,Yi(s.priority,function(){if(r.tag===13){var l=ms();l=Ne(l);var c=on(r,l);c!==null&&Ts(c,r,l),$c(r,l)}});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){s.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ca(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var r=gc(s.nativeEvent);if(r===null){r=s.nativeEvent;var l=new r.constructor(r.type,r);Ac=l,r.target.dispatchEvent(l),Ac=null}else return o=xn(r),o!==null&&Io(o),s.blockedOn=r,!1;o.shift()}return!0}function fl(s,o,r){Ca(s)&&r.delete(o)}function og(){ud=!1,Oo!==null&&Ca(Oo)&&(Oo=null),An!==null&&Ca(An)&&(An=null),Nn!==null&&Ca(Nn)&&(Nn=null),_c.forEach(fl),Oa.forEach(fl)}function _l(s,o){s.blockedOn===o&&(s.blockedOn=null,ud||(ud=!0,Pe.unstable_scheduleCallback(Pe.unstable_NormalPriority,og)))}var mc=null;function Tc(s){mc!==s&&(mc=s,Pe.unstable_scheduleCallback(Pe.unstable_NormalPriority,function(){mc===s&&(mc=null);for(var o=0;o<s.length;o+=3){var r=s[o],l=s[o+1],c=s[o+2];if(typeof l!="function"){if(zi(l||r)===null)continue;break}var h=xn(r);h!==null&&(s.splice(o,3),o-=3,yu(h,{pending:!0,data:c,method:r.method,action:l},l,c))}}))}function Aa(s){function o(X){return _l(X,s)}Oo!==null&&_l(Oo,s),An!==null&&_l(An,s),Nn!==null&&_l(Nn,s),_c.forEach(o),Oa.forEach(o);for(var r=0;r<Ln.length;r++){var l=Ln[r];l.blockedOn===s&&(l.blockedOn=null)}for(;0<Ln.length&&(r=Ln[0],r.blockedOn===null);)Yp(r),r.blockedOn===null&&Ln.shift();if(r=(s.ownerDocument||s).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var c=r[l],h=r[l+1],f=c[Vt]||null;if(typeof h=="function")f||Tc(r);else if(f){var v=null;if(h&&h.hasAttribute("formAction")){if(c=h,f=h[Vt]||null)v=f.formAction;else if(zi(c)!==null)continue}else v=f.action;typeof v=="function"?r[l+1]=v:(r.splice(l,3),l-=3),Tc(r)}}}function jp(s){this._internalRoot=s}cd.prototype.render=jp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(p(409));var r=o.current,l=ms();Vp(r,l,s,o,null,null)},cd.prototype.unmount=jp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Vp(s.current,2,null,s,null,null),Vu(),o[Rs]=null}};function cd(s){this._internalRoot=s}cd.prototype.unstable_scheduleHydration=function(s){if(s){var o=ct();s={blockedOn:null,target:s,priority:o};for(var r=0;r<Ln.length&&o!==0&&o<Ln[r].priority;r++);Ln.splice(r,0,s),r===0&&Yp(s)}};var Ec=ze.version;if(Ec!=="19.1.0")throw Error(p(527,Ec,"19.1.0"));ue.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(p(188)):(s=Object.keys(s).join(","),Error(p(268,s)));return s=E(o),s=s!==null?C(s):null,s=s===null?null:s.stateNode,s};var Kp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ce,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{qe=hd.inject(Kp),ut=hd}catch{}}return r$.createRoot=function(s,o){if(!G(s))throw Error(p(299));var r=!1,l="",c=ku,h=wu,f=kh,v=null;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(l=o.identifierPrefix),o.onUncaughtError!==void 0&&(c=o.onUncaughtError),o.onCaughtError!==void 0&&(h=o.onCaughtError),o.onRecoverableError!==void 0&&(f=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(v=o.unstable_transitionCallbacks)),o=Ia(s,1,!1,null,null,r,l,c,h,f,v,null),s[Rs]=o.current,cl(s),new jp(o)},r$.hydrateRoot=function(s,o,r){if(!G(s))throw Error(p(299));var l=!1,c="",h=ku,f=wu,v=kh,X=null,he=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(X=r.unstable_transitionCallbacks),r.formState!==void 0&&(he=r.formState)),o=Ia(s,1,!0,o,r??null,l,c,h,f,v,X,he),o.context=pc(null),r=o.current,l=ms(),l=Ne(l),c=wo(l),c.callback=null,Mo(r,c,l),r=l,o.current.lanes=r,g(o,r),us(o),s[Rs]=o.current,cl(s),new cd(o)},r$.version="19.1.0",r$}var W_;function Vm(){if(W_)return af.exports;W_=1;function Pe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pe)}catch(ze){console.error(ze)}}return Pe(),af.exports=Gm(),af.exports}var zm=Vm(),mg={exports:{}},Wm=mg.exports,X_;function Tf(){return X_||(X_=1,function(Pe,ze){(function(u,p){Pe.exports=p()})(Wm,function(){var u={},p,G,b,I,S,E,C,z,V,j,A,U,O,P,w,L,J,x,D,Q,te,fe,oe,Se,Xe,Y,ve,T,Ie,ce,ue,Fe,Oe,N,W,q,Ce,Ae,Me,He,yt,Qe,pt,We,Dt,be,Ge,_,me,Ee,M,B,se,we,Be,le,Ve,Ye,k,qe,ut,Ze,ht,pi,Ct,wi,$,R,ee,ie,Ue,At,ds,Os,Xi,g,y,K,re,Ne,Ke,ct,Yi,ps,bi,Vt,Rs,wa,Td,Ed,vc,Wo,El,Dn,xn,br,Qs,Mi,Sr,bd,Ro,vr,Ma,Da,Sd,yc,xa,yr,eo,Ba,Pa,Xo,bl,Ir,a$,Or,ji,Ua,u$,Fa,vd,Cs,Si,Ki,Ha,to,Co,Rr,Ic,Ga,Bn,c$,Oc,Sl,Rc,Cc,h$,Cr,Ac,Nc,Ar,io,yd,Va,Di,Pn,so,vl,Un,Yo,za,yl,Id,Nr,Ao,Wa,is,jo,Il,Ol,d$,Ko,Lc,Jo,qo,Lr,Vs,p$,$$,kc,g$,f$,_$,m$,Od,Zo,Rl,Rd,T$,E$,wc,b$,S$,v$,Cd,y$,I$,Ad,O$,kr,Mc,R$,Cl,Dc,Xa,wr,xc,Ya,Bc,Nd,Pc,Uc,Fn,Ld,kd,wd,Fc,Md,Qo,Mr,Hc,Dr,oo,Gc,ja,xr,Vc,zc,Dd,Wc,xd,C$,A$,N$,$s,Al,Br,Xc,Yc,Nl,Ka,L$,Pr,Ja,Ur,no,jc,en,Fr,Kc,Bd,Hn,Jc,Pd,qc,k$,Hr,qa,Za,Qa,tn,As,eu,gs,Ot,Gr,Gn,sn,tu,iu,on,Vr,Ll,zs,su,ss,ou,No,Ud,nu,nn,Zc,ru,ro,zr,lu,au,Ns,Ji,rn,lo,Ws,Lo,Fd,Wr,uu,xi,ri,Nt,fs,Xs,Ys,Vn,Hd,Qc,kl,ao,eh,wl,th,zn,ko,ln,uo,ih,sh,Wn,cu,Xn,Fi,Ls,Gd,w$,Ml,M$,vi,Dl,xl,Bl,oh,Yn,an,Vd,hu,D$,zd,jn,nh,et,os,$i,ti,ks,Kn,it,qt,Wd,Pl,Xd,rh,un,Ul,du,wo,Mo,Xr,Jn,lh,Fl,Hl,Yr,ah,jr,Kr,ws,pu,qn,Hi,$t,Pt,gi,$u,Ms,Do,Zn,Jr,qr,Yd,fi,Gl,gu,uh,ch,x$,fu,hh,Vl,ns,yi,Zr,zl,Wl,Xl,js,Qr,Yl,_u,jd,dh,mu,Tu,Kd,Eu,ph,$h,B$,cn,gh,jl,bu,fh,Su,_h,mh,Th,Jd,Eh,Qn,Kl,bh,Jl,ql,qd,Zd,Qd,ep,tp,ip,Sh,vh,yh,vu,Ih,Oh,sp,yu,Iu,Zl,Ou,op,Rh,np,rp,Ch,el,Ru,Ql,Ah,Nh,ea,lp,ap,P$,er,ta,Cu,ia,Au,_e;p=function(e,t,i,n){if(!(e instanceof ye)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const a=t.toLowerCase();if(!i)throw Error("Can not register a null value");let d=hn[e],m=Nu[e];if(d||(d=hn[e]=Object.create(null),m=Nu[e]=Object.create(null)),G(e,i),!n&&d[a]&&d[a]!==i)throw Error('Name "'+a+'" with type "'+e+'" already registered.');d[a]=i,m[a]=t},G=function(e,t){switch(e){case String(ye.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},b=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const i=hn[e];i&&i[t]?(delete hn[e][t],delete Nu[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},I=function(e,t,i){e=`${e}`.toLowerCase(),t=t.toLowerCase();const n=hn[e];if(!n||!n[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",i)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return n[t]},S=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=hn[e])?!!e[t]:!1},E=function(e,t,i){return I(e,t,i)},C=function(e,t,i){return I(e,t,i)},z=function(e,t,i){e=`${e}`.toLowerCase();var n=hn[e];if(!n){if(n=`Unable to find [${e}] in the registry.`,i)throw Error(`${n} You must require or register a ${e} plugin.`);return console.warn(n),null}if(!t)return n;e=Nu[e],i=Object.create(null);for(const a of Object.keys(n))i[e[a]]=n[a];return i},V=function(e,t,i){return t=t.plugins[String(e)]||Zt,typeof t=="function"?t:E(e,t,i)},j=function(e,t){A(),oa=setTimeout(function(){t&&t.handleRightClick(e)},tr)},A=function(){oa&&(clearTimeout(oa),oa=0)},U=function(){_i=null},O=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&w(e)},P=function(e){return`${e.pointerId}`},w=function(e){const t=P(e);return _i?_i===t:e.type==="pointerdown"?(_i=t,!0):!1},L=function(e,t,i,n,a){function d(F){(a||O(F))&&(i?n.call(i,F):n(F))}const m=[];if(t in Bo)for(let F=0;F<Bo[t].length;F++){const Re=Bo[t][F];e.addEventListener(Re,d,!1),m.push([e,Re,d])}else e.addEventListener(t,d,!1),m.push([e,t,d]);return m},J=function(e,t,i,n){function a(m){i?n.call(i,m):n(m)}const d=[];if(t in Bo)for(let m=0;m<Bo[t].length;m++){const F=Bo[t][m];e.addEventListener(F,a,!1),d.push([e,F,a])}else e.addEventListener(t,a,!1),d.push([e,t,a]);return d},x=function(e){const t=e[e.length-1][2];for(;e.length;){const[i,n,a]=e.pop();i.removeEventListener(n,a,!1)}return t},D=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},Q=function(e){return e.ctrlKey&&Dh?!0:e.button===2},te=function(e,t,i){const n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,i||(i=t.getScreenCTM().inverse()),n.matrixTransform(i)},fe=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*pp,y:e.deltaY*pp};case 2:return{x:e.deltaX*$p,y:e.deltaY*$p}}},oe=function(){return"blockly-"+(mp++).toString(36)},Se=function(){return _p.genUid()},Xe=function(e){return e.type===$e.BLOCK_CREATE},Y=function(e){return e.type===$e.BLOCK_DELETE},ve=function(e){return e.type===$e.BLOCK_CHANGE},T=function(e){return e.type===$e.BLOCK_FIELD_INTERMEDIATE_CHANGE},Ie=function(e){return e.type===$e.BLOCK_MOVE},ce=function(e){return e.type===$e.CLICK},ue=function(e){return e.type===$e.BUBBLE_OPEN},Fe=function(e){return e.type===$e.VIEWPORT_CHANGE},u.setRecordUndo$$module$build$src$core$events$utils=function(e){na=e},Oe=function(){return na},N=function(e){Tp.fireInternal(e)},W=function(e){if(He()){if(!co.length)try{requestAnimationFrame(()=>{setTimeout(q,0)})}catch{setTimeout(q,0)}Ce(e)}},q=function(){const e=Ae(co);co.length=0;for(const t of e){if(!t.workspaceId)continue;let i;(i=ht(t.workspaceId))==null||i.fireChangeListener(t)}},Ce=function(e){if(ve(e)&&e.element==="mutation"){let t;for(t=co.length;t>0;t--){const i=co[t-1];if(i.group!==e.group||i.workspaceId!==e.workspaceId||!Ie(i)||i.newParentId!==e.blockId)break}co.splice(t,0,e)}else co.push(e)},Ae=function(e){const t=[];for(const i of e)if(e=t[t.length-1],!i.isNull())if(e&&e.workspaceId===i.workspaceId&&e.group===i.group)if(Ie(i)&&Ie(e)&&i.blockId===e.blockId){if(e.newParentId=i.newParentId,e.newInputName=i.newInputName,e.newCoordinate=i.newCoordinate,e.reason||i.reason){let n,a;e.reason=Array.from(new Set(((n=e.reason)!=null?n:[]).concat((a=i.reason)!=null?a:[])))}}else ve(i)&&ve(e)&&i.blockId===e.blockId&&i.element===e.element&&i.name===e.name?e.newValue=i.newValue:Fe(i)&&Fe(e)?(e.viewTop=i.viewTop,e.viewLeft=i.viewLeft,e.scale=i.scale,e.oldScale=i.oldScale):ce(i)&&ue(e)||t.push(i);else t.push(i);return e=t.filter(i=>!i.isNull())},Me=function(){for(let e=0,t;t=co[e];e++)t.recordUndo=!1},u.disable$$module$build$src$core$events$utils=function(){xu++},u.enable$$module$build$src$core$events$utils=function(){xu--},He=function(){return xu===0},u.getGroup$$module$build$src$core$events$utils=function(){return xh},u.setGroup$$module$build$src$core$events$utils=function(e){Tp.setGroupInternal(e)},yt=function(e){xh=typeof e=="boolean"?e?Se():"":e},Qe=function(e){const t=[];e=e.getDescendants(!1);for(let i=0,n;n=e[i];i++)t[i]=n.id;return t},pt=function(e,t){const i=We(e.type);if(!i)throw Error("Unknown event type.");return i.fromJson(e,t)},We=function(e){const t=E(ye.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},Dt=function(e){if((Ie(e)||Xe(e))&&e.workspaceId){var t=ht(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const i=na;try{na=!1;const n=e.getParent();if(n&&!n.hasDisabledReason(ra)){const a=e.getDescendants(!1);for(let d=0,m;m=a[d];d++)m.setDisabledReason(!1,ra)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,ra),e=e.getNextBlock();while(e)}finally{na=i}}}},be=function(e,t,i){e=document.createElementNS(tl,`${e}`);for(const n in t)e.setAttribute(n,`${t[n]}`);return i&&i.appendChild(e),e},Ge=function(e,t){return t=t.split(" "),t.every(i=>e.classList.contains(i))?!1:(e.classList.add(...t),!0)},_=function(e,t){e.classList.remove(...t.split(" "))},me=function(e,t){return t=t.split(" "),t.every(i=>!e.classList.contains(i))?!1:(e.classList.remove(...t),!0)},Ee=function(e,t){return e.classList.contains(t)},M=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},B=function(e,t){const i=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");i?t.insertBefore(e,i):t.appendChild(e)},se=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},we=function(){Bh++,$o||($o=Object.create(null))},Be=function(){Bh--,Bh||($o=null)},le=function(e){const t=e.textContent+`
`+e.className.baseVal;var i;return $o&&(i=$o[t])||(i=window.getComputedStyle(e),i=Ye(e,i.fontSize,i.fontWeight,i.fontFamily),$o&&($o[t]=i)),i},Ve=function(e,t,i,n){return Ye(e,t+"pt",i,n)},Ye=function(e,t,i,n){const a=e.textContent;e=a+`
`+e.className.baseVal;var d;return $o&&(d=$o[e])||(Ds||(d=document.createElement("canvas"),d.className="blocklyComputeCanvas",document.body.appendChild(d),Ds=d.getContext("2d")),a&&Ds?(Ds.font=i+" "+t+" "+n,d=Ds.measureText(a).width):d=0,$o&&($o[e]=d)),d},k=function(e,t,i,n){const a=document.createElement("span");a.style.font=i+" "+t+" "+n,a.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(a),t.appendChild(e),document.body.appendChild(t),i={height:0,baseline:0};try{t.style.alignItems="baseline",i.baseline=e.offsetTop-a.offsetTop,t.style.alignItems="flex-end",i.height=e.offsetTop-a.offsetTop}finally{document.body.removeChild(t)}return i},u.getFocusManager$$module$build$src$core$focus_manager=function(){return _t.getFocusManager()},qe=function(e){return e&&typeof e.getFocusableElement=="function"&&typeof e.getFocusableTree=="function"&&typeof e.onNodeFocus=="function"&&typeof e.onNodeBlur=="function"&&typeof e.canBeFocused=="function"},ut=function(e){return qe(e)&&typeof e.id=="string"&&typeof e.workspace=="object"&&typeof e.select=="function"&&typeof e.unselect=="function"},Ze=function(e,t){for(const i in t)t[i]!==null&&Array.isArray(t[i])?e[i]=Ze(e[i]||[],t[i]):e[i]=t[i]!==null&&typeof t[i]=="object"?Ze(e[i]||Object.create(null),t[i]):t[i];return e},ht=function(e){return la[e]||null},pi=function(){const e=[];for(const t in la)e.push(la[t]);return e},Ct=function(e){la[e.id]=e},wi=function(e){delete la[e.id]},$=function(){return aa},R=function(e){aa=e},ee=function(){const e=u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();return e&&ut(e)?e:null},ie=function(e){u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)},Ue=function(e){const t=ee();let i,n,a,d;const m=new(We($e.SELECTED))((i=t?.id)!=null?i:null,(n=e?.id)!=null?n:null,(d=(a=e?.workspace.id)!=null?a:t?.workspace.id)!=null?d:"");N(m)},At=function(){return pn},ds=function(e){pn=e},Os=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),i=e.getCachedParentSvgSize();var n=t.parentElement;if(n instanceof HTMLElement){var a=n.offsetWidth;n=n.offsetHeight,i.width!==a&&(t.setAttribute("width",a+"px"),e.setCachedParentSvgSize(a,null)),i.height!==n&&(t.setAttribute("height",n+"px"),e.setCachedParentSvgSize(null,n)),e.resize()}},Xi=function(e,t){const i=Object.create(null),n=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=n.indexOf(e),n.splice(e,n.length-e));for(let a=0,d;d=n[a];a++)i[d.type]?i[d.type]++:i[d.type]=1;return i},g=function(e){return function(){this.jsonInit(e)}},y=function(e){Ep.defineBlocksWithJsonArrayInternal(e)},K=function(e){u.defineBlocks$$module$build$src$core$common(u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let i=0;i<e.length;i++){const n=e[i];if(!n){console.warn(`Block definition #${i} in JSON array is ${n}. Skipping`);continue}const a=n.type;a?t[a]={init:g(n)}:console.warn(`Block definition #${i} in JSON array is missing a type attribute. Skipping.`)}return t},u.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const i=e[t];t in Kt&&console.warn(`Block definition "${t}" overwrites previous definition.`),Kt[t]=i}},re=function(e){let t=$();const i=u.getFocusManager$$module$build$src$core$focus_manager().getFocusedTree();for(const n of pi())if(i===n){t=n;break}!D(e)&&t&&(!t.rendered||t.isFlyout||t.isVisible())&&zt.registry.onKeyDown(t,e)},Ne=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},Ke=function(e){if(Fh)throw Error("CSS already injected");_o+=`
`+e},ct=function(e,t){Fh||(Fh=!0,e&&(e=t.replace(/[\\/]$/,""),t=_o.replace(/<<<PATH>>>/g,e),_o="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},Yi=function(e){return bp.getSizeInternal(e)},ps=function(e){if(Vt(e,"display")!=="none")return bi(e);const t=e.style,i=t.display,n=t.visibility,a=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const d=e.offsetWidth;return e=e.offsetHeight,t.display=i,t.position=a,t.visibility=n,new bt(d,e)},bi=function(e){return new bt(e.offsetWidth,e.offsetHeight)},Vt=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},Rs=function(e){const t=new De(0,0);e=e.getBoundingClientRect();var i=document.documentElement;return i=new De(window.pageXOffset||i.scrollLeft,window.pageYOffset||i.scrollTop),t.x=e.left+i.x,t.y=e.top+i.y,t},wa=function(){const e=document.body,t=document.documentElement;return new De(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Td=function(e){const t=parseFloat(Vt(e,"borderLeftWidth")),i=parseFloat(Vt(e,"borderRightWidth")),n=parseFloat(Vt(e,"borderTopWidth"));return e=parseFloat(Vt(e,"borderBottomWidth")),new at(n,e,t,i)},Ed=function(e,t,i){e=vc(e,t,i),t.scrollLeft=e.x,t.scrollTop=e.y},vc=function(e,t,i){var n=Rs(e),a=Rs(t),d=Td(t);const m=n.x-a.x-d.left;return n=n.y-a.y-d.top,a=bi(e),e=t.clientWidth-a.width,a=t.clientHeight-a.height,d=t.scrollLeft,t=t.scrollTop,i?(d+=m-e/2,t+=n-a/2):(d+=Math.min(m,Math.max(m-e,0)),t+=Math.min(n,Math.max(n-a,0))),new De(d,t)},Wo=function(e){const t=new De(0,0);var i=e.x&&e.getAttribute("x");const n=e.y&&e.getAttribute("y");return i&&(t.x=parseInt(i)),n&&(t.y=parseInt(n)),(i=(i=e.getAttribute("transform"))&&i.match(Qt))&&(t.x+=Number(i[1]),i[3]&&(t.y+=Number(i[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(ls))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},El=function(e){let t=0,i=0;for(;e;){const n=Wo(e);if(t+=n.x,i+=n.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new De(t,i)},Dn=function(){const e=wa();return new at(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},xn=function(){const e=document.documentElement,t=window;return new De(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},br=function(e,t){var i=t.x;t=t.y;const n=e.getInjectionDiv().getBoundingClientRect();return i=new De(i-n.left,t-n.top),t=e.getOriginOffsetInPixels(),De.difference(i,t).scale(1/e.scale)},Qs=function(e,t){var i=t.scale(e.scale);t=i.x,i=i.y;const n=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new De(t+n.left+e.x,i+n.top+e.y)},Mi=function(e){({document:Zi=Zi,DOMParser:as=as,XMLSerializer:ca=ca}=e),Hh=new as,Uu=new ca},u.createElement$$module$build$src$core$utils$xml=function(e){return Zi.createElementNS(_s,e)},u.createTextNode$$module$build$src$core$utils$xml=function(e){return Zi.createTextNode(e)},u.textToDom$$module$build$src$core$utils$xml=function(e){let t=Hh.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=Hh.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},Sr=function(e){return bd(Uu.serializeToString(e))},bd=function(e){return e.replace(V$,t=>`&#${t.charCodeAt(0)};`)},Ro=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Ba(e),e=xa(e)),vr(e),e):null},vr=function(e){const t=e.kind;if(e=e.contents,t&&t!==_n&&t!==fn)throw Error("Invalid toolbox kind "+t+". Please supply either "+_n+" or "+fn);if(!e)throw Error("Toolbox must have a contents attribute.")},Ma=function(e){return e?e.contents?e.contents:Array.isArray(e)&&e.length>0&&!e[0].nodeType?e:yr(e):[]},Da=function(e){return Gh.hasCategoriesInternal(e)},Sd=function(e){if(!e)return!1;const t=e.kind;return t?t===fn:!!e.contents.filter(i=>i.kind.toUpperCase()==="CATEGORY").length},yc=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},xa=function(e){const t={contents:yr(e)};return e instanceof Node&&eo(e,t),t},yr=function(e){const t=[];let i=e.childNodes;i||(i=e);for(let n=0,a;a=i[n];n++){if(!a.tagName)continue;e={};const d=a.tagName.toUpperCase();e.kind=d,d==="BLOCK"?e.blockxml=a:a.childNodes&&a.childNodes.length>0&&(e.contents=yr(a)),eo(a,e),t.push(e)}return t},eo=function(e,t){for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i];n.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[n.nodeName.replace("css-","")]=n.value):t[n.nodeName]=n.value}},Ba=function(e){let t=null;if(e)if(typeof e=="string"){if(t=u.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},Pa=function(e,t,i,n,a,d){const m=d.scrollbar&&d.scrollbar.canScrollVertically();return e.horizontal===mo.LEFT?(i=a.absoluteMetrics.left+i,m&&d.RTL&&(i+=ui.scrollbarThickness)):(i=a.absoluteMetrics.left+a.viewMetrics.width-t.width-i,m&&!d.RTL&&(i-=ui.scrollbarThickness)),e.vertical===Po.TOP?e=a.absoluteMetrics.top+n:(e=a.absoluteMetrics.top+a.viewMetrics.height-t.height-n,d.scrollbar&&d.scrollbar.canScrollHorizontally()&&(e-=ui.scrollbarThickness)),new at(e,e+t.height,i,i+t.width)},Xo=function(e,t){return{horizontal:t.toolboxMetrics.position===dt.LEFT||e.horizontalLayout&&!e.RTL?mo.RIGHT:mo.LEFT,vertical:t.toolboxMetrics.position===dt.BOTTOM?Po.TOP:Po.BOTTOM}},bl=function(e,t,i,n){const a=e.left,d=e.right-e.left,m=e.bottom-e.top;for(let F=0;F<n.length;F++){const Re=n[F];e.intersects(Re)&&(e=i===Js.UP?Re.top-m-t:Re.bottom+t,e=new at(e,e+m,a,a+d),F=-1)}return e},Ir=function(e,t){p(ye.SERIALIZER,e,t)},a$=function(e){b(ye.SERIALIZER,e)},Or=function(e,{addCoordinates:t=!1,saveIds:i=!0}={}){const n=e.workspace,a=Object.create(null);return a.height=e.getSize().height,a.width=e.getSize().width,i&&(a.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),a.x=n.RTL?n.getWidth()-t.x:t.x,a.y=t.y),e.getText()&&(a.text=e.getText()),e.isCollapsed()&&(a.collapsed=!0),e.isOwnEditable()||(a.editable=!1),e.isOwnMovable()||(a.movable=!1),e.isOwnDeletable()||(a.deletable=!1),a},ji=function(e,t,{recordUndo:i=!1}={}){const n=Oe();if(u.setRecordUndo$$module$build$src$core$events$utils(i),i=t.newComment(e.id),e.text!==void 0&&i.setText(e.text),e.x!==void 0||e.y!==void 0){const d=i.getRelativeToSurfaceXY();let m,F=(m=e.x)!=null?m:d.x;F=t.RTL?t.getWidth()-F:F;var a;t=(a=e.y)!=null?a:d.y,i.moveTo(new De(F,t))}if(e.width!==void 0||e.height){a=i.getSize();let d,m;i.setSize(new bt((d=e.width)!=null?d:a.width,(m=e.height)!=null?m:a.height))}return e.collapsed!==void 0&&i.setCollapsed(e.collapsed),e.editable!==void 0&&i.setEditable(e.editable),e.movable!==void 0&&i.setMovable(e.movable),e.deletable!==void 0&&i.setDeletable(e.deletable),u.setRecordUndo$$module$build$src$core$events$utils(n),i},Ua=function(e,t){p(ye.PASTER,e,t)},u$=function(e){b(ye.PASTER,e)},Fa=function(e){const t=e.workspace,i=e.getRelativeToSurfaceXY(),n=new De(0,0),a=t.getTopComments(!1).filter(d=>d.id!==e.id).map(d=>d.getRelativeToSurfaceXY());for(;vd(De.sum(i,n),a);)n.translate(t.RTL?-30:30,30);e.moveTo(De.sum(i,n))},vd=function(e,t){return t.some(i=>Math.abs(i.x-e.x)<=1&&Math.abs(i.y-e.y)<=1)},Cs=function(e,t){e.setAttribute(Bs,t)},Si=function(e,t,i){Array.isArray(i)&&(i=i.join(" ")),e.setAttribute(Ht+t,`${i}`)},Ki=function(e){return e&&typeof e.saveState=="function"&&typeof e.loadState=="function"},Ha=function(e){return Ic(e),Rr()?(Ga(),Promise.resolve()):(nr||(nr=new Promise(t=>{$a=t,Gu=window.requestAnimationFrame(()=>{Ga(),t()})})),nr)},to=function(){return nr||Promise.resolve()},Co=function(e){e||window.cancelAnimationFrame(Gu),Ga(e),!e&&$a&&$a()},Rr=function(){return hp},Ic=function(e){Qi.add(e),Hu.set(e,u.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?Ic(t):or.add(e)},Ga=function(e){const t=e?new Set([e]):new Set([...or].map(d=>d.workspace)),i=[...or].filter(c$).filter(d=>t.has(d.workspace));for(var n of i)Oc(n);for(const d of t)d.resizeContents();for(var a of i)n=a.getRelativeToSurfaceXY(),a.updateComponentLocations(n);for(const d of i)a=u.getGroup$$module$build$src$core$events$utils(),(n=Hu.get(d))&&u.setGroup$$module$build$src$core$events$utils(n),d.bumpNeighbours(),u.setGroup$$module$build$src$core$events$utils(a);for(const d of i)Bn(d);e||(nr=null)},Bn=function(e){or.delete(e),Qi.delete(e),Hu.delete(e);for(const t of e.getChildren(!1))Bn(t)},c$=function(e){return!e.isDisposed()&&!e.getParent()},Oc=function(e){if(Qi.has(e)&&e.initialized){for(const t of e.getChildren(!1))Oc(t);e.renderEfficiently()}},Sl=function(e,t){ga(e,t)},Rc=function(e=Op){ga=e},Cc=function(e,t){ms(e,t)},h$=function(e=zh){ms=e},Cr=function(e,t,i){Ts(e,t,i)},Ac=function(e=Rp){Ts=e},Nc=function(e,t){Ap(e,t)},Ar=function(e=Cp){Ap=e},io=function(e){return e&&typeof e.getProcedureDef=="function"},yd=function(e){return e&&typeof e.getProcedureCall=="function"&&typeof e.renameProcedure=="function"},Va=function(e){return e.getVariableModel!==void 0},Di=function(e,t,i,n){e=e+" was deprecated in "+t+" and will be deleted in "+i+".",n&&(e+=`
Use `+n+" instead."),Sn.has(e)||(Sn.add(e),console.warn(e))},u.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let i=0;i<e.length;i++){const n=e[i].getVarModels();if(n)for(let a=0;a<n.length;a++){const d=n[a];d.getId()&&t.add(d)}}return Array.from(t.values())},u.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let n=0,a;a=e[n];n++){var i=a.getDeveloperVariables;if(i){i=i();for(let d=0;d<i.length;d++)t.add(i[d])}}return Array.from(t.values())},Pn=function(e){return so(e,!1)},so=function(e,t=!0){return Kt.variables_set||Kt.variables_get||console.warn("There are no variable blocks, but there is a variable category."),t?(Di("The XML return value of Blockly.Variables.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),Yo(e)):(e.registerButtonCallback("CREATE_VARIABLE",function(i){Ao(i.getTargetWorkspace())}),[{kind:"button",text:"%{BKY_NEW_VARIABLE}",callbackkey:"CREATE_VARIABLE"},...Un(e,e.getVariableMap().getVariablesOfType(""),!0)])},vl=function(e){return{VAR:{name:e.getName(),type:e.getType()}}},Un=function(e,t,i,n="variables_get",a="variables_set"){i&&(i=Kt.math_change),e=[];const d=t.slice(-1)[0];return d&&(Kt[a]&&e.push({kind:"block",type:a,gap:i?8:24,fields:vl(d)}),i&&e.push({kind:"block",type:"math_change",gap:Kt[n]?20:8,fields:vl(d),inputs:{DELTA:{shadow:{type:"math_number",fields:{NUM:1}}}}})),Kt[n]&&e.push(...t.sort(qo).map(m=>({kind:"block",type:n,gap:8,fields:vl(m)}))),e},Yo=function(e){let t=[];const i=document.createElement("button");return i.setAttribute("text","%{BKY_NEW_VARIABLE}"),i.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(n){Ao(n.getTargetWorkspace())}),t.push(i),e=za(e),t=t.concat(e)},za=function(e){e=e.getVariableMap().getVariablesOfType("");const t=[];if(e.length>0){var i=e[e.length-1];if(Kt.variables_set){var n=u.createElement$$module$build$src$core$utils$xml("block");n.setAttribute("type","variables_set"),n.setAttribute("gap",Kt.math_change?"8":"24"),n.appendChild(Ko(i)),t.push(n)}if(Kt.math_change&&(n=u.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","math_change"),n.setAttribute("gap",Kt.variables_get?"20":"8"),n.appendChild(Ko(i)),i=u.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),n.appendChild(i),t.push(n)),Kt.variables_get){e.sort(qo);for(let a=0,d;d=e[a];a++)i=u.createElement$$module$build$src$core$utils$xml("block"),i.setAttribute("type","variables_get"),i.setAttribute("gap","8"),i.appendChild(Ko(d)),t.push(i)}}return t},yl=function(e){return Np.generateUniqueNameInternal(e)},Id=function(e){return Nr(rr.charAt(0),e.getVariableMap().getAllVariables().map(t=>t.getName()))},Nr=function(e,t){if(!t.length)return e;const i=rr;let n="",a=i.indexOf(e);for(;;){let d=!1;for(let m=0;m<t.length;m++)if(t[m].toLowerCase()===e){d=!0;break}if(!d)break;a++,a===i.length&&(a=0,n=`${Number(n)+1}`),e=i.charAt(a)+n}return e},Ao=function(e,t,i){function n(d){Wa(u.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,d,function(m){if(m){var F=jo(m,e);if(F){if(F.getType()===a)var Re=u.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",F.getName());else Re=u.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Re=Re.replace("%1",F.getName()).replace("%2",F.getType());Sl(Re,function(){n(m)})}else e.getVariableMap().createVariable(m,a),t&&t(m)}else t&&t(null)})}const a=i||"";n("")},u.renameVariable$$module$build$src$core$variables=function(e,t,i){function n(a){const d=u.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.getName());Wa(d,a,function(m){if(m){var F=is(m,t.getType(),e),Re=Il(t.getName(),m,e);if(F||Re){var st="";F?st=u.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",F.getName()).replace("%2",F.getType()):Re&&(st=u.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",m).replace("%2",Re)),Sl(st,function(){n(m)})}else e.getVariableMap().renameVariable(t,m),i&&i(m)}else i&&i(null)})}n("")},Wa=function(e,t,i){Cr(e,t,function(n){n&&(n=n.replace(/[\s\xa0]+/g," ").trim(),n===u.Msg$$module$build$src$core$msg.RENAME_VARIABLE||n===u.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(n=null),i(n)})},is=function(e,t,i){i=i.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let n=0,a;a=i[n];n++)if(a.getName().toLowerCase()===e&&a.getType()!==t)return a;return null},jo=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let i=0,n;n=t[i];i++)if(n.getName().toLowerCase()===e)return n;return null},Il=function(e,t,i){return i.getProcedureMap().getProcedures().length?Ol(e,t,i):d$(e,t,i)},Ol=function(e,t,i){e=e.toLowerCase(),t=t.toLowerCase(),i=i.getProcedureMap().getProcedures();for(const a of i){var n=a.getParameters().filter(Va).map(d=>d.getVariableModel().getName());if(n&&(i=n.some(d=>d.toLowerCase()===e),n=n.some(d=>d.toLowerCase()===t),i&&n))return a.getName()}return null},d$=function(e,t,i){e=e.toLowerCase(),t=t.toLowerCase(),i=i.getAllBlocks(!1);for(const a of i){if(!io(a))continue;i=a.getProcedureDef();var n=i[1];const d=n.some(m=>m.toLowerCase()===e);if(n=n.some(m=>m.toLowerCase()===t),d&&n)return i[0]}return null},Ko=function(e){const t=u.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.getType()),e=u.createTextNode$$module$build$src$core$utils$xml(e.getName()),t.appendChild(e),t},u.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,i,n){let a=u.getVariable$$module$build$src$core$variables(e,t,i,n);return a||(a=Lc(e,t,i,n)),a},u.getVariable$$module$build$src$core$variables=function(e,t,i,n){const a=e.getPotentialVariableMap();let d=null;if(t&&(d=e.getVariableById(t),!d&&a&&(d=a.getVariableById(t)),d))return d;if(i){if(n===void 0)throw Error("Tried to look up a variable by name without a type");d=e.getVariable(i,n),!d&&a&&(d=a.getVariable(i,n))}return d},Lc=function(e,t,i,n){const a=e.getVariableMap(),d=e.getPotentialVariableMap();return i||(i=yl(e.isFlyout?e.targetWorkspace:e)),d?d.createVariable(i,n,t??void 0):a.createVariable(i,n,t)},Jo=function(e,t){e=e.getAllVariables();const i=[];if(t.length!==e.length)for(let n=0;n<e.length;n++){const a=e[n];t.includes(a)||i.push(a)}return i},qo=function(e,t){return e.getName().localeCompare(t.getName(),void 0,{sensitivity:"base"})},Lr=function(e,t){const i=[];e=e.getAllBlocks(!1);for(let n=0;n<e.length;n++){const a=e[n].getVarModels();if(a)for(let d=0;d<a.length;d++)a[d].getId()===t&&i.push(e[n])}return i},u.deleteVariable$$module$build$src$core$variables=function(e,t,i){var n=t.getName();const a=Lr(e,t.getId());for(let d=a.length-1;d>=0;d--){const m=a[d];if(m.type==="procedures_defnoreturn"||m.type==="procedures_defreturn"){i=String(m.getFieldValue("NAME")),n=u.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",n).replace("%2",i),Sl(n);return}m===i&&a.splice(d,1)}i&&a.length||a.length>1?(n=u.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(a.length+(i&&!i.workspace.isFlyout?1:0))).replace("%2",n),Cc(n,d=>{d&&t&&e.getVariableMap().deleteVariable(t)})):e.getVariableMap().deleteVariable(t)},Vs=function(e,{addCoordinates:t=!1,addInputBlocks:i=!0,addNextBlocks:n=!0,doFullSerialization:a=!0,saveIds:d=!0}={}){if(e.isInsertionMarker())return null;const m={type:e.type,id:d?e.id:void 0};return t&&$$(e,m),p$(e,m),kc(e,m,a),g$(e,m,a),f$(e,m,a),i&&_$(e,m,a,d),n&&m$(e,m,a,d),m},p$=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},$$=function(e,t){const i=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(i.RTL?i.getWidth()-e.x:e.x),t.y=Math.round(e.y)},kc=function(e,t,i){e.saveExtraState?(e=e.saveExtraState(i),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=Ys(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},g$=function(e,t,i){const n=Object.create(null);for(const a of e.getIcons())Ki(a)&&(e=a.saveState(i))&&(n[a.getType().toString()]=e);Object.keys(n).length&&(t.icons=n)},f$=function(e,t,i){const n=Object.create(null);for(const a of e.getFields())a.isSerializable()&&(n[a.name]=a.saveState(i));Object.keys(n).length&&(t.fields=n)},_$=function(e,t,i,n){const a=Object.create(null);for(let d=0;d<e.inputList.length;d++){const m=e.inputList[d];if(!m.connection)continue;const F=Od(m.connection,i,n);F&&(a[m.name]=F)}Object.keys(a).length&&(t.inputs=a)},m$=function(e,t,i,n){e.nextConnection&&(e=Od(e.nextConnection,i,n))&&(t.next=e)},Od=function(e,t,i){const n=e.getShadowState(!0);if(e=e.targetBlock(),!n&&!e)return null;const a=Object.create(null);return n&&(a.shadow=n),e&&!e.isShadow()&&(a.block=Vs(e,{doFullSerialization:t,saveIds:i})),a},Zo=function(e,t,{recordUndo:i=!1}={}){return e=Rl(e,t,{recordUndo:i}),t.rendered&&Co(),e},Rl=function(e,t,{parentConnection:i,isShadow:n=!1,recordUndo:a=!1}={}){const d=Oe();u.setRecordUndo$$module$build$src$core$events$utils(a),(a=u.getGroup$$module$build$src$core$events$utils())||u.setGroup$$module$build$src$core$events$utils(!0),u.disable$$module$build$src$core$events$utils();const m=t.getAllVariables();let F;try{F=Rd(e,t,{parentConnection:i,isShadow:n})}finally{u.enable$$module$build$src$core$events$utils()}if(T$(t,m),He()&&N(new(We($e.BLOCK_CREATE))(F)),u.setGroup$$module$build$src$core$events$utils(a),u.setRecordUndo$$module$build$src$core$events$utils(d),t.rendered){const Re=F;setTimeout(()=>{Re.disposed||Re.setConnectionTracking(!0)},1)}return F},Rd=function(e,t,{parentConnection:i,isShadow:n=!1}={}){if(!e.type)throw new Wh(e);const a=t.newBlock(e.type,e.id);return a.setShadow(n),E$(a,e),wc(a,e),b$(a,e),S$(i,a,e),v$(a,e),Cd(a,e),y$(a,e),I$(a,e),O$(a,t.rendered),a},T$=function(e,t){if(He())for(e=Jo(e,t),t=0;t<e.length;t++){const i=e[t];N(new(We($e.VAR_CREATE))(i))}},E$=function(e,t){let i=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const n=e.workspace;i=n.RTL?n.getWidth()-i:i,e.moveBy(i,t)},wc=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,ci),Array.isArray(t.disabledReasons))for(const i of t.disabledReasons)e.setDisabledReason(!0,i);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},b$=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(u.textToDom$$module$build$src$core$utils$xml(t.extraState)))},S$=function(e,t,i){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new Y$(i);if(e.type===u.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var n=t.outputConnection;if(!n)throw new nl("output",t,i)}else if(n=t.previousConnection,!n)throw new nl("previous",t,i);if(!e.connect(n)){const a=t.workspace.connectionChecker;throw new X$(a.getErrorMessage(a.canConnectWithReason(n,e,!1),n,e),e.type===u.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,i)}}},v$=function(e,t){if(t.icons){var i=Object.keys(t.icons);for(const a of i){i=t.icons[a];var n=e.getIcon(a);if(!n){if(n=E(ye.ICON,a,!1),!n)throw new j$(a,e,t);n=new n(e),e.addIcon(n)}Ki(n)&&n.loadState(i)}}},Cd=function(e,t){if(t.fields){var i=Object.keys(t.fields);for(let n=0;n<i.length;n++){const a=i[n],d=t.fields[a],m=e.getField(a);m?m.loadState(d):console.warn(`Ignoring non-existant field ${a} in block ${e.type}`)}}},y$=function(e,t){if(t.inputs){var i=Object.keys(t.inputs);for(let n=0;n<i.length;n++){const a=i[n],d=e.getInput(a);if(!d||!d.connection)throw new nl(a,e,t);Ad(d.connection,t.inputs[a])}}},I$=function(e,t){if(t.next){if(!e.nextConnection)throw new nl("next",e,t);Ad(e.nextConnection,t.next)}},Ad=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&Rd(t.block,e.getSourceBlock().workspace,{parentConnection:e})},O$=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const i of e.getIcons())i.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},kr=function(e){return typeof e.bubbleIsVisible=="function"&&typeof e.setBubbleVisible=="function"&&typeof e.getBubble=="function"},Mc=function(e){return e*Math.PI/180},R$=function(e){return e*180/Math.PI},Cl=function(e,t,i){if(i<e){const n=i;i=e,e=n}return Math.max(e,Math.min(t,i))},Dc=function(){document.querySelector(".blocklyDropDownDiv")||(si=document.createElement("div"),si.className="blocklyDropDownDiv",si.tabIndex=-1,(At()||document.body).appendChild(si),ju=document.createElement("div"),ju.className="blocklyDropDownContent",si.appendChild(ju),al=L(ju,"keydown",null,re),rl=document.createElement("div"),rl.className="blocklyDropDownArrow",si.appendChild(rl),si.style.opacity="0",si.style.transition="transform "+Yu+"s, opacity "+Yu+"s")},Xa=function(e){Mp=e},wr=function(){return So},xc=function(){return ju},Ya=function(){al&&(x(al),al=null),si.remove(),Dc()},Bc=function(e,t){si.style.backgroundColor=e,si.style.borderColor=t},Nd=function(e,t,i,n,a=!0){return Ld(Uc(t),e,a,i,n)},Pc=function(e,t,i,n=!0){return ll=!0,Ld(Fn(e),e,n,t,i)},Uc=function(e){var t=e.getSvgRoot();const i=e.workspace.scale,n=e.height*i;return e=e.width*i,t=Rs(t),new at(t.y,t.y+n,t.x,t.x+e)},Fn=function(e){return e=e.getScaledBBox(),new at(e.top,e.bottom,e.left,e.right)},Ld=function(e,t,i,n,a){const d=e.left+(e.right-e.left)/2,m=e.bottom;e=e.top,a&&(e+=a),a=t.getSourceBlock();let F=a.workspace;for(;F.options.parentWorkspace;)F=F.options.parentWorkspace;return Xa(F.getParentSvg().parentNode),kd(t,a.RTL,d,m,d,e,i,n)},kd=function(e,t,i,n,a,d,m,F){return So=e,Rt=F||null,si.style.direction=t?"rtl":"ltr",e=$(),Yh=e.getRenderer().getClassName(),K$=e.getTheme().getClassName(),Ge(si,Yh),Ge(si,K$),i=Gc(i,n,a,d),m&&(_a=u.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(si)),i},wd=function(e,t,i,n){return e=Qo(e,i.left,i.right,n.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+fa,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},Fc=function(e,t,i,n){return e=Qo(e,i.left,i.right,n.width),{initialX:e.divX,initialY:t-n.height,finalX:e.divX,finalY:t-n.height-fa,arrowX:e.arrowX,arrowY:n.height-kp*2-Xu/2,arrowAtTop:!1,arrowVisible:!0}},Md=function(e,t,i){return e=Qo(e,t.left,t.right,i.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Qo=function(e,t,i,n){return t=Cl(t,e-n/2,i-n),e=e-Xu/2-t,i=wp,e=Cl(i,e,n-i-Xu),{arrowX:e,divX:t}},Mr=function(){return!!So},Hc=function(e,t){return So===e?(t?oo():Dr(),!0):!1},Dr=function(){si.style.transform="translate(0, 0)",si.style.opacity="0",Xh=setTimeout(function(){oo()},Yu*1e3),Rt&&(Rt(),Rt=null)},oo=function(){Mr()&&(Xh&&clearTimeout(Xh),Rt&&(Rt(),Rt=null),Ya(),So=null,$().markFocused(),_a&&(_a(),_a=null))},Gc=function(e,t,i,n){e=Ku.getPositionMetrics(e,t,i,n),e.arrowVisible?(t=e.arrowX,i=e.arrowY,n=e.arrowAtTop?45:225,rl.style.display="",rl.style.transform=`translate(${t}px, ${i}px) rotate(${n}deg)`,rl.setAttribute("class","blocklyDropDownArrow")):rl.style.display="none",t=Math.floor(e.initialX),i=Math.floor(e.initialY),n=Math.floor(e.finalX);const a=Math.floor(e.finalY);return si.style.left=t+"px",si.style.top=i+"px",si.style.display="block",si.style.opacity="1",si.style.transform="translate("+(n-t)+"px,"+(a-i)+"px)",!!e.arrowAtTop},ja=function(){if(So){var e=So.getSourceBlock();e=ll?Fn(So):Uc(e);const t=e.left+(e.right-e.left)/2;Gc(t,e.bottom,t,e.top)}else Dr()},xr=function(e){return e.length?e.reduce(function(t,i){return t.length<i.length?t:i}).length:0},Vc=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let i=0;t=t||xr(e);let n;for(n=0;n<t;n++){for(var a=e[0][n],d=1;d<e.length;d++)if(a!==e[d][n])return i;a===" "&&(i=n+1)}for(a=1;a<e.length;a++)if((d=e[a][n])&&d!==" ")return i;return t},zc=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let i=0;t=t||xr(e);let n;for(n=0;n<t;n++){for(var a=e[0].substr(-n-1,1),d=1;d<e.length;d++)if(a!==e[d].substr(-n-1,1))return i;a===" "&&(i=n+1)}for(a=1;a<e.length;a++)if((d=e[a].charAt(e[a].length-n-1))&&d!==" ")return i;return t},u.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let i=0;i<e.length;i++)e[i]=Dd(e[i],t);return e.join(`
`)},Dd=function(e,t){if(e.length<=t)return e;const i=e.trim().split(/\s+/);for(var n=0;n<i.length;n++)i[n].length>t&&(t=i[n].length);var a=-1/0;let d,m=1;do{n=a,d=e,e=[],a=i.length/m;let F=1;for(let Re=0;Re<i.length-1;Re++)F<(Re+1.5)/a?(F++,e[Re]=!0):e[Re]=!1;e=xd(i,e,t),a=Wc(i,e,t),e=C$(i,e),m++}while(a>n);return d},Wc=function(e,t,i){const n=[0],a=[];for(var d=0;d<e.length;d++)n[n.length-1]+=e[d].length,t[d]===!0?(n.push(0),a.push(e[d].charAt(e[d].length-1))):t[d]===!1&&n[n.length-1]++;for(e=Math.max(...n),t=0,d=0;d<n.length;d++)t-=Math.pow(Math.abs(i-n[d]),1.5)*2,t-=Math.pow(e-n[d],1.5),".?!".includes(a[d])?t+=i/3:",;)]}".includes(a[d])&&(t+=i/4);return n.length>1&&n[n.length-1]<=n[n.length-2]&&(t+=.5),t},xd=function(e,t,i){let n=Wc(e,t,i),a;for(let d=0;d<t.length-1;d++){if(t[d]===t[d+1])continue;const m=[].concat(t);m[d]=!m[d],m[d+1]=!m[d+1];const F=Wc(e,m,i);F>n&&(n=F,a=m)}return a?xd(e,a,i):t},C$=function(e,t){const i=[];for(let n=0;n<e.length;n++)i.push(e[n]),t[n]!==void 0&&i.push(t[n]?`
`:" ");return i.join("")},u.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},A$=function(e){cr=e},N$=function(){return cr},$s=function(){return Ju},Al=function(){return oi},Br=function(e){if(e=Xc(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},Xc=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},Yc=function(){document.querySelector(".blocklyTooltipDiv")||(oi=document.createElement("div"),oi.className="blocklyTooltipDiv",(At()||document.body).appendChild(oi))},Nl=function(e){e.mouseOverWrapper_=J(e,"pointerover",null,L$),e.mouseOutWrapper_=J(e,"pointerout",null,Pr),e.addEventListener("pointermove",Ja,!1)},Ka=function(e){e&&(x(e.mouseOverWrapper_),x(e.mouseOutWrapper_),e.removeEventListener("pointermove",Ja))},L$=function(e){ul||(e=Xc(e.currentTarget),Ps!==e&&(no(),ma=null,Ps=e),clearTimeout(xp))},Pr=function(e){ul||(xp=setTimeout(function(){ma=Ps=null,no()},1),clearTimeout(hr),hr=0)},Ja=function(e){if(Ps&&Ps.tooltip&&!ul)if(Ju){const t=Bp-e.pageX;e=qu-e.pageY,Math.sqrt(t*t+e*e)>jh&&no()}else ma!==Ps&&(clearTimeout(hr),Bp=e.pageX,qu=e.pageY,hr=setTimeout(Hn,J$))},Ur=function(){ma=Ps=null,no()},no=function(){Ju&&(Ju=!1,oi&&(oi.style.display="none")),hr&&(clearTimeout(hr),hr=0)},jc=function(){no(),ul=!0},en=function(){ul=!1},Fr=function(){oi&&Ps&&(typeof cr=="function"?cr(oi,Ps):Kc())},Kc=function(){var e=Br(Ps);e=u.wrap$$module$build$src$core$utils$string(e,Dp),e=e.split(`
`);for(let t=0;t<e.length;t++){const i=document.createElement("div");i.appendChild(document.createTextNode(e[t])),oi.appendChild(i)}},Bd=function(e){const t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let n=Bp;n=e?n-(Pp+oi.offsetWidth):n+Pp;let a=qu+Zu;return a+oi.offsetHeight>i+window.scrollY&&(a-=oi.offsetHeight+2*Zu),e?n=Math.max(Kh-window.scrollX,n):n+oi.offsetWidth>t+window.scrollX-2*Kh&&(n=t-oi.offsetWidth-2*Kh),{x:n,y:a}},Hn=function(){if(!ul&&(ma=Ps,oi)){oi.textContent="",Fr();var e=Ps.RTL;oi.style.direction=e?"rtl":"ltr",oi.style.display="block",Ju=!0;var{x:t,y:i}=Bd(e);oi.style.left=t+"px",oi.style.top=i+"px"}},Jc=function(){return Jh},Pd=function(e){Jh=e},qc=function(){return mt},k$=function(e){mt=e},Hr=function(e){e=`${e}`.toLowerCase().trim();var t=qh[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var i=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return i&&(e=Number(i[1]),t=Number(i[2]),i=Number(i[3]),e>=0&&e<256&&t>=0&&t<256&&i>=0&&i<256)?qa(e,t,i):null},qa=function(e,t,i){return t=e<<16|t<<8|i,e<16?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Za=function(e){return e=Hr(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Qa=function(e,t,i){let n=0,a=0,d=0;if(t===0)d=a=n=i;else{const m=Math.floor(e/60),F=e/60-m;e=i*(1-t);const Re=i*(1-t*F);switch(t=i*(1-t*(1-F)),m){case 1:n=Re,a=i,d=e;break;case 2:n=e,a=i,d=t;break;case 3:n=e,a=Re,d=i;break;case 4:n=t,a=e,d=i;break;case 5:n=i,a=e,d=Re;break;case 6:case 0:n=i,a=t,d=e}}return qa(Math.floor(n),Math.floor(a),Math.floor(d))},tn=function(e,t,i){return e=Hr(e),!e||(t=Hr(t),!t)?null:(e=Za(e),t=Za(t),qa(Math.round(t[0]+i*(e[0]-t[0])),Math.round(t[1]+i*(e[1]-t[1])),Math.round(t[2]+i*(e[2]-t[2]))))},As=function(e){return Qa(e,Jh,mt*255)},eu=function(e,t,i){const n=[];var a=e.split("");a.push("");var d=0;e=[];let m=null;for(let st=0;st<a.length;st++){var F=a[st];if(d===0)if(F==="%")(d=e.join(""))&&n.push(d),e.length=0,d=1;else if(i&&F===`
`){const Ei=e.join("");Ei&&n.push(Ei),e.length=0,n.push(F)}else e.push(F);else if(d===1)F==="%"?(e.push(F),d=0):t&&"0"<=F&&F<="9"?(d=2,m=F,(F=e.join(""))&&n.push(F),e.length=0):F==="{"?d=3:(e.push("%",F),d=0);else if(d===2)if("0"<=F&&F<="9")m+=F;else{var Re=void 0;n.push(parseInt((Re=m)!=null?Re:"",10)),st--,d=0}else d===3&&(F===""?(e.splice(0,0,"%{"),st--,d=0):F!=="}"?e.push(F):(d=e.join(""),/[A-Z]\w*/i.test(d)?(F=d.toUpperCase(),(F=F.startsWith("BKY_")?F.substring(4):null)&&F in u.Msg$$module$build$src$core$msg?(d=u.Msg$$module$build$src$core$msg[F],typeof d=="string"?Array.prototype.push.apply(n,eu(d,t,i)):t?n.push(`${d}`):n.push(d)):n.push("%{"+d+"}")):n.push("%{"+d+"}"),d=e.length=0))}for((t=e.join(""))&&n.push(t),Re=[],e.length=0,a=0;a<n.length;a++)typeof n[a]!="string"||i&&n[a]===`
`?((t=e.join(""))&&Re.push(t),e.length=0,Re.push(n[a])):e.push(n[a]);return(t=e.join(""))&&Re.push(t),e.length=0,Re},gs=function(e){return eu(e,!0,!0)},Ot=function(e){return typeof e!="string"?e:(e=eu(e,!1,!1),e.length?String(e[0]):"")},Gr=function(e){let t=!0;const i=u.Msg$$module$build$src$core$msg,n=e.match(/%{BKY_[A-Z]\w*}/gi);if(n)for(let a=0;a<n.length;a++){const d=n[a].toUpperCase();i[d.slice(6,-1)]===void 0&&(console.warn("No message string for "+n[a]+" in "+e),t=!1)}return t},Gn=function(e){const t=typeof e=="string"?Ot(e):e;var i=Number(t);if(!isNaN(i)&&0<=i&&i<=360)return{hue:i,hex:Qa(i,Jc(),qc()*255)};if(i=Hr(t))return{hue:null,hex:i};throw i='Invalid colour: "'+t+'"',e!==t&&(i+=' (from "'+e+'")'),Error(i)},sn=function(){return Es},tu=function(e){if(Es=e,e===null){let t;(t=document.querySelector("."+Zh))==null||t.remove()}},iu=function(){const e=At()||document.body,t=document.querySelector("div."+Zh);t?Es=t:(Es=document.createElement("div"),Es.className=Zh,Es.tabIndex=-1),L(Es,"keydown",null,re),e.appendChild(Es)},on=function(e,t,i,n,a=!0){if(Vr(),Ho=e,vn=i,i=Es){if(i.style.direction=t?"rtl":"ltr",i.style.display="block",!n&&e instanceof kt){let F;n=(F=e.getSourceBlock())==null?void 0:F.workspace}var d;Qu=(d=n)!=null?d:null;var m;e=(m=n)!=null?m:$(),Ta=e.getRenderer().getClassName(),Ea=e.getTheme().getClassName(),Ta&&Ge(i,Ta),Ea&&Ge(i,Ea),a&&(ec=u.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(i))}},Vr=function(){if(Ll()){Ho=null;var e=Es;e&&(e.style.display="none",e.style.left="",e.style.top="",vn&&(vn(),vn=null),e.textContent="",Ta&&(me(e,Ta),Ta=""),Ea&&(me(e,Ea),Ea=""),$().markFocused(),ec&&(ec(),ec=null))}},Ll=function(){return!!Ho},zs=function(e){Ho===e&&Vr()},su=function(e){let t=Qu===null,i=e;for(;!t&&i;){if(i===e){t=!0;break}i=e.options.parentWorkspace}t&&Vr()},ss=function(e,t,i){Es.style.left=e+"px",Es.style.top=t+"px",Es.style.height=i+"px"},ou=function(e,t,i,n){const a=Ud(e,t,i);e=No(e,t,i,n),a<0?ss(e,0,i.height+a):ss(e,a,i.height)},No=function(e,t,i,n){return n?Math.min(Math.max(t.right-i.width,e.left),e.right-i.width):Math.max(Math.min(t.left,e.right-i.width),e.left)},Ud=function(e,t,i){return t.bottom+i.height>=e.bottom?t.top-i.height:t.bottom},nu=function(e){return!(e==null||!e.repositionForWindowResize)},nn=function(){nu(Ho)&&Ho.repositionForWindowResize()||Vr()},Zc=function(){return xt},ru=function(e){xt=e},ro=function(e,t,i,n,a){if(on(Qh,i,rn,n),t.length){a||(e instanceof PointerEvent?a=new De(e.clientX,e.clientY):(console.warn("Context menu opened with keyboard but no location given"),a=new De(0,0)));var d=zr(t,i,e,a);Ni=d,lu(d,i,a),setTimeout(function(){d.focus()},1),xt=null}else Ji()},zr=function(e,t,i,n){const a=new ii;a.setRole(Ai.MENU);for(let d=0;d<e.length;d++){const m=e[d];if(m.separator){a.addChild(new mn);continue}const F=new qs(m.text);F.setRightToLeft(t),F.setRole(Ai.MENUITEM),a.addChild(F),F.setEnabled(m.enabled),m.enabled&&F.onAction(function(Re,st){Ji(),requestAnimationFrame(()=>{setTimeout(()=>{m.callback(m.scope,i,st,n)},0)})},{})}return a},lu=function(e,t,i){const n=Dn();i=new at(i.y+n.top,i.y+n.top,i.x+n.left,i.x+n.left),au(e);const a=e.getSize();t&&(i.left+=a.width,i.right+=a.width,n.left+=a.width,n.right+=a.width),ou(n,i,a,t),e.focus()},au=function(e){var t=sn();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),Ge(t,"blocklyContextMenu"),L(t,"contextmenu",null,Ns),e.focus()},Ns=function(e){e.preventDefault(),e.stopPropagation()},Ji=function(){zs(Qh),xt=null},rn=function(){Ni&&(Ni.dispose(),Ni=null)},u.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{u.disable$$module$build$src$core$events$utils();let i;try{i=t instanceof Element?ao(t,e.workspace):Rl(t,e.workspace);const n=e.getRelativeToSurfaceXY();n.x=e.RTL?n.x-u.config$$module$build$src$core$config.snapRadius:n.x+u.config$$module$build$src$core$config.snapRadius,n.y+=u.config$$module$build$src$core$config.snapRadius*2,i.moveBy(n.x,n.y)}finally{u.enable$$module$build$src$core$events$utils()}return He()&&!i.isShadow()&&N(new(We($e.BLOCK_CREATE))(i)),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(i),i}},lo=function(e,t){return t=te(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},Ws=function(e,t,i){t=lo(e,t),td.set(e,De.difference(i,t))},Lo=function(e,t){if(t=lo(e,t),e=td.get(e),!e)throw Error("Drag not initialized");return De.sum(e,t)},Fd=function(e,t=!1){const i=u.createElement$$module$build$src$core$utils$xml("xml");var n=uu(u.allUsedVarModels$$module$build$src$core$variables(e));n.hasChildNodes()&&i.appendChild(n);for(const a of e.getTopComments())i.appendChild(Wr(a,t));for(e=e.getTopBlocks(!0),n=0;n<e.length;n++)i.appendChild(xi(e[n],t));return i},Wr=function(e,t=!1){const i=u.createElement$$module$build$src$core$utils$xml("comment");t||i.setAttribute("id",e.id),t=e.workspace;const n=e.getRelativeToSurfaceXY();return n.x=t.RTL?t.getWidth()-n.x:n.x,i.setAttribute("x",`${n.x}`),i.setAttribute("y",`${n.y}`),i.setAttribute("w",`${e.getSize().width}`),i.setAttribute("h",`${e.getSize().height}`),e.getText()&&(i.textContent=e.getText()),e.isCollapsed()&&i.setAttribute("collapsed","true"),e.isOwnEditable()||i.setAttribute("editable","false"),e.isOwnMovable()||i.setAttribute("movable","false"),e.isOwnDeletable()||i.setAttribute("deletable","false"),i},uu=function(e){const t=u.createElement$$module$build$src$core$utils$xml("variables");for(let i=0;i<e.length;i++){const n=e[i],a=u.createElement$$module$build$src$core$utils$xml("variable");a.appendChild(u.createTextNode$$module$build$src$core$utils$xml(n.getName())),n.getType()&&a.setAttribute("type",n.getType()),a.id=n.getId(),t.appendChild(a)}return t},xi=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let i=0;if(e.workspace.RTL&&(i=e.workspace.getWidth()),t=fs(e,t),Fi(t)){const n=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?i-n.x:n.x))),t.setAttribute("y",String(Math.round(n.y)))}return t},ri=function(e){if(e.isSerializable()){const t=u.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},Nt=function(e,t){for(const i of e.getFields())(e=ri(i))&&t.appendChild(e)},fs=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?fs(t):new DocumentFragment;const i=u.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(i.setAttribute("type",e.type),t||(i.id=e.id),e.mutationToDom){var n=e.mutationToDom();n&&(n.hasChildNodes()||n.hasAttributes())&&i.appendChild(n)}if(Nt(e,i),n=e.getCommentText()){var a=e.getIcon(di.COMMENT),d=a.getBubbleSize(),m=a.bubbleIsVisible();a=a.getBubbleLocation();var F=u.createElement$$module$build$src$core$utils$xml("comment");F.appendChild(u.createTextNode$$module$build$src$core$utils$xml(n)),F.setAttribute("pinned",`${m}`),F.setAttribute("h",`${d.height}`),F.setAttribute("w",`${d.width}`),a&&(F.setAttribute("x",`${e.workspace.RTL?e.workspace.getWidth()-(a.x+d.width):a.x}`),F.setAttribute("y",`${a.y}`)),i.appendChild(F)}for(e.data&&(n=u.createElement$$module$build$src$core$utils$xml("data"),n.appendChild(u.createTextNode$$module$build$src$core$utils$xml(e.data)),i.appendChild(n)),n=0;n<e.inputList.length;n++){d=e.inputList[n];var Re=void 0;m=!0,d.type!==u.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&d.type!==u.inputTypes$$module$build$src$core$inputs$input_types.END_ROW&&(a=d.connection.targetBlock(),d.type===u.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Re=u.createElement$$module$build$src$core$utils$xml("value"):d.type===u.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Re=u.createElement$$module$build$src$core$utils$xml("statement")),F=d.connection.getShadowDom(),!F||a&&a.isShadow()||Re.appendChild(Xs(F,t)),a&&(a=fs(a,t),a.nodeType===po.ELEMENT_NODE&&(Re.appendChild(a),m=!1)),Re.setAttribute("name",d.name),m||i.appendChild(Re))}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&i.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&i.setAttribute("collapsed","true"),e.isEnabled()||i.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||i.setAttribute("deletable","false"),e.isOwnMovable()||i.setAttribute("movable","false"),e.isOwnEditable()||i.setAttribute("editable","false"),Re=e.getNextBlock();let st;return Re&&(n=fs(Re,t),n.nodeType===po.ELEMENT_NODE&&(st=u.createElement$$module$build$src$core$utils$xml("next"),st.appendChild(n),i.appendChild(st))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||Re&&Re.isShadow()||st.appendChild(Xs(e,t)),i},Xs=function(e,t){let i=e=e.cloneNode(!0),n;for(;i;)if(t&&i.nodeName==="shadow"&&i.removeAttribute("id"),i.firstChild)i=i.firstChild;else{for(;i&&!i.nextSibling;){n=i,i=i.parentNode;let a;n.nodeType===po.TEXT_NODE&&n.data.trim()===""&&((a=i)==null?void 0:a.firstChild)!==n&&M(n)}i&&(n=i,i=i.nextSibling,n.nodeType===po.TEXT_NODE&&n.data.trim()===""&&M(n))}return e},Ys=function(e){return Sr(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Vn=function(e){e=Ys(e).split("<");let t="";for(let i=1;i<e.length;i++){const n=e[i];n[0]==="/"&&(t=t.substring(2)),e[i]=t+"<"+n,n[0]!=="/"&&n.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},Hd=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=u.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},u.domToWorkspace$$module$build$src$core$xml=function(e,t){let i=0;t.RTL&&(i=t.getWidth());const n=[];we();const a=u.getGroup$$module$build$src$core$events$utils();a||u.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let d=!0;try{for(let m=0,F;F=e.childNodes[m];m++){const Re=F.nodeName.toLowerCase(),st=F;if(Re==="block"||Re==="shadow"&&!Oe()){const Ei=ao(st,t);n.push(Ei.id);let Jt;const hs=parseInt((Jt=st.getAttribute("x"))!=null?Jt:"10",10);let ml;const Er=parseInt((ml=st.getAttribute("y"))!=null?ml:"10",10);isNaN(hs)||isNaN(Er)||Ei.moveBy(t.RTL?i-hs:hs,Er,["create"]),d=!1}else{if(Re==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Re==="comment")Qc(st,t);else if(Re==="variables"){if(d)eh(st,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");d=!1}}}}finally{u.setGroup$$module$build$src$core$events$utils(a),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&Co(),Be()}return N(new(We($e.FINISHED_LOADING))(t)),n},Qc=function(e,t){var i;const n=(i=e.getAttribute("id"))!=null?i:void 0;i=t.rendered?new Go(t,n):new Sa(t,n);var a;i.setText((a=e.textContent)!=null?a:"");var d;a=parseInt((d=e.getAttribute("x"))!=null?d:"",10);let m;d=parseInt((m=e.getAttribute("y"))!=null?m:"",10),isNaN(a)||isNaN(d)||(a=t.RTL?t.getWidth()-a:a,i.moveTo(new De(a,d)));var F;t=parseInt((F=e.getAttribute("w"))!=null?F:"",10);let Re;return F=parseInt((Re=e.getAttribute("h"))!=null?Re:"",10),isNaN(t)||isNaN(F)||i.setSize(new bt(t,F)),e.getAttribute("collapsed")==="true"&&i.setCollapsed(!0),e.getAttribute("editable")==="false"&&i.setEditable(!1),e.getAttribute("movable")==="false"&&i.setMovable(!1),e.getAttribute("deletable")==="false"&&i.setDeletable(!1),i},kl=function(e,t){if(!t.getBlocksBoundingBox)return u.domToWorkspace$$module$build$src$core$xml(e,t);var i=t.getBlocksBoundingBox();if(e=u.domToWorkspace$$module$build$src$core$xml(e,t),i&&i.top!==i.bottom){var n=i.bottom;i=t.RTL?i.right:i.left;var a=1/0;let d=-1/0,m=1/0;for(let F=0;F<e.length;F++){const Re=t.getBlockById(e[F]).getRelativeToSurfaceXY();Re.y<m&&(m=Re.y),Re.x<a&&(a=Re.x),Re.x>d&&(d=Re.x)}for(n=n-m+10,i=t.RTL?i-d:i-a,a=0;a<e.length;a++)t.getBlockById(e[a]).moveBy(i,n,["create"])}return e},u.domToBlock$$module$build$src$core$xml=function(e,t){return e=ao(e,t),t.rendered&&Co(),e},ao=function(e,t){u.disable$$module$build$src$core$events$utils();var i=t.getAllVariables();let n;try{if(n=Wn(e,t),t.rendered){const a=n,d=n.getDescendants(!1);a.setConnectionTracking(!1);for(let m=d.length-1;m>=0;m--)d[m].initSvg();for(let m=d.length-1;m>=0;m--)d[m].queueRender();setTimeout(function(){a.disposed||a.setConnectionTracking(!0)},1),t.resizeContents()}else{const a=n.getDescendants(!1);for(let d=a.length-1;d>=0;d--)a[d].initModel()}}finally{u.enable$$module$build$src$core$events$utils()}if(He()){for(e=Jo(t,i),t=0;t<e.length;t++)i=e[t],N(new(We($e.VAR_CREATE))(i));N(new(We($e.BLOCK_CREATE))(n))}return n},eh=function(e,t){for(let n=0;n<e.children.length;n++){var i=e.children[n];const a=i.getAttribute("type"),d=i.getAttribute("id");if(i=i.textContent,!i)break;let m;t.getVariableMap().createVariable(i,(m=a)!=null?m:void 0,d)}},wl=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let i=0;i<e.children.length;i++){const n=e.children[i];if(n.nodeType!==po.TEXT_NODE)switch(n.nodeName.toLowerCase()){case"mutation":t.mutation.push(n);break;case"comment":t.comment.push(n);break;case"data":t.data.push(n);break;case"title":case"field":t.field.push(n);break;case"value":case"statement":t.input.push(n);break;case"next":t.next.push(n);break;default:console.warn("Ignoring unknown tag: "+n.nodeName)}}return t},th=function(e,t){let i=!1;for(let n=0;n<e.length;n++){const a=e[n];t.domToMutation&&(t.domToMutation(a),t.initSvg&&(i=!0))}return i},zn=function(e,t){for(let i=0;i<e.length;i++){const n=e[i],a=n.textContent,d=n.getAttribute("pinned")==="true";let m;const F=parseInt((m=n.getAttribute("w"))!=null?m:"50",10);let Re;const st=parseInt((Re=n.getAttribute("h"))!=null?Re:"50",10);let Ei,Jt=parseInt((Ei=n.getAttribute("x"))!=null?Ei:"",10),hs;const ml=parseInt((hs=n.getAttribute("y"))!=null?hs:"",10);t.setCommentText(a);const Er=t.getIcon(di.COMMENT);isNaN(F)||isNaN(st)||Er.setBubbleSize(new bt(F,st)),Er.setBubbleVisible(d),setTimeout(()=>{isNaN(Jt)||isNaN(ml)||(Jt=t.workspace.RTL?t.workspace.getWidth()-(Jt+F):Jt,Er.setBubbleLocation(new De(Jt,ml))),Er.setBubbleVisible(d)},1)}},ko=function(e,t){for(let i=0;i<e.length;i++)t.data=e[i].textContent},ln=function(e,t){for(let i=0;i<e.length;i++){const n=e[i],a=n.getAttribute("name");a?cu(t,a,n):console.warn(`Ignoring unnamed field in block ${t.type}`)}},uo=function(e){let t=null,i=null;for(let n=0;n<e.childNodes.length;n++){const a=e.childNodes[n];Fi(a)&&(a.nodeName.toLowerCase()==="block"?t=a:a.nodeName.toLowerCase()==="shadow"&&(i=a))}return{childBlockElement:t,childShadowElement:i}},ih=function(e,t,i,n){for(let d=0;d<e.length;d++){var a=e[d];const m=a.getAttribute("name"),F=m?i.getInput(m):null;if(!F){console.warn("Ignoring non-existent input "+m+" in block "+n);break}if(a=uo(a),a.childBlockElement){if(!F.connection)throw TypeError("Input connection does not exist.");Wn(a.childBlockElement,t,F.connection,!1)}if(a.childShadowElement){let Re;(Re=F.connection)==null||Re.setShadowDom(a.childShadowElement)}}},sh=function(e,t,i){for(let n=0;n<e.length;n++){const a=uo(e[n]);if(a.childBlockElement){if(!i.nextConnection)throw TypeError("Next statement does not exist.");if(i.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Wn(a.childBlockElement,t,i.nextConnection,!0)}a.childShadowElement&&i.nextConnection&&i.nextConnection.setShadowDom(a.childShadowElement)}},Wn=function(e,t,i,n){var a;const d=e.getAttribute("type");if(!d)throw TypeError("Block type unspecified: "+e.outerHTML);var m=(a=e.getAttribute("id"))!=null?a:void 0;a=t.newBlock(d,m),m=wl(e);const F=th(m.mutation,a);if(zn(m.comment,a),ko(m.data,a),i)if(n)if(a.previousConnection)i.connect(a.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(a.outputConnection)i.connect(a.outputConnection);else if(a.previousConnection)i.connect(a.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(ln(m.field,a),ih(m.input,t,a,d),sh(m.next,t,a),F&&a.initSvg(),(t=e.getAttribute("inline"))&&a.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&a.setDisabledReason(t==="true"||t==="disabled",ci),t=e.getAttribute("disabled-reasons"),t!==null)for(var Re of t.split(","))a.setDisabledReason(!0,decodeURIComponent(Re));if((Re=e.getAttribute("deletable"))&&a.setDeletable(Re==="true"),(Re=e.getAttribute("movable"))&&a.setMovable(Re==="true"),(Re=e.getAttribute("editable"))&&a.setEditable(Re==="true"),(Re=e.getAttribute("collapsed"))&&a.setCollapsed(Re==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=a.getChildren(!1),Re=0;Re<e.length;Re++)if(!e[Re].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");a.setShadow(!0)}return a},cu=function(e,t,i){const n=e.getField(t);n?n.fromXml(i):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Xn=function(e){for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes[t];if(i.nodeName.toLowerCase()==="next"){e.removeChild(i);break}}},Fi=function(e){return e.nodeType===po.ELEMENT_NODE},Ls=function(e,t){p(ye.FIELD,e,t)},Gd=function(e){b(ye.FIELD,e)},u.fromJson$$module$build$src$core$field_registry=function(e){return Fp.fromJsonInternal(e)},w$=function(e){const t=C(ye.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},Ml=function(e){return e&&typeof e=="object"&&"src"in e&&typeof e.src=="string"&&"alt"in e&&typeof e.alt=="string"&&"width"in e&&typeof e.width=="number"&&"height"in e&&typeof e.height=="number"},u.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(yo[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');yo[e]=t},u.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');u.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},u.registerMutator$$module$build$src$core$extensions=function(e,t,i,n){const a='Error when registering mutator "'+e+'": ';Vd(a,t);const d=Yn(t,a);if(i&&typeof i!="function")throw Error(a+'Extension "'+e+'" is not a function');u.register$$module$build$src$core$extensions(e,function(){d&&this.setMutator(new u.MutatorIcon$$module$build$src$core$icons$mutator_icon(n||[],this)),this.mixin(t),i&&i.apply(this)})},M$=function(e){vi(e)?delete yo[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},vi=function(e){return!!yo[e]},Dl=function(e,t,i){const n=yo[e];if(typeof n!="function")throw Error('Error: Extension "'+e+'" not found.');let a;if(i?xl(e,t):a=hu(t),n.apply(t),i)Vd('Error after applying mutator "'+e+'": ',t);else if(!D$(a,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},xl=function(e,t){if(hu(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Bl=function(e,t){return an(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},oh=function(e,t){return an(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},Yn=function(e,t){return an(e.compose,e.decompose,t+" compose/decompose")},an=function(e,t,i){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(i+" must be a function");return!0}if(!e&&!t)return!1;throw Error(i+"Must have both or neither functions")},Vd=function(e,t){const i=Bl(t,e),n=oh(t,e);if(!i&&!n)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");Yn(t,e)},hu=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},D$=function(e,t){if(t=hu(t),t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},zd=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},u.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const i=[];return function(){i.includes(this.type)||(jn(this,e,t),i.push(this.type)),this.setTooltip((function(){const n=String(this.getFieldValue(e));return Ot(t[n])}).bind(this))}},jn=function(e,t,i){var n=e.getField(t);if(n instanceof ei&&!n.isOptionListDynamic()){n=n.getOptions();for(const a of n)a!==ei.SEPARATOR&&([,n]=a,i[n]===void 0&&console.warn(`No tooltip mapping for value ${n} of field ${t} of block type ${e.type}.`))}},u.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const i=this.getField(t);return Ot(e).replace("%1",i?i.getText():"")}).bind(this))}},nh=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},et=function(e,t){return" "+e+","+t+" "},os=function(e,t){return" "+e+t.join("")},$i=function(e,t){return" M "+e+","+t+" "},ti=function(e,t){return" m "+e+","+t+" "},ks=function(e,t){return" l "+e+","+t+" "},Kn=function(e){return" l"+e.join("")},it=function(e,t){return" "+e+" "+t+" "},qt=function(e,t,i,n){return e+" "+i+" "+i+" "+t+n},Wd=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},Pl=function(e,t){let i=null;t=t.outputConnection;const n=t?.getConnectionChecker();for(let a=0,d;d=e.inputList[a];a++){const m=d.connection;let F;if(m&&((F=n)!=null&&F.canConnect(t,m,!1))){if(i)return null;i=m}}return i},Xd=function(e,t){let i;for(;i=Pl(e,t);)if(e=i.targetBlock(),!e||e.isShadow())return i;return null},rh=function(e){return qe(e)&&typeof e.getType=="function"&&typeof e.initView=="function"&&typeof e.dispose=="function"&&typeof e.getWeight=="function"&&typeof e.getSize=="function"&&typeof e.applyColour=="function"&&typeof e.hideForInsertionMarker=="function"&&typeof e.updateEditable=="function"&&typeof e.updateCollapsed=="function"&&typeof e.isShownWhenCollapsed=="function"&&typeof e.setOffsetInBlock=="function"&&typeof e.onLocationChange=="function"&&typeof e.onClick=="function"},un=function(e){return rh(e)&&kr(e)&&Ki(e)&&typeof e.setText=="function"&&typeof e.getText=="function"&&typeof e.setBubbleSize=="function"&&typeof e.getBubbleSize=="function"&&typeof e.setBubbleLocation=="function"&&typeof e.getBubbleLocation=="function"&&e.getType()===di.COMMENT},Ul=function(e){if(!(e.getDescendants(!1).length>100)){var t=e.workspace,i=e.getSvgRoot();t.getAudioManager().play("delete");var n=e.getRelativeToSurfaceXY(),a=i.cloneNode(!0);a.setAttribute("transform","translate("+n.x+","+n.y+")");var d;(d=t.getLayerManager())==null||d.appendToAnimationLayer({getSvgRoot:()=>a}),du(a,{x:n.x,y:n.y,width:e.width,height:e.height},t.RTL,new Date)}},du=function(e,t,i,n){const a=(new Date().getTime()-n.getTime())/150;a>1?M(e):(e.setAttribute("transform","translate("+(t.x+(i?-1:1)*t.width/2*a)+","+(t.y+t.height/2*a)+") scale("+(1-a)+")"),setTimeout(du,10,e,t,i,n))},wo=function(e){var t=e.workspace;const i=t.scale;if(t.getAudioManager().play("click"),!(i<1)){var n=t.getSvgXY(e.getSvgRoot());e.outputConnection?(n.x+=(e.RTL?3:-3)*i,n.y+=13*i):e.previousConnection&&(n.x+=(e.RTL?-23:23)*i,n.y+=3*i);var a=be(ae.CIRCLE,{cx:n.x,cy:n.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=be(ae.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*i},a),t=be(ae.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},a),e.beginElement(),t.beginElement(),setTimeout(()=>void M(a),150)}},Mo=function(e){if(Jn(),e.workspace.getAudioManager().play("disconnect"),!(e.workspace.scale<1)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Cn=e,Xr(e,t,new Date,0)}},Xr=function(e,t,i,n){const a=[.66,1,.66,0,-.66,-1,-.66,0];let d="";i.getTime()+200>new Date().getTime()&&(d=`skewX(${Math.round(a[n%a.length]*t)})`,ld=setTimeout(Xr,15,e,t,i,n+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${d}`)},Jn=function(){Cn&&(ld&&(clearTimeout(ld),ld=null),Cn.getSvgRoot().setAttribute("transform",Cn.getTranslation()),Cn=null)},lh=function(e,t){const i=e.workspace,n=u.config$$module$build$src$core$config.snapRadius,a=De.difference(t,e.getRelativeToSurfaceXY()),d=new De(0,0),m=i.getAllBlocks(!1).filter(F=>F.id!=e.id).map(F=>F.getRelativeToSurfaceXY());for(;Fl(De.sum(t,d),m)||Hl(e,De.sum(a,d),n);)i.RTL?d.translate(-n,n*2):d.translate(n,n*2);e.moveTo(De.sum(t,d))},Fl=function(e,t){return t.some(i=>Math.abs(i.x-e.x)<=1&&Math.abs(i.y-e.y)<=1)},Hl=function(e,t,i){return e.getConnections_(!1).some(n=>!!n.closest(i,t).connection)},Yr=function(e,t,i){const n=i.getBoundingRectangle(),a=n.right-n.left,d=Cl(t.top,n.top,t.top+t.height-(n.bottom-n.top))-n.top;let m=t.left;return t=t.left+t.width-a,e.RTL?m=Math.min(t,m):t=Math.max(m,t),(e=Cl(m,n.left,t)-n.left)||d?(i.moveBy(e,d,["inbounds"]),!0):!1},ah=function(e){return t=>{var i=e.getMetricsManager();if(i.hasFixedEdges()&&!e.isDragging()){var n;if(gp.includes((n=t.type)!=null?n:"")){n=i.getScrollMetrics(!0);const a=jr(e,t);a&&(i=u.getGroup$$module$build$src$core$events$utils()||!1,u.setGroup$$module$build$src$core$events$utils(t.group),Yr(e,n,a)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),u.setGroup$$module$build$src$core$events$utils(i))}else Fe(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Kr(e)}}},jr=function(e,t){let i=null;switch(t.type){case $e.BLOCK_CREATE:case $e.BLOCK_MOVE:(i=e.getBlockById(t.blockId))&&(i=i.getRootBlock());break;case $e.COMMENT_CREATE:case $e.COMMENT_MOVE:case $e.COMMENT_RESIZE:i=e.getCommentById(t.commentId)}return i},Kr=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var i=e.getTopBoundedElements();for(let n=0,a;a=i[n];n++)Yr(e,t,a)}},ws=function(e){return e&&typeof e.isDeletable=="function"&&typeof e.dispose=="function"&&typeof e.setDeleteStyle=="function"},pu=function(e,t){const i=e.getIcons();for(const n of e.inputList){if(!n.isVisible())continue;i.push(...n.fieldRow);let a;if((a=n.connection)!=null&&a.targetBlock())if(e=n.connection.targetBlock(),n.connection.type!==Je.NEXT_STATEMENT||t)i.push(e);else{let d;(e=(d=e.lastConnectionInStack(!1))==null?void 0:d.getSourceBlock())&&i.push(e)}else{let d;((d=n.connection)==null?void 0:d.type)===Je.INPUT_VALUE&&i.push(n.connection)}}return i},qn=function(e,t){const i=e.workspace.getTopBoundedElements(!0).filter(a=>qe(a));e=i.indexOf(e instanceof wt?e.getRootBlock():e)+t;let n=null;if(e>=0&&e<i.length?n=i[e]:e<0?n=i[i.length-1]:e>=i.length&&(n=i[0]),t<0&&n instanceof wt){let a,d;return(d=(a=n.lastConnectionInStack(!1))==null?void 0:a.getSourceBlock())!=null?d:n}return n},Hi=function(e,t){var i;let n;const a=e instanceof wt?(n=(i=e.outputConnection)==null?void 0:i.targetBlock())!=null?n:e.getSurroundParent():e.getSourceBlock();return!(a instanceof wt)||(i=pu(a,t>0),e=i.indexOf(e),e===-1)?null:(t=e+t,t>=0&&t<i.length?i[t]:null)},$t=function(e){return e&&typeof e.getRelativeToSurfaceXY=="function"&&typeof e.isMovable=="function"&&typeof e.startDrag=="function"&&typeof e.drag=="function"&&typeof e.endDrag=="function"&&typeof e.revertDrag=="function"},Pt=function(e){return e&&typeof e.autoHide=="function"},gi=function(e,t){p(ye.ICON,e.toString(),t)},$u=function(e){b(ye.ICON,e)},Ms=function(e){return typeof e.getProcedureModel=="function"&&typeof e.doProcedureUpdate=="function"&&typeof e.isProcedureDef=="function"},Do=function(e){return e&&typeof e.startPublishing=="function"&&typeof e.stopPublishing=="function"},Zn=function(e){const t=e.getProcedureMap().getProcedures().filter(n=>!n.getReturnTypes()).map(n=>[n.getName(),n.getParameters().map(a=>a.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(n=>{!Ms(n)&&io(n)&&t.push(n.getProcedureDef())});const i=e.getProcedureMap().getProcedures().filter(n=>!!n.getReturnTypes()).map(n=>[n.getName(),n.getParameters().map(a=>a.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(n=>{!Ms(n)&&io(n)&&i.push(n.getProcedureDef())}),t.sort(Jr),i.sort(Jr),[t,i]},Jr=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},u.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||u.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!qr(e,t.workspace,t);){const i=e.match(/^(.*?)(\d+)$/);e=i?i[1]+(parseInt(i[2])+1):e+"2"}return e},qr=function(e,t,i){return!Yd(e,t,i)},Yd=function(e,t,i){for(const n of t.getAllBlocks(!1))if(n!==i&&io(n)&&u.Names$$module$build$src$core$names.equals(n.getProcedureDef()[0],e))return!0;i=i&&Ms(i)?i?.getProcedureModel():void 0;for(const n of t.getProcedureMap().getProcedures())if(n!==i&&u.Names$$module$build$src$core$names.equals(n.getName(),e))return!0;return!1},u.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new ni;e=e.trim();const i=u.findLegalName$$module$build$src$core$procedures(e,t);Ms(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(i);const n=this.getValue();if(n!==e&&n!==i)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const a=e[t];a.renameProcedure&&a.renameProcedure(n,i)}return i},fi=function(e){function t(d,m){for(let Re=0;Re<d.length;Re++){var F=d[Re][0];const st=d[Re][1],Ei=u.createElement$$module$build$src$core$utils$xml("block");Ei.setAttribute("type",m),Ei.setAttribute("gap","16");const Jt=u.createElement$$module$build$src$core$utils$xml("mutation");for(Jt.setAttribute("name",F),Ei.appendChild(Jt),F=0;F<st.length;F++){const hs=u.createElement$$module$build$src$core$utils$xml("arg");hs.setAttribute("name",st[F]),Jt.appendChild(hs)}i.push(Ei)}}const i=[];if(Kt.procedures_defnoreturn){var n=u.createElement$$module$build$src$core$utils$xml("block");n.setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap","16");var a=u.createElement$$module$build$src$core$utils$xml("field");a.setAttribute("name","NAME"),a.appendChild(u.createTextNode$$module$build$src$core$utils$xml(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),n.appendChild(a),i.push(n)}return Kt.procedures_defreturn&&(n=u.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","procedures_defreturn"),n.setAttribute("gap","16"),a=u.createElement$$module$build$src$core$utils$xml("field"),a.setAttribute("name","NAME"),a.appendChild(u.createTextNode$$module$build$src$core$utils$xml(u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),n.appendChild(a),i.push(n)),Kt.procedures_ifreturn&&(n=u.createElement$$module$build$src$core$utils$xml("block"),n.setAttribute("type","procedures_ifreturn"),n.setAttribute("gap","16"),i.push(n)),i.length&&i[i.length-1].setAttribute("gap","24"),e=Zn(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),i},Gl=function(e){return gu(e,!1)},gu=function(e,t=!0){function i(a,d){for(const[m,F]of a)n.push({kind:"block",type:d,gap:16,extraState:{name:m,params:F}})}if(t)return Di("The XML return value of Blockly.Procedures.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),fi(e);const n=[];return Kt.procedures_defnoreturn&&n.push({kind:"block",type:"procedures_defnoreturn",gap:16,fields:{NAME:u.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE}}),Kt.procedures_defreturn&&n.push({kind:"block",type:"procedures_defreturn",gap:16,fields:{NAME:u.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE}}),Kt.procedures_ifreturn&&n.push({kind:"block",type:"procedures_ifreturn",gap:16}),n.length&&(n[n.length-1].gap=24),e=Zn(e),i(e[0],"procedures_callnoreturn"),i(e[1],"procedures_callreturn"),n},uh=function(e){var t=[],i=e.getBlocksByType("procedures_mutatorarg",!1);for(let d=0,m;m=i[d];d++)t.push(m.getFieldValue("NAME"));i=u.createElement$$module$build$src$core$utils$xml("xml");const n=u.createElement$$module$build$src$core$utils$xml("block");n.setAttribute("type","procedures_mutatorarg");const a=u.createElement$$module$build$src$core$utils$xml("field");a.setAttribute("name","NAME"),t=Nr(u.DEFAULT_ARG$$module$build$src$core$procedures,t),t=u.createTextNode$$module$build$src$core$utils$xml(t),a.appendChild(t),n.appendChild(a),i.appendChild(n),e.updateToolbox(i)},ch=function(e){if(ue(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=ht(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),uh(e),e.addChangeListener(x$))}},x$=function(e){(Xe(e)||Y(e)||ve(e)||T(e))&&(e=ht(e.workspaceId),uh(e))},fu=function(e,t){return t.getAllBlocks(!1).filter(i=>hh(i,e)||yd(i)&&u.Names$$module$build$src$core$names.equals(i.getProcedureCall(),e))},hh=function(e,t){return Ms(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&u.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},u.mutateCallers$$module$build$src$core$procedures=function(e){const t=Oe();var i=e.getProcedureDef()[0];const n=e.mutationToDom(!0);e=fu(i,e.workspace);for(let d=0,m;m=e[d];d++){i=(i=m.mutationToDom())&&Sr(i),m.domToMutation&&m.domToMutation(n);var a=m.mutationToDom();a=a&&Sr(a),i!==a&&(u.setRecordUndo$$module$build$src$core$events$utils(!1),N(new(We($e.BLOCK_CHANGE))(m,"mutation",null,i,a)),u.setRecordUndo$$module$build$src$core$events$utils(t))}},u.getDefinition$$module$build$src$core$procedures=function(e,t){for(const i of t.getAllBlocks(!1))if(Ms(i)&&i.isProcedureDef()&&u.Names$$module$build$src$core$names.equals(i.getProcedureModel().getName(),e)||io(i)&&u.Names$$module$build$src$core$names.equals(i.getProcedureDef()[0],e))return i;return null},Vl=function(e){return e.isDynamic},ns=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},yi=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Zr=function(e,t){p(ye.RENDERER,e,t)},zl=function(e){b(ye.RENDERER,e)},Wl=function(e,t,i){return e=new(E(ye.RENDERER,e))(e),e.init(t,i),e},Xl=function(e){Ao(e.getTargetWorkspace(),void 0,"String")},js=function(e){Ao(e.getTargetWorkspace(),void 0,"Number")},Qr=function(e){Ao(e.getTargetWorkspace(),void 0,"Colour")},Yl=function(e){return _u(e,!1)},_u=function(e,t=!0){return Kt.variables_set_dynamic||Kt.variables_get_dynamic||console.warn("There are no dynamic variable blocks, but there is a dynamic variable category."),t?(Di("The XML return value of Blockly.VariablesDynamic.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),jd(e)):(e.registerButtonCallback("CREATE_VARIABLE_STRING",Xl),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",js),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Qr),[{kind:"button",text:u.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE,callbackkey:"CREATE_VARIABLE_STRING"},{kind:"button",text:u.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE,callbackkey:"CREATE_VARIABLE_NUMBER"},{kind:"button",text:u.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE,callbackkey:"CREATE_VARIABLE_COLOUR"},...Un(e,e.getVariableMap().getAllVariables(),!1,"variables_get_dynamic","variables_set_dynamic")])},jd=function(e){let t=[],i=document.createElement("button");return i.setAttribute("text",u.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(i),i=document.createElement("button"),i.setAttribute("text",u.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(i),i=document.createElement("button"),i.setAttribute("text",u.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(i),e.registerButtonCallback("CREATE_VARIABLE_STRING",Xl),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",js),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Qr),e=dh(e),t=t.concat(e)},dh=function(e){e=e.getVariableMap().getAllVariables();const t=[];if(e.length>0){if(Kt.variables_set_dynamic){var i=e[e.length-1];const n=u.createElement$$module$build$src$core$utils$xml("block");n.setAttribute("type","variables_set_dynamic"),n.setAttribute("gap","24"),n.appendChild(Ko(i)),t.push(n)}if(Kt.variables_get_dynamic){e.sort(qo);for(let n=0,a;a=e[n];n++)i=u.createElement$$module$build$src$core$utils$xml("block"),i.setAttribute("type","variables_get_dynamic"),i.setAttribute("gap","8"),i.appendChild(Ko(a)),t.push(i)}}return t},mu=function(e,t){const i=e.toCopyData();return Qp=i,e$=ut(e)&&e.workspace instanceof ys?e.workspace:null,pg=t,i},Tu=function(){return Qp},Kd=function(e){Qp=e},Eu=function(){return e$},ph=function(e){e$=e},$h=function(){return pg},B$=function(e){pg=e},cn=function(e,t,i){return e&&t?gh(e,t,i):Qp&&e$?gh(Qp,e$,pg):null},gh=function(e,t,i){let n;t=t.isMutator?t:(n=t.options.parentWorkspace)!=null?n:t;let a,d;return(d=(a=C(ye.PASTER,e.paster,!1))==null?void 0:a.paste(e,t,i))!=null?d:null},jl=function(e){return e&&typeof e.toCopyData=="function"},bu=function(){zt.registry.register({name:gr.ESCAPE,preconditionFn(e){return!e.isReadOnly()},callback(e){return e.hideChaff(),!0},keyCodes:[Ut.ESC]})},fh=function(){zt.registry.register({name:gr.DELETE,preconditionFn(e,t){return t=t.focusedNode,!e.isReadOnly()&&t!=null&&ws(t)&&t.isDeletable()&&!e.isDragging()&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(e,t,i,n){return t.preventDefault(),e=n.focusedNode,e instanceof wt?e.checkAndDelete():ws(e)&&e.isDeletable()&&(u.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),u.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[Ut.DELETE,Ut.BACKSPACE]})},Su=function(e){return jl(e)&&ws(e)&&$t(e)?e.isCopyable?e.isCopyable():e instanceof wt||e instanceof Go?e.isOwnDeletable()&&e.isOwnMovable():e.isDeletable()&&e.isMovable():!1},_h=function(e){return Su(e)&&ws(e)&&e.isDeletable()},mh=function(){const e=zt.registry.createSerializedKey(Ut.C,[Ut.CTRL]),t=zt.registry.createSerializedKey(Ut.C,[Ut.META]);zt.registry.register({name:gr.COPY,preconditionFn(i,n){return n=n.focusedNode,i=i.isFlyout?i.targetWorkspace:i,!!n&&!!i&&!i.isDragging()&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Su(n)},callback(i,n,a,d){return n.preventDefault(),n=d.focusedNode,!n||!jl(n)||!Su(n)||(i=i.isFlyout?i.targetWorkspace:i,!i)?!1:(n.workspace.isFlyout||i.hideChaff(),i=$t(n)&&n.workspace==i?n.getRelativeToSurfaceXY():void 0,!!mu(n,i))},keyCodes:[e,t]})},Th=function(){const e=zt.registry.createSerializedKey(Ut.X,[Ut.CTRL]),t=zt.registry.createSerializedKey(Ut.X,[Ut.META]);zt.registry.register({name:gr.CUT,preconditionFn(i,n){return n=n.focusedNode,!!n&&!i.isReadOnly()&&!i.isDragging()&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&_h(n)},callback(i,n,a,d){return i=d.focusedNode,!i||!_h(i)||!jl(i)?!1:(n=$t(i)?i.getRelativeToSurfaceXY():void 0,n=mu(i,n),i instanceof wt?i.checkAndDelete():ws(i)&&i.dispose(),!!n)},keyCodes:[e,t]})},Jd=function(){const e=zt.registry.createSerializedKey(Ut.V,[Ut.CTRL]),t=zt.registry.createSerializedKey(Ut.V,[Ut.META]);zt.registry.register({name:gr.PASTE,preconditionFn(){var i=Eu();return!i||!i.rendered?!1:(i=i.isFlyout?i.targetWorkspace:i,!!Tu()&&!!i&&!i.isReadOnly()&&!i.isDragging()&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken())},callback(i,n){if(i=Tu(),!i)return!1;var a=Eu();if(!a||(a=a.isFlyout?a.targetWorkspace:a,!a||a.isReadOnly()))return!1;if(n instanceof PointerEvent)return n=br(a,new De(n.clientX,n.clientY)),!!cn(i,a,n);if(n=$h(),!n)return!!cn(i,a);const{left:d,top:m,width:F,height:Re}=a.getMetricsManager().getViewMetrics(!0);return new at(m,m+Re,d,d+F).contains(n.x,n.y)?!!cn(i,a):(n=new De(d+F/2,m+Re/2),!!cn(i,a,n))},keyCodes:[e,t]})},Eh=function(){const e=zt.registry.createSerializedKey(Ut.Z,[Ut.CTRL]),t=zt.registry.createSerializedKey(Ut.Z,[Ut.META]);zt.registry.register({name:gr.UNDO,preconditionFn(i){return!i.isReadOnly()&&!i.isDragging()&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(i,n){return i.hideChaff(),i.undo(!1),n.preventDefault(),!0},keyCodes:[e,t]})},Qn=function(){const e=zt.registry.createSerializedKey(Ut.Z,[Ut.CTRL,Ut.SHIFT]),t=zt.registry.createSerializedKey(Ut.Z,[Ut.META,Ut.SHIFT]),i=zt.registry.createSerializedKey(Ut.Y,[Ut.CTRL]);zt.registry.register({name:gr.REDO,preconditionFn(n){return!n.isDragging()&&!n.isReadOnly()&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(n,a){return n.hideChaff(),n.undo(!0),a.preventDefault(),!0},keyCodes:[e,t,i]})},Kl=function(){bu(),fh(),mh(),Th(),Jd(),Eh(),Qn()},bh=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(i=>i.saveState())),t},Jl=function(e,t,i,n){if(e=e.loadState(i,n),!i.parameters)return e;for(const[a,d]of i.parameters.entries())e.insertParameter(t.loadState(d,n),a);return e},ql=function(e){const t=Object.create(null),i=z(ye.SERIALIZER,!0);for(const n in i){let a;const d=(a=i[n])==null?void 0:a.save(e);d&&(t[n]=d)}return t},qd=function(e,t,{recordUndo:i=!1}={}){var n=z(ye.SERIALIZER,!0);if(n){n=Object.entries(n).sort((d,m)=>m[1].priority-d[1].priority);var a=Oe();u.setRecordUndo$$module$build$src$core$events$utils(i),(i=u.getGroup$$module$build$src$core$events$utils())||u.setGroup$$module$build$src$core$events$utils(!0),we(),t instanceof ys&&t.setResizesEnabled(!1);for(const[,d]of n.reverse()){let m;(m=d)==null||m.clear(t)}for(const[d,m]of n.reverse())if(e[d]){let F;(F=m)==null||F.load(e[d],t)}t instanceof ys&&t.setResizesEnabled(!0),Be(),N(new(We($e.FINISHED_LOADING))(t)),u.setGroup$$module$build$src$core$events$utils(i),u.setRecordUndo$$module$build$src$core$events$utils(a)}},Zd=function(e,t){let i=null;i=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var n;if(!document.contains(i)&&document!==((n=i)==null?void 0:n.ownerDocument))throw Error("Error: container is not in current document");e=new Vo(t||{}),n=document.createElement("div"),Ge(n,"injectionDiv"),t!=null&&t.rtl&&Ge(n,"blocklyRTL"),i.appendChild(n),t=Qd(n,e);const a=ep(n,t,e);return tp(a),R(a),Os(a),n.addEventListener("focusin",function(){R(a)}),L(n,"keydown",null,re),a},Qd=function(e,t){e.setAttribute("dir","LTR"),ct(t.hasCss,t.pathToMedia);const i=be(ae.SVG,{xmlns:tl,"xmlns:html":ho,"xmlns:xlink":Oi,version:"1.1",class:"blocklySvg"},e),n=be(ae.DEFS,{},i),a=String(Math.random()).substring(2);return t.gridPattern=Kp.createDom(a,t.gridOptions,n,e),i},ep=function(e,t,i){i.parentWorkspace=null,i=new ys(i);const n=i.options;i.scale=n.zoomOptions.startScale,t.appendChild(i.createDom("blocklyMainBackground",e));var a=i.getRenderer().getClassName();return a&&Ge(e,a),(a=i.getTheme().getClassName())&&Ge(e,a),!n.hasCategories&&n.languageTree&&(e=i.addFlyout(ae.SVG),B(e,t)),n.hasTrashcan&&i.addTrashcan(),n.zoomOptions&&n.zoomOptions.controls&&i.addZoomControls(),i.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),i.translate(0,0),i.addChangeListener(ah(i)),Os(i),iu(),Dc(),Yc(),i},tp=function(e){const t=e.options;var i=e.getParentSvg();if(L(i.parentNode,"contextmenu",null,function(n){D(n)||n.preventDefault()}),i=L(window,"resize",null,function(){no(),e.hideComponents(!0),ja(),nn(),Os(e),Kr(e)}),e.setResizeHandlerWrapper(i),ip(),t.languageTree){i=e.getToolbox();const n=e.getFlyout(!0);i?i.init():n&&(n.init(e),n.show(t.languageTree),typeof n.scrollToStart=="function"&&n.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Ca(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Sh(t.pathToMedia,e)},ip=function(){Gf||(L(document,"scroll",null,function(){const e=pi();for(let t=0,i;i=e[t];t++)i instanceof ys&&i.updateInverseScreenCTM()}),J(document,"touchend",null,A),J(document,"touchcancel",null,A)),Gf=!0},Sh=function(e,t){function i(){for(;a.length;){const d=a.pop();d&&x(d)}n.preload()}const n=t.getAudioManager();n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const a=[];a.push(L(document,"pointermove",null,i,!0)),a.push(L(document,"touchstart",null,i,!0))},vh=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return e.workspace.getUndoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:gt.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},yh=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return e.workspace.getRedoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:gt.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},vu=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?e.workspace.getTopBlocks(!1).length>1?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:gt.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Ih=function(e,t){function i(d){a--,d.setCollapsed(e),a===0&&u.setGroup$$module$build$src$core$events$utils(!1)}let n=0,a=0;u.setGroup$$module$build$src$core$events$utils(!0);for(let d=0;d<t.length;d++){let m=t[d];for(;m;)a++,setTimeout(i.bind(null,m),n),m=m.getNextBlock(),n+=10}},Oh=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let i=e[t];for(;i;){if(!i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Ih(!0,e.workspace.getTopBlocks(!0))},scopeType:gt.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},sp=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let i=e[t];for(;i;){if(i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Ih(!1,e.workspace.getTopBlocks(!0))},scopeType:gt.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},yu=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let i=0;i<e.length;i++)yu(e[i],t)}},Iu=function(e){const t=[];e=e.getTopBlocks(!0);for(let i=0;i<e.length;i++)yu(e[i],t);return t},Zl=function(e,t){t?u.setGroup$$module$build$src$core$events$utils(t):(u.setGroup$$module$build$src$core$events$utils(!0),t=u.getGroup$$module$build$src$core$events$utils());const i=e.shift();i&&(i.isDeadOrDying()?Zl(e,t):(i.dispose(!1,!0),setTimeout(Zl,10,e,t))),u.setGroup$$module$build$src$core$events$utils(!1)},Ou=function(){gt.registry.register({displayText(e){return e.workspace?(e=Iu(e.workspace).length,e===1?u.Msg$$module$build$src$core$msg.DELETE_BLOCK:u.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&Iu(e.workspace).length>0?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Iu(e.workspace);t.length<2?Zl(t):Cc(u.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(i){i&&Zl(t)})}},scopeType:gt.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},op=function(){vh(),yh(),vu(),Oh(),sp(),Ou()},Rh=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&cn(t,e.block.workspace)}},scopeType:gt.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},np=function(){gt.registry.register({displayText(e){return e.block.hasIcon(X.TYPE)?u.Msg$$module$build$src$core$msg.REMOVE_COMMENT:u.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.workspace.options.comments&&!e.isCollapsed()&&e.isEditable()?"enabled":"hidden"},callback(e){e=e.block,e.hasIcon(X.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:gt.ScopeType.BLOCK,id:"blockComment",weight:2})},rp=function(){gt.registry.register({displayText(e){return e.block.getInputsInline()?u.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:u.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof gg||e.inputList[t]instanceof gg))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:gt.ScopeType.BLOCK,id:"blockInline",weight:3})},Ch=function(){gt.registry.register({displayText(e){return e.block.isCollapsed()?u.Msg$$module$build$src$core$msg.EXPAND_BLOCK:u.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:gt.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},el=function(){gt.registry.register({displayText(e){return e.block.hasDisabledReason(ci)?u.Msg$$module$build$src$core$msg.ENABLE_BLOCK:u.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(ci)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=u.getGroup$$module$build$src$core$events$utils();t||u.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(ci),ci),u.setGroup$$module$build$src$core$events$utils(t)},scopeType:gt.ScopeType.BLOCK,id:"blockDisable",weight:5})},Ru=function(){gt.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?u.Msg$$module$build$src$core$msg.DELETE_BLOCK:u.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:gt.ScopeType.BLOCK,id:"blockDelete",weight:6})},Ql=function(){gt.registry.register({displayText(){return u.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:gt.ScopeType.BLOCK,id:"blockHelp",weight:7})},Ah=function(){gt.registry.register({displayText:()=>u.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){u.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),u.setGroup$$module$build$src$core$events$utils(!1)},scopeType:gt.ScopeType.COMMENT,id:"commentDelete",weight:6})},Nh=function(){gt.registry.register({displayText:()=>u.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&cn(t,e.comment.workspace)}},scopeType:gt.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},ea=function(){gt.registry.register({displayText:()=>u.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let t;return(t=e.workspace)!=null&&t.isMutator?"hidden":"enabled"},callback:(e,t,i,n)=>{(e=e.workspace)&&(u.setGroup$$module$build$src$core$events$utils(!0),t=new Go(e),t.setPlaceholderText(u.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),t.moveTo(lp(new De(n.x,n.y),e)),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),u.setGroup$$module$build$src$core$events$utils(!1))},scopeType:gt.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},lp=function(e,t){var i=t.getInjectionDiv().getBoundingClientRect();return e=new De(e.x-i.left,e.y-i.top),i=t.getOriginOffsetInPixels(),e=De.difference(e,i),e.scale(1/t.scale),e},ap=function(){Rh(),np(),rp(),Ch(),el(),Ru(),Ql()},P$=function(){Nh(),Ah(),ea()},er=function(){op(),ap()},ta=function(e){return e&&typeof e.paste=="function"},Cu=function(e){return e&&typeof e.getSvgRoot=="function"},ia=function(e){return e.isSelectable()},Au=function(e){$().hideChaff(e)},_e=_e||{},_e.scope={},_e.ASSUME_ES5=!1,_e.ASSUME_ES6=!1,_e.ASSUME_ES2020=!1,_e.ASSUME_NO_NATIVE_MAP=!1,_e.ASSUME_NO_NATIVE_SET=!1,_e.ISOLATE_POLYFILLS=!1,_e.FORCE_POLYFILL_PROMISE=!1,_e.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,_e.INSTRUMENT_ASYNC_CONTEXT=!0,_e.objectCreate=_e.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(e){var t=function(){};return t.prototype=e,new t},_e.defineProperty=_e.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e},_e.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")},_e.global=_e.ASSUME_ES2020?globalThis:_e.getGlobal(this),_e.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",_e.TRUST_ES6_POLYFILLS=!_e.ISOLATE_POLYFILLS||_e.IS_SYMBOL_NATIVE,_e.polyfills={},_e.propertyToPolyfillSymbol={},_e.POLYFILL_PREFIX="$jscp$",_e.polyfill=function(e,t,i,n){t&&(_e.ISOLATE_POLYFILLS?_e.polyfillIsolated(e,t,i,n):_e.polyfillUnisolated(e,t,i,n))},_e.polyfillUnisolated=function(e,t,i,n){for(i=_e.global,e=e.split("."),n=0;n<e.length-1;n++){var a=e[n];if(!(a in i))return;i=i[a]}e=e[e.length-1],n=i[e],t=t(n),t!=n&&t!=null&&_e.defineProperty(i,e,{configurable:!0,writable:!0,value:t})},_e.polyfillIsolated=function(e,t,i,n){var a=e.split(".");e=a.length===1,n=a[0],n=!e&&n in _e.polyfills?_e.polyfills:_e.global;for(var d=0;d<a.length-1;d++){var m=a[d];if(!(m in n))return;n=n[m]}a=a[a.length-1],i=_e.IS_SYMBOL_NATIVE&&i==="es6"?n[a]:null,t=t(i),t!=null&&(e?_e.defineProperty(_e.polyfills,a,{configurable:!0,writable:!0,value:t}):t!==i&&(_e.propertyToPolyfillSymbol[a]===void 0&&(i=Math.random()*1e9>>>0,_e.propertyToPolyfillSymbol[a]=_e.IS_SYMBOL_NATIVE?_e.global.Symbol(a):_e.POLYFILL_PREFIX+i+"$"+a),_e.defineProperty(n,_e.propertyToPolyfillSymbol[a],{configurable:!0,writable:!0,value:t})))},_e.getConstructImplementation=function(){function e(){function i(){}return Reflect.construct(i,[],function(){}),new i instanceof i}if(_e.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(e())return Reflect.construct;var t=Reflect.construct;return function(i,n,a){return i=t(i,n),a&&Reflect.setPrototypeOf(i,a.prototype),i}}return function(i,n,a){return a===void 0&&(a=i),a=_e.objectCreate(a.prototype||Object.prototype),Function.prototype.apply.call(i,a,n)||a}},_e.construct={valueOf:_e.getConstructImplementation}.valueOf(),_e.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},_e.setPrototypeOf=_e.ASSUME_ES6||_e.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:_e.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,_e.inherits=function(e,t){if(e.prototype=_e.objectCreate(t.prototype),e.prototype.constructor=e,_e.ASSUME_ES6||_e.setPrototypeOf){var i=_e.setPrototypeOf;i(e,t)}else for(i in t)if(i!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,i);n&&Object.defineProperty(e,i,n)}else e[i]=t[i];e.superClass_=t.prototype},_e.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},_e.arrayIterator=function(e){return{next:_e.arrayIteratorImpl(e)}},_e.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return _e.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},_e.arrayFromIterator=function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i},_e.arrayFromIterable=function(e){return e instanceof Array?e:_e.arrayFromIterator(_e.makeIterator(e))},_e.generator={},_e.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},_e.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},_e.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},_e.generator.Context.prototype.stop_=function(){this.isRunning_=!1},_e.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},_e.generator.Context.prototype.next_=function(e){this.yieldResult=e},_e.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},_e.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},_e.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},_e.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},_e.generator.Context.prototype.yieldAll=function(e,t){e=_e.makeIterator(e);var i=e.next();if(_e.generator.ensureIteratorResultIsObject_(i),i.done)this.yieldResult=i.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(i.value,t)},_e.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},_e.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},_e.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},_e.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},_e.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},_e.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},_e.generator.Context.prototype.enterFinallyBlock=function(e,t,i){i?this.finallyContexts_[i]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},_e.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},_e.generator.Context.prototype.forIn=function(e){return new _e.generator.Context.PropertyIterator(e)},_e.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},_e.generator.Context.PropertyIterator.prototype.getNext=function(){for(;this.properties_.length>0;){var e=this.properties_.pop();if(e in this.object_)return e}return null},_e.generator.Engine_=function(e){this.context_=new _e.generator.Context,this.program_=e},_e.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},_e.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(i){return{value:i,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},_e.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},_e.generator.Engine_.prototype.yieldAllStep_=function(e,t,i){try{var n=e.call(this.context_.yieldAllIterator_,t);if(_e.generator.ensureIteratorResultIsObject_(n),!n.done)return this.context_.stop_(),n;var a=n.value}catch(d){return this.context_.yieldAllIterator_=null,this.context_.throw_(d),this.nextStep_()}return this.context_.yieldAllIterator_=null,i.call(this.context_,a),this.nextStep_()},_e.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},_e.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},_e.generator.createGenerator=function(e,t){return t=new _e.generator.Generator_(new _e.generator.Engine_(t)),_e.setPrototypeOf&&e.prototype&&_e.setPrototypeOf(t,e.prototype),t},_e.asyncExecutePromiseGenerator=function(e){function t(n){return e.next(n)}function i(n){return e.throw(n)}return new Promise(function(n,a){function d(m){m.done?n(m.value):Promise.resolve(m.value).then(t,i).then(d,a)}d(e.next())})},_e.asyncExecutePromiseGeneratorFunction=function(e){return _e.asyncExecutePromiseGenerator(e())},_e.asyncExecutePromiseGeneratorProgram=function(e){return _e.asyncExecutePromiseGenerator(new _e.generator.Generator_(new _e.generator.Engine_(e)))},_e.polyfill("globalThis",function(e){return e||_e.global},"es_2020","es3"),_e.polyfill("Array.prototype.includes",function(e){return e||function(t,i){var n=this;n instanceof String&&(n=String(n));var a=n.length;for(i=i||0,i<0&&(i=Math.max(i+a,0));i<a;i++){var d=n[i];if(d===t||Object.is(d,t))return!0}return!1}},"es7","es3"),_e.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new _e.global.Proxy(e,{get:function(i,n,a){return i==e&&n=="q"&&a==t}}));return t.q===!0}catch{return!1}},_e.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,_e.ES6_CONFORMANCE=_e.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&_e.checkEs6ConformanceViaProxy(),_e.initSymbol=function(){},_e.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},_e.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},_e.MapEntry=function(){},_e.polyfill("Set.prototype.difference",function(e){return e||function(t){_e.checkIsSetInstance(this),_e.checkIsSetLike(t);var i=_e.getSmallerAndLargerSets(this,t);t=new Set(this);var n=i.smallerSetIterator;i=i.largerSet;for(var a=n.next();!a.done;)i.has(a.value)&&t.delete(a.value),a=n.next();return t}},"es_next","es6"),_e.checkIsSetLike=function(e){if(typeof e!="object"||e===null||typeof e.size!="number"||e.size<0||typeof e.keys!="function"||typeof e.has!="function")throw new TypeError("Argument must be set-like")},_e.checkIsValidIterator=function(e){if(typeof e!="object"||e===null||typeof e.next!="function")throw new TypeError("Invalid iterator.");return e},_e.getSmallerAndLargerSets=function(e,t){return e.size<=t.size?{smallerSetIterator:e.keys(),largerSet:t}:{smallerSetIterator:_e.checkIsValidIterator(t.keys()),largerSet:e}},_e.checkIsSetInstance=function(e){if(!(e instanceof Set))throw new TypeError("Method must be called on an instance of Set.")},_e.iteratorFromArray=function(e,t){if(_e.ASSUME_ES6)return e[Symbol.iterator]();e instanceof String&&(e+="");var i=0,n=!1,a={next:function(){if(!n&&i<e.length){var d=i++;return{value:t(d,e[d]),done:!1}}return n=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a},_e.polyfill("Array.prototype.values",function(e){return e||function(){return _e.iteratorFromArray(this,function(t,i){return i})}},"es8","es3"),_e.polyfill("Array.prototype.flatMap",function(e){return e||function(t,i){var n=[];return Array.prototype.forEach.call(this,function(a,d){a=t.call(i,a,d,this),Array.isArray(a)?n.push.apply(n,a):n.push(a)}),n}},"es9","es5"),_e.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var i=[];return Array.prototype.forEach.call(this,function(n){Array.isArray(n)&&t>0?(n=Array.prototype.flat.call(n,t-1),i.push.apply(i,n)):i.push(n)}),i}},"es9","es5"),_e.polyfill("Object.entries",function(e){return e||function(t){var i=[],n;for(n in t)_e.owns(t,n)&&i.push([n,t[n]]);return i}},"es8","es3"),_e.polyfill("Object.values",function(e){return e||function(t){var i=[],n;for(n in t)_e.owns(t,n)&&i.push(t[n]);return i}},"es8","es3");var hn=Object.create(null),sa={typeMap:hn},Nu=Object.create(null),Zt="default",ye=class{constructor(e){this.name=e}toString(){return this.name}};ye.CONNECTION_CHECKER=new ye("connectionChecker"),ye.CONNECTION_PREVIEWER=new ye("connectionPreviewer"),ye.CURSOR=new ye("cursor"),ye.EVENT=new ye("event"),ye.FIELD=new ye("field"),ye.INPUT=new ye("input"),ye.RENDERER=new ye("renderer"),ye.TOOLBOX=new ye("toolbox"),ye.THEME=new ye("theme"),ye.TOOLBOX_ITEM=new ye("toolboxItem"),ye.FLYOUTS_VERTICAL_TOOLBOX=new ye("flyoutsVerticalToolbox"),ye.FLYOUTS_HORIZONTAL_TOOLBOX=new ye("flyoutsHorizontalToolbox"),ye.FLYOUT_INFLATER=new ye("flyoutInflater"),ye.METRICS_MANAGER=new ye("metricsManager"),ye.BLOCK_DRAGGER=new ye("blockDragger"),ye.SERIALIZER=new ye("serializer"),ye.ICON=new ye("icon"),ye.PASTER=new ye("paster"),ye.VARIABLE_MODEL=new ye("variableModel"),ye.VARIABLE_MAP=new ye("variableMap");var qi={DEFAULT:Zt,TEST_ONLY:sa};qi.Type=ye,qi.getAllItems=z,qi.getClass=E,qi.getClassFromOptions=V,qi.getObject=C,qi.hasItem=S,qi.register=p,qi.unregister=b;var Kt=Object.create(null),tr=750,xo="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),_i=null,Bo={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},oa=0,dn={TOUCH_ENABLED:xo,TOUCH_MAP:Bo};dn.checkTouchIdentifier=w,dn.clearTouchIdentifier=U,dn.getTouchIdentifierFromEvent=P,dn.longStart=j,dn.longStop=A,dn.shouldHandleEvent=O;var Lh,up,ir,Lu,ku,wu,kh,Mu,cp,wh;(function(e){function t(n){return i.includes(n.toUpperCase())}Lh=e;const i=Lh.toUpperCase();up=t("JavaFX"),ir=t("WebKit"),Lu=t("Gecko")&&!ir,ku=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,wu=t("iPad")||t("Macintosh")&&e>0,kh=t("iPhone")&&!wu,Mu=t("Macintosh"),cp=wu||ku&&!t("Mobile")||t("Silk"),wh=!cp&&(kh||ku)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var U$=Lh,hp=up,F$=Lu,Mh=ku,Ii=wu,Gi=kh,Dh=Mu,dp=wh,H$={ANDROID:Mh,GECKO:F$,IPAD:Ii,IPHONE:Gi,JavaFx:hp,MAC:Dh,MOBILE:dp,raw:U$},pp=40,$p=125,Ks={};Ks.bind=J,Ks.conditionalBind=L,Ks.getScrollDeltaPixels=fe,Ks.isRightButton=Q,Ks.isTargetInput=D,Ks.mouseToSvg=te,Ks.unbind=x;var $e;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.VAR_TYPE_CHANGE="var_type_change",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})($e||($e={}));var gp=[$e.BLOCK_CREATE,$e.BLOCK_MOVE,$e.COMMENT_CREATE,$e.COMMENT_MOVE],fp="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_p={genUid:()=>{const e=fp.length,t=[];for(let i=0;i<20;i++)t[i]=fp.charAt(Math.random()*e);return t.join("")}},mp=0,Du={TEST_ONLY:_p};Du.genUid=Se,Du.getNextUniqueId=oe;var xh="",na=!0,xu=0,ra="ORPHANED_BLOCK",co=[],Tp={FIRE_QUEUE:co,enqueueEvent:Ce,fireNow:q,fireInternal:W,setGroupInternal:yt};u.disable$$module$build$src$core$events$utils,u.enable$$module$build$src$core$events$utils,u.getGroup$$module$build$src$core$events$utils,u.setGroup$$module$build$src$core$events$utils,u.setRecordUndo$$module$build$src$core$events$utils;var tl="http://www.w3.org/2000/svg",ho="http://www.w3.org/1999/xhtml",Oi="http://www.w3.org/1999/xlink",po;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(po||(po={}));var $o=null,Bh=0,Ds=null,Bi={HTML_NS:ho};Bi.NodeType=po,Bi.SVG_NS=tl,Bi.XLINK_NS=Oi,Bi.addClass=Ge,Bi.createSvgElement=be,Bi.getFastTextWidth=Ve,Bi.getFastTextWidthWithSizeString=Ye,Bi.getTextWidth=le,Bi.hasClass=Ee,Bi.insertAfter=B,Bi.measureFontMetrics=k,Bi.removeClass=me,Bi.removeClasses=_,Bi.removeNode=M,Bi.setCssTransform=se,Bi.startTextWidthCache=we,Bi.stopTextWidthCache=Be;var Ri=class{static findFocusedNode(e){var t=e.getRootFocusableNode();if(!t.canBeFocused())return null;var i=t.getFocusableElement();return Ee(i,Ri.ACTIVE_CLASS_NAME)||Ee(i,Ri.PASSIVE_CSS_CLASS_NAME)||(t=i.querySelector(this.ACTIVE_FOCUS_NODE_CSS_SELECTOR),(t instanceof HTMLElement||t instanceof SVGElement)&&(t=Ri.findFocusableNodeFor(t,e)))?t:(i=i.querySelector(this.PASSIVE_FOCUS_NODE_CSS_SELECTOR),(i instanceof HTMLElement||i instanceof SVGElement)&&(e=Ri.findFocusableNodeFor(i,e))?e:null)}static findFocusableNodeFor(e,t){if(!e.id||e.id==="null"||t.getNestedTrees().map(a=>Ri.findFocusableNodeFor(e,a)).findIndex(a=>!!a)!==-1)return null;var i=t.getRootFocusableNode();if(i.canBeFocused()&&e===i.getFocusableElement())return i;var n;return(i=(n=t.lookUpFocusableNode(e.id))!=null?n:null)?i:(n=e.parentElement,!i&&n?Ri.findFocusableNodeFor(n,t):null)}};Ri.ACTIVE_CLASS_NAME="blocklyActiveFocus",Ri.PASSIVE_CSS_CLASS_NAME="blocklyPassiveFocus",Ri.ACTIVE_FOCUS_NODE_CSS_SELECTOR=`.${Ri.ACTIVE_CLASS_NAME}`,Ri.PASSIVE_FOCUS_NODE_CSS_SELECTOR=`.${Ri.PASSIVE_CSS_CLASS_NAME}`;var Bu=class{constructor(e,t){this.tree=e,this.rootShouldBeAutoTabbable=t}},_t=class{constructor(e){this.previouslyFocusedNode=this.focusedNode=null,this.registeredTrees=[],this.isUpdatingFocusedNode=this.recentlyLostAllFocus=this.lockFocusStateChanges=this.currentlyHoldsEphemeralFocus=!1;const t=i=>{if(!this.isUpdatingFocusedNode){this.recentlyLostAllFocus=!i;var n=null;if(i instanceof HTMLElement||i instanceof SVGElement){for(var a of this.registeredTrees)if(n=Ri.findFocusableNodeFor(i,a.tree))break}if(n&&n.canBeFocused()){i=n.getFocusableTree();let d;a=(d=this.focusedNode)==null?void 0:d.getFocusableTree(),n===i.getRootFocusableNode()&&i!==a?this.focusTree(i):this.focusNode(n)}else this.defocusCurrentFocusedNode()}};e("focusin",i=>{i instanceof FocusEvent&&t(document.activeElement)}),e("focusout",i=>{i instanceof FocusEvent&&t(i.relatedTarget)})}registerTree(e,t=!1){if(this.ensureManagerIsUnlocked(),this.isRegistered(e))throw Error(`Attempted to re-register already registered tree: ${e}.`);this.registeredTrees.push(new Bu(e,t));const i=e.getRootFocusableNode().getFocusableElement();if(!i.id||i.id==="null")throw Error(`Attempting to register a tree with a root element that has an invalid ID: ${e}.`);t&&(i.tabIndex=0)}isRegistered(e){return!!this.lookUpRegistration(e)}lookUpRegistration(e){let t;return(t=this.registeredTrees.find(i=>i.tree===e))!=null?t:null}unregisterTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to unregister not registered tree: ${e}.`);var t=this.registeredTrees.findIndex(a=>a.tree===e);const i=this.registeredTrees[t];this.registeredTrees.splice(t,1),t=Ri.findFocusedNode(e);const n=e.getRootFocusableNode();t&&this.removeHighlight(t),this.focusedNode!==t&&this.focusedNode!==n||this.updateFocusedNode(null),this.removeHighlight(n),i.rootShouldBeAutoTabbable&&e.getRootFocusableNode().getFocusableElement().removeAttribute("tabindex")}getFocusedTree(){let e,t;return(t=(e=this.focusedNode)==null?void 0:e.getFocusableTree())!=null?t:null}getFocusedNode(){return this.focusedNode}focusTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to focus unregistered tree: ${e}.`);const t=Ri.findFocusedNode(e),i=e.getRestoredFocusableNode(t);e=e.getRootFocusableNode();let n;this.focusNode((n=i??t)!=null?n:e)}focusNode(e){this.ensureManagerIsUnlocked();const t=!this.currentlyHoldsEphemeralFocus;t&&(this.isUpdatingFocusedNode=!0);var i,n=((i=this.focusedNode)==null?void 0:i.getFocusableElement())!==document.activeElement;if(this.focusedNode!==e||n)if(e.canBeFocused()){if(i=e.getFocusableTree(),!this.isRegistered(i))throw Error(`Attempted to focus unregistered node: ${e}.`);n=e.getFocusableElement(),n.id&&n.id!=="null"||console.warn("Trying to focus a node that has an invalid ID.");var a=Ri.findFocusableNodeFor(n,i);n=Ri.findFocusedNode(i);var d=e;if(a!==e){d=i.getRestoredFocusableNode(n),e=i.getRootFocusableNode();var m;d=(m=d??n)!=null?m:e}e=this.focusedNode,m=e?.getFocusableTree(),e&&this.passivelyFocusNode(e,i),i=i.getRootFocusableNode(),n&&this.removeHighlight(n),i!==d&&this.removeHighlight(i),this.currentlyHoldsEphemeralFocus||this.activelyFocusNode(d,m??null),this.updateFocusedNode(d)}else console.warn("Trying to focus a node that can't be focused.");t&&(this.isUpdatingFocusedNode=!1)}takeEphemeralFocus(e){if(this.ensureManagerIsUnlocked(),this.currentlyHoldsEphemeralFocus)throw Error(`Attempted to take ephemeral focus when it's already held, with new element: ${e}.`);this.currentlyHoldsEphemeralFocus=!0,this.focusedNode&&this.passivelyFocusNode(this.focusedNode,null),e.focus();let t=!1;return()=>{if(t)throw Error(`Attempted to finish ephemeral focus twice for element: ${e}.`);if(t=!0,this.currentlyHoldsEphemeralFocus=!1,this.focusedNode){this.activelyFocusNode(this.focusedNode,null);const i=this.focusedNode;setTimeout(()=>{!this.focusedNode&&this.previouslyFocusedNode===i&&this.recentlyLostAllFocus&&this.focusNode(i)},0)}}}ephemeralFocusTaken(){return this.currentlyHoldsEphemeralFocus}ensureManagerIsUnlocked(){if(this.lockFocusStateChanges)throw Error("FocusManager state changes cannot happen in a tree/node focus/blur callback.")}updateFocusedNode(e){this.previouslyFocusedNode=this.focusedNode,this.focusedNode=e}defocusCurrentFocusedNode(){this.focusedNode&&!this.currentlyHoldsEphemeralFocus&&(this.passivelyFocusNode(this.focusedNode,null),this.updateFocusedNode(null))}activelyFocusNode(e,t){this.lockFocusStateChanges=!0;const i=e.getFocusableTree(),n=e.getFocusableElement();let a;const d=(a=this.lookUpRegistration(i))==null?void 0:a.rootShouldBeAutoTabbable;i!==t&&(i.onTreeFocus(e,t),d&&(i.getRootFocusableNode().getFocusableElement().tabIndex=-1)),e.onNodeFocus(),this.lockFocusStateChanges=!1,d&&e===i.getRootFocusableNode()||n.hasAttribute("tabindex")||(n.tabIndex=-1),this.setNodeToVisualActiveFocus(e),n.focus()}passivelyFocusNode(e,t){this.lockFocusStateChanges=!0;const i=e.getFocusableTree();if(i!==t){i.onTreeBlur(t);let n;(n=this.lookUpRegistration(i))!=null&&n.rootShouldBeAutoTabbable&&(i.getRootFocusableNode().getFocusableElement().tabIndex=0)}e.onNodeBlur(),this.lockFocusStateChanges=!1,i!==t&&this.setNodeToVisualPassiveFocus(e)}setNodeToVisualActiveFocus(e){e=e.getFocusableElement(),Ge(e,_t.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),me(e,_t.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}setNodeToVisualPassiveFocus(e){e=e.getFocusableElement(),me(e,_t.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Ge(e,_t.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}removeHighlight(e){e=e.getFocusableElement(),me(e,_t.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),me(e,_t.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}static getFocusManager(){return _t.focusManager||(_t.focusManager=new _t(document.addEventListener)),_t.focusManager}};_t.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyActiveFocus",_t.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyPassiveFocus",_t.focusManager=null,u.getFocusManager$$module$build$src$core$focus_manager;var G$={};G$.deepMerge=Ze;var zt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const i of t)this.addKeyMapping(i,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,i){e=`${e}`;const n=this.keyMap.get(e);if(n&&!i)throw Error(`Shortcut named "${t}" collides with shortcuts "${n}"`);n&&i?n.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,i){const n=this.keyMap.get(e);if(!n)return i||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const a=n.indexOf(t);return a>-1?(n.splice(a,1),n.length===0&&this.keyMap.delete(e),!0):(i||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,i]of this.keyMap)e[t]=i;return e}getRegistry(){const e=Object.create(null);for(const[t,i]of this.shortcuts)e[t]=i;return Ze(Object.create(null),e)}onKeyDown(e,t){var i=this.serializeKeyEvent(t);if(i=this.getShortcutNamesByKeyCode(i),!i)return!1;for(const n of i){i=this.shortcuts.get(n);let a;if(!i||i.preconditionFn&&!i.preconditionFn(e,{focusedNode:(a=u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?a:void 0}))continue;let d,m,F;if((m=(d=i).callback)!=null&&m.call(d,e,t,i,{focusedNode:(F=u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?F:void 0}))return!0}return!1}getShortcutNamesByKeyCode(e){let t;return((t=this.keyMap.get(e))==null?void 0:t.slice())||[]}getKeyCodesByShortcutName(e){const t=[];for(const[i,n]of this.keyMap)n.indexOf(e)>-1&&t.push(i);return t}serializeKeyEvent(e){let t="";for(const i in zt.modifierKeys)e.getModifierState(i)&&(t!==""&&(t+="+"),t+=i);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in zt.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let i="";if(t){this.checkModifiers(t);for(const n in zt.modifierKeys)t.includes(zt.modifierKeys[n])&&(i!==""&&(i+="+"),i+=n)}return i!==""&&e?i+="+"+e:e&&(i=`${e}`),i}};zt.registry=new zt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(zt||(zt={}));var la=Object.create(null),aa,pn,ua=[],Ep={defineBlocksWithJsonArrayInternal:K},li={TEST_ONLY:Ep};li.createBlockDefinitionsFromJsonArray=u.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,li.defineBlocks=u.defineBlocks$$module$build$src$core$common,li.defineBlocksWithJsonArray=y,li.draggingConnections=ua,li.fireSelectedEvent=Ue,li.getAllWorkspaces=pi,li.getBlockTypeCounts=Xi,li.getMainWorkspace=$,li.getParentContainer=At,li.getSelected=ee,li.getWorkspaceById=ht,li.globalShortcutHandler=re,li.registerWorkspace=Ct,li.setMainWorkspace=R,li.setParentContainer=ds,li.setSelected=ie,li.svgResize=Os,li.unregisterWorkpace=wi;var rs=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=u.getGroup$$module$build$src$core$events$utils(),this.recordUndo=Oe()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,i){return i.isBlank=!1,i.group=e.group||"",i.workspaceId=t.id,i}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=ht(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},go=class extends rs{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Pu=class extends go{constructor(e,t,i){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=$e.CLICK,this.blockId=e?e.id:void 0,this.targetType=i}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Pu),t.targetType=e.targetType,t.blockId=e.blockId,t}},Ph;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Ph||(Ph={})),p(ye.EVENT,$e.CLICK,Pu);var Uh={};Uh.removeElem=Ne;var fo=class{constructor(e){this.name=e}toString(){return this.name}};fo.POSITIONABLE=new fo("positionable"),fo.DRAG_TARGET=new fo("drag_target"),fo.DELETE_AREA=new fo("delete_area"),fo.AUTOHIDEABLE=new fo("autohideable");var Wt=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const i=e.component.id;if(!t&&this.componentData.has(i)){var n;throw Error('Plugin "'+i+'" with capabilities "'+((n=this.componentData.get(i))==null?void 0:n.capabilities)+'" already added.')}for(this.componentData.set(i,e),t=[],n=0;n<e.capabilities.length;n++){const a=String(e.capabilities[n]).toLowerCase();if(t.push(a),this.capabilityToComponentIds.has(a)){let d;(d=this.capabilityToComponentIds.get(a))==null||d.push(i)}else this.capabilityToComponentIds.set(a,[i])}this.componentData.get(i).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let i=0;i<t.capabilities.length;i++){const n=String(t.capabilities[i]).toLowerCase();Ne(this.capabilityToComponentIds.get(n),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var i;(i=this.componentData.get(e))==null||i.capabilities.push(t);var n;(n=this.capabilityToComponentIds.get(t))==null||n.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),Ne(this.componentData.get(e).capabilities,t),Ne(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const i=[];if(t){const n=[];e.forEach(a=>{n.push(this.componentData.get(a))}),n.sort(function(a,d){return a.weight-d.weight}),n.forEach(function(a){i.push(a.component)})}else e.forEach(n=>{i.push(this.componentData.get(n).component)});return i}};Wt.Capability=fo,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(Wt||(Wt={})),Wt.ComponentWeight;var Fh=!1,_o=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyEmboss {
  filter: var(--blocklyEmbossFilter);
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyHighlighted>.blocklyPath {
  filter: var(--blocklyEmbossFilter);
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabledPattern>.blocklyPath {
  fill: var(--blocklyDisabledPattern);
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableField>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyMenuSeparator {
  background-color: #ccc;
  height: 1px;
  border: 0;
  margin-left: 4px;
  margin-right: 4px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}

.blocklyField {
  cursor: default;
}

.blocklyInputField {
  cursor: text;
}

.blocklyDragging .blocklyField,
.blocklyDragging .blocklyIconGroup {
  cursor: grabbing;
}

.blocklyActiveFocus:is(
  .blocklyFlyout,
  .blocklyWorkspace,
  .blocklyField,
  .blocklyPath,
  .blocklyHighlightedConnectionPath,
  .blocklyComment,
  .blocklyBubble,
  .blocklyIconGroup,
  .blocklyTextarea
) {
  outline: none;
}
`,ai={};ai.inject=ct,ai.register=Ke;var De=class{constructor(e,t){this.x=e,this.y=t}clone(){return new De(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const i=e.x-t.x;return e=e.y-t.y,Math.sqrt(i*i+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new De(e.x-t.x,e.y-t.y)}static sum(e,t){return new De(e.x+t.x,e.y+t.y)}},ae=class{constructor(e){this.tagName=e}toString(){return this.tagName}};ae.ANIMATE=new ae("animate"),ae.CIRCLE=new ae("circle"),ae.CLIPPATH=new ae("clipPath"),ae.DEFS=new ae("defs"),ae.FECOMPOSITE=new ae("feComposite"),ae.FECOMPONENTTRANSFER=new ae("feComponentTransfer"),ae.FEFLOOD=new ae("feFlood"),ae.FEFUNCA=new ae("feFuncA"),ae.FEGAUSSIANBLUR=new ae("feGaussianBlur"),ae.FEPOINTLIGHT=new ae("fePointLight"),ae.FESPECULARLIGHTING=new ae("feSpecularLighting"),ae.FILTER=new ae("filter"),ae.FOREIGNOBJECT=new ae("foreignObject"),ae.G=new ae("g"),ae.IMAGE=new ae("image"),ae.LINE=new ae("line"),ae.PATH=new ae("path"),ae.PATTERN=new ae("pattern"),ae.POLYGON=new ae("polygon"),ae.RECT=new ae("rect"),ae.SVG=new ae("svg"),ae.TEXT=new ae("text"),ae.TSPAN=new ae("tspan");var at=class{constructor(e,t,i,n){this.top=e,this.bottom=t,this.left=i,this.right=n}static from(e){return new at(e.y,e.y+e.height,e.x,e.x+e.width)}clone(){return new at(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}getOrigin(){return new De(this.left,this.top)}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,i){const n=e.x;return e=e.y,new at(e,e+i,n,n+t)}},bt=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new bt(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new bt(Math.min(e.width,t.width),Math.min(e.height,t.height))}},bp={getSizeInternal:ps},$n={TEST_ONLY:bp};$n.getBorderBox=Td,$n.getComputedStyle=Vt,$n.getContainerOffsetToScrollInto=vc,$n.getPageOffset=Rs,$n.getSize=Yi,$n.getViewportPageOffset=wa,$n.scrollIntoContainerView=Ed;var Qt=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,ls=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,gn={XY_REGEX:Qt,XY_STYLE_REGEX:ls},sr={TEST_ONLY:gn};sr.getDocumentScroll=xn,sr.getInjectionDivXY=El,sr.getRelativeXY=Wo,sr.getViewportBBox=Dn,sr.screenToWsCoordinates=br,sr.wsToScreenCoordinates=Qs;var ui=class{constructor(e,t,i,n,a){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new De(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new De(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=i||!1,this.margin=a!==void 0?a:ui.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),n&&(e+=" "+n),this.outerSvg=be(ae.SVG,{class:e}),n=be(ae.G,{},this.outerSvg),this.svgBackground=be(ae.RECT,{class:"blocklyScrollbarBackground"},n),e=Math.floor((ui.scrollbarThickness-5)/2),this.svgHandle=be(ae.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},n),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),B(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=L(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=L(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=ui.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),x(this.onMouseDownBarWrapper_),x(this.onMouseDownHandleWrapper_),M(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,se(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&ui.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-this.margin*2;this.pair&&(t-=ui.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=ui.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-ui.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var i=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*i,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=i/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-this.margin*2;this.pair&&(t-=ui.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-ui.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var i=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*i,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=i/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),U(),this.cleanUp(),Q(e))e.stopPropagation();else{var t=te(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var i=El(this.svgHandle);i=this.horizontal?i.x:i.y;var n=this.handlePosition,a=this.handleLength*.95;t<=i?n-=a:t>=i+this.handleLength&&(n+=a),this.setHandlePosition(this.constrainHandlePosition(n)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),Q(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=L(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=L(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){U(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(x(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(x(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new De(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};ui.scrollbarThickness=xo?25:15,ui.DEFAULT_SCROLLBAR_MARGIN=.5;var Hh={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Uu={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Zi,DOMParser:as,XMLSerializer:ca}=globalThis;as&&(Hh=new as),ca&&(Uu=new ca);var _s="https://developers.google.com/blockly/xml",V$=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,xs={NAME_SPACE:_s};xs.createElement=u.createElement$$module$build$src$core$utils$xml,xs.createTextNode=u.createTextNode$$module$build$src$core$utils$xml,xs.domToText=Sr,xs.injectDependencies=Mi,xs.textToDom=u.textToDom$$module$build$src$core$utils$xml;var fn="categoryToolbox",_n="flyoutToolbox",dt;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(dt||(dt={}));var Gh={hasCategoriesInternal:Sd},Vi={};Vi.Position=dt,Vi.TEST_ONLY=Gh,Vi.convertFlyoutDefToJsonArray=Ma,Vi.convertToolboxDefToJson=Ro,Vi.hasCategories=Da,Vi.isCategoryCollapsible=yc,Vi.parseToolboxTree=Ba;var Po;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(Po||(Po={}));var mo;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(mo||(mo={}));var Js;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(Js||(Js={}));var To={};To.bumpDirection=Js,To.bumpPositionRect=bl,To.getCornerOppositeToolbox=Xo,To.getStartPositionRect=Pa,To.horizontalPosition=mo,To.verticalPosition=Po;var Ci={width:96,height:124,url:"sprites.png"},Sp=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=be(ae.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:Wt.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[Wt.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&M(this.svgGroup);for(const e of this.boundEvents)x(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new at(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var i=Xo(this.workspace,e),n=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(n+=this.LARGE_SPACING+this.HEIGHT),e=Pa(i,new bt(this.WIDTH,n),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),i=i.vertical,t=bl(e,this.MARGIN_VERTICAL,i===Po.TOP?Js.DOWN:Js.UP,t),i===Po.TOP){var a=this.SMALL_SPACING+this.HEIGHT,d;(d=this.zoomInGroup)==null||d.setAttribute("transform","translate(0, "+a+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(a+this.LARGE_SPACING+this.HEIGHT)+")")}else{d=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let F;(F=this.zoomInGroup)==null||F.setAttribute("transform","translate(0, "+d+")"),d=d+this.SMALL_SPACING+this.HEIGHT,(a=this.zoomOutGroup)==null||a.setAttribute("transform","translate(0, "+d+")")}this.top=t.top,this.left=t.left;var m;(m=this.svgGroup)==null||m.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=be(ae.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=be(ae.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);be(ae.RECT,{width:32,height:32},t),be(ae.IMAGE,{width:Ci.width,height:Ci.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(Oi,"xlink:href",this.workspace.options.pathToMedia+Ci.url),this.boundEvents.push(L(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=be(ae.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=be(ae.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);be(ae.RECT,{width:32,height:32},t),be(ae.IMAGE,{width:Ci.width,height:Ci.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(Oi,"xlink:href",this.workspace.options.pathToMedia+Ci.url),this.boundEvents.push(L(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),U(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=be(ae.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=be(ae.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);be(ae.RECT,{width:32,height:32},t),be(ae.IMAGE,{width:Ci.width,height:Ci.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(Oi,"xlink:href",this.workspace.options.pathToMedia+Ci.url),this.boundEvents.push(L(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),U(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(We($e.CLICK))(null,this.workspace.id,"zoom_controls");N(e)}};Ke(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var vp=100,ha=75,yp=50,Fu=25,z$={BLOCKS:yp,PROCEDURES:ha,VARIABLES:vp,WORKSPACE_COMMENTS:Fu},Ip={};Ip.register=Ir,Ip.unregister=a$;var W$=class{constructor(){this.priority=Fu}save(e){const t=[];for(const i of e.getTopComments())(e=Or(i,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const i of e)ji(i,t,{recordUndo:Oe()})}clear(e){for(const t of e.getTopComments())t.dispose()}};Ir("workspaceComments",new W$);var Lt={};Lt.WorkspaceCommentSerializer=W$,Lt.append=ji,Lt.save=Or;var Xt={};Xt.register=Ua,Xt.unregister=u$;var ft=class{paste(e,t,i){e=e.commentState,i&&(e.x=i.x,e.y=i.y),u.disable$$module$build$src$core$events$utils();let n;try{n=ji(e,t),Fa(n)}finally{u.enable$$module$build$src$core$events$utils()}return n?(He()&&N(new(We($e.COMMENT_CREATE))(n)),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(n),n):null}};ft.TYPE="workspace-comment",Ua(ft.TYPE,new ft);var St;St=28,u.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:St,connectingSnapRadius:St,currentConnectionPreference:8,bumpDelay:250},u.config$$module$build$src$core$config;var Ht="aria-",Bs="role",Ai;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem",e.SEPARATOR="separator",e.STATUS="status"})(Ai||(Ai={}));var jt;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin",e.LIVE="live",e.HIDDEN="hidden"})(jt||(jt={}));var il={};il.Role=Ai,il.State=jt,il.setRole=Cs,il.setState=Si;var qs=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=oe(),this.element=e,e.className="blocklyMenuItem "+(this.enabled?"":"blocklyMenuItemDisabled ")+(this.checked?"blocklyMenuItemSelected ":"")+(this.highlight?"blocklyMenuItemHighlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent",this.checkable){var i=document.createElement("div");i.className="blocklyMenuItemCheckbox ",t.appendChild(i)}return i=this.content,typeof this.content=="string"&&(i=document.createTextNode(this.content)),t.appendChild(i),e.appendChild(t),this.roleName&&Cs(e,this.roleName),Si(e,jt.SELECTED,this.checkable&&this.checked||!1),Si(e,jt.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?Ge(t,"blocklyMenuItemHighlight"):me(t,"blocklyMenuItemHighlight"))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(e){this.isEnabled()&&this.actionHandler&&this.actionHandler(this,e)}onAction(e,t){this.actionHandler=e.bind(t)}},ii=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu",t.tabIndex=0,this.roleName&&Cs(t,this.roleName),this.element=t;for(let i=0,n;n=this.menuItems[i];i++)t.appendChild(n.createDom());return this.pointerMoveHandler=L(t,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=L(t,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=L(t,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=L(t,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=L(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&e.focus({preventScroll:!0})}blur(){const e=this.getElement();e&&e.blur()}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(x(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(x(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(x(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(x(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(x(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){const i=this.getMenuItems();for(let n=0,a;a=i[n];n++)if(a.getElement()===e)return a}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement();const i=e.getElement();t&&i&&(Ed(i,t),Si(t,jt.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e<0?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let i;const n=this.getMenuItems();for(;i=n[e];){if(i.isEnabled()){this.setHighlighted(i);break}e+=t}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){var t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const i=new De(e.clientX,e.clientY);if(De.distance(t,i)<1)return}(t=this.getMenuItem(e.target))&&t.performAction(e)}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction(e);break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=Yi(e);return t.height=e.scrollHeight,t}getMenuItems(){return this.menuItems.filter(e=>e instanceof qs)}},mn=class{constructor(){this.element=null}createDom(){return this.element=document.createElement("hr"),this.element.className="blocklyMenuSeparator",Cs(this.element,Ai.SEPARATOR),this.element}dispose(){let e;(e=this.element)==null||e.remove(),this.element=null}},Eo="_TEMP_COLLAPSED_INPUT",da="_TEMP_COLLAPSED_FIELD",ci="MANUALLY_DISABLED",pa={COLLAPSED_FIELD_NAME:da,COLLAPSED_INPUT_NAME:Eo,MANUALLY_DISABLED:ci};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(u.inputTypes$$module$build$src$core$inputs$input_types||(u.inputTypes$$module$build$src$core$inputs$input_types={})),u.inputTypes$$module$build$src$core$inputs$input_types;var or=new Set,Qi=new WeakSet,Hu=new WeakMap,nr=null,$a=null,Gu=0,bo={};bo.finishQueuedRenders=to,bo.queueRender=Ha,bo.triggerQueuedRenders=Co;var Pi,Tn;u.Msg$$module$build$src$core$msg=Object.create(null),Pi=function(e){Object.keys(e).forEach(function(t){u.Msg$$module$build$src$core$msg[t]=e[t]})},Tn={Msg:u.Msg$$module$build$src$core$msg,setLocale:Pi};var Uo="blocklyToast",sl="blocklyToastMessage",Vh="blocklyToastCloseButton",En=class{static show(e,t){if(t.oncePerSession&&t.id){if(this.shownIds.has(t.id))return;this.shownIds.add(t.id)}this.hide(e);const i=this.createDom(e,t);requestAnimationFrame(()=>{i.style.bottom="2rem"})}static createDom(e,t){const{message:i,duration:n=5,assertiveness:a=En.Assertiveness.POLITE}=t,d=document.createElement("div");e.getInjectionDiv().appendChild(d),d.dataset.toastId=t.id,d.className=Uo,Cs(d,Ai.STATUS),Si(d,jt.LIVE,a),t=d.appendChild(document.createElement("div")),t.className=sl,t.innerText=i,t=d.appendChild(document.createElement("button")),t.className=Vh,Si(t,jt.LABEL,u.Msg$$module$build$src$core$msg.CLOSE);var m=be(ae.SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},t);Si(m,jt.HIDDEN,!0),be(ae.RECT,{x:19.7782,y:2.80762,width:2,height:24,transform:"rotate(45, 19.7782, 2.80762)",fill:"black"},m),be(ae.RECT,{x:2.80762,y:4.22183,width:2,height:24,transform:"rotate(-45, 2.80762, 4.22183)",fill:"black"},m),t.addEventListener("click",()=>{d.remove(),e.markFocused()});let F;return t=()=>{F=setTimeout(()=>d.remove(),n*1e3)},m=()=>clearTimeout(F),d.addEventListener("focusin",m),d.addEventListener("focusout",t),d.addEventListener("mouseenter",m),d.addEventListener("mousemove",m),d.addEventListener("mouseleave",t),t(),d}static hide(e,t){e=e.getInjectionDiv().querySelector(`.${Uo}`),e instanceof HTMLElement&&(!t||t===e.dataset.toastId)&&e.remove()}};En.shownIds=new Set,function(e){e=e.Assertiveness||(e.Assertiveness={}),e.ASSERTIVE="assertive",e.POLITE="polite"}(En||(En={})),Ke(`
.${Uo} {
  font-size: 1.2rem;
  position: absolute;
  bottom: -10rem;
  right: 2rem;
  padding: 1rem;
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 0.4rem;
  z-index: 999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  line-height: 1.5;
  transition: bottom 0.3s ease-out;
}

.${Uo} .${sl} {
  maxWidth: 18rem;
}

.${Uo} .${Vh} {
  margin: 0;
  padding: 0.2rem;
  background-color: transparent;
  color: black;
  border: none;
  cursor: pointer;
}
`);var Op=function(e,t){window.alert(e),t&&t()},ga=Op,zh=function(e,t){t(window.confirm(e))},ms=zh,Rp=function(e,t,i){i(window.prompt(e,t))},Ts=Rp,Cp=En.show.bind(En),Ap=Cp,bn={};bn.alert=Sl,bn.confirm=Cc,bn.prompt=Cr,bn.setAlert=Rc,bn.setConfirm=h$,bn.setPrompt=Ac,bn.setToast=Ar,bn.toast=Nc;var Sn=new Set,Vu={};Vu.warn=Di;var zu="VARIABLE",rr="ijkmnopqrstuvwxyzabcdefgh",Np={generateUniqueNameInternal:Id},hi={CATEGORY_NAME:zu,TEST_ONLY:Np,VAR_LETTER_OPTIONS:rr};hi.allDeveloperVariables=u.allDeveloperVariables$$module$build$src$core$variables,hi.allUsedVarModels=u.allUsedVarModels$$module$build$src$core$variables,hi.compareByName=qo,hi.createVariableButtonHandler=Ao,hi.deleteVariable=u.deleteVariable$$module$build$src$core$variables,hi.flyoutCategory=so,hi.flyoutCategoryBlocks=za,hi.generateUniqueName=yl,hi.generateUniqueNameFromOptions=Nr,hi.generateVariableFieldDom=Ko,hi.getAddedVariables=Jo,hi.getOrCreateVariablePackage=u.getOrCreateVariablePackage$$module$build$src$core$variables,hi.getVariable=u.getVariable$$module$build$src$core$variables,hi.getVariableUsesById=Lr,hi.internalFlyoutCategory=Pn,hi.jsonFlyoutCategoryBlocks=Un,hi.nameUsedWithAnyType=jo,hi.nameUsedWithConflictingParam=Il,hi.promptName=Wa,hi.renameVariable=u.renameVariable$$module$build$src$core$variables;var ol=class extends Error{},Wh=class extends ol{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},nl=class extends ol{constructor(e,t,i){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=i}},X$=class extends ol{constructor(e,t,i,n){super(`The block ${i.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=i,this.childState=n}},Y$=class extends ol{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},j$=class extends ol{constructor(e,t,i){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=i}},lr={};lr.BadConnectionCheck=X$,lr.DeserializationError=ol,lr.MissingBlockType=Wh,lr.MissingConnection=nl,lr.RealChildOfShadow=Y$,lr.UnregisteredIcon=j$;var Lp=class{constructor(){this.priority=yp}save(e){const t=[];for(const i of e.getTopBlocks(!1))(e=Vs(i,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const i of e)Zo(i,t,{recordUndo:Oe()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Ir("blocks",new Lp);var Fo={};Fo.BlockSerializer=Lp,Fo.append=Zo,Fo.appendInternal=Rl,Fo.save=Vs;var di=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};di.MUTATOR=new di("mutator"),di.WARNING=new di("warning"),di.COMMENT=new di("comment");var ar=class extends rs{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new ar),t.blockId=e.blockId,t}},ur=class extends ar{constructor(e,t,i,n,a){super(e),this.type=$e.BLOCK_CHANGE,e&&(this.element=t,this.name=i||void 0,this.oldValue=n,this.newValue=a)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new ur),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const i=t.getIcon(di.MUTATOR);switch(i&&kr(i)&&i.bubbleIsVisible()&&i.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var n;t.setDisabledReason(!!e,(n=this.disabledReason)!=null?n:ci);break;case"inline":t.setInputsInline(!!e);break;case"mutation":n=ur.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(u.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),N(new ur(t,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Ys(e):""}};p(ye.EVENT,$e.BLOCK_CHANGE,ur);var Wu={};Wu.clamp=Cl,Wu.toDegrees=R$,Wu.toRadians=Mc;var Xu=16,kp=1,wp=12,fa=16,Yu=.25,Xh=null,Rt=null,Yh="",K$="",si,ju,rl,Mp=null,So=null,ll=null,_a=null,al=null,Ku={getBoundsInfo:function(){const e=Rs(Mp),t=Yi(Mp);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,i,n){const a=Ku.getBoundsInfo(),d=Yi(si);return t+d.height<a.bottom?wd(e,t,a,d):n-d.height>a.top?Fc(i,n,a,d):t+d.height<document.documentElement.clientHeight?wd(e,t,a,d):n-d.height>document.documentElement.clientTop?Fc(i,n,a,d):Md(e,a,d)}},mi={ANIMATION_TIME:Yu,ARROW_HORIZONTAL_PADDING:wp,ARROW_SIZE:Xu,BORDER_SIZE:kp,PADDING_Y:fa,TEST_ONLY:Ku};mi.clearContent=Ya,mi.createDom=Dc,mi.getContentDiv=xc,mi.getOwner=wr,mi.getPositionX=Qo,mi.hide=Dr,mi.hideIfOwner=Hc,mi.hideWithoutAnimation=oo,mi.isVisible=Mr,mi.repositionForWindowResize=ja,mi.setBoundsElement=Xa,mi.setColour=Bc,mi.show=kd,mi.showPositionedByBlock=Nd,mi.showPositionedByField=Pc;var us={};us.commonWordPrefix=Vc,us.commonWordSuffix=zc,us.isNumber=u.isNumber$$module$build$src$core$utils$string,us.shortestStringLength=xr,us.wrap=u.wrap$$module$build$src$core$utils$string;var cr=void 0,Ju=!1,ul=!1,Dp=50,xp=0,hr=0,Bp=0,qu=0,Ps=null,ma=null,Pp=0,Zu=10,jh=10,J$=750,Kh=5,oi=null,Us={HOVER_MS:J$,LIMIT:Dp,MARGINS:Kh,OFFSET_X:Pp,OFFSET_Y:Zu,RADIUS_OK:jh};Us.bindMouseEvents=Nl,Us.block=jc,Us.createDom=Yc,Us.dispose=Ur,Us.getCustomTooltip=N$,Us.getDiv=Al,Us.getTooltipOfObject=Br,Us.hide=no,Us.isVisible=$s,Us.setCustomTooltip=A$,Us.unbindMouseEvents=Ka,Us.unblock=en;var Jh=.45,mt=.65,qh={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},cs={};cs.blend=tn,cs.getHsvSaturation=Jc,cs.getHsvValue=qc,cs.hexToRgb=Za,cs.hsvToHex=Qa,cs.hueToHex=As,cs.names=qh,cs.parse=Hr,cs.rgbToHex=qa,cs.setHsvSaturation=Pd,cs.setHsvValue=k$;var cl={};cl.checkMessageReferences=Gr,cl.parseBlockColour=Gn,cl.replaceMessageReferences=Ot,cl.tokenizeInterpolation=gs;var kt=class{get size_(){return this.size}set size_(e){this.size=e}constructor(e,t,i){this.DEFAULT_VALUE=null,this.name=void 0,this.tooltip=this.validator_=null,this.size=new bt(0,0),this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.id_=null,this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new bt(0,0),e!==kt.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Ot(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");if(this.sourceBlock_=e,e.id.includes("_field"))throw Error(`Field ID indicator is contained in block ID. This may cause problems with focus: ${e.id}.`);this.id_=`${e.id}_field_${oe()}`}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){if(!this.fieldGroup_){var e=this.id_;if(!e)throw Error("Expected ID to be defined prior to init.");this.fieldGroup_=be(ae.G,{id:e}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour()}}initView(){this.createBorderRect_(),this.createTextElement_(),this.fieldGroup_&&Ge(this.fieldGroup_,"blocklyField")}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=be(ae.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=be(ae.TEXT,{class:"blocklyText blocklyFieldText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");Nl(e),this.mouseDownWrapper=L(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(kt),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(kt,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=u.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),Sr(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(u.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){Hc(this),zs(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||M(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(Ge(e,"blocklyEditableField"),me(e,"blocklyNonEditableField")):(Ge(e,"blocklyNonEditableField"),me(e,"blocklyEditableField")))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==kt.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let i=e*2,n=t.FIELD_TEXT_HEIGHT,a=0;this.textElement_&&(a=le(this.textElement_),i+=a),this.isFullBlockField()||(n=Math.max(n,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=n,this.size_.width=i,this.positionTextElement_(e,a),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var i=this.getConstants(),n=this.size_.height/2,a;this.textElement_.setAttribute("x",String((a=this.getSourceBlock())!=null&&a.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(i.FIELD_TEXT_BASELINE_CENTER?n:n-i.FIELD_TEXT_HEIGHT/2+i.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_&&(this.render_(),this.isDirty_=!1),this.size_):new bt(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new ni;if(this.isFullBlockField()){var i=this.sourceBlock_.getHeightWidth();const n=t.workspace.scale;e=this.getAbsoluteXY_(),t=(i.width+1)*n,i=(i.height+1)*n,F$?(e.x+=1.5*n,e.y+=1.5*n):(e.x-=.5*n,e.y-=.5*n)}else i=this.borderRect_.getBoundingClientRect(),e=Rs(this.borderRect_),t=i.width,i=i.height;return new at(e.y,e.y+i,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,kt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var i=u.getGroup$$module$build$src$core$events$utils();i||u.setGroup$$module$build$src$core$events$utils(!0);try{const Re=this.doClassValidation_(e),st=this.processValidation(e,Re,t);if(!(st instanceof Error)){var n,a=(n=this.getValidator())==null?void 0:n.call(this,st),d=this.processValidation(st,a,t);if(!(d instanceof Error)){var m=this.sourceBlock_;if(!m||!m.disposed){var F=this.getValue();F===d?this.doValueUpdate_(d):(this.doValueUpdate_(d),t&&m&&He()&&N(new(We($e.BLOCK_CHANGE))(m,"field",this.name||null,F,d)),this.isDirty_&&this.forceRerender())}}}}finally{u.setGroup$$module$build$src$core$events$utils(i)}}}processValidation(e,t,i){return t===null?(this.doValueInvalid_(e,i),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return Br(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Rs(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new ni;const i=t.inputList;for(let n=0;n<t.inputList.length;n++){const a=i[n],d=a.fieldRow;for(let m=0;m<d.length;m++)if(d[m]===this){e=a;break}}return e}getFlipRtl(){return!1}onShortcut(e){return!1}getFocusableElement(){if(!this.fieldGroup_)throw Error("This field currently has no representative DOM element.");return this.fieldGroup_}getFocusableTree(){const e=this.getSourceBlock();if(!e)throw new ni;return e.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};kt.NBSP="",kt.SKIP_SETUP=Symbol("SKIP_SETUP");var ni=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Ho=null,Qu=null,vn=null,Zh="blocklyWidgetDiv",Ta="",Ea="",Es,ec=null,bs={};bs.createDom=iu,bs.getDiv=sn,bs.hide=Vr,bs.hideIfOwner=zs,bs.hideIfOwnerIsInWorkspace=su,bs.isVisible=Ll,bs.positionWithAnchor=ou,bs.repositionForWindowResize=nn,bs.show=on,bs.testOnly_setDiv=tu;var xt=null,Qh={},Ni=null,hl={};hl.callbackFactory=u.callbackFactory$$module$build$src$core$contextmenu,hl.dispose=rn,hl.getCurrentBlock=Zc,hl.hide=Ji,hl.setCurrentBlock=ru,hl.show=ro;var gt=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const i=[];for(const n of this.registeredItems.values()){if(n.scopeType&&(n.scopeType===tc.BLOCK&&!e.block||n.scopeType===tc.COMMENT&&!e.comment||n.scopeType===tc.WORKSPACE&&!e.workspace))continue;let a;if(a={scope:e,weight:n.weight},n.separator)a=Object.assign({},a,{separator:!0});else{const d=n.preconditionFn(e,t);if(d==="hidden")continue;const m=typeof n.displayText=="function"?n.displayText(e):n.displayText;a=Object.assign({},a,{text:m,callback:n.callback,enabled:d==="enabled"})}i.push(a)}return i.sort(function(n,a){return n.weight-a.weight}),i}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(gt||(gt={}));var tc=gt.ScopeType,vo=50,ic=100,q$={BLOCK:vo,BUBBLE:ic},ed=class{constructor(e){this.comment=e,this.startLoc=null,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.isReadOnly()}startDrag(){this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,vo),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0)}fireDragStartEvent(){const e=new(We($e.COMMENT_DRAG))(this.comment,!0);N(e)}fireDragEndEvent(){const e=new(We($e.COMMENT_DRAG))(this.comment,!1);N(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(We($e.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),N(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},td=new WeakMap,id=class{constructor(e,t,i){this.id=e,this.workspace=t,this.container=i}isVisible(){return this.icon.checkVisibility()}getParentComment(){const e=this.workspace.getCommentById(this.id);if(!e)throw Error(`Comment bar button ${this.id} has no corresponding comment`);return e}getSize(e=!1){var t=this.icon.getBBox();return t=at.from(t),e&&(e=this.getMargin(),t.left-=e,t.top-=e,t.bottom+=e,t.right+=e),t}getMargin(){return(this.container.getBBox().height-this.icon.getBBox().height)/2}getFocusableElement(){return this.icon}getFocusableTree(){return this.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return this.isVisible()}},Up="_collapse_bar_button",Z$=class extends id{constructor(e,t,i){super(e,t,i),this.id=e,this.workspace=t,this.container=i,this.icon=be(ae.IMAGE,{class:"blocklyFoldoutIcon",href:`${this.workspace.options.pathToMedia}foldout-icon.svg`,id:`${this.id}${Up}`},this.container),this.bindId=L(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){x(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${e}`)}performAction(e){U();const t=this.getParentComment();t.view.bringToFront(),e&&e instanceof PointerEvent&&Q(e)?e.stopPropagation():(t.setCollapsed(!t.isCollapsed()),this.workspace.hideChaff(),e?.stopPropagation())}},sd="_comment_textarea_",Q$=class{constructor(e,t,i){this.workspace=e,this.onFinishEditing=i,this.textChangeListeners=[],this.text="",this.foreignObject=be(ae.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"}),e=document.createElementNS(ho,"body"),e.setAttribute("xmlns",ho),e.className="blocklyMinimalBody",this.textArea=document.createElementNS(ho,"textarea"),this.textArea.setAttribute("tabindex","-1"),Ge(this.textArea,"blocklyCommentText"),Ge(this.textArea,"blocklyTextarea"),Ge(this.textArea,"blocklyText"),e.appendChild(this.textArea),this.foreignObject.appendChild(e),t&&(this.id=t+sd,this.textArea.setAttribute("id",this.id)),L(this.textArea,"change",this,this.onTextChange),L(this.textArea,"pointerdown",this,n=>{n.stopPropagation(),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this),U()}),L(this.textArea,"keydown",this,this.handleKeyDown)}getDom(){return this.foreignObject}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}onTextChange(){const e=this.text;this.text=this.textArea.value;for(let t=this.textChangeListeners.length-1;t>=0;t--)this.textChangeListeners[t](e,this.text)}handleKeyDown(e){(e.key==="Escape"||e.key==="Enter"&&(e.ctrlKey||e.metaKey))&&(this.onFinishEditing&&this.onFinishEditing(),e.stopPropagation())}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}setPlaceholderText(e){this.textArea.placeholder=e}setEditable(e){e?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","true")}updateSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}getFocusableElement(){return this.textArea}getFocusableTree(){return this.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!!this.id}},eg="_delete_bar_button",yn=class extends id{constructor(e,t,i){super(e,t,i),this.id=e,this.workspace=t,this.container=i,this.icon=be(ae.IMAGE,{class:"blocklyDeleteIcon",href:`${this.workspace.options.pathToMedia}delete-icon.svg`,id:`${this.id}${eg}`},i),this.bindId=L(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){x(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("x","0");const t=this.container.getBBox();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${t.width-this.getSize(!0).getWidth()}`)}performAction(e){U(),e&&e instanceof PointerEvent&&Q(e)?e.stopPropagation():(this.getParentComment().dispose(),e?.stopPropagation(),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.workspace))}},ba=class{constructor(e,t){this.workspace=e,this.commentId=t,this.collapsed=!1,this.editable=!0,this.location=new De(0,0),this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=be(ae.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteButton:this.deleteButton,foldoutButton:this.foldoutButton,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot),this.commentEditor=this.createTextArea(),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let i;(i=e.getLayerManager())==null||i.append(this,vo),this.size=ba.defaultCommentSize,this.setSizeWithoutFiringEvents(this.size),this.moveTo(new De(0,0))}createHighlightRect(e){return be(ae.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e){e=be(ae.G,{class:"blocklyCommentTopbar"},e);const t=be(ae.RECT,{class:"blocklyCommentTopbarBackground"},e),i=new yn(this.commentId,this.workspace,e),n=new Z$(this.commentId,this.workspace,e),a=be(ae.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),d=document.createTextNode("");return a.appendChild(d),{topBarGroup:e,topBarBackground:t,deleteButton:i,foldoutButton:n,textPreview:a,textPreviewNode:d}}createTextArea(){const e=new Q$(this.workspace,this.commentId,()=>this.svgRoot.focus());return this.svgRoot.appendChild(e.getDom()),e.addTextChangeListener((t,i)=>{this.updateTextPreview(i),this.setSize(this.size)}),e}getEditorFocusableNode(){return this.commentEditor}createResizeHandle(e,t){return e=be(ae.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),L(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),i=this.textPreview.getBBox(),n=this.resizeHandle.getBBox();this.size=e=bt.max(e,this.calcMinSize(t)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.commentEditor.updateSize(e,t),this.deleteButton.reposition(),this.foldoutButton.reposition(),this.updateTextPreviewSize(e,t,i),this.updateResizeHandlePosition(e,n)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e){var t;this.updateTextPreview((t=this.commentEditor.getText())!=null?t:"");let i=t=le(this.textPreview);return this.foldoutButton.isVisible()?i+=this.foldoutButton.getSize(!0).getWidth():t&&(i+=4),this.deleteButton.isVisible()?i+=this.deleteButton.getSize(!0).getWidth():t&&(i+=4),new bt(i,e.height+20)}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextPreviewSize(e,t,i){t=(t.height-i.height)/2;const n=this.foldoutButton.getSize(!0),a=this.deleteButton.getSize(!0);e=e.width-n.getWidth()-a.getWidth(),this.textPreview.setAttribute("x",`${n.getWidth()}`),this.textPreview.setAttribute("y",`${t+i.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let i=this.sizeChangeListeners.length-1;i>=0;i--)this.sizeChangeListeners[i](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),Q(e)||(this.preResizeSize=this.getSize(),Ws(this.workspace,e,new De(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=L(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=L(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){U(),this.resizePointerUpListener&&(x(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(x(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=Lo(this.workspace,e),this.setSizeWithoutFiringEvents(new bt(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?Ge(this.svgRoot,"blocklyCollapsed"):me(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;e>=0;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(Ge(this.svgRoot,"blocklyEditable"),me(this.svgRoot,"blocklyReadonly")):(me(this.svgRoot,"blocklyEditable"),Ge(this.svgRoot,"blocklyReadonly")),this.commentEditor.setEditable(e)}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.commentEditor.getText()}setText(e){this.commentEditor.setText(e)}setPlaceholderText(e){this.commentEditor.setPlaceholderText(e)}addTextChangeListener(e){this.commentEditor.addTextChangeListener(e)}removeTextChangeListener(e){this.commentEditor.removeTextChangeListener(e)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return e.length>=12?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){U(),Q(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,this.foldoutButton.dispose(),this.deleteButton.dispose(),M(this.svgRoot);for(let e=this.disposeListeners.length-1;e>=0;e--)this.disposeListeners[e]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}getCommentBarButtons(){return[this.foldoutButton,this.deleteButton]}};ba.defaultCommentSize=new bt(120,100),Ke(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklyCommentText.blocklyActiveFocus {
  border-color: #fc3;
  border-width: 2px;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var Sa=class{constructor(e,t){this.workspace=e,this.text="",this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new De(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:Se(),this.size=ba.defaultCommentSize,e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){He()&&N(new(We($e.COMMENT_CREATE))(this))}fireDeleteEvent(){He()&&N(new(We($e.COMMENT_DELETE))(this))}fireChangeEvent(e,t){He()&&N(new(We($e.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){He()&&N(new(We($e.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(We($e.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),N(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnDeletable(){return this.deletable}moveTo(e,t){const i=new(We($e.COMMENT_MOVE))(this);t&&i.setReason(t),this.location=e,i.recordNew(),N(i)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},Go=class extends Sa{constructor(e,t){super(e,t),this.dragStrategy=new ed(this),this.workspace=e,this.view=new ba(e,this.id),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.view.getSvgRoot().setAttribute("id",this.id),this.addModelUpdateBindings(),L(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),L(this.view.getSvgRoot(),"wheel",this,i=>{i.stopPropagation()})}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>void super.setText(t)),this.view.addSizeChangeListener((e,t)=>void super.setSize(t)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setPlaceholderText(e){this.view.setPlaceholderText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,i;const n=(i=(t=this.view)==null?void 0:t.getSize())!=null?i:this.getSize();return this.workspace.RTL?(t=e.x-n.width,i=e.x):(t=e.x,i=e.x+n.width),new at(e.y,e.y+n.height,t,i)}moveBy(e,t,i){const n=this.getRelativeToSurfaceXY();e=new De(n.x+e,n.y+t),this.moveTo(e,i)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?Ge(this.getSvgRoot(),"blocklyDragging"):me(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0;const e=u.getFocusManager$$module$build$src$core$focus_manager();e.getFocusedNode()===this&&setTimeout(()=>e.focusTree(this.workspace),0),this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);t&&(t.handleCommentStart(e,this),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this))}setDeleteStyle(e){e?Ge(this.getSvgRoot(),"blocklyDraggingDelete"):me(this.getSvgRoot(),"blocklyDraggingDelete")}isCopyable(){return this.isOwnMovable()&&this.isOwnDeletable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ge(this.getSvgRoot(),"blocklySelected"),Ue(this)}unselect(){me(this.getSvgRoot(),"blocklySelected"),Ue(null)}toCopyData(){return{paster:ft.TYPE,commentState:Or(this,{addCoordinates:!0})}}showContextMenu(e){const t=gt.registry.getContextMenuOptions({comment:this,focusedNode:this},e);let i;i=e instanceof PointerEvent?new De(e.clientX,e.clientY):Qs(this.workspace,this.getRelativeToSurfaceXY()).translate(10,10),ro(e,t,this.workspace.RTL,this.workspace,i)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getEditorFocusableNode(){return this.view.getEditorFocusableNode()}getFocusableElement(){return this.getSvgRoot()}getFocusableTree(){return this.workspace}onNodeFocus(){this.select();let e;(e=this.workspace.getLayerManager())==null||e.append(this,vo)}onNodeBlur(){this.unselect()}canBeFocused(){return!0}},es={};es.appendDomToWorkspace=kl,es.blockToDom=fs,es.blockToDomWithXY=xi,es.clearWorkspaceAndLoadFromXml=Hd,es.deleteNext=Xn,es.domToBlock=u.domToBlock$$module$build$src$core$xml,es.domToBlockInternal=ao,es.domToPrettyText=Vn,es.domToText=Ys,es.domToVariables=eh,es.domToWorkspace=u.domToWorkspace$$module$build$src$core$xml,es.loadWorkspaceComment=Qc,es.saveWorkspaceComment=Wr,es.variablesToDom=uu,es.workspaceToDom=Fd;var sc=class extends ar{constructor(e){super(e),this.type=$e.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=xi(e),this.ids=Qe(e),this.json=Vs(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ys(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new sc),t.xml=u.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!vg(t,this.ids))if(e)Zo(this.json,t);else for(e=0;e<this.ids.length;e++){const i=this.ids[e],n=t.getBlockById(i);n?n.dispose(!1):i===this.blockId&&console.warn("Can't uncreate non-existent block: "+i)}}},vg=function(e,t){return t.map(i=>e.getBlockById(i)).filter(i=>i&&i.isShadow()).length===t.length};p(ye.EVENT,$e.BLOCK_CREATE,sc);var Fs=class extends go{constructor(e,t){super(t),this.type=$e.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Fs),t.themeName=e.themeName,t}};p(ye.EVENT,$e.THEME_CHANGE,Fs);var oc=class extends go{constructor(e,t,i,n,a){super(n),this.type=$e.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=i,this.oldScale=a}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new oc),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};p(ye.EVENT,$e.VIEWPORT_CHANGE,oc);var Je;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Je||(Je={}));var dl=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const i=this.calculateIndexForYPos(t);if(i>=this.connections.length)return-1;t=e.y;let n=i;for(;n>=0&&this.connections[n].y===t;){if(this.connections[n]===e)return n;n--}for(n=i;n<this.connections.length&&this.connections[n].y===t;){if(this.connections[n]===e)return n;n++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,i=this.connections.length;for(;t<i;){const n=Math.floor((t+i)/2);if(this.connections[n].y<e)t=n+1;else if(this.connections[n].y>e)i=n;else{t=n;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function i(st){const Ei=a-n[st].x,Jt=d-n[st].y;return Math.sqrt(Ei*Ei+Jt*Jt)<=t&&Re.push(n[st]),Jt<t}const n=this.connections,a=e.x,d=e.y;e=0;let m=n.length-2,F=m;for(;e<F;)n[F].y<d?e=F:m=F,F=Math.floor((e+m)/2);const Re=[];if(m=e=F,n.length){for(;e>=0&&i(e);)e--;do m++;while(m<n.length&&i(m))}return Re}isInYRange(e,t,i){return Math.abs(this.connections[e].y-t)<=i}searchForClosest(e,t,i){if(!this.connections.length)return{connection:null,radius:t};const n=e.y,a=e.x;e.x=a+i.x,e.y=n+i.y;var d=this.calculateIndexForYPos(e.y);i=null;let m=t,F,Re=d-1;for(;Re>=0&&this.isInYRange(Re,e.y,t);)F=this.connections[Re],this.connectionChecker.canConnect(e,F,!0,m)&&(i=F,m=F.distanceFrom(e)),Re--;for(;d<this.connections.length&&this.isInYRange(d,e.y,t);)F=this.connections[d],this.connectionChecker.canConnect(e,F,!0,m)&&(i=F,m=F.distanceFrom(e)),d++;return e.x=a,e.y=n,{connection:i,radius:m}}static init(e){const t=[];return t[Je.INPUT_VALUE]=new dl(e),t[Je.OUTPUT_VALUE]=new dl(e),t[Je.NEXT_STATEMENT]=new dl(e),t[Je.PREVIOUS_STATEMENT]=new dl(e),t}},pl=class extends go{constructor(e,t,i){super(i),this.type=$e.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new pl),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};p(ye.EVENT,$e.SELECTED,pl);var Ss=class extends ar{constructor(e){if(super(e),this.type=$e.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=xi(e),this.ids=Qe(e),this.wasShadow=e.isShadow(),this.oldJson=Vs(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Ys(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Ss),t.oldXml=u.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const i=this.ids[e],n=t.getBlockById(i);n?n.dispose(!1):i===this.blockId&&console.warn("Can't delete non-existent block: "+i)}else Zo(this.oldJson,t)}};p(ye.EVENT,$e.BLOCK_DELETE,Ss);var Fp={fromJsonInternal:w$},$l={TEST_ONLY:Fp};$l.fromJson=u.fromJson$$module$build$src$core$field_registry,$l.register=Ls,$l.unregister=Gd;var ei=class extends kt{constructor(e,t,i){super(kt.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==kt.SKIP_SETUP&&(this.setOptions(e),i&&this.configure_(i),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(ei,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=be(ae.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Ge(this.borderRect_,"blocklyDropdownRect"),this.fieldGroup_&&(Ge(this.fieldGroup_,"blocklyField"),Ge(this.fieldGroup_,"blocklyDropdownField"))}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=be(ae.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?ei.ARROW_CHAR+" ":" "+ei.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=be(ae.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Oi,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new ni;this.dropdownCreate(),this.menu_&&(this.menu_.openingCoords=e&&typeof e.clientX=="number"?new De(e.clientX,e.clientY):null,Ya(),e=this.menu_.render(xc()),Ge(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),e=this.sourceBlock_.getColourTertiary(),Bc(t,e)),Pc(this,this.dropdownDispose_.bind(this)),xc().style.height=`${this.menu_.getSize().height}px`,this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour())}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new ni;const t=new ii;t.setRole(Ai.LISTBOX),this.menu_=t;const i=this.getOptions(!1);this.selectedMenuItem=null;for(let a=0;a<i.length;a++){var n=i[a];if(n===ei.SEPARATOR){t.addChild(new mn);continue}const[d,m]=n;Ml(d)?(n=new Image(d.width,d.height),n.src=d.src,n.alt=d.alt):n=d,n=new qs(n,m),n.setRole(Ai.OPTION),n.setRightToLeft(e.RTL),n.setCheckable(!0),t.addChild(n),n.setChecked(m===this.value_),m===this.value_&&(this.selectedMenuItem=n),n.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){Hc(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}setOptions(e){Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],this.setValue(this.selectedOption[1])}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,i;i=e[t];t++)i[1]===this.value_&&(this.selectedOption=i)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];Ml(e)?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new ni;this.imageElement.style.display="",this.imageElement.setAttributeNS(Oi,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const i=Number(e.height);e=Number(e.width);var n=!!this.borderRect_;const a=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,i+ei.IMAGE_Y_PADDING);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let d;d=this.svgArrow?this.positionSVGArrow(e+n,a/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):le(this.arrow),this.size_.width=e+d+n*2,this.size_.height=a;let m=0;t.RTL?this.imageElement.setAttribute("x",`${n+d}`):(m=e+d,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${n}`)),this.imageElement.setAttribute("y",String(a/2-i/2)),this.positionTextElement_(m+n,e+d)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();Ge(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const i=le(this.getTextElement());t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let n=0;this.svgArrow&&(n=this.positionSVGArrow(i+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=i+n+t*2,this.size_.height=e,this.positionTextElement_(t,i)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const i=this.getSourceBlock();if(!i)throw new ni;const n=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,a=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(i.RTL?n:e+a)+","+t+")"),d+a}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];if(Ml(e))return e.alt;if(typeof HTMLElement<"u"&&e instanceof HTMLElement){let t,i;return(i=(t=e.title)!=null?t:e.ariaLabel)!=null?i:e.innerText}return typeof e=="string"?e:(console.warn("Can't get text for existing dropdown option. If you're using HTMLElement dropdown options in node, ensure you're using jsdom-global or similar."),null)}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const i=e.map(m=>{if(m===ei.SEPARATOR)return m;const[F,Re]=m;return typeof F=="string"?[Ot(F),Re]:(t=!0,[Ml(F)?Object.assign({},F,{alt:Ot(F.alt)}):Object.assign({},F),Re])});if(t||e.length<2)return{options:i};var n=i.map(([m])=>m),a=xr(n);e=Vc(n,a);const d=zc(n,a);return!e&&!d||a<=e+d?{options:i}:(a=e?n[0].substring(0,e-1):void 0,n=d?n[0].substr(1-d):void 0,{options:this.applyTrim(i,e,d),prefix:a,suffix:n})}applyTrim(e,t,i){return e.map(([n,a])=>[n.substring(t,n.length-i),a])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let i=0;i<e.length;i++){const n=e[i];Array.isArray(n)||n===ei.SEPARATOR?typeof n[1]!="string"?(t=!0,console.error(`Invalid option[${i}]: Each FieldDropdown option id must be a string. 
          Found ${n[1]} in: ${n}`)):!n[0]||typeof n[0]=="string"||Ml(n[0])||typeof HTMLElement<"u"&&n[0]instanceof HTMLElement||(t=!0,console.error(`Invalid option[${i}]: Each FieldDropdown option must have a string 
          label, image description, or HTML element. Found ${n[0]} in: ${n}`)):(t=!0,console.error(`Invalid option[${i}]: Each FieldDropdown option must be an array or
          the string literal 'separator'. Found: ${n}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};ei.SEPARATOR="separator",ei.ARROW_CHAR="",ei.IMAGE_Y_OFFSET=5,ei.IMAGE_Y_PADDING=ei.IMAGE_Y_OFFSET*2,Ls("field_dropdown",ei);var gl=class{constructor(e,t,i,n){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=i||Object.create(null),this.componentStyles=n||Object.create(null),this.fontStyle=Object.create(null),p(ye.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const i=new gl(e);let n=t.base;if(n){if(typeof n=="string"){let a;n=(a=C(ye.THEME,n))!=null?a:void 0}n instanceof gl&&(Ze(i,n),i.name=e)}return Ze(i.blockStyles,t.blockStyles),Ze(i.categoryStyles,t.categoryStyles),Ze(i.componentStyles,t.componentStyles),Ze(i.fontStyle,t.fontStyle),t.startHats!==null&&(i.startHats=t.startHats),i}},yg={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},va={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},nc=new gl("classic",yg,va),Vo=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,i=!1;var n=!1,a=!1,d=!1,m=!1,F=!1;const Re=!!e.readOnly;if(!Re){var st;t=Ro((st=e.toolbox)!=null?st:null),i=Da(t),n=e.trashcan,n=n===void 0?i:n,a=e.collapse,a=a===void 0?i:a,d=e.comments,d=d===void 0?i:d,m=e.disable,m=m===void 0?i:m,F=e.sounds,F=F===void 0?!0:F}st=e.maxTrashcanContents,n?st===void 0&&(st=32):st=0;const Ei=!!e.rtl;let Jt=e.horizontalLayout;Jt===void 0&&(Jt=!1);var hs=e.toolboxPosition!=="end";hs=Jt?hs?dt.TOP:dt.BOTTOM:hs===Ei?dt.RIGHT:dt.LEFT;let ml=e.css;ml===void 0&&(ml=!0);let Er="https://blockly-demo.appspot.com/static/media/";e.media&&(Er=e.media.endsWith("/")?e.media:e.media+"/");const k_=e.oneBasedIndex,wm=e.renderer||"geras",Mm=e.plugins||{};let nf=e.modalInputs;nf===void 0&&(nf=!0),this.RTL=Ei,this.oneBasedIndex=k_===void 0?!0:k_,this.collapse=a,this.comments=d,this.disable=m,this.readOnly=Re,this.maxBlocks=e.maxBlocks||1/0;let w_;this.maxInstances=(w_=e.maxInstances)!=null?w_:null,this.modalInputs=nf,this.pathToMedia=Er,this.hasCategories=i,this.moveOptions=Vo.parseMoveOptions(e,i),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=n,this.maxTrashcanContents=st,this.hasSounds=F,this.hasCss=ml,this.horizontalLayout=Jt,this.languageTree=t,this.gridOptions=Vo.parseGridOptions(e),this.zoomOptions=Vo.parseZoomOptions(e),this.toolboxPosition=hs,this.theme=Vo.parseThemeOptions(e),this.renderer=wm;let M_;this.rendererOverrides=(M_=e.rendererOverrides)!=null?M_:null;let D_;this.parentWorkspace=(D_=e.parentWorkspace)!=null?D_:null,this.plugins=Mm}static parseMoveOptions(e,t){const i=e.move||{},n={};return i.scrollbars===void 0&&e.scrollbars===void 0?n.scrollbars=t:typeof i.scrollbars=="object"?(n.scrollbars={horizontal:!!i.scrollbars.horizontal,vertical:!!i.scrollbars.vertical},n.scrollbars.horizontal&&n.scrollbars.vertical?n.scrollbars=!0:n.scrollbars.horizontal||n.scrollbars.vertical||(n.scrollbars=!1)):n.scrollbars=!!i.scrollbars||!!e.scrollbars,n.wheel=n.scrollbars&&i.wheel!==void 0?!!i.wheel:typeof n.scrollbars=="object",n.drag=n.scrollbars?i.drag===void 0?!0:!!i.drag:!1,n}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=t.spacing>0&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||nc,typeof e=="string"?C(ye.THEME,e):e instanceof gl?e:gl.defineTheme(e.name||"builtin"+oe(),e)}},tg=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null}isMovable(){return!0}startDrag(){this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,ic),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Hs,Bt=class{constructor(e,t,i,n){this.workspace=e,this.anchor=t,this.ownerRect=i,this.size=new bt(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new tg(this,this.workspace),this.id=oe(),this.svgRoot=be(ae.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=be(ae.G,{class:"blocklyEmboss"},this.svgRoot),this.tail=be(ae.PATH,{class:"blocklyBubbleTail"},e),this.background=be(ae.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Hs.BORDER_WIDTH,ry:Hs.BORDER_WIDTH},e),this.contentContainer=be(ae.G,{},this.svgRoot),this.focusableElement=n??this.svgRoot,this.focusableElement.setAttribute("id",this.id),L(this.background,"pointerdown",this,this.onMouseDown)}dispose(){M(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,Hs.MIN_SIZE),e.height=Math.max(e.height,Hs.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new at(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),i=this.getOptimalRelativeLeft(t),n=this.getOptimalRelativeTop(t);const a={x:i,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},d={x:-this.size.width-30,y:n};n={x:e.getWidth(),y:n};var m={x:i,y:e.getHeight()};i=e.getWidth()<e.getHeight()?n:m,e=e.getWidth()<e.getHeight()?m:n,n=this.getOverlap(a,t),m=this.getOverlap(d,t);const F=this.getOverlap(i,t);t=this.getOverlap(e,t),t=Math.max(n,m,F,t),n===t?(this.relativeLeft=a.x,this.relativeTop=a.y):m===t?(this.relativeLeft=d.x,this.relativeTop=d.y):F===t?(this.relativeLeft=i.x,this.relativeTop=i.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var i=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(i+this.size.width,t.left+t.width)-Math.max(i,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var i=this.anchor.x-t;i-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):i>e.right&&(t=-(e.right-this.anchor.x))}else{i=t+this.anchor.x;const n=i+this.size.width;i<e.left?t=e.left-this.anchor.x:n>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const i=this.anchor.y+t,n=i+this.size.height;return e=this.getWorkspaceViewRect(e),i<e.top?t=e.top-this.anchor.y:n>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let i=e.top+e.height,n=e.left;return e=e.left+e.width,i-=this.getScrollbarThickness(),this.workspace.RTL?n-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new at(t,i,n,e)}getScrollbarThickness(){return ui.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,i=this.size.height/2,n=-this.relativeLeft,a=-this.relativeTop;if(t===n&&i===a)e.push("M "+t+","+i);else{a-=i,n-=t,this.workspace.RTL&&(n*=-1);var d=Math.sqrt(a*a+n*n),m=Math.acos(n/d);a<0&&(m=2*Math.PI-m);var F=m+Math.PI/2;F>Math.PI*2&&(F-=Math.PI*2);var Re=Math.sin(F);const Ei=Math.cos(F);let Jt=(this.size.width+this.size.height)/Hs.TAIL_THICKNESS;Jt=Math.min(Jt,this.size.width,this.size.height)/4,F=1-Hs.ANCHOR_RADIUS/d,n=t+F*n,a=i+F*a,F=t+Jt*Ei;const hs=i+Jt*Re;t-=Jt*Ei,i-=Jt*Re,Re=Mc(this.workspace.RTL?-Hs.TAIL_ANGLE:Hs.TAIL_ANGLE),Re=m+Re,Re>Math.PI*2&&(Re-=Math.PI*2),m=Math.sin(Re)*d/Hs.TAIL_BEND,d=Math.cos(Re)*d/Hs.TAIL_BEND,e.push("M"+F+","+hs),e.push("C"+(F+d)+","+(hs+m)+" "+n+","+a+" "+n+","+a),e.push("C"+n+","+a+" "+(t+d)+","+(i+m)+" "+t+","+i)}e.push("z");let st;(st=this.tail)==null||st.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&t?.lastChild!==this.svgRoot?(t?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new De(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ue(this)}unselect(){Ue(null)}getFocusableElement(){return this.focusableElement}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.bringToFront()}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};Hs=Bt,Bt.BORDER_WIDTH=6,Bt.DOUBLE_BORDER=Hs.BORDER_WIDTH*2,Bt.MIN_SIZE=Hs.DOUBLE_BORDER,Bt.TAIL_THICKNESS=1,Bt.TAIL_ANGLE=20,Bt.TAIL_BEND=4,Bt.ANCHOR_RADIUS=8;var In=class extends Bt{constructor(e,t,i,n){super(t,i,n),this.workspace=t,this.anchor=i,this.ownerRect=n,this.autoLayout=!0,t=new Vo(e),this.validateWorkspaceOptions(t),this.svgDialog=be(ae.SVG,{x:Bt.BORDER_WIDTH,y:Bt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Vo(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(ae.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(t.languageTree)),Ge(this.svgRoot,"blocklyMiniWorkspaceBubble"),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let a,d;(a=this.miniWorkspace.getFlyout())==null||(d=a.getWorkspace())==null||d.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress)for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(t.y<20&&e.moveBy(0,20-t.y),e.RTL){let i=-20;const n=this.miniWorkspace.getFlyout();n&&(i-=n.getWidth()),t.x>i&&e.moveBy(i-t.x,0)}else t.x<20&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress){this.autoLayout&&(this.autoLayout=!this.miniWorkspace.keyboardMoveInProgress);var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<In.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<In.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new bt(t.width+Bt.DOUBLE_BORDER,t.height+Bt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+In.MARGIN;e=e.height+In.MARGIN;const i=this.miniWorkspace.getFlyout();if(i){const n=i.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,n.height+20),t+=i.getWidth()}return new bt(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const i of e.getAllBlocks(!1))i.setStyle(i.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};In.MINIMUM_VIEW_CHANGE=10,In.MARGIN=Bt.DOUBLE_BORDER*3;var rc=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new De(0,0),this.workspaceLocation=new De(0,0),this.svgRoot=null,this.tooltip=e,this.id=oe()}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=be(ae.G,{class:"blocklyIconGroup",id:this.id}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),L(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,Nl(this.svgRoot)}}dispose(){Ka(this.svgRoot),M(this.svgRoot)}getWeight(){return-1}getSize(){return new bt(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",kr(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=De.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}getFocusableElement(){const e=this.svgRoot;if(!e)throw Error("Attempting to focus uninitialized icon.");return e}getFocusableTree(){return this.sourceBlock.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getSourceBlock(){return this.sourceBlock}},od,lc;od=17,lc=16,u.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends rc{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),be(ae.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),be(ae.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),be(ae.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Ge(this.svgRoot,"blocklyMutatorIcon"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return u.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new bt(od,od)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return(0,_e.asyncExecutePromiseGeneratorFunction)(function*(){if(t.bubbleIsVisible()!==e){if(yield to(),e){t.miniWorkspaceBubble=new In(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let i;(i=t.miniWorkspaceBubble)==null||i.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let i;(i=t.miniWorkspaceBubble)==null||i.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}N(new(We($e.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getBubble(){return this.miniWorkspaceBubble}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(i=>({kind:"block",type:i}))}),t}getAnchorLocation(){const e=od/2;return De.sum(this.workspaceLocation,new De(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new at(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,i,n,a;e=(a=(t=this.miniWorkspaceBubble)==null||(i=t.getWorkspace())==null||(n=i.getFlyout())==null?void 0:n.getWidth())!=null?a:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+lc):lc,lc)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{u.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||Xe(e)||ve(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=u.getGroup$$module$build$src$core$events$utils();e||u.setGroup$$module$build$src$core$events$utils(!0);var t=ur.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var i=ur.getExtraBlockState_(this.sourceBlock);t!==i&&N(new(We($e.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,i)),u.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=di.MUTATOR,u.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,u.MutatorIcon$$module$build$src$core$icons$mutator_icon;var yo=Object.create(null),ac={allExtensions:yo};u.register$$module$build$src$core$extensions("parent_tooltip_when_inline",nh);var Zs={TEST_ONLY:ac};Zs.apply=Dl,Zs.buildTooltipForDropdown=u.buildTooltipForDropdown$$module$build$src$core$extensions,Zs.buildTooltipWithFieldText=u.buildTooltipWithFieldText$$module$build$src$core$extensions,Zs.isRegistered=vi,Zs.register=u.register$$module$build$src$core$extensions,Zs.registerMixin=u.registerMixin$$module$build$src$core$extensions,Zs.registerMutator=u.registerMutator$$module$build$src$core$extensions,Zs.runAfterPageLoad=zd,Zs.unregister=M$;var Ut;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(Ut||(Ut={}));var vs={};vs.arc=qt,vs.curve=os,vs.line=Kn,vs.lineOnAxis=it,vs.lineTo=ks,vs.moveBy=ti,vs.moveTo=$i,vs.point=et;var Yt={};Yt.Coordinate=De,Yt.KeyCodes=Ut,Yt.Rect=at,Yt.Size=bt,Yt.Svg=ae,Yt.aria=il,Yt.array=Uh,Yt.browserEvents=Ks,Yt.colour=cs,Yt.deprecation=Vu,Yt.dom=Bi,Yt.extensions=Zs,Yt.idGenerator=Du,Yt.math=Wu,Yt.object=G$,Yt.parsing=cl,Yt.string=us,Yt.style=$n,Yt.svgMath=sr,Yt.svgPaths=vs,Yt.toolbox=Vi,Yt.userAgent=H$,Yt.xml=xs;var vt=class{constructor(e,t){if(this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e,e.id.includes("_connection"))throw Error(`Connection ID indicator is contained in block ID. This will cause problems with focus: ${e.id}.`);this.id=`${e.id}_connection_${oe()}`}connect_(e){const t=Je.INPUT_VALUE,i=this.getSourceBlock();var n=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let a;if(this.isConnected()){const m=this.stashShadowState(),F=this.targetBlock();F.isShadow()?F.dispose(!1):(this.disconnectInternal(),a=F),this.applyShadowState(m)}let d;He()&&(d=new(We($e.BLOCK_MOVE))(n),d.setReason(["connect"])),Wd(this,e),n.setParent(i),d&&(d.recordNew(),N(d)),a&&(e=this.type===t?a.outputConnection:a.previousConnection)&&((n=vt.getConnectionForOrphanedConnection(n,e))?e.connect(n):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Je.INPUT_VALUE||this.type===Je.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=u.getGroup$$module$build$src$core$events$utils();t||u.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),u.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:i}=this.getParentAndChildConnections();if(!t||!i)throw Error("Source connection not connected.");const n=u.getGroup$$module$build$src$core$events$utils();n||u.setGroup$$module$build$src$core$events$utils(!0);let a;He()&&(a=new(We($e.BLOCK_MOVE))(i.getSourceBlock()),a.setReason(["disconnect"]));const d=this.targetConnection;d&&(d.targetConnection=null),this.targetConnection=null,e&&i.getSourceBlock().setParent(null),a&&(a.recordNew(),N(a)),i.getSourceBlock().isShadow()||t.respawnShadow_(),u.setGroup$$module$build$src$core$events$utils(n)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var i;return t=(i=e.getInput(t))==null?void 0:i.connection,i=this.targetBlock(),i&&i!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?fs(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Vs(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let i=0;i<t.length;i++)if(t[i].connection===this){e=t[i];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let i=0,n;n=e.inputList[i];i++)if(n.connection===this){t=n;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const i=this.getShadowState(),n=this.getShadowDom();if(t.isDeadOrDying()||!i&&!n)return null;if(i)return t=Rl(i,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(n){if(t=ao(n,t.workspace),e)if(this.type===Je.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Je.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=fs(e),this.shadowState=Vs(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Je.OUTPUT_VALUE)return Xd(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const i=t.getConnectionChecker();return e&&i.canConnect(t,e,!1)?e:null}};vt.CAN_CONNECT=0,vt.REASON_SELF_CONNECTION=1,vt.REASON_WRONG_TYPE=2,vt.REASON_TARGET_NULL=3,vt.REASON_CHECKS_FAILED=4,vt.REASON_DIFFERENT_WORKSPACES=5,vt.REASON_SHADOW_PARENT=6,vt.REASON_DRAG_CHECKS_FAILED=7,vt.REASON_PREVIOUS_AND_OUTPUT=8;var uc=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},nd={};nd.DuplicateIconType=uc,function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"}(u.Align$$module$build$src$core$inputs$align||(u.Align$$module$build$src$core$inputs$align={})),u.Align$$module$build$src$core$inputs$align;var On=class extends kt{constructor(e,t,i){super(kt.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==kt.SKIP_SETUP&&(i?this.configure_(i):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&Ge(this.getTextElement(),this.class),this.fieldGroup_&&Ge(this.fieldGroup_,"blocklyLabelField")}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&me(this.textElement_,this.class),e&&Ge(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Ot(e.text),void 0,e)}};Ls("field_label",On),On.prototype.DEFAULT_VALUE="";var cc=30,dr=[];dr[Je.INPUT_VALUE]=Je.OUTPUT_VALUE,dr[Je.OUTPUT_VALUE]=Je.INPUT_VALUE,dr[Je.NEXT_STATEMENT]=Je.PREVIOUS_STATEMENT,dr[Je.PREVIOUS_STATEMENT]=Je.NEXT_STATEMENT;var rd="RENAME_VARIABLE_ID",Hp="DELETE_VARIABLE_ID",Gp=10,Ti=class extends vt{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[dr[t]],this.offsetInBlock=new De(0,0),this.trackedState=Ti.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Ti.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var i=u.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Gp),n=u.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Gp),a=e.sourceBlock_.getRootBlock(),d=this.sourceBlock_.getRootBlock();if(!a.isInFlyout&&!d.isInFlyout){var m=!0;if(d.isMovable())a.isMovable()&&t&&(n=-n);else if(a.isMovable())m=!1,i=-i,n=-n;else return;t=m?e:this,e=m?this:e,a=m?d:a,a.RTL&&(i=-i),a.moveBy(t.x+i-e.x,t.y+n-e.y,["bump"])}}}moveTo(e,t){let i=!1;return this.trackedState===Ti.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Ti.TrackedState.TRACKED,i=!0):this.trackedState===Ti.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),i=!0),this.x=e,this.y=t,i}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=De.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0;const e=this.findHighlightSvg();e&&(e.style.display="")}unhighlight(){this.highlighted=!1;const e=this.findHighlightSvg();e&&(e.style.display="none")}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Ti.TrackedState.TRACKED||!e&&this.trackedState===Ti.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Ti.TrackedState.TRACKED):(this.trackedState===Ti.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Ti.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const i=e[t],n=i.getConnections_(!0);for(let a=0;a<n.length;a++)n[a].setTracking(!1);for(const a of i.getIcons())kr(a)&&a.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Je.INPUT_VALUE&&this.type!==Je.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let i;t.isCollapsed()?(i=[],t.outputConnection&&i.push(t.outputConnection),t.nextConnection&&i.push(t.nextConnection),t.previousConnection&&i.push(t.previousConnection)):i=t.getConnections_(!0);for(let n=0;n<i.length;n++)e.push(...i[n].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(Oe()){const i=u.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(u.setGroup$$module$build$src$core$events$utils(i),this.bumpAwayFrom(e),u.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),u.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:i}=this.getParentAndChildConnections();if(t&&i){var n=u.getGroup$$module$build$src$core$events$utils();n||u.setGroup$$module$build$src$core$events$utils(!0);var a=t.getSourceBlock(),d=i.getSourceBlock();super.disconnectInternal(e),a.queueRender(),d.updateDisabled(),d.queueRender(),d.getSvgRoot().style.display="block",u.setGroup$$module$build$src$core$events$utils(n)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}showContextMenu(e){const t=gt.registry.getContextMenuOptions({focusedNode:this},e);if(t.length){var i=this.getSourceBlock(),n=i.workspace;if(e instanceof PointerEvent)var a=new De(e.clientX,e.clientY);else a=new De(this.x,this.y),a=Qs(n,a).translate(i.RTL?-5:5,5);ro(e,t,i.RTL,n,a)}}getFocusableElement(){const e=this.findHighlightSvg();if(e)return e;throw Error("No highlight SVG found corresponding to this connection.")}getFocusableTree(){return this.getSourceBlock().workspace}onNodeFocus(){this.highlight()}onNodeBlur(){this.unhighlight()}canBeFocused(){return!0}findHighlightSvg(){return document.getElementById(this.id)}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Ti||(Ti={})),Ti.TrackedState;var ya=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=u.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=u.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,i){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&i)&&(typeof t=="string"&&(t=u.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=i,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let i=0,n;n=this.fieldRow[i];i++)if(n.name===e)return n.dispose(),this.fieldRow.splice(i,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let i=0,n;n=this.fieldRow[i];i++)n.setVisible(e);if(this.connection&&this.connection instanceof Ti){e?t=this.connection.startTrackingAll():this.connection.stopTrackingAll();const i=this.connection.targetBlock();i&&(i.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},zo=class extends ya{constructor(e,t){super(e,t),this.name=e,this.type=u.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Rn=class extends ya{constructor(e,t){super(e,t),this.name=e,this.type=u.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},ts=class extends ya{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=u.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Je.NEXT_STATEMENT)}},hc;u.ValueInput$$module$build$src$core$inputs$value_input=class extends ya{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=u.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Je.INPUT_VALUE)}},hc={},hc.ValueInput=u.ValueInput$$module$build$src$core$inputs$value_input;var pr=class{constructor(e,t,i){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=i&&!e.getBlockById(i)?i:Se(),e.setBlockById(this.id,this),this.xy=new De(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,i=Kt[t],!i||typeof i!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,i)}e.addTopBlock(this),e.addTypedBlock(this),new.target===pr&&this.doInit_()}doInit_(){const e=u.getGroup$$module$build$src$core$events$utils();e||u.setGroup$$module$build$src$core$events$utils(!0);const t=Oe();try{typeof this.init=="function"&&(u.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),u.setRecordUndo$$module$build$src$core$events$utils(t)),He()&&N(new(We($e.BLOCK_CREATE))(this))}finally{u.setGroup$$module$build$src$core$events$utils(e),u.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),He()&&N(new(We($e.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,i;(i=this.outputConnection)!=null&&i.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e?.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const i=this.inputList[t].connection;if(i&&i.type===Je.INPUT_VALUE&&i.targetConnection){if(e)return null;e=i}}return e}unplugFromStack(e){let t=null;var i;if((i=this.previousConnection)!=null&&i.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),i=this.getNextBlock(),e&&i&&!i.isShadow()){let n,a;e=(a=(n=this.nextConnection)==null?void 0:n.targetConnection)!=null?a:null,e?.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,i;i=this.inputList[t];t++)i.connection&&e.push(i.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const i=t.targetBlock();if(!i||e&&i.isShadow())return t;t=i.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,i;i=this.inputList[t];t++)if(i.connection&&i.connection.targetBlock()===e)return i;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let i=0,n;n=this.inputList[i];i++)if(n.connection){var t=n.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),i=!!t;if(i&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!i&&e)throw Error("Block not connected to new parent.");if(i&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Ne(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],i=this.getChildren(e);for(let n,a=0;n=i[a];a++)t.push(...n.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Xi(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(const t of this.getFields())t.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||e.fieldRow.length>1)return!1;return!0}getMatchingConnection(e,t){const i=this.getConnections_(!0);if(e=e.getConnections_(!0),i.length!==e.length)throw Error("Connection lists did not match in length.");for(let n=0;n<e.length;n++)if(e[n]===t)return i[n];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return Br(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=Gn(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(const t of this.getFields())if(t.name===e)return t;return null}*getFields(){for(const e of this.inputList)for(const t of e.fieldRow)yield t}getVars(){const e=[];for(const t of this.getFields())t.referencesVariables()&&e.push(t.getValue());return e}getVarModels(){const e=[];for(const t of this.getFields())if(t.referencesVariables()){const i=this.workspace.getVariableById(t.getValue());i&&e.push(i)}return e}updateVarName(e){for(const t of this.getFields())t.referencesVariables()&&e.getId()===t.getValue()&&t.refreshVariableName()}renameVarById(e,t){for(const i of this.getFields())i.referencesVariables()&&e===i.getValue()&&i.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const i=this.getField(t);if(!i)throw Error('Field "'+t+'" not found.');i.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Je.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Je.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Je.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(N(new(We($e.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof zo&&this.inputList[e]instanceof zo)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof u.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof zo)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Rn)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(ci)||t==ci||this.setDisabledReason(!1,ci),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(We($e.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),N(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(N(new(We($e.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let n=2;n<t.length;n++)t[n-2]==="("&&t[n]===")"&&(t[n-2]=t[n-1],t.splice(n-1,2));let i="";return t=t.reduce((n,a)=>(n=n+(i==="("||a===")"?"":" ")+a,i=a[a.length-1],n),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const n of this.inputList)if(n.name!=Eo){for(const a of n.fieldRow)t.push(a.getText());if(n.connection){const a=n.connection.targetBlock();if(a){var i=n.connection;let d=i.getCheck();!d&&i.targetConnection&&(d=i.targetConnection.getCheck()),(i=!!d&&(d.includes("Boolean")||d.includes("Number")))&&t.push("("),t.push(...a.toTokens(e)),i&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new u.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new ts(e,this))}appendDummyInput(e=""){return this.appendInput(new zo(e,this))}appendEndRowInput(e=""){return this.appendInput(new Rn(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=E(ye.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var i=0;e["args"+i];){if(e["message"+i]===void 0)throw Error(t+`args${i} must have a corresponding message (message${i}).`);i++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),i=0;e["message"+i]!==void 0;)this.interpolate(e["message"+i],e["args"+i]||[],e["implicitAlign"+i]||e["lastDummyAlign"+i],t),i++;if(e.inputsInline!==void 0&&(u.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),u.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(i=Ot(e.tooltip),this.setTooltip(i)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(i=Ot(e.helpUrl),this.setHelpUrl(i)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Dl(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)Dl(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const i in e)this[i]!==void 0&&t.push(i);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,i,n){e=gs(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,i),i=[];for(let a=0,d;d=t[a];a++)if(this.isInputKeyword(d.type)){if(e=this.inputFromJson(d,n)){for(let m=0,F;F=i[m];m++)e.appendField(F[0],F[1]);i.length=0}}else(e=this.fieldFromJson(d))&&i.push([e,d.name])}validateTokens(e,t){const i=[];let n=0;for(let a=0;a<e.length;a++){const d=e[a];if(typeof d=="number"){if(d<1||d>t)throw Error('Block "'+this.type+'": Message index %'+d+" out of range.");if(i[d])throw Error('Block "'+this.type+'": Message index %'+d+" duplicated.");i[d]=!0,n++}}if(n!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,i){const n=[];for(let d=0;d<e.length;d++){var a=e[d];if(typeof a=="number"&&(a=t[a-1]),typeof a=="string"){if(a===`
`)a={type:"input_end_row"},i&&(a.align=i);else if(a=this.stringToFieldJson(a),!a)continue}n.push(a)}return(e=n.length)&&!this.isInputKeyword(n[e-1].type)&&(e={type:"input_dummy"},i&&(e.align=i),n.push(e)),n}fieldFromJson(e){const t=u.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var i={LEFT:u.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:u.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:u.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:u.Align$$module$build$src$core$inputs$align.CENTRE};let n;switch(e.type){case"input_value":n=this.appendValueInput(e.name);break;case"input_statement":n=this.appendStatementInput(e.name);break;case"input_dummy":n=this.appendDummyInput(e.name);break;case"input_end_row":n=this.appendEndRowInput(e.name);break;default:n=this.appendInputFromRegistry(e.type,e.name)}return n?(e.check&&n.setCheck(e.check),e.align&&(i=i[e.align.toUpperCase()],i===void 0?console.warn(t+"Illegal align value: ",e.align):n.setAlign(i)),n):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||S(ye.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var i=-1,n=t?-1:this.inputList.length;for(let a=0,d;d=this.inputList[a];a++)if(d.name===e){if(i=a,n!==-1)break}else if(t&&d.name===t&&(n=a,i!==-1))break;if(i===-1)throw Error('Named input "'+e+'" not found.');if(n===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(i,n)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const i=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,i)}removeInput(e,t){for(let i=0,n;n=this.inputList[i];i++)if(n.name===e)return n instanceof ts&&this.statementInputCount--,n.dispose(),this.inputList.splice(i,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,i;i=this.inputList[t];t++)if(i.name===e)return i;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(di.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let i;const n=(i=(t=this.getIcon(di.COMMENT))==null?void 0:t.getText())!=null?i:null;if(n!==e){if(e!==null){if(t=this.getIcon(di.COMMENT),!t){if(t=E(ye.ICON,di.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!un(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}u.disable$$module$build$src$core$events$utils(),t.setText(e),u.enable$$module$build$src$core$events$utils()}else this.removeIcon(di.COMMENT);N(new(We($e.BLOCK_CHANGE))(this,"comment",null,n,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new uc(e);return this.icons.push(e),this.icons.sort((t,i)=>t.getWeight()-i.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(i=>!i.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof di?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,i){if(this.parentBlock_)throw Error("Block has parent");const n=new(We($e.BLOCK_MOVE))(this);i&&n.setReason(i),this.xy.translate(e,t),n.recordNew(),N(n)}makeConnection_(e){return new vt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let i=0,n;n=this.inputList[i];i++)if(n.connection){var t=n.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};pr.COLLAPSED_INPUT_NAME=Eo,pr.COLLAPSED_FIELD_NAME=da;var ld=null,Cn=null,dc={};dc.connectionUiEffect=wo,dc.disconnectUiEffect=Mo,dc.disconnectUiStop=Jn,dc.disposeUiEffect=Ul;var Ia=class{paste(e,t,i){if(!t.isCapacityAvailable(e.typeCounts))return null;i&&(e.blockState.x=i.x,e.blockState.y=i.y),i=i||new De(e.blockState.x||0,e.blockState.y||0),u.disable$$module$build$src$core$events$utils();let n;try{n=Zo(e.blockState,t),lh(n,i)}finally{u.enable$$module$build$src$core$events$utils()}if(!n)return n;He()&&!n.isShadow()&&N(new(We($e.BLOCK_CREATE))(n));const a=n;return to().then(()=>u.getFocusManager$$module$build$src$core$focus_manager().focusNode(a)),n}};Ia.TYPE="block",Ua(Ia.TYPE,new Ia);var pc={};pc.bumpIntoBounds=Yr,pc.bumpIntoBoundsHandler=ah,pc.bumpTopObjectsIntoBounds=Kr;var Vp=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new De(0,0),this.originalEventGroup="",this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(V(ye.CONNECTION_PREVIEWER,this.workspace.options))(this.block),we(),this.workspace.setResizesEnabled(!1),Jn(),e=this.shouldHealStack(e),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}shouldHealStack(e){return!!e&&(e.altKey||e.ctrlKey||e.metaKey)}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=De.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,i,n;if(this.startParentConn=(n=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?n:(i=this.block.previousConnection)==null?void 0:i.targetConnection,e){let a;this.startChildConn=(a=this.block.nextConnection)==null?void 0:a.targetConnection}this.block.unplug(e),Mo(this.block)}fireDragStartEvent(){const e=new(We($e.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));N(e)}fireDragEndEvent(){const e=new(We($e.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));N(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(We($e.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),N(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(De.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,De.difference(e,this.startLoc))}updateConnectionPreview(e,t){var i=this.connectionCandidate;const n=this.getConnectionCandidate(e,t);if(n){this.connectionCandidate=t=i&&this.currCandidateIsBetter(i,t,n)?i:n;var{local:a,neighbour:d}=t;t=a.type===Je.OUTPUT_VALUE||a.type===Je.PREVIOUS_STATEMENT;var m;if(i=d.isConnected()&&!((m=d.targetBlock())!=null&&m.isInsertionMarker()),t&&i&&!this.orphanCanConnectAtEnd(e,d.targetBlock(),a.type)){let Re;(Re=this.connectionPreviewer)==null||Re.previewReplacement(a,d,d.targetBlock())}else{var F;(F=this.connectionPreviewer)==null||F.previewConnection(a,d)}}else{let Re;(Re=this.connectionPreviewer)==null||Re.hidePreview(),this.connectionCandidate=null}}orphanCanConnectAtEnd(e,t,i){return!!vt.getConnectionForOrphanedConnection(e,i===Je.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,i){const{local:n,neighbour:a}=e;e=new De(n.x,n.y);const d=new De(a.x,a.y);return t=De.distance(De.sum(e,t),d),i.distance>t-u.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let i=this.getSearchRadius(),n=null;for(const a of e){const{connection:d,radius:m}=a.closest(i,t);d&&(n={local:a,neighbour:d,distance:m},i=m)}return n}getSearchRadius(){return this.connectionCandidate?u.config$$module$build$src$core$config.connectingSnapRadius:u.config$$module$build$src$core$config.snapRadius}getLocalConnections(e){const t=e.getConnections_(!1),i=e.lastConnectionInStack(!0);return i&&i!==e.nextConnection&&t.push(i),t}endDrag(e){if(this.block.isShadow()){let i;(i=this.block.getParent())==null||i.endDrag(e)}else{this.originalEventGroup=u.getGroup$$module$build$src$core$events$utils(),this.fireDragEndEvent(),this.fireMoveEvent(),Be(),Jn();var t;if((t=this.connectionPreviewer)==null||t.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let i;(i=this.workspace.getLayerManager())==null||i.moveOffDragLayer(this.block,vo),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep())}}disposeStep(){const e=u.getGroup$$module$build$src$core$events$utils();u.setGroup$$module$build$src$core$events$utils(this.originalEventGroup),this.block.snapToGrid();let t;(t=this.connectionPreviewer)==null||t.dispose(),this.workspace.setResizesEnabled(!0),u.setGroup$$module$build$src$core$events$utils(e)}applyConnections(e){const{local:t,neighbour:i}=e;t.connect(i);const n=t.isSuperior()?i:t,a=this.block.getRootBlock();to().then(()=>{wo(n.getSourceBlock()),setTimeout(()=>{a.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let i;(i=this.block.getParent())==null||i.revertDrag()}else{var e;(e=this.connectionPreviewer)==null||e.hidePreview(),this.connectionCandidate=null;var t;if((t=this.startChildConn)==null||t.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Je.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Je.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let i;(i=this.workspace.getLayerManager())==null||i.moveOffDragLayer(this.block,vo),Yr(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.block.setDragging(!1),this.dragging=!1}}},zp=class extends Bt{constructor(e,t,i,n){super(t,i,n),this.text=e,this.workspace=t,this.anchor=i,this.ownerRect=n,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize(),Ge(this.svgRoot,"blocklyTextBubble")}getText(){return this.text}setText(e){this.text=e,M(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createTextFragments(t,e),this.workspace.RTL&&this.rightAlignTextFragments(t.getBBox().width,e),t}createParagraph(e){return be(ae.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${Bt.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,t){let i=1;return t.split(`
`).map(n=>{const a=be(ae.TEXT,{y:`${i}em`,x:Bt.BORDER_WIDTH},e);return n=document.createTextNode(n),a.appendChild(n),i+=1,a})}rightAlignTextFragments(e,t){for(const i of t)i.setAttribute("text-anchor","start"),i.setAttribute("x",`${e+Bt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new bt(e.width+Bt.BORDER_WIDTH*2,e.height+Bt.BORDER_WIDTH*2),!0)}},$c=17,Io=class extends rc{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return Io.TYPE}initView(e){this.svgRoot||(super.initView(e),be(ae.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),be(ae.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),be(ae.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Ge(this.svgRoot,"blocklyWarningIcon"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return Io.WEIGHT}getSize(){return new bt($c,$c)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let i;return(i=this.textBubble)==null||i.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return(0,_e.asyncExecutePromiseGeneratorFunction)(function*(){if(t.bubbleIsVisible()!==e){if(yield to(),e)t.textBubble=new zp(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let i;(i=t.textBubble)==null||i.dispose(),t.textBubble=null}N(new(We($e.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getBubble(){return this.textBubble}getAnchorLocation(){const e=$c/2;return De.sum(this.workspaceLocation,new De(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new at(e.y,e.y+e.height,e.x,e.x+e.width)}};Io.TYPE=di.WARNING,Io.WEIGHT=2;var wt=class extends pr{constructor(e,t,i){if(super(e,t,i),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new De(0,0),this.dragStrategy=new Vp(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=be(ae.G,{}),t&&Ge(this.svgGroup,t),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,Nl(e),this.svgGroup.setAttribute("data-id",this.id),e.id=oe(),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),(e=this.getSvgRoot())&&L(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){this.addSelect(),Ue(this)}unselect(){this.removeSelect(),Ue(null)}setParent(e){var t=this.parentBlock_;if(e!==t){we(),super.setParent(e),Be();var i=this.getSvgRoot();if(!this.workspace.isClearing&&i){var n=this.getRelativeToSurfaceXY(),a=u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode(),d,m=this.getSvgRoot().contains((d=a?.getFocusableElement())!=null?d:null);e?(e.getSvgRoot().appendChild(i),m&&a&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(a)):t&&(e=this.workspace.getCanvas().querySelector(".blocklyDragging"),t=e?.parentElement,d=this.workspace.getCanvas(),t===d?d.insertBefore(i,e):(d.appendChild(i),m&&a&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(a)),this.translate(n.x,n.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,i=0,n=this.getSvgRoot();if(n)do{const a=Wo(n);t+=a.x,i+=a.y,n=n.parentNode}while(n&&!e.hasLayer(n));return new De(t,i)}moveBy(e,t,i){if(this.parentBlock_)throw Error("Block has parent");const n=He();let a=null;n&&(a=new(We($e.BLOCK_MOVE))(this),i&&a.setReason(i)),e=new De(e,t),t=this.getRelativeToSurfaceXY(),e=De.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),n&&a&&(a.recordNew(),N(a)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new De(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const i=this.getRelativeToSurfaceXY();this.moveBy(e.x-i.x,e.y-i.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let i,n;return this.RTL?(i=t.x-e.width,n=t.x):(i=t.x,n=t.x+e.width),new at(t.y,t.y+e.height,i,n)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}childHasWarning(){const e=this.getChildren(!1);for(const t of e)if(t.getIcon(Io.TYPE)||t.childHasWarning())return!0;return!1}updateCollapsed(){var e=this.isCollapsed();const t=Eo,i=da;for(let a=0,d;d=this.inputList[a];a++)d.name!==t&&d.setVisible(!e);for(var n of this.getIcons())n.updateCollapsed();e?(Ge(this.svgGroup,"blocklyCollapsed"),this.childHasWarning()&&this.setWarningText(u.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,wt.COLLAPSED_WARNING_ID),e=this.toString(cc),(n=this.getField(i))?n.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new On(e),i)):(this.updateDisabled(),this.removeInput(t),me(this.svgGroup,"blocklyCollapsed"),this.setWarningText(null,wt.COLLAPSED_WARNING_ID))}onMouseDown(e){if(!this.workspace.isReadOnly()){var t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(e){return this.workspace.isReadOnly()||!this.contextMenu?null:(e=gt.registry.getContextMenuOptions({block:this,focusedNode:this},e),this.customContextMenu&&this.customContextMenu(e),e)}calculateContextMenuLocation(e){if(e instanceof PointerEvent)return new De(e.clientX,e.clientY);e=Qs(this.workspace,this.getRelativeToSurfaceXY());let t,i;const n=(t=this.inputList.filter(a=>a.isVisible()).flatMap(a=>a.fieldRow).find(a=>a.isVisible()))==null||(i=t.getSvgRoot())==null?void 0:i.getBoundingClientRect();return new De(this.RTL?e.x-5:e.x+5,(n&&n.height?n.y+n.height:e.y+this.height)+5)}showContextMenu(e){const t=this.generateContextMenu(e),i=this.calculateContextMenuLocation(e);t&&t.length&&(ro(e,t,this.RTL,this.workspace,i),ru(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(De.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const i of t.fieldRow)i.onLocationChange(e)}addClass(e){Ge(this.svgGroup,e)}removeClass(e){me(this.svgGroup,e)}setDragging(e){(this.dragging=e)?(this.translation="",ua.push(...this.getConnections_(!0)),this.addClass("blocklyDragging")):(ua.length=0,this.removeClass("blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e?me(this.svgGroup,"blocklyNotEditable"):Ge(this.svgGroup,"blocklyNotEditable"),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){this.disposing=!0,Ur(),Ji();const i=u.getFocusManager$$module$build$src$core$focus_manager();var n,a;if(this.getSvgRoot().contains((a=(n=i.getFocusedNode())==null?void 0:n.getFocusableElement())!=null?a:null)){if(n=this.getParent(),!n){let d;if(a=(d=this.outputConnection)!=null?d:this.previousConnection){let m;n=(m=a.closest(0,new De(0,0)).connection)==null?void 0:m.getSourceBlock()}}n?i.focusNode(n):setTimeout(()=>i.focusTree(this.workspace),0)}t&&(this.unplug(e),Ul(this)),super.dispose(!!e),M(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===this&&this.workspace.cancelCurrentGesture(),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(u.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),u.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Ia.TYPE,blockState:Vs(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:Xi(this,!0)}}applyColour(){var e,t;for((t=(e=this.pathObject).applyColour)==null||t.call(e,this),e=this.getIcons(),t=0;t<e.length;t++)e[t].applyColour();for(const i of this.getFields())i.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var i of this.warningTextDb.values())clearTimeout(i);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),i=this.getIcon(Io.TYPE),e){let n=this.getSurroundParent(),a=null;for(;n;)n.isCollapsed()&&(a=n),n=n.getSurroundParent();a&&a.setWarningText(u.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,wt.COLLAPSED_WARNING_ID),i?i.addMessage(e,t):this.addIcon(new Io(this).addMessage(e,t))}else i&&(t?(i.addMessage("",t),i.getText()||this.removeIcon(Io.TYPE)):this.removeIcon(Io.TYPE))}setMutator(e){this.removeIcon(u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof u.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(u.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setDisabledReason(e,t){const i=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===i||this.getInheritedDisabled()||this.updateDisabled()}setDeletable(e){super.setDeletable(e),e?me(this.svgGroup,"blocklyNotDeletable"):Ge(this.svgGroup,"blocklyNotDeletable")}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);let t,i;(i=(t=this.pathObject).setStyle)==null||i.call(t,e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_&&me(this.svgGroup,this.styleName_),t){this.hat=t.hat;let i,n;(n=(i=this.pathObject).setStyle)==null||n.call(i,t),this.colour_=t.colourPrimary,this.style=t,this.applyColour(),Ge(this.svgGroup,e),this.styleName_=e}else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){const t=u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();let i=this;if(!i.isDeadOrDying()){do{const n=i.getSvgRoot(),a=n.parentNode,d=a.childNodes;if(d[d.length-1]!==n&&a.appendChild(n),e)break;i=i.getParent()}while(i);t&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)}}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var i=this.inputList[t].connection;i&&(i.setTracking(e),(i=i.targetBlock())&&i.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let i=0,n;n=this.inputList[i];i++)n.connection&&t.push(n.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Ti(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let i;(i=t.targetBlock())==null||i.bumpNeighbours()}for(const i of t.neighbours(u.config$$module$build$src$core$config.snapRadius))i.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&i.isConnected()||(t.isSuperior()?i.bumpAwayFrom(t,!1):t.bumpAwayFrom(i,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,i){if(e.type===Je.NEXT_STATEMENT||e.type===Je.INPUT_VALUE){let n=t.x;t=t.y,n+=i.x-e.getOffsetInBlock().x,t+=i.y-e.getOffsetInBlock().y,this.moveBy(n,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return Ha(this)}render(){this.queueRender(),Co()}renderEfficiently(){we(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),Be()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}getHeightWidth(){let e=this.height,t=this.width;var i=this.getNextBlock();if(i){i=i.getHeightWidth();const n=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=i.height-n,t=Math.max(t,i.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}getDragStrategy(){return this.dragStrategy}setDragStrategy(e){this.dragStrategy=e}isCopyable(){return this.isOwnDeletable()&&this.isOwnMovable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},Vs(this)),t=new Set(["id","height","width","pinned","enabled"]),i=function(n){for(const a in n)t.has(a)?delete n[a]:typeof n[a]=="object"&&i(n[a])};return i(e),[e]}jsonInit(e){super.jsonInit(e),e.classes&&this.addClass(Array.isArray(e.classes)?e.classes.join(" "):e.classes)}getFocusableElement(){return this.pathObject.svgPath}getFocusableTree(){return this.workspace}onNodeFocus(){this.select()}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};wt.INLINE=-1,wt.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var ig=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},ad=class extends ig{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof wt?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(ws(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},$r=class{constructor(e,t){this.element=e,this.type=t}getElement(){return this.element}getType(){return this.type}},gc=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,i=0;return e&&(t=e.getWidth(),i=e.getHeight()),new bt(t,i)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const i=this.getToolboxMetrics(),n=this.getFlyoutMetrics(),a=!!this.workspace_.getToolbox();var d;const m=!((d=this.workspace_.getFlyout())!=null&&d.autoClose);d=a?i.position:n.position;const F=d===dt.TOP;return d===dt.LEFT&&(a&&(e+=i.width),m&&(e+=n.width)),F&&(a&&(t+=i.height),m&&(t+=n.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),i=this.getToolboxMetrics(),n=this.getFlyoutMetrics(),a=!!this.workspace_.getToolbox();var d;const m=!((d=this.workspace_.getFlyout())!=null&&d.autoClose);d=a?i.position:n.position;const F=d===dt.LEFT||d===dt.RIGHT;return(d===dt.TOP||d===dt.BOTTOM)&&(a&&(t.height-=i.height),m&&(t.height-=n.height)),F&&(a&&(t.width-=i.width),m&&(t.width-=n.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),i=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const n={};return i||(n.top=e.top,n.bottom=e.top+e.height),t||(n.left=e.left,n.right=e.left+e.width),n}getPaddedContent_(e,t){const i=t.top+t.height,n=t.left+t.width,a=e.width;e=e.height;const d=a/2,m=e/2;return{top:Math.min(t.top-m,i-e),bottom:Math.max(i+m,t.top+e),left:Math.min(t.left-d,n-a),right:Math.max(n+d,t.left+a)}}getScrollMetrics(e,t,i){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var n=i||this.getContentMetrics();i=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,n),n=i.top!==void 0?i.top:t.top;const a=i.left!==void 0?i.left:t.left;return{top:n/e,left:a/e,width:((i.right!==void 0?i.right:t.right)-a)/e,height:((i.bottom!==void 0?i.bottom:t.bottom)-n)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),i=this.getSvgMetrics(),n=this.getAbsoluteMetrics(),a=this.getViewMetrics(),d=this.getContentMetrics(),m=this.getScrollMetrics(!1,a,d);return{contentHeight:d.height,contentWidth:d.width,contentTop:d.top,contentLeft:d.left,scrollHeight:m.height,scrollWidth:m.width,scrollTop:m.top,scrollLeft:m.left,viewHeight:a.height,viewWidth:a.width,viewTop:a.top,viewLeft:a.left,absoluteTop:n.top,absoluteLeft:n.left,svgHeight:i.height,svgWidth:i.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};p(ye.METRICS_MANAGER,Zt,gc);var fc=class extends gc{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,i){return t=i||this.getContentMetrics(),i=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*i)/e,width:(t.width+t.left+i)/e,top:0,left:0}}},zi=class{constructor(e,t,i,n){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=n,this.height=this.width=0,this.cursorSvg=this.svgText=null,this.text=i.text,this.position=new De(0,0),this.callbackKey=i.callbackKey||i.callbackkey,this.cssClass=i["web-class"]||null,this.info=i,e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton",this.cssClass&&(e+=" "+this.cssClass),this.id=oe(),this.svgGroup=be(ae.G,{id:this.id,class:e},this.workspace.getCanvas());let a;this.isFlyoutLabel||(a=be(ae.RECT,{class:"blocklyFlyoutButtonShadow",rx:zi.BORDER_RADIUS,ry:zi.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=be(ae.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:zi.BORDER_RADIUS,ry:zi.BORDER_RADIUS},this.svgGroup),t=be(ae.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup),i=Ot(this.text),this.workspace.RTL&&(i+=""),t.textContent=i,this.isFlyoutLabel&&(this.svgText=t,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill")),n=Vt(t,"fontSize");const d=Vt(t,"fontWeight"),m=Vt(t,"fontFamily");if(this.width=Ye(t,n,d,m),i=k(i,n,d,m),this.height=this.height||i.height,!this.isFlyoutLabel){this.width+=2*zi.TEXT_MARGIN_X,this.height+=2*zi.TEXT_MARGIN_Y;let F;(F=a)==null||F.setAttribute("width",String(this.width));let Re;(Re=a)==null||Re.setAttribute("height",String(this.height))}e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),t.setAttribute("x",String(this.width/2)),t.setAttribute("y",String(this.height/2-i.height/2+i.baseline)),this.updateTransform(),this.onMouseDownWrapper=L(this.svgGroup,"pointerdown",this,this.onMouseDown),this.onMouseUpWrapper=L(this.svgGroup,"pointerup",this,this.onMouseUp)}createDom(){return this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}moveBy(e,t,i){this.moveTo(this.position.x+e,this.position.y+t)}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getBoundingRectangle(){return new at(this.position.y,this.position.y+this.height,this.position.x,this.position.x+this.width)}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){x(this.onMouseDownWrapper),x(this.onMouseUpWrapper),this.svgGroup&&M(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}onMouseDown(e){const t=this.targetWorkspace.getGesture(e),i=this.targetWorkspace.getFlyout();t&&i&&t.handleFlyoutStart(e,i)}getSvgRoot(){return this.svgGroup}getFocusableElement(){return this.svgGroup}getFocusableTree(){return this.workspace}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}};zi.TEXT_MARGIN_X=5,zi.TEXT_MARGIN_Y=2,zi.BORDER_RADIUS=4,Ke(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Wp=class{getFirstChild(e){return null}getParent(e){return e.getWorkspace()}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof zi}},ud=class{constructor(e,t){this.policy=e,this.flyout=t}getFirstChild(e){return null}getParent(e){return this.policy.getParent(e)}getNextSibling(e){const t=this.flyout.getContents();if(!t)return null;let i=t.findIndex(n=>n.getElement()===e);return i===-1?null:(i++,i>=t.length&&(i=0),t[i].getElement())}getPreviousSibling(e){const t=this.flyout.getContents();if(!t)return null;let i=t.findIndex(n=>n.getElement()===e);return i===-1?null:(i--,i<0&&(i=t.length-1),t[i].getElement())}isNavigable(e){return this.policy.isNavigable(e)}isApplicable(e){return this.policy.isApplicable(e)}},Oo=class{constructor(e,t){this.gap=e,this.axis=t,this.y=this.x=0}getBoundingRectangle(){switch(this.axis){case"x":return new at(this.y,this.y,this.x,this.x+this.gap);case"y":return new at(this.y,this.y+this.gap,this.x,this.x)}}moveBy(e,t,i){this.x+=e,this.y+=t}isNavigable(){return!1}getFocusableElement(){throw Error("Cannot be focused")}getFocusableTree(){throw Error("Cannot be focused")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}},An=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return!1}isApplicable(e){return e instanceof Oo}},Nn=class{getFirstChild(e){return pu(e,!0)[0]}getParent(e){var t;if((t=e.previousConnection)!=null&&t.targetBlock()){if(t=e.getSurroundParent())return t}else{let i;if((i=e.outputConnection)!=null&&i.targetBlock())return e.outputConnection.targetBlock()}return e.workspace}getNextSibling(e){let t;if((t=e.nextConnection)!=null&&t.targetBlock()){let n;return(n=e.nextConnection)==null?void 0:n.targetBlock()}let i;return(i=e.outputConnection)!=null&&i.targetBlock()?Hi(e,1):e.getSurroundParent()?Hi(e.getTopStackBlock(),1):this.getParent(e)instanceof ys?qn(e,1):null}getPreviousSibling(e){let t;if((t=e.previousConnection)!=null&&t.targetBlock()){let n;return(n=e.previousConnection)==null?void 0:n.targetBlock()}let i;return(i=e.outputConnection)!=null&&i.targetBlock()?Hi(e,-1):this.getParent(e)instanceof ys?qn(e,-1):null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof wt}},_c=class{getFirstChild(e){return null}getParent(e){return e.getParentComment()}getNextSibling(e){const t=e.getParentComment().view.getCommentBarButtons();return e=t.indexOf(e),e>=0&&e+1<t.length?t[e+1]:null}getPreviousSibling(e){const t=e.getParentComment().view.getCommentBarButtons();return e=t.indexOf(e),e>0?t[e-1]:null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof id}},Oa=class{getFirstChild(e){return e.getParentInput()?e.targetConnection:null}getParent(e){return e.getSourceBlock()}getNextSibling(e){if(e.getParentInput())return Hi(e,1);if(e.type===Je.NEXT_STATEMENT){const i=e.targetConnection;var t=e.getSourceBlock();if(!i&&t.getRootBlock().lastConnectionInStack(!1)===e){e=t.workspace.getTopBlocks(!0),t=e.indexOf(t.getRootBlock())+1,t>=e.length&&(t=0),t=e[t];let n;return(n=this.getParentConnection(t))!=null?n:t}return i}return e.getSourceBlock()}getPreviousSibling(e){if(e.getParentInput())return Hi(e,-1);if(e.type===Je.PREVIOUS_STATEMENT||e.type===Je.OUTPUT_VALUE){const i=e.targetConnection&&!e.targetConnection.getParentInput()?e.targetConnection:null;var t=e.getSourceBlock();if(!i&&this.getParentConnection(t.getRootBlock())===e){e=t.workspace.getTopBlocks(!0),t=e.indexOf(t.getRootBlock())-1,t<0&&(t=e.length-1),t=e[t];let n;return(n=t.lastConnectionInStack(!1))!=null?n:t}return i}return e.type===Je.NEXT_STATEMENT?e.getSourceBlock():null}getParentConnection(e){let t;return!e.outputConnection||(t=e.previousConnection)!=null&&t.isConnected()?e.previousConnection:e.outputConnection}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Ti}},Ln=class{getFirstChild(e){return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Hi(e,1)}getPreviousSibling(e){return Hi(e,-1)}isNavigable(e){let t;return e.canBeFocused()&&e.isVisible()&&(e.isClickable()||e.isCurrentlyEditable())&&!((t=e.getSourceBlock())!=null&&t.isSimpleReporter()&&e.isFullBlockField())&&e.getParentInput().isVisible()}isApplicable(e){return e instanceof kt}},Ig=class{getFirstChild(e){if(e instanceof u.MutatorIcon$$module$build$src$core$icons$mutator_icon&&e.bubbleIsVisible()&&u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let t,i;return(i=(t=e.getBubble())==null?void 0:t.getWorkspace())!=null?i:null}return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Hi(e,1)}getPreviousSibling(e){return Hi(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof rc}},sg=class{getFirstChild(e){return e.view.getCommentBarButtons()[0]}getParent(e){return e.workspace}getNextSibling(e){return qn(e,1)}getPreviousSibling(e){return qn(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Go}},Ra=class{getFirstChild(e){return e=e.getTopBlocks(!0),e.length?e[0]:null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()&&!e.isMutator}isApplicable(e){return e instanceof ys}},Xp=class{constructor(){this.rules=[new Nn,new Ln,new Oa,new Ra,new Ig,new sg,new _c]}addNavigationPolicy(e){this.rules.push(e)}get(e){return this.rules.find(t=>t.isApplicable(e))}getFirstChild(e){let t;const i=(t=this.get(e))==null?void 0:t.getFirstChild(e);if(!i)return null;let n;return(n=this.get(i))!=null&&n.isNavigable(i)?i:this.getFirstChild(i)||this.getNextSibling(i)}getParent(e){let t;const i=(t=this.get(e))==null?void 0:t.getParent(e);if(!i)return null;let n;return(n=this.get(i))!=null&&n.isNavigable(i)?i:this.getParent(i)}getNextSibling(e){let t;const i=(t=this.get(e))==null?void 0:t.getNextSibling(e);if(!i)return null;let n;return(n=this.get(i))!=null&&n.isNavigable(i)?i:this.getNextSibling(i)}getPreviousSibling(e){let t;const i=(t=this.get(e))==null?void 0:t.getPreviousSibling(e);if(!i)return null;let n;return(n=this.get(i))!=null&&n.isNavigable(i)?i:this.getPreviousSibling(i)}},Yp=class extends Xp{constructor(e){super(),this.rules.push(new Wp,new An),this.rules=this.rules.map(t=>new ud(t,e))}},Ca=class{constructor(e,t,i,n,a){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,i=i===void 0?!0:i;const d=t&&i;t&&(this.hScroll=new ui(e,!0,d,n,a)),i&&(this.vScroll=new ui(e,!1,d,n,a)),d&&(this.corner_=be(ae.RECT,{height:ui.scrollbarThickness,width:ui.scrollbarThickness,class:"blocklyScrollbarBackground"}),B(this.corner_,e.getBubbleCanvas()))}dispose(){M(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,i=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(i=!0)):i=t=!0,t||i){try{u.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&i&&this.vScroll.resize(e)}finally{u.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let n;(n=this.corner_)==null||n.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let n;(n=this.corner_)==null||n.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,i){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(i||i===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},fl="sep",og=class{load(e,t){return e=new Oo(0,t.horizontalLayout?"x":"y"),new $r(e,fl)}gapForItem(e,t){let i;return(i=parseInt(String(e.gap)))!=null?i:t}disposeItem(e){}getType(){return fl}};p(ye.FLYOUT_INFLATER,fl,og);var _l=class extends ad{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.reflowWrapper=null,this.contents=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,this.inflaters=new Map,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new ys(e),this.workspace_.setMetricsManager(new fc(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.workspace_.setNavigator(new Yp(this)),this.id=Se(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=this.MARGIN*3,this.GAP_Y=this.MARGIN*3}createDom(e){return this.svgGroup_=be(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=be(ae.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Ca(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(L(this.svgGroup_,"wheel",this,this.wheel_)),this.boundEvents.push(L(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:Wt.ComponentWeight.FLYOUT_WEIGHT,capabilities:[Wt.Capability.AUTOHIDEABLE,Wt.Capability.DELETE_AREA,Wt.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)x(e);this.boundEvents.length=0,this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&M(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,i,n){let a;(a=this.svgGroup_)==null||a.setAttribute("width",`${e}`);let d;(d=this.svgGroup_)==null||d.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&se(this.svgGroup_,"translate("+i+"px,"+n+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(i,n),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){this.isVisible()&&(this.setVisible(!1),this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null))}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=Ma(e),e=this.createFlyoutInfo(e),Co(this.workspace_),this.setContents(e),this.layout_(e),this.horizontalLayout?this.height_=0:this.width_=0,this.reflow(),this.workspace_.setResizesEnabled(!0),this.reflowWrapper=t=>{t.type!==$e.BLOCK_CHANGE&&t.type!==$e.BLOCK_FIELD_INTERMEDIATE_CHANGE||this.reflow()},this.workspace_.addChangeListener(this.reflowWrapper)}createFlyoutInfo(e){const t=[],i=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const n of e)"custom"in n&&(e=this.getDynamicCategoryContents(n.custom),e=Ma(e),t.push(...this.createFlyoutInfo(e))),e=n.kind.toLowerCase(),(e=this.getInflaterForType(e))&&(t.push(e.load(n,this)),(e=e.gapForItem(n,i))&&t.push(new $r(new Oo(e,this.horizontalLayout?"x":"y"),fl)));return this.normalizeSeparators(t)}normalizeSeparators(e){for(let t=e.length-1;t>0;t--){const i=e[t].getType().toLowerCase(),n=e[t-1].getType().toLowerCase();i===fl&&n===fl&&e.splice(t-1,1)}return e}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}clearOldBlocks(){this.getContents().forEach(t=>{let i;(i=this.getInflaterForType(t.getType()))==null||i.disposeItem(t)});let e;(e=this.workspace_.getPotentialVariableMap())==null||e.clear()}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()&&!this.getTargetWorkspace().isReadOnly()}createBlock(e){let t=null;u.disable$$module$build$src$core$events$utils();var i=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{u.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Jo(this.targetWorkspace,i),He()){for(u.setGroup$$module$build$src$core$events$utils(!0),i=0;i<e.length;i++){const n=e[i];N(new(We($e.VAR_CREATE))(n))}N(new(We($e.BLOCK_CREATE))(t))}return this.autoClose&&this.hide(),t}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const i=this.serializeBlock(e);return t.setResizesEnabled(!1),t=Zo(i,t),this.positionNewBlock(e,t),t}serializeBlock(e){return Vs(e)}positionNewBlock(e,t){const i=this.targetWorkspace;var n=i.getOriginOffsetInPixels(),a=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),a=De.sum(a,e),n=De.difference(a,n),n.scale(1/i.scale),t.moveTo(new De(n.x,n.y))}getInflaterForType(e){if(this.inflaters.has(e)){var t;return(t=this.inflaters.get(e))!=null?t:null}return(t=E(ye.FLYOUT_INFLATER,e))?(t=new t,this.inflaters.set(e,t),t):null}getFocusableElement(){throw Error("Flyouts are not directly focusable.")}getFocusableTree(){throw Error("Flyouts are not directly focusable.")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}getRootFocusableNode(){throw Error("Flyouts are not directly focusable.")}getRestoredFocusableNode(e){throw Error("Flyouts are not directly focusable.")}getNestedTrees(){throw Error("Flyouts are not directly focusable.")}lookUpFocusableNode(e){throw Error("Flyouts are not directly focusable.")}onTreeFocus(e,t){}onTreeBlur(e){throw Error("Flyouts are not directly focusable.")}},mc=class{constructor(){this.isActive=!1,this.activeClassName="blocklyKeyboardNavigation"}setIsActive(e=!0){this.isActive=e,this.updateActiveVisualization()}getIsActive(){return this.isActive}updateActiveVisualization(){this.isActive?document.body.classList.add(this.activeClassName):document.body.classList.remove(this.activeClassName)}},Tc=new mc,Aa=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new De(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){}endDrag(e){this.drag(e)}drag(e){if(e=De.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},jp=5,cd=6,Ec=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new De(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new De(0,0)}dispose(){U(),en(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)x(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new De(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),A()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=De.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=De.magnitude(this.currentDragDeltaXY)>(this.flyout?u.config$$module$build$src$core$config.flyoutDragRadius:u.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),u.getGroup$$module$build$src$core$events$utils()||u.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new Aa(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=ee();t&&$t(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(V(ye.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,D(e)?this.cancel():(this.gestureHasStarted=!0,Jn(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=wr(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,jc(),Q(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&j(e,this),this.mouseDownXY=new De(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(L(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(L(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(L(document,"pointerup",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&A())}handleMove(e){this.isDragging()&&O(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),A())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!O(e))return;if(this.updateFromEvent(e),A(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?(Tc.setIsActive(!1),this.dragger.onDragEnd(e,this.currentDragDeltaXY)):this.workspaceDragger?(Tc.setIsActive(!1),this.workspaceDragger.endDrag(this.currentDragDeltaXY)):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=P(e);this.cachedPoints.set(t,this.getTouchPoint(e));var i=Array.from(this.cachedPoints.keys());i.length===2&&(t=this.cachedPoints.get(i[0]),i=this.cachedPoints.get(i[1]),this.startDistance=De.distance(t,i),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=P(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),i=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),i=De.distance(i,t)/this.startDistance,this.previousScale>0&&this.previousScale<1/0){if(t=i-this.previousScale,t=t>0?t*jp:t*cd,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const n=this.startWorkspace_,a=te(e,n.getParentSvg(),n.getInverseScreenCTM());n.zoom(a.x,a.y,t)}this.previousScale=i,e.preventDefault()}handleTouchEnd(e){e=P(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),this.cachedPoints.size<2&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new De(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(A(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startWorkspace_),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),Tc.setIsActive(!1),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment?this.startBlock&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startBlock):u.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),this.doStart(e)}fireWorkspaceClick(e){N(new(We($e.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.bringBlockToFront(),this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent)}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.flyout.isBlockCreatable(this.targetBlock)){u.getGroup$$module$build$src$core$events$utils()||u.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours(),u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(We($e.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),N(e)}this.bringBlockToFront(),u.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){this.fireWorkspaceClick(this.startWorkspace_||this.creatorWorkspace)}bringBlockToFront(){this.targetBlock&&!this.flyout&&(u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),this.targetBlock.bringToFront())}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):(this.targetBlock=e,u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e))}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=pi();for(let t=0,i;i=e[t];t++)if(i.currentGesture_)return!0;return!1}},Kp=class{constructor(e,t){this.pattern=e,this.scale=1;let i;this.spacing=(i=t.spacing)!=null?i:0;let n;this.length=(n=t.length)!=null?n:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let a;this.snapToGrid=(a=t.snap)!=null?a:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let i=t-this.length/2,n=t+this.length/2;t*=e,i*=e,n*=e,this.setLineAttributes(this.line1,e,i,n,t,t),this.setLineAttributes(this.line2,e,t,t,i,n)}setLineAttributes(e,t,i,n,a,d){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${i}`),e.setAttribute("y1",`${a}`),e.setAttribute("x2",`${n}`),e.setAttribute("y2",`${d}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const i=t/2,n=Math.round(Math.round((e.x-i)/t)*t+i);return t=Math.round(Math.round((e.y-i)/t)*t+i),n===e.x&&t===e.y?e:new De(n,t)}static createDom(e,t,i,n){e=be(ae.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},i);let a,d;if(((a=t.length)!=null?a:1)>0&&((d=t.spacing)!=null?d:0)>0){be(ae.LINE,{stroke:t.colour},e);let m;(m=t.length)!=null&&m&&be(ae.LINE,{stroke:t.colour},e)}else be(ae.LINE,{},e);return n&&n.style.setProperty("--blocklyGridPattern",`url(#${e.id})`),e}},hd=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(vo),Ge(e,"blocklyBlockCanvas"),e=this.createLayer(ic),Ge(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=be(ae.SVG,{class:"blocklyBlockDragSurface",xmlns:tl,"xmlns:html":ho,"xmlns:xlink":Oi,version:"1.1"});return e.append(t),be(ae.G,{},t)}createAnimationLayer(e){const t=be(ae.SVG,{class:"blocklyAnimationLayer",xmlns:tl,"xmlns:html":ho,"xmlns:xlink":Oi,version:"1.1"});return e.append(t),be(ae.G,{},t)}appendToAnimationLayer(e){let t;const i=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(i){let a;(a=this.animationLayer)==null||a.setAttribute("transform",i)}let n;(n=this.animationLayer)==null||n.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let i;(i=this.dragLayer)==null||i.setAttribute("transform",e);for(const[,n]of this.layers)n.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot()),e.canBeFocused()&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}moveOffDragLayer(e,t){this.append(e,t),e.canBeFocused()&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}append(e,t){this.layers.has(t)||this.createLayer(t),e=e.getSvgRoot();let i;if(((i=this.layers.get(t))==null?void 0:i.lastChild)!==e){let n;(n=this.layers.get(t))==null||n.appendChild(e)}}createLayer(e){const t=this.workspace.getSvgGroup(),i=be(ae.G,{});let n=!1;const a=[...this.layers].sort((d,m)=>d[0]-m[0]);for(const[d,m]of a)if(e<d){t.insertBefore(i,m),n=!0;break}return n||t.appendChild(i),this.layers.set(e,i),i}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(vo)}getBubbleLayer(){return this.layers.get(ic)}},s=class{constructor(){this.curNode=this.colour=null,this.type="marker"}getCurNode(){return this.curNode}setCurNode(e){this.curNode=e}dispose(){this.curNode=null}getSourceBlockFromNode(e){return e instanceof wt?e:e instanceof kt||e instanceof Ti?e.getSourceBlock():null}getSourceBlock(){return this.getSourceBlockFromNode(this.getCurNode())}},o=class extends s{constructor(e){super(),this.workspace=e,this.type="cursor",this.potentialNodes=null}next(){var e=this.getCurNode();return e?((e=this.getNextNode(e,t=>{let i;return t instanceof wt&&!((i=t.outputConnection)!=null&&i.targetBlock())||t instanceof Go},!0))&&this.setCurNode(e),e):null}in(){var e=this.getCurNode();return e?((e=this.getNextNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,t=>{let i;return t instanceof wt&&!((i=t.outputConnection)!=null&&i.targetBlock())||t instanceof Go},!0))&&this.setCurNode(e),e):null}out(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}atEndOfLine(){var e=this.getCurNode();if(!e)return!1;const t=this.getNextNode(e,()=>!0,!0);return e=this.getNextNode(e,i=>{let n;return i instanceof wt&&!((n=i.outputConnection)!=null&&n.targetBlock())},!0),t===e}getNextNodeImpl(e,t,i=new Set){if(!e||i.has(e))return null;let n=this.workspace.getNavigator().getFirstChild(e)||this.workspace.getNavigator().getNextSibling(e);for(var a=e;a&&!n&&(a=this.workspace.getNavigator().getParent(a),!!a);)n=this.workspace.getNavigator().getNextSibling(a);return t(n)?n:n?(i.add(e),this.getNextNodeImpl(n,t,i)):null}getNextNode(e,t,i){return!e||!i&&this.getLastNode()===e?null:this.getNextNodeImpl(e,t)}getPreviousNodeImpl(e,t,i=new Set){if(!e||i.has(e))return null;const n=this.getRightMostChild(this.workspace.getNavigator().getPreviousSibling(e),e)||this.workspace.getNavigator().getParent(e);return t(n)?n:n?(i.add(e),this.getPreviousNodeImpl(n,t,i)):null}getPreviousNode(e,t,i){return!e||!i&&this.getFirstNode()===e?null:this.getPreviousNodeImpl(e,t)}getRightMostChild(e,t){if(!e)return e;let i=this.workspace.getNavigator().getFirstChild(e);if(!i||i===t)return e;for(e=i;e&&e!==t;e=this.workspace.getNavigator().getNextSibling(i))i=e;return this.getRightMostChild(i,t)}preDelete(e){var t=this.getCurNode();t=t?[t]:[];var i;let n,a;const d=(a=(i=e.previousConnection)==null?void 0:i.targetConnection)!=null?a:(n=e.outputConnection)==null?void 0:n.targetConnection;d&&t.push(d),(i=e.getNextBlock())&&t.push(i),(e=e.getParent())&&t.push(e),t.push(this.workspace),this.potentialNodes=t}postDelete(){const e=this.potentialNodes;if(this.potentialNodes=null,!e)throw Error("must call preDelete first");for(const t of e){let i;if((i=this.getSourceBlockFromNode(t))==null||!i.disposed){this.setCurNode(t);return}}throw Error("no valid nodes in this.potentialNodes")}getCurNode(){return u.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()}setCurNode(e){u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e),e instanceof wt?e.workspace.scrollBoundsIntoView(e.getBoundingRectangleWithoutChildren()):e instanceof kt?(e=e.getSourceBlock(),e.workspace.scrollBoundsIntoView(e.getBoundingRectangleWithoutChildren())):e instanceof Go&&e.workspace.scrollBoundsIntoView(e.getBoundingRectangle())}getFirstNode(){return this.workspace.getNavigator().getFirstChild(this.workspace)}getLastNode(){const e=this.getFirstNode();return this.getPreviousNode(e,()=>!0,!0)}};p(ye.CURSOR,Zt,o);var r=class{constructor(e){this.workspace=e,this.markers=new Map,this.cursor=new o(this.workspace)}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor=e}dispose(){const e=Object.keys(this.markers);for(let t=0,i;i=e[t];t++)this.unregisterMarker(i);this.markers.clear(),this.cursor.dispose()}};r.LOCAL_MARKER="local_marker_1";var l=class extends Bt{constructor(e,t,i){super(e,t,i,l.createTextArea()),this.workspace=e,this.anchor=t,this.ownerRect=i,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.locationChangeListeners=[],this.text="",this.DEFAULT_SIZE=new bt(160+Bt.DOUBLE_BORDER,80+Bt.DOUBLE_BORDER),this.MIN_SIZE=new bt(45+Bt.DOUBLE_BORDER,20+Bt.DOUBLE_BORDER),this.editable=!0,Ge(this.svgRoot,"blocklyTextInputBubble"),this.textArea=this.getFocusableElement(),this.inputRoot=this.createEditor(this.contentContainer,this.textArea),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(e){this.text=e,this.textArea.value=e,this.onTextChange()}setEditable(e){(this.editable=e)?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","")}isEditable(){return this.editable}addTextChangeListener(e){this.textChangeListeners.push(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}addLocationChangeListener(e){this.locationChangeListeners.push(e)}static createTextArea(){const e=document.createElementNS(ho,"textarea");return e.className="blocklyTextarea blocklyText",e}createEditor(e,t){e=be(ae.FOREIGNOBJECT,{x:Bt.BORDER_WIDTH,y:Bt.BORDER_WIDTH},e);const i=document.createElementNS(ho,"body");return i.setAttribute("xmlns",ho),i.className="blocklyMinimalBody",t.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),i.appendChild(t),e.appendChild(i),this.bindTextAreaEvents(t),e}bindTextAreaEvents(e){L(e,"wheel",this,t=>{t.stopPropagation()}),L(e,"pointerdown",this,t=>{t.stopPropagation(),U()}),L(e,"change",this,this.onTextChange)}createResizeHandle(e,t){return e=be(ae.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),L(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const i=e.width-Bt.DOUBLE_BORDER,n=e.height-Bt.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${i}`),this.inputRoot.setAttribute("height",`${n}`),this.resizeGroup.setAttribute("y",`${n}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-Bt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${i}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}moveDuringDrag(e){super.moveDuringDrag(e),this.onLocationChange()}setPositionRelativeToAnchor(e,t){super.setPositionRelativeToAnchor(e,t),this.onLocationChange()}positionByRect(e=new at(0,0,0,0)){super.positionByRect(e),this.onLocationChange()}onResizePointerDown(e){this.bringToFront(),Q(e)||(Ws(this.workspace,e,new De(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=L(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=L(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){U(),this.resizePointerUpListener&&(x(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(x(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=Lo(this.workspace,e),this.setSize(new bt(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onTextChange(){this.text=this.textArea.value;for(const e of this.textChangeListeners)e()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}onLocationChange(){for(const e of this.locationChangeListeners)e()}};Ke(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var c={};c.register=gi,c.unregister=$u;var h=17,f=160,v=80,X=class extends rc{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new bt(f,v),this.bubbleVisiblity=!1}getType(){return X.TYPE}initView(e){this.svgRoot||(super.initView(e),be(ae.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),be(ae.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),be(ae.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Ge(this.svgRoot,"blocklyCommentIcon"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return X.WEIGHT}getSize(){return new bt(h,h)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return(0,_e.asyncExecutePromiseGeneratorFunction)(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){const t=this.workspaceLocation;super.onLocationChange(e),this.bubbleLocation&&(e=De.difference(this.workspaceLocation,t),this.bubbleLocation=De.sum(this.bubbleLocation,e)),e=this.getAnchorLocation();let i;(i=this.textInputBubble)==null||i.setAnchorLocation(e)}setText(e){const t=this.text;N(new(We($e.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let i;(i=this.textInputBubble)==null||i.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}setBubbleLocation(e){this.bubbleLocation=e;let t;(t=this.textInputBubble)==null||t.moveDuringDrag(e)}getBubbleLocation(){return this.bubbleLocation}saveState(){if(this.text){const e={text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width},t=this.getBubbleLocation();return t&&(e.x=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(t.x+this.bubbleSize.width):t.x,e.y=t.y),e}return null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let i,n;this.bubbleSize=new bt((i=e.width)!=null?i:f,(n=e.height)!=null?n:v);let a;this.bubbleVisiblity=(a=e.pinned)!=null?a:!1,this.setBubbleVisible(this.bubbleVisiblity);let d=e.x;const m=e.y;to().then(()=>{d&&m&&(d=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(d+this.bubbleSize.width):d,this.setBubbleLocation(new De(d,m)))})}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(N(new(We($e.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}onBubbleLocationChange(){this.textInputBubble&&(this.bubbleLocation=this.textInputBubble.getRelativeToSurfaceXY())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return(0,_e.asyncExecutePromiseGeneratorFunction)(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield to(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),N(new(We($e.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}getBubble(){return this.textInputBubble}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new l(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.bubbleLocation&&this.textInputBubble.moveDuringDrag(this.bubbleLocation),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange()),this.textInputBubble.addLocationChangeListener(()=>this.onBubbleLocationChange())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=h/2;return De.sum(this.workspaceLocation,new De(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};X.TYPE=di.COMMENT,X.WEIGHT=3,gi(X.TYPE,X);var he={};he.CommentIcon=X,he.Icon=rc,he.IconType=di,he.MutatorIcon=u.MutatorIcon$$module$build$src$core$icons$mutator_icon,he.WarningIcon=Io,he.exceptions=nd,he.registry=c,u.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.getName():null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=u.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),u.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let i=e;t===u.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(i=e),e=i.toLowerCase();const n=t===u.NameType$$module$build$src$core$names.VARIABLE||t===u.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const a=this.db.get(t);return a.has(e)?n+a.get(e):(t=this.getDistinctName(i,t),a.set(e,t.substr(n.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let i=null,n,a;for(;this.dbReverse.has(e+((n=i)!=null?n:""))||this.reservedWords.has(e+((a=i)!=null?a:""));)i=i?i+1:2;let d;return e+=(d=i)!=null?d:"",this.dbReverse.add(e),(t===u.NameType$$module$build$src$core$names.VARIABLE||t===u.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=u.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(u.Names$$module$build$src$core$names||(u.Names$$module$build$src$core$names={})),u.NameType$$module$build$src$core$names=u.Names$$module$build$src$core$names.NameType,u.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=u.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,u.NameType$$module$build$src$core$names,u.Names$$module$build$src$core$names;var Le=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),Do(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(Do(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},xe,de;xe="PROCEDURE",u.DEFAULT_ARG$$module$build$src$core$procedures="x",de={CATEGORY_NAME:xe,DEFAULT_ARG:u.DEFAULT_ARG$$module$build$src$core$procedures},de.ObservableProcedureMap=Le,de.allProcedures=Zn,de.findLegalName=u.findLegalName$$module$build$src$core$procedures,de.flyoutCategory=gu,de.getCallers=fu,de.getDefinition=u.getDefinition$$module$build$src$core$procedures,de.internalFlyoutCategory=Gl,de.isNameUsed=Yd,de.isProcedureBlock=Ms,de.mutateCallers=u.mutateCallers$$module$build$src$core$procedures,de.mutatorOpenListener=ch,de.rename=u.rename$$module$build$src$core$procedures;var Te=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return(e.type&this.FIELD)>=1}isHat(e){return(e.type&this.HAT)>=1}isIcon(e){return(e.type&this.ICON)>=1}isSpacer(e){return(e.type&this.SPACER)>=1}isInRowSpacer(e){return(e.type&this.IN_ROW_SPACER)>=1}isSpacerRow(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isInput(e){return(e.type&this.INPUT)>=1}isExternalInput(e){return(e.type&this.EXTERNAL_VALUE_INPUT)>=1}isInlineInput(e){return(e.type&this.INLINE_INPUT)>=1}isStatementInput(e){return(e.type&this.STATEMENT_INPUT)>=1}isPreviousConnection(e){return(e.type&this.PREVIOUS_CONNECTION)>=1}isNextConnection(e){return(e.type&this.NEXT_CONNECTION)>=1}isPreviousOrNextConnection(e){return this.isPreviousConnection(e)||this.isNextConnection(e)}isRoundCorner(e){return(e.type&this.LEFT_ROUND_CORNER)>=1||(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.LEFT_ROUND_CORNER)>=1}isRightRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftSquareCorner(e){return(e.type&this.LEFT_SQUARE_CORNER)>=1}isRightSquareCorner(e){return(e.type&this.RIGHT_SQUARE_CORNER)>=1}isCorner(e){return(e.type&this.CORNER)>=1}isJaggedEdge(e){return(e.type&this.JAGGED_EDGE)>=1}isRow(e){return(e.type&this.ROW)>=1}isBetweenRowSpacer(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isTopRow(e){return(e.type&this.TOP_ROW)>=1}isBottomRow(e){return(e.type&this.BOTTOM_ROW)>=1}isTopOrBottomRow(e){return this.isTopRow(e)||this.isBottomRow(e)}isInputRow(e){return(e.type&this.INPUT_ROW)>=1}},H=new Te,nt=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=H.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Mt=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=H.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;e>=0;e--){const t=this.elements[e];if(H.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(H.isInRowSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;e>=0;e--){const t=this.elements[e];if(H.isInRowSpacer(t))return t}return null}},ne=class extends Mt{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=H.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,i=0;for(let n=0;n<this.elements.length;n++){const a=this.elements[n];t+=a.width,H.isSpacer(a)||(H.isNextConnection(a)?i=Math.max(i,a.height):e=Math.max(e,a.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+i,this.descenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Z=class extends nt{constructor(e,t){super(e),this.connectionModel=t,this.type|=H.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},pe=class extends Z{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=H.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},ke=class extends pe{constructor(e,t){super(e,t),this.height=0,this.type|=H.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},tt=class extends nt{constructor(e,t,i){super(e),this.field=t,this.parentInput=i,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=H.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},Tt=class extends nt{constructor(e){super(e),this.type|=H.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},lt=class extends nt{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=H.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},ot=class extends nt{constructor(e,t){super(e),this.type|=H.SPACER|H.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Li=class extends pe{constructor(e,t){super(e,t),this.type|=H.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},It=class extends Mt{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=H.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const i=this.elements[t];this.width+=i.width,H.isInput(i)&&(H.isStatementInput(i)?e+=i.connectedBlockWidth:H.isExternalInput(i)&&i.connectedBlockWidth!==0&&(e+=i.connectedBlockWidth-i.connectionWidth)),H.isSpacer(i)||(this.height=Math.max(this.height,i.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},kn=class extends nt{constructor(e){super(e),this.type|=H.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},ng=class extends Z{constructor(e,t){super(e,t),this.type|=H.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Ef=class extends Z{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=H.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},bf=class extends Z{constructor(e,t){super(e,t),this.type|=H.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Jp=class extends nt{constructor(e,t){super(e),this.type=(t&&t!=="left"?H.RIGHT_ROUND_CORNER:H.LEFT_ROUND_CORNER)|H.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Og=class extends Mt{constructor(e,t,i){super(e),this.height=t,this.width=i,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type|=H.SPACER|H.BETWEEN_ROW_SPACER,this.elements=[new ot(this.constants_,i)]}measure(){}},qp=class extends nt{constructor(e,t){super(e),this.type=(t&&t!=="left"?H.RIGHT_SQUARE_CORNER:H.LEFT_SQUARE_CORNER)|H.CORNER,this.width=this.height=this.constants_.NO_PADDING}},rg=class extends pe{constructor(e,t){super(e,t),this.type|=H.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Rg=class extends Mt{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=H.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,i=e.getPreviousBlock();return!!e.outputConnection||t||(i?i.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,i=0;for(let n=0;n<this.elements.length;n++){const a=this.elements[n];t+=a.width,H.isSpacer(a)||(H.isHat(a)?i=Math.max(i,a.ascenderHeight):e=Math.max(e,a.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+i,this.capline=this.ascenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},lg=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ti(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const i in t)this.blockStyles[i]=this.validatedBlockStyle_(t[i]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=k("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=Gn(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Gn(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Gn(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return tn("#fff",e,.6)||e}generateTertiaryColour_(e){return tn("#fff",e,.3)||e}dispose(){this.embossFilter&&M(this.embossFilter),this.disabledPattern&&M(this.disabledPattern),this.debugFilter&&M(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,i=Kn([et(t,e/4),et(-t*2,e/2),et(t,e/4)]);return{height:e,width:t,path:i}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,i=os("c",[et(30,-e),et(70,-e),et(t,0)]);return{height:e*.75,width:t,path:i}}makePuzzleTab(){function e(d){d=d?-1:1;const m=-d;var F=i/2;const Re=F+2.5,st=F+.5,Ei=et(-t,d*F);return F=et(t,d*F),os("c",[et(0,d*Re),et(-t,m*st),Ei])+os("s",[et(t,m*2.5),F])}const t=this.TAB_WIDTH,i=this.TAB_HEIGHT,n=e(!0),a=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:i,pathDown:a,pathUp:n}}makeNotch(){function e(m){return Kn([et(m*n,i),et(m*3,0),et(m*n,-i)])}const t=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,n=(t-3)/2,a=e(1),d=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:i,pathLeft:a,pathRight:d}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=qt("a","0 0,0",e,et(-e,e)),i=qt("a","0 0,0",e,et(e,e));return{width:e,height:e,pathTop:t,pathBottom:i}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=ti(0,e)+qt("a","0 0,1",e,et(e,-e)),i=qt("a","0 0,1",e,et(e,e)),n=qt("a","0 0,1",e,et(-e,-e)),a=qt("a","0 0,1",e,et(-e,e));return{topLeft:t,topRight:i,bottomRight:a,bottomLeft:n,rightHeight:e}}shapeFor(e){switch(e.type){case Je.INPUT_VALUE:case Je.OUTPUT_VALUE:return this.PUZZLE_TAB;case Je.PREVIOUS_STATEMENT:case Je.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,i,n){this.injectCSS_(t,i),this.defs=be(ae.DEFS,{},e),e=be(ae.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),be(ae.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=be(ae.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),be(ae.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),be(ae.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),be(ae.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=be(ae.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),be(ae.RECT,{width:10,height:10,fill:"#aaa"},e),be(ae.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter(),n&&(n.style.setProperty("--blocklyEmbossFilter",`url(#${this.embossFilterId})`),n.style.setProperty("--blocklyDisabledPattern",`url(#${this.disabledPatternId})`),n.style.setProperty("--blocklyDebugFilter",`url(#${this.debugFilterId})`))}createDebugFilter(){if(!this.debugFilter){const e=be(ae.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=be(ae.FECOMPONENTTRANSFER,{result:"outBlur"},e);be(ae.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),be(ae.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),be(ae.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const i=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=i:(t=document.createElement("style"),t.id=e,e=document.createTextNode(i),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect,`,`${e} .blocklyEditableField>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableField:not(.blocklyEditing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},ag=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=ti(e.xPos,this.info_.startY);for(let i=0,n;n=t[i];i++)H.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:H.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:H.isPreviousConnection(n)?this.outlinePath_+=n.shape.pathLeft:H.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:H.isSpacer(n)&&(this.outlinePath_+=it("h",n.width));this.outlinePath_+=it("v",e.height)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+it("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const i=Vl(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=it("H",t.xPos+t.width)+i+it("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var i=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+it("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var n=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=it("H",i)+t+it("v",n)+this.constants_.INSIDE_CORNERS.pathBottom+it("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=it("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let i=0,n="";for(let a=t.length-1,d;d=t[a];a--)H.isNextConnection(d)?n+=d.shape.pathRight:H.isLeftSquareCorner(d)?n+=it("H",e.xPos):H.isLeftRoundedCorner(d)?n+=this.constants_.OUTSIDE_CORNERS.bottomLeft:H.isRightRoundedCorner(d)?(n+=this.constants_.OUTSIDE_CORNERS.bottomRight,i=this.constants_.OUTSIDE_CORNERS.rightHeight):H.isSpacer(d)&&(n+=it("h",d.width*-1));this.outlinePath_+=it("V",e.baseline-i),this.outlinePath_+=n}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Vl(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=it("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let i=0,n;n=t.elements[i];i++)H.isInlineInput(n)?this.drawInlineInput_(n):(H.isIcon(n)||H.isField(n))&&this.layoutField_(n)}layoutField_(e){const t=e.centerline-e.height/2;let i=e.xPos;var n="";this.info_.RTL&&(i=-(i+e.width),e.flipRtl&&(i+=e.width,n="scale(-1 1)")),H.isIcon(e)?(n=e.icon,n.setOffsetInBlock(new De(i,t)),this.info_.isInsertionMarker&&n.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+i+","+t+")"+n),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,i=e.height,n=e.connectionOffsetY,a=e.connectionHeight+n;this.inlinePath_+=$i(e.xPos+e.connectionWidth,e.centerline-i/2)+it("v",n)+e.shape.pathDown+it("v",i-a)+it("h",t-e.connectionWidth)+it("v",-i)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let i=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let i=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let i=e.xPos+e.width;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,i=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-i:i,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements){if(!(t instanceof Z))continue;const i=this.drawConnectionHighlightPath(t);i&&(i.style.display=t.highlighted?"":"none")}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===Je.INPUT_VALUE||t.type===Je.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const i=t.getSourceBlock();let n,a;return(a=(n=i.pathObject).addConnectionHighlight)==null?void 0:a.call(n,t,e,t.getOffsetInBlock(),i.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Vl(e.shape)?t=e.shape.pathDown(e.height):ns(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,ti(0,-e)+it("v",e)+t+it("v",e)}getStatementConnectionHighlightPath(e){if(!yi(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ti(-t,0)+it("h",t)+e.shape.pathLeft+it("h",t)}},Zp=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Ef(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Rg(this.constants_),this.bottomRow=new ne(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new It(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let i=0,n;n=t[i];i++){const a=new lt(this.constants_,n);this.isCollapsed&&!n.isShownWhenCollapsed()||e.elements.push(a)}t=void 0;for(let i=0,n;n=this.block_.inputList[i];i++)if(n.isVisible()){this.shouldStartNewRow_(n,t)&&(this.rows.push(e),e=new It(this.constants_),this.inputRows.push(e));for(let a=0,d;d=n.fieldRow[a];a++)e.elements.push(new tt(this.constants_,d,n));this.addInput_(n,e),t=n}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new kn(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let i=this.topRow.hasLeftSquareCorner(this.block_)?qp:Jp;this.topRow.elements.push(new i(this.constants_)),t?(e=new Tt(this.constants_),this.topRow.elements.push(e)):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new bf(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof ts&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,i=this.topRow.hasRightSquareCorner(this.block_)?qp:Jp,this.topRow.elements.push(new i(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof ts?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new qp(this.constants_)):this.bottomRow.elements.push(new Jp(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new ng(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new qp(this.constants_,"right")):this.bottomRow.elements.push(new Jp(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof u.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Li(this.constants_,e)),t.hasInlineInput=!0):e instanceof ts?(t.elements.push(new rg(this.constants_,e)),t.hasStatement=!0):e instanceof u.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new ke(this.constants_,e)),t.hasExternalInput=!0):(e instanceof zo||e instanceof Rn)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof Rn||e instanceof ts||t instanceof ts?!0:e instanceof u.ValueInput$$module$build$src$core$inputs$value_input||e instanceof zo||t instanceof u.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const i=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new ot(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let n=0;n<i.length-1;n++){t.elements.push(i[n]);const a=this.getInRowSpacing_(i[n],i[n+1]);t.elements.push(new ot(this.constants_,a))}t.elements.push(i[i.length-1]),t.endsWithElemSpacer()&&t.elements.push(new ot(this.constants_,this.getInRowSpacing_(i[i.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&H.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&H.isInput(e)&&!t){if(H.isExternalInput(e))return this.constants_.NO_PADDING;if(H.isInlineInput(e))return this.constants_.LARGE_PADDING;if(H.isStatementInput(e))return this.constants_.NO_PADDING}return e&&H.isLeftSquareCorner(e)&&t&&(H.isPreviousConnection(t)||H.isNextConnection(t))?t.notchOffset:e&&H.isLeftRoundedCorner(e)&&t&&(H.isPreviousConnection(t)||H.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&H.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,i=0;for(let a=0,d;d=this.rows[a];a++){if(d.measure(),t=Math.max(t,d.width),d.hasStatement){var n=d.getLastInput();let m,F;n=d.width-((F=(m=n)==null?void 0:m.width)!=null?F:0),e=Math.max(e,n)}i=Math.max(i,d.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let a=0,d;d=this.rows[a];a++)d.hasStatement&&(d.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,i),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,i;i=this.rows[t];t++)if(i.hasStatement)this.alignStatementRow_(i);else{var e=i.width;e=this.getDesiredRowWidth_(i)-e,e>0&&this.addAlignmentPadding_(i,e),H.isTopOrBottomRow(i)&&(i.widthWithConnectedBlocks=i.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const i=e.getFirstSpacer(),n=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===u.Align$$module$build$src$core$inputs$align.LEFT&&n)n.width+=t;else if(e.align===u.Align$$module$build$src$core$inputs$align.CENTRE&&i&&n)i.width+=t/2,n.width+=t/2;else if(e.align===u.Align$$module$build$src$core$inputs$align.RIGHT&&i)i.width+=t;else if(n)n.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var i=e.width-t.width,n=this.statementEdge;i=n-i,i>0&&this.addAlignmentPadding_(e,i),i=e.width,n=this.getDesiredRowWidth_(e),t.width+=n-i,t.height=Math.max(t.height,e.height),e.width+=n-i,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var i=this.getSpacerRowHeight_(e,t);const n=this.getSpacerRowWidth_(e,t);return i=new Og(this.constants_,i,n),e.hasStatement&&(i.followsStatement=!0),t.hasStatement&&(i.precedesStatement=!0),i}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return H.isSpacer(t)?e.yPos+t.height/2:H.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,H.isNextConnection(t)?e+t.height/2:e-t.height/2):H.isTopRow(e)?H.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let i=0,n;n=e.elements[i];i++)H.isSpacer(n)&&(n.height=e.height),n.xPos=t,n.centerline=this.getElemCenterline_(e,n),t+=n.width}finalize_(){let e=0,t=0;for(let i=0,n;n=this.rows[i];i++)n.yPos=t,n.xPos=this.startX,t+=n.height,e=Math.max(e,n.widthWithConnectedBlocks),this.recordElemPositions_(n);if(this.outputConnection&&this.block_.nextConnection){const i=this.block_.nextConnection.targetBlock();i&&(e=Math.max(e,i.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const i of this.rows)for(const n of i.elements)if(n instanceof Z&&n.connectionModel===e)return n;return null}},ug=class{constructor(e,t,i){this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=i,this.style=t,this.svgRoot=e,this.svgPath=be(ae.PATH,{class:"blocklyPath"},this.svgRoot),this.setClass_("blocklyBlock",!0)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?Ge(this.svgRoot,e):me(this.svgRoot,e))}updateHighlighted(e){e?this.setClass_("blocklyHighlighted",!0):this.setClass_("blocklyHighlighted",!1)}updateShadow_(e){e?(this.setClass_("blocklyShadow",!0),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)):this.setClass_("blocklyShadow",!1)}updateDisabled_(e){this.setClass_("blocklyDisabled",e),this.setClass_("blocklyDisabledPattern",e)}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,i,n){return i=`translate(${i.x}, ${i.y})`+(n?" scale(-1 1)":""),(n=this.connectionHighlights.get(e))?(n.setAttribute("d",t),n.setAttribute("transform",i),n):(t=be(ae.PATH,{id:e.id,class:"blocklyHighlightedConnectionPath",style:"display: none;",d:t,transform:i},this.svgRoot),this.connectionHighlights.set(e,t),t)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(M(t),this.connectionHighlights.delete(e))}},cg=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t,i){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName(),i)}refreshDom(e,t,i){const n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t,i)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new lg}makeRenderInfo_(e){return new Zp(this,e)}makeDrawer_(e,t){return new ag(e,t)}makePathObject(e,t){return new ug(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,i){return!!vt.getConnectionForOrphanedConnection(e,i===Je.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},Gt={};Gt.BottomRow=ne,Gt.Connection=Z,Gt.ConstantProvider=lg,Gt.Drawer=ag,Gt.ExternalValueInput=ke,Gt.Field=tt,Gt.Hat=Tt,Gt.Icon=lt,Gt.InRowSpacer=ot,Gt.InlineInput=Li,Gt.InputConnection=pe,Gt.InputRow=It,Gt.JaggedEdge=kn,Gt.Measurable=nt,Gt.NextConnection=ng,Gt.OutputConnection=Ef,Gt.PathObject=ug,Gt.PreviousConnection=bf,Gt.RenderInfo=Zp,Gt.Renderer=cg,Gt.RoundCorner=Jp,Gt.Row=Mt,Gt.SpacerRow=Og,Gt.SquareCorner=qp,Gt.StatementInput=rg,Gt.TopRow=Rg,Gt.Types=H,Gt.init=Wl,Gt.register=Zr,Gt.unregister=zl;var Sf=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&me(e,t),(t=this.theme.getClassName())&&Ge(e,t));for(let i=0,n;n=this.subscribedWorkspaces[i];i++)n.refreshTheme();for(const[i,n]of this.componentDB)for(const a of n){e=a.element,t=a.propertyName;const d=this.theme&&this.theme.getComponentStyle(i);e.style.setProperty(t,d||"")}for(const i of this.subscribedWorkspaces)i.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!Ne(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,i){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:i}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(i,t||"")}unsubscribe(e){if(e)for(const[t,i]of this.componentDB){for(let n=i.length-1;n>=0;n--)i[n].element===e&&i.splice(n,1);i.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Cg="VARIABLE_DYNAMIC",Na={CATEGORY_NAME:Cg};Na.flyoutCategory=_u,Na.flyoutCategoryBlocks=dh,Na.internalFlyoutCategory=Yl,Na.onCreateVariableButtonClick_Colour=Qr,Na.onCreateVariableButtonClick_Number=js,Na.onCreateVariableButtonClick_String=Xl;var vf=class{canConnect(e,t,i,n){return this.canConnectWithReason(e,t,i,n)===vt.CAN_CONNECT}canConnectWithReason(e,t,i,n){const a=this.doSafetyChecks(e,t);return a!==vt.CAN_CONNECT?a:this.doTypeChecks(e,t)?i&&!this.doDragChecks(e,t,n||0)?vt.REASON_DRAG_CHECKS_FAILED:vt.CAN_CONNECT:vt.REASON_CHECKS_FAILED}getErrorMessage(e,t,i){switch(e){case vt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case vt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case vt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case vt.REASON_TARGET_NULL:return"Target connection is null.";case vt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+i.getCheck());case vt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case vt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case vt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return vt.REASON_TARGET_NULL;let i,n,a;return e.isSuperior()?(i=e.getSourceBlock(),n=t.getSourceBlock(),a=t):(n=e.getSourceBlock(),i=t.getSourceBlock(),a=e,e=t),i===n?vt.REASON_SELF_CONNECTION:a.type!==dr[e.type]?vt.REASON_WRONG_TYPE:i.workspace!==n.workspace?vt.REASON_DIFFERENT_WORKSPACES:i.isShadow()&&!n.isShadow()?vt.REASON_SHADOW_PARENT:a.type===Je.OUTPUT_VALUE&&n.previousConnection&&n.previousConnection.isConnected()||a.type===Je.PREVIOUS_STATEMENT&&n.outputConnection&&n.outputConnection.isConnected()?vt.REASON_PREVIOUS_AND_OUTPUT:vt.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let i=0;i<e.length;i++)if(t.includes(e[i]))return!0;return!1}doDragChecks(e,t,i){if(e.distanceFrom(t)>i||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Je.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Je.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Je.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Je.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!ua.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||ua.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};p(ye.CONNECTION_CHECKER,Zt,vf);var dd=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Le,this.readOnly=!1,this.potentialVariableMap=null,this.id=Se(),Ct(this),this.options=e||new Vo({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(V(ye.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new(this.getVariableMapClass())(this),this.setIsReadOnly(this.options.readOnly)}dispose(){this.listeners.length=0,this.clear(),wi(this)}sortObjects(e,t){const i=n=>({getBoundingRectangle:()=>{const a=n.getRelativeToSurfaceXY();return new at(a.y,a.y,a.x,a.x)},moveBy:()=>{}});return this.sortByOrigin(i(e),i(t))}sortByOrigin(e,t){const i=Math.sin(Mc(dd.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getBoundingRectangle().getOrigin(),t=t.getBoundingRectangle().getOrigin(),e.y+i*e.x-(t.y+i*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!Ne(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&t.length>1&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){Ne(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&e.length>1&&e.sort(this.sortObjects.bind(this)),e.filter(i=>!i.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!Ne(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&t.length>1&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let i=0;i<t.length;i++)e.push(...t[i].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(i=>!i.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=u.getGroup$$module$build$src$core$events$utils();for(e||u.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();u.setGroup$$module$build$src$core$events$utils(e),this.isFlyout||this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){Di("Blockly.Workspace.renameVariableById","v12","v13","Blockly.Workspace.getVariableMap().renameVariable"),(e=this.variableMap.getVariableById(e))&&this.variableMap.renameVariable(e,t)}createVariable(e,t,i){return Di("Blockly.Workspace.createVariable","v12","v13","Blockly.Workspace.getVariableMap().createVariable"),this.variableMap.createVariable(e,t??void 0,i??void 0)}getVariableUsesById(e){return Di("Blockly.Workspace.getVariableUsesById","v12","v13","Blockly.Workspace.getVariableMap().getVariableUsesById"),Lr(this,e)}deleteVariableById(e){Di("Blockly.Workspace.deleteVariableById","v12","v13","Blockly.Workspace.getVariableMap().deleteVariable");const t=this.variableMap.getVariableById(e);t?u.deleteVariable$$module$build$src$core$variables(this,t):console.warn(`Can't delete non-existent variable: ${e}`)}getVariable(e,t){return Di("Blockly.Workspace.getVariable","v12","v13","Blockly.Workspace.getVariableMap().getVariable"),this.variableMap.getVariable(e,t)}getVariableById(e){return Di("Blockly.Workspace.getVariableById","v12","v13","Blockly.Workspace.getVariableMap().getVariableById"),this.variableMap.getVariableById(e)}getVariablesOfType(e){return Di("Blockly.Workspace.getVariablesOfType","v12","v13","Blockly.Workspace.getVariableMap().getVariablesOfType"),this.variableMap.getVariablesOfType(e??"")}getAllVariables(){return Di("Blockly.Workspace.getAllVariables","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables()}getAllVariableNames(){return Di("Blockly.Workspace.getAllVariableNames","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables().map(e=>e.getName())}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const i in e){if(e[i]>this.remainingCapacityOfType(i))return!1;t+=e[i]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,i=e?this.undoStack_:this.redoStack_;const n=t.pop();if(n){for(var a=[n];t.length&&n.group&&n.group===t[t.length-1].group;){const d=t.pop();d&&a.push(d)}for(t=0;t<a.length;t++)i.push(a[t]);u.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(i=0;i<a.length;i++)a[i].run(e)}finally{u.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Me()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){Ne(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&this.MAX_UNDO>=0;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let i=0;i<t.length;i++)if(!t[i].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new(this.getVariableMapClass())(this,!0)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return ht(e)}static getAll(){return pi()}getVariableMapClass(){const e=V(ye.VARIABLE_MAP,this.options,!0);if(!e)throw Error("No variable map is registered.");return e}isReadOnly(){return this.readOnly}setIsReadOnly(e){this.readOnly=e,this.options.readOnly=e}};dd.SCAN_ANGLE=3;var cm=100,yf=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var i=new globalThis.Audio}catch{return}for(let a=0;a<e.length;a++){const d=e[a],m=d.match(/\.(\w+)$/);if(m&&i.canPlayType("audio/"+m[1])){var n=new globalThis.Audio(d);break}}n&&this.sounds.set(t,n)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Ii||Gi)break}}play(e,t){if(!this.muted){var i=this.sounds.get(e);i?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<cm||(this.lastSound=e,i=Ii||Mh?i:i.cloneNode(),i.volume=t===void 0?1:t,i.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},hm=20,ys=class extends dd{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardMoveInProgress=this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.navigator=new Xp,this.metricsManager=new(V(ye.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||ys.setTopLevelWorkspaceMetrics,this.componentManager=new Wt,this.connectionDBList=dl.init(this.connectionChecker),this.audioManager=new yf(e.parentWorkspace),this.grid=this.options.gridPattern?new Kp(this.options.gridPattern,e.gridOptions):null,this.markerManager=new r(this),hi&&Pn&&this.registerToolboxCategoryCallback(zu,Pn),Na&&Yl&&this.registerToolboxCategoryCallback(Cg,Yl),de&&Gl&&(this.registerToolboxCategoryCallback(xe,Gl),this.addChangeListener(ch)),this.addChangeListener(this.variableChangeCallback.bind(this)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Sf(this,this.options.theme||nc),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=Wl(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new bt(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}getMarker(e){return this.markerManager.getMarker(e)}getCursor(){return this.markerManager.getCursor()}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=nc),this.themeManager_.setTheme(e)}refreshTheme(){if(this.svgGroup_){var e=this.options.parentWorkspace===null;this.renderer.refreshDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0)}this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0),e=new(We($e.THEME_CHANGE))(this.getTheme().name,this.id),N(e)}updateBlockStyles(e){for(let t=0,i;i=e[t];t++){const n=i.getStyleName();n&&i.setStyle(n)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,i=0,n=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(n=this.scale);do{const a=Wo(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(n=1),t+=a.x*n,i+=a.y*n,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new De(t,i)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new bt(e.width,e.height)}getOriginOffsetInPixels(){return El(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=be(ae.G,{class:"blocklyWorkspace",id:this.id}),t&&Si(this.svgGroup_,jt.LABEL,u.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),e&&(this.svgBackground_=be(ae.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="var(--blocklyGridPattern)":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new hd(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(L(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),L(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(V(ye.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=V(ye.CURSOR,this.options))&&this.markerManager.setCursor(new e(this)),e=this.options.parentWorkspace===null,this.renderer.createDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0),u.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!!this.injectionDiv||this.isFlyout),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&M(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&M(e.parentNode)}this.resizeHandlerWrapper&&(x(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null),u.getFocusManager$$module$build$src$core$focus_manager().isRegistered(this)&&u.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}addTrashcan(){this.trashcan=ys.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new Sp(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}copyOptionsForFlyout(){return new Vo({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,plugins:this.options.plugins,modalInputs:this.options.modalInputs,move:{scrollbars:!0}})}addFlyout(e){const t=this.copyOptionsForFlyout();return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(V(ye.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(V(ye.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox?this.toolbox.position():this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Wt.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),i=[];for(let n=0,a;a=e[n];n++){a.position(t,i);const d=a.getBoundingRectangle();d&&i.push(d)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=xn();De.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const i=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,i.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,i.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(He()){var e=this.scale,t=-this.scrollY,i=-this.scrollX;if(!(e===this.oldScale&&Math.abs(t-this.oldTop)<1&&Math.abs(i-this.oldLeft)<1)){var n=new(We($e.VIEWPORT_CHANGE))(t,i,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=i,N(n)}}}translate(e,t){let i;(i=this.layerManager)==null||i.translateLayers(new De(e,t),this.scale);let n;(n=this.grid)==null||n.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;t>=0;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender())}highlightBlock(e,t){if(t===void 0){for(let i=0,n;n=this.highlightedBlocks[i];i++)n.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):Ne(this.highlightedBlocks,e),e.setHighlighted(t))}variableChangeCallback(e){switch(e.type){case $e.VAR_CREATE:case $e.VAR_DELETE:case $e.VAR_RENAME:case $e.VAR_TYPE_CHANGE:this.refreshToolboxSelection()}}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}recordDragTargets(){const e=this.componentManager.getComponents(Wt.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,i;i=e[t];t++){const n=i.getClientRect();n&&this.dragTargetAreas.push({component:i,clientRect:n})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,i;i=this.dragTargetAreas[t];t++)if(i.clientRect.contains(e.clientX,e.clientY))return i.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){Ws(this,e,t)}moveDrag(e){return Lo(this,e)}setKeyboardMoveInProgress(e){this.keyboardMoveInProgress=e}isDragging(){return this.keyboardMoveInProgress||this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(Ec.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,i=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||i){var n=fe(e);if(Dh)var a=e.metaKey;t&&(e.ctrlKey||a||!i)?(n=-n.y/50,t=te(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,n)):(t=this.scrollX-n.x,i=this.scrollY-n.y,e.shiftKey&&!n.x&&(t=this.scrollX-n.y,i=this.scrollY),this.scroll(t,i)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new at(0,0,0,0);const t=e[0].getBoundingRectangle();for(let n=1;n<e.length;n++){var i=e[n];i.isInsertionMarker&&i.isInsertionMarker()||(i=i.getBoundingRectangle(),i.top<t.top&&(t.top=i.top),i.bottom>t.bottom&&(t.bottom=i.bottom),i.left<t.left&&(t.left=i.left),i.right>t.right&&(t.right=i.right))}return t}cleanUp(){this.setResizesEnabled(!1),u.setGroup$$module$build$src$core$events$utils(!0);var e=this.getTopBlocks(!0),t=e.filter(d=>d.isMovable());const i=e.filter(d=>!d.isMovable()).map(d=>d.getBoundingRectangle());e=function(d){for(const m of i)if(d.intersects(m))return m;return null};var n=0;const a=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const d of t){for(t=d.getBoundingRectangle(),d.moveBy(-t.left,n-t.top,["cleanup"]),d.snapToGrid(),t=d.getBoundingRectangle(),n=e(t);n!=null;)n=n.top+n.getHeight()+a,d.moveBy(0,n-t.top,["cleanup"]),d.snapToGrid(),t=d.getBoundingRectangle(),n=e(t);n=d.getRelativeToSurfaceXY().y+d.getHeightWidth().height+a}u.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.isReadOnly()&&!this.isFlyout){var t=gt.registry.getContextMenuOptions({workspace:this,focusedNode:this},e);this.configureContextMenu&&this.configureContextMenu(t,e);var i=e instanceof PointerEvent?new De(e.clientX,e.clientY):Qs(this,new De(5,5));ro(e,t,this.RTL,this,i)}}updateToolbox(e){if(e=Ro(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Da(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(R(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,i){i=Math.pow(this.options.zoomOptions.scaleSpeed,i);const n=this.scale*i;if(this.scale!==n){n>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale/this.scale:n<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale/this.scale);var a=this.getCanvas().getCTM(),d=this.getParentSvg().createSVGPoint();d.x=e,d.y=t,d=d.matrixTransform(a.inverse()),e=d.x,t=d.y,a=a.translate(e*(1-i),t*(1-i)).scale(i),this.scrollX=a.e,this.scrollY=a.f,this.setScale(n)}}zoomCenter(e){var t=this.getMetrics();let i;this.flyout?(i=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(i=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(i,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var i=this.getBlocksBoundingBox(),n=hm*2,a=i.right-i.left+n;if(i=i.bottom-i.top+n,a){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),i+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),a+=this.flyout.getWidth()/this.scale)),t/=a,e/=i,u.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{u.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Ge(this.getCanvas(),"blocklyCanvasTransitioning"),Ge(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){me(this.getCanvas(),"blocklyCanvasTransitioning"),me(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,i=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,i=-i-e.scrollTop,this.scroll(t,i)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var i=e?this.getBlockById(e):null;if(i){e=i.getRelativeToSurfaceXY(),i=t?{height:i.height,width:i.width}:i.getHeightWidth();var n=this.scale;t=(e.x+(this.RTL?-1:1)*i.width/2)*n,e=(e.y+i.height/2)*n,i=this.getMetrics(),this.scroll(-(t-i.viewWidth/2),-(e-i.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.scale}getAbsoluteScale(){const e=i=>{if(i.isFlyout){let n;const a=(n=i.targetWorkspace)==null?void 0:n.getFlyout();if(a instanceof _l)return a.getFlyoutScale()}return i.getScale()},t=(i,n)=>i.options.parentWorkspace&&i.options.parentWorkspace.getSvgGroup().contains(i.getSvgGroup())?t(i.options.parentWorkspace,n*e(i)):n*e(i);return t(this,1)}scroll(e,t){this.hideChaff(!0);const i=this.getMetrics();e=Math.min(e,-i.scrollLeft),t=Math.min(t,-i.scrollTop);const n=i.scrollTop+Math.max(0,i.scrollHeight-i.viewHeight);e=Math.max(e,-(i.scrollLeft+Math.max(0,i.scrollWidth-i.viewWidth))),t=Math.max(t,-n),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+i.scrollLeft),-(t+i.scrollTop),!1),e+=i.absoluteLeft,t+=i.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getTopComments(e=!1){return super.getTopComments(e)}getCommentById(e){return super.getCommentById(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){Ne(this.topBoundedElements,e)}getTopBoundedElements(e=!1){const t=[].concat(this.topBoundedElements);return e&&t.sort(this.sortByOrigin.bind(this)),t}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){if(this.keyboardMoveInProgress)return e.preventDefault(),e.stopPropagation(),null;const t=e.type==="pointerdown";let i;return t&&((i=this.currentGesture_)!=null&&i.hasStarted())&&(console.warn("Tried to start the same gesture twice."),this.currentGesture_.cancel()),!this.currentGesture_&&t&&(this.currentGesture_=new Ec(e,this)),this.currentGesture_}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){no(),su(this),oo(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(Wt.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}addClass(e){this.injectionDiv&&Ge(this.injectionDiv,e)}removeClass(e){this.injectionDiv&&me(this.injectionDiv,e)}setIsReadOnly(e){super.setIsReadOnly(e),e?this.addClass("blocklyReadOnly"):this.removeClass("blocklyReadOnly")}scrollBoundsIntoView(e,t=10){if(!Ec.inProgress()){var i=this.getScale(),n=this.getMetricsManager().getViewMetrics(!0);if(n=new at(n.top,n.top+n.height,n.left,n.left+n.width),!(e.left>=n.left&&e.top>=n.top&&e.right<=n.right&&e.bottom<=n.bottom)){e=e.clone(),e.top-=t,e.bottom+=t,e.left-=t,e.right+=t;var a=t=0;e.left<n.left?t=this.RTL?Math.min(n.left-e.left,n.right-e.right):n.left-e.left:e.right>n.right&&(t=this.RTL?n.right-e.right:Math.max(n.right-e.right,n.left-e.left)),e.top<n.top?a=n.top-e.top:e.bottom>n.bottom&&(a=Math.max(n.bottom-e.bottom,n.top-e.top)),this.scroll(this.scrollX+t*i,this.scrollY+a*i)}}}getFocusableElement(){return this.svgGroup_}getFocusableTree(){return this.isMutator&&this.options.parentWorkspace||this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(e)return null;let t;return(t=this.getTopBlocks(!0)[0])!=null?t:null}getNestedTrees(){const e=this.getAllBlocks().map(i=>i.getIcons()).flat().filter(i=>i instanceof u.MutatorIcon$$module$build$src$core$icons$mutator_icon&&i.bubbleIsVisible()).map(i=>{let n;return(n=i.getBubble())==null?void 0:n.getWorkspace()}).filter(i=>!!i),t=this.getFlyout(!0);return t&&e.push(t.getWorkspace()),e}searchForWorkspaceComment(e){for(const t of this.getTopComments())if(t instanceof Go&&t.canBeFocused()&&t.getFocusableElement().id===e)return t}lookUpFocusableNode(e){var t;const i=(t=this.targetWorkspace)==null?void 0:t.getFlyout();if(this.isFlyout&&i){for(var n of i.getContents())if(t=n.getElement(),qe(t)&&t.canBeFocused()&&t.getFocusableElement().id===e)return t}if(n=e.indexOf("_field_"),t=e.indexOf("_connection_"),n!==-1){var a=e.substring(0,n);if(a=this.getBlockById(a)){for(var d of a.getFields())if(d.canBeFocused()&&d.getFocusableElement().id===e)return d}return null}if(t!==-1){if(a=e.substring(0,t),a=this.getBlockById(a)){for(const F of a.getConnections_(!0))if(F.id===e)return F}return null}if(d=Math.max(e.indexOf(sd),e.indexOf(Up),e.indexOf(eg)),d!==-1&&(d=e.substring(0,d),d=this.searchForWorkspaceComment(d))){if(e.indexOf(sd)>-1)return d.getEditorFocusableNode();var m;return(m=d.view.getCommentBarButtons().find(F=>F.getFocusableElement().id.includes(e)))!=null?m:null}if((m=this.getAllBlocks(!1).find(F=>F.getFocusableElement().id===e))||(m=this.searchForWorkspaceComment(e)))return m;m=this.getAllBlocks().map(F=>F.getIcons()).flat();for(a of m){if(a.canBeFocused()&&a.getFocusableElement().id===e)return a;if(kr(a)&&(m=a.getBubble())&&m.canBeFocused()&&m.getFocusableElement().id===e)return m}return null}onTreeFocus(e,t){}onTreeBlur(e){if(this.isFlyout&&this.targetWorkspace&&!u.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()){var t=this.targetWorkspace.getFlyout(),i=this.targetWorkspace.getToolbox();i&&e===i||(i&&i.clearSelection(),t&&Pt(t)&&t.autoHide(!1))}}getNavigator(){return this.navigator}setNavigator(e){this.navigator=e}},pd=class extends rs{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.getWorkspace().id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new pd),t.varId=e.varId,t}},Ag=class extends pd{constructor(e){super(e),this.type=$e.VAR_CREATE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Ag),t.varType=e.varType,t.varName=e.varName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t=t.getVariableMap(),e?t.createVariable(this.varName,this.varType,this.varId):(e=t.getVariableById(this.varId))&&t.deleteVariable(e)}};p(ye.EVENT,$e.VAR_CREATE,Ag);var If=class{constructor(e,t,i,n){this.workspace=e,this.name=t,this.type=i||"",this.id=n||Se()}getId(){return this.id}getName(){return this.name}setName(e){return this.name=e,this}getType(){return this.type}setType(e){return this.type=e,this}getWorkspace(){return this.workspace}save(){const e={name:this.getName(),id:this.getId()},t=this.getType();return t&&(e.type=t),e}static load(e,t){e=new this(t,e.name,e.type,e.id),t.getVariableMap().addVariable(e),N(new(We($e.VAR_CREATE))(e))}};p(ye.VARIABLE_MODEL,Zt,If);var Ng=class extends pd{constructor(e){super(e),this.type=$e.VAR_DELETE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Ng),t.varType=e.varType,t.varName=e.varName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t=t.getVariableMap(),e?(e=t.getVariableById(this.varId))&&t.deleteVariable(e):t.createVariable(this.varName,this.varType,this.varId)}};p(ye.EVENT,$e.VAR_DELETE,Ng);var Lg=class extends pd{constructor(e,t){super(e),this.type=$e.VAR_RENAME,e&&(this.oldName=e.getName(),this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Lg),t.oldName=e.oldName,t.newName=e.newName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");t=t.getVariableMap();const i=t.getVariableById(this.varId);e?i&&t.renameVariable(i,this.newName):i&&t.renameVariable(i,this.oldName)}};p(ye.EVENT,$e.VAR_RENAME,Lg);var Of=class{constructor(e,t=!1){this.workspace=e,this.potentialMap=t,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(const t of e.values())this.deleteVariable(t);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.getName()===t)return e;var i=e.getType();i=this.getVariable(t,i);const n=this.workspace.getAllBlocks(!1);let a="";this.potentialMap||(a=u.getGroup$$module$build$src$core$events$utils())||u.setGroup$$module$build$src$core$events$utils(!0);try{i&&i.getId()!==e.getId()?this.renameVariableWithConflict(e,t,i,n):this.renameVariableAndUses(e,t,n)}finally{this.potentialMap||u.setGroup$$module$build$src$core$events$utils(a)}return e}changeVariableType(e,t){var i;(i=this.variableMap.get(e.getType()))==null||i.delete(e.getId()),e.setType(t);let n;return i=(n=this.variableMap.get(t))!=null?n:new Map,i.set(e.getId(),e),this.variableMap.has(t)||this.variableMap.set(t,i),e}renameVariableById(e,t){Di("VariableMap.renameVariableById","v12","v13","VariableMap.renameVariable");const i=this.getVariableById(e);if(!i)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(i,t)}renameVariableAndUses(e,t,i){for(this.potentialMap||N(new(We($e.VAR_RENAME))(e,t)),e.setName(t),t=0;t<i.length;t++)i[t].updateVarName(e)}renameVariableWithConflict(e,t,i,n){const a=e.getType(),d=i.getName();for(t!==d&&this.renameVariableAndUses(i,t,n),t=0;t<n.length;t++)n[t].renameVarById(e.getId(),i.getId());this.potentialMap||N(new(We($e.VAR_DELETE))(e));let m;(m=this.variableMap.get(a))==null||m.delete(e.getId())}createVariable(e,t,i){var n=this.getVariable(e,t);if(n){if(i&&n.getId()!==i)throw Error('Variable "'+e+'" is already in use and its id is "'+n.getId()+'" which conflicts with the passed in id, "'+i+'".');return n}if(i&&this.getVariableById(i))throw Error('Variable id, "'+i+'", is already in use.');if(n=i||Se(),t=t||"",i=C(ye.VARIABLE_MODEL,Zt,!0),!i)throw Error("No variable model is registered.");n=new i(this.workspace,e,t,n);let a;return e=(a=this.variableMap.get(t))!=null?a:new Map,e.set(n.getId(),n),this.variableMap.has(t)||this.variableMap.set(t,e),this.potentialMap||N(new(We($e.VAR_CREATE))(n)),n}addVariable(e){const t=e.getType();this.variableMap.has(t)||this.variableMap.set(t,new Map);let i;(i=this.variableMap.get(t))==null||i.set(e.getId(),e)}deleteVariable(e){const t=Lr(this.workspace,e.getId());let i="";this.potentialMap||(i=u.getGroup$$module$build$src$core$events$utils())||u.setGroup$$module$build$src$core$events$utils(!0);try{for(let a=0;a<t.length;a++)t[a].dispose(!0);const n=this.variableMap.get(e.getType());n&&n.has(e.getId())&&(n.delete(e.getId()),this.potentialMap||N(new(We($e.VAR_DELETE))(e)),n.size===0&&this.variableMap.delete(e.getType()))}finally{this.potentialMap||u.setGroup$$module$build$src$core$events$utils(i)}}deleteVariableById(e){Di("VariableMap.deleteVariableById","v12","v13","Blockly.Variables.deleteVariable"),(e=this.getVariableById(e))&&u.deleteVariable$$module$build$src$core$variables(this.workspace,e)}getVariable(e,t){if(t=this.variableMap.get(t||""),!t)return null;let i;return(i=[...t.values()].find(n=>u.Names$$module$build$src$core$names.equals(n.getName(),e)))!=null?i:null}getVariableById(e){for(const t of this.variableMap.values())if(t.has(e)){let i;return(i=t.get(e))!=null?i:null}return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?[...e.values()]:[]}getTypes(){return[...this.variableMap.keys()]}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(...t.values());return e}getAllVariableNames(){Di("VariableMap.getAllVariableNames","v12","v13","Blockly.Variables.getAllVariables");const e=[];for(const t of this.variableMap.values())for(const i of t.values())e.push(i.getName());return e}getVariableUsesById(e){return Di("VariableMap.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),Lr(this.workspace,e)}};p(ye.VARIABLE_MAP,Zt,Of);var kg=class extends go{constructor(e,t){super(t),this.type=$e.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new kg),t.isOpen=e.isOpen,t}};p(ye.EVENT,$e.TRASHCAN_OPEN,kg);var Rf=class extends ad{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,this.workspace.options.maxTrashcanContents<=0||(e=this.workspace.copyOptionsForFlyout(),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===dt.TOP?dt.BOTTOM:dt.TOP,this.flyout=new(V(ye.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===dt.RIGHT?dt.LEFT:dt.RIGHT,this.flyout=new(V(ye.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=be(ae.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=be(ae.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),be(ae.RECT,{width:$d,height:hg,y:gd},e);const i=be(ae.IMAGE,{width:Ci.width,x:-wg,height:Ci.height,y:-Mg,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return i.setAttributeNS(Oi,"xlink:href",this.workspace.options.pathToMedia+Ci.url),e=be(ae.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),be(ae.RECT,{width:$d,height:gd},e),this.svgLid=be(ae.IMAGE,{width:Ci.width,x:-wg,height:Ci.height,y:-Mg,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(Oi,"xlink:href",this.workspace.options.pathToMedia+Ci.url),J(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),J(this.svgGroup,"pointerup",this,this.click),J(i,"pointerover",this,this.mouseOver),J(i,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){if(this.workspace.options.maxTrashcanContents>0){const e=this.flyout.createDom(ae.SVG);Ge(e,"blocklyTrashcanFlyout"),B(e,this.workspace.getParentSvg()),this.flyout.init(this.workspace)}this.workspace.getComponentManager().addComponent({component:this,weight:Wt.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[Wt.Capability.AUTOHIDEABLE,Wt.Capability.DELETE_AREA,Wt.Capability.DRAG_TARGET,Wt.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&M(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(i){return JSON.parse(i)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let i;(i=this.flyout)==null||i.show(e),t.cursor="";let n;(n=this.workspace.scrollbar)==null||n.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var i=Xo(this.workspace,e);e=Pa(i,new bt($d,hg+gd),dm,Cf,e,this.workspace),t=bl(e,Cf,i.vertical===Po.TOP?Js.DOWN:Js.UP,t),this.top=t.top,this.left=t.left;var n;(n=this.svgGroup)==null||n.setAttribute("transform","translate("+this.left+","+this.top+")");var a;(a=this.flyout)==null||a.position()}}getBoundingRectangle(){return new at(this.top,this.top+hg+gd,this.left,this.left+$d)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+Mg-dg;return e=e.left+wg-dg,new at(t,t+gd+hg+2*dg,e,e+$d+2*dg)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=gm;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Nf),t=Af+this.lidOpen*(fm-Af),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&this.lidOpen<1&&(this.lidTask=setTimeout(this.animateLid.bind(this),$m/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===dt.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let i;(i=this.svgLid)==null||i.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:$d-4)+","+(gd-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*Nf)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(We($e.TRASHCAN_OPEN))(e,this.workspace.id),N(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(this.workspace.options.maxTrashcanContents<=0||!Y(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(pm)}}}cleanBlockJson(e){function t(i){if(i){if(delete i.id,delete i.x,delete i.y,delete i.enabled,delete i.disabledReasons,i.icons&&i.icons.comment){var n=i.icons.comment;delete n.height,delete n.width,delete n.pinned}n=i.inputs;for(var a in n){var d=n[a];const m=d.block;d=d.shadow,m&&t(m),d&&t(d)}i.next&&(a=i.next,i=a.block,a=a.shadow,i&&t(i),a&&t(a))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},$d=47,hg=44,gd=16,Cf=20,dm=20,dg=10,wg=0,Mg=32,pm=.1,$m=80,gm=4,Af=.4,fm=.8,Nf=45,Qp=null,e$=null,pg=void 0,wn={};wn.BlockPaster=Ia,wn.copy=mu,wn.getLastCopiedData=Tu,wn.getLastCopiedLocation=$h,wn.getLastCopiedWorkspace=Eu,wn.paste=cn,wn.registry=Xt,wn.setLastCopiedData=Kd,wn.setLastCopiedLocation=B$,wn.setLastCopiedWorkspace=ph;var La={};La.CollapseCommentBarButton=Z$,La.CommentBarButton=id,La.CommentEditor=Q$,La.CommentView=ba,La.DeleteCommentBarButton=yn,La.RenderedWorkspaceComment=Go,La.WorkspaceComment=Sa;var gr;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(gr||(gr={})),Kl();var fr={};fr.names=gr,fr.registerCopy=mh,fr.registerCut=Th,fr.registerDefaultShortcuts=Kl,fr.registerDelete=fh,fr.registerEscape=bu,fr.registerPaste=Jd,fr.registerRedo=Qn,fr.registerUndo=Eh;var _m=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=ha}save(e){return e=e.getProcedureMap().getProcedures().map(t=>bh(t)),e.length?e:null}load(e,t){const i=t.getProcedureMap();for(const n of e)i.add(Jl(this.procedureModelClass,this.parameterModelClass,n,t))}clear(e){e.getProcedureMap().clear()}},$g={};$g.ProcedureSerializer=_m,$g.loadProcedure=Jl,$g.saveProcedure=bh;var Lf=class{constructor(){this.priority=vp}save(e){return e=e.getAllVariables().map(t=>t.save()),e.length?e:null}load(e,t){const i=C(ye.VARIABLE_MODEL,Zt);e.forEach(n=>{i?.load(n,t)})}clear(e){e.getVariableMap().clear()}};Ir("variables",new Lf);var kf={};kf.VariableSerializer=Lf;var Dg={};Dg.load=qd,Dg.save=ql;var mm={blocks:Fo,exceptions:lr,priorities:z$,procedures:$g,registry:Ip,variables:kf,workspaceComments:Lt,workspaces:Dg};"Blockly"in globalThis||(globalThis.Blockly={Msg:Tn});var xg="label",wf=class{load(e,t){return e=new zi(t.getWorkspace(),t.targetWorkspace,e,!0),e.show(),new $r(e,xg)}gapForItem(e,t){return t}disposeItem(e){e=e.getElement(),e instanceof zi&&e.dispose()}getType(){return xg}};p(ye.FLYOUT_INFLATER,xg,wf);var Mf=class extends lg{constructor(e){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,e&&(this.GRID_UNIT=e),this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+this.FIELD_BORDER_RECT_Y_PADDING*2}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&M(this.selectedGlowFilter),this.replacementGlowFilter&&M(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,i=os("c",[et(25,-e),et(71,-e),et(t,0)]);return{height:e*.75,width:t,path:i}}makeHexagonal(){function e(i,n,a){var d=i/2;return d=d>t?t:d,a=a?-1:1,i=(n?-1:1)*i/2,ks(-a*d,i)+ks(a*d,i)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(i){return i/=2,i>t?t:i},height(i){return i},connectionOffsetY(i){return i/2},connectionOffsetX(i){return-i},pathDown(i){return e(i,!1,!1)},pathUp(i){return e(i,!0,!1)},pathRightDown(i){return e(i,!1,!0)},pathRightUp(i){return e(i,!1,!0)}}}makeRounded(){function e(n,a,d){const m=n>i?n-i:0;n=(n>i?i:n)/2;const F=d===a?"0":"1";return qt("a","0 0,"+F,n,et((d?1:-1)*n,(a?-1:1)*n))+it("v",(a?-1:1)*m)+qt("a","0 0,"+F,n,et((d?-1:1)*n,(a?-1:1)*n))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i=t*2;return{type:this.SHAPES.ROUND,isDynamic:!0,width(n){return n/=2,n>t?t:n},height(n){return n},connectionOffsetY(n){return n/2},connectionOffsetX(n){return-n},pathDown(n){return e(n,!1,!1)},pathUp(n){return e(n,!0,!1)},pathRightDown(n){return e(n,!1,!0)},pathRightUp(n){return e(n,!1,!0)}}}makeSquared(){function e(i,n,a){i-=t*2;const d=a===n?"0":"1";return qt("a","0 0,"+d,t,et((a?1:-1)*t,(n?-1:1)*t))+it("v",(n?-1:1)*i)+qt("a","0 0,"+d,t,et((a?-1:1)*t,(n?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(i){return t},height(i){return i},connectionOffsetY(i){return i/2},connectionOffsetX(i){return-i},pathDown(i){return e(i,!1,!1)},pathUp(i){return e(i,!0,!1)},pathRightDown(i){return e(i,!1,!0)},pathRightUp(i){return e(i,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Je.INPUT_VALUE:case Je.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case Je.PREVIOUS_STATEMENT:case Je.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(st){return os("c",[et(st*a/2,0),et(st*a*3/4,m/2),et(st*a,m)])+Kn([et(st*a,d)])+os("c",[et(st*a/4,m/2),et(st*a/2,m),et(st*a,m)])+it("h",st*n)+os("c",[et(st*a/2,0),et(st*a*3/4,-(m/2)),et(st*a,-m)])+Kn([et(st*a,-d)])+os("c",[et(st*a/4,-(m/2)),et(st*a/2,-m),et(st*a,-m)])}const t=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,n=t/3,a=n/3,d=i/2,m=d/2,F=e(1),Re=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:i,pathLeft:F,pathRight:Re}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=qt("a","0 0,0",e,et(-e,e)),i=qt("a","0 0,1",e,et(-e,e)),n=qt("a","0 0,0",e,et(e,e)),a=qt("a","0 0,1",e,et(e,e));return{width:e,height:e,pathTop:t,pathBottom:n,rightWidth:e,rightHeight:e,pathTopRight:i,pathBottomRight:a}}generateSecondaryColour_(e){return tn("#000",e,.15)||e}generateTertiaryColour_(e){return tn("#000",e,.25)||e}createDom(e,t,i,n){super.createDom(e,t,i,n),e=be(ae.DEFS,{},e),t=be(ae.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),be(ae.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),i=be(ae.FECOMPONENTTRANSFER,{result:"outBlur"},t),be(ae.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},i),be(ae.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),be(ae.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=be(ae.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),be(ae.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=be(ae.FECOMPONENTTRANSFER,{result:"outBlur"},e),be(ae.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),be(ae.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),be(ae.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),be(ae.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e,n&&(n.style.setProperty("--blocklySelectedGlowFilter",`url(#${this.selectedGlowFilterId})`),n.style.setProperty("--blocklyReplacementGlowFilter",`url(#${this.replacementGlowFilterId})`))}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableField>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text,`,`${e} .blocklyNonEditableField>g>text,`,`${e} .blocklyEditableField>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabledPattern > .blocklyOutlinePath {`,"fill: var(--blocklyDisabledPattern)","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}",`${e} .blocklySelected>.blocklyPath.blocklyPathSelected {`,"fill: none;","filter: var(--blocklySelectedGlowFilter);","}",`${e} .blocklyReplaceable>.blocklyPath {`,"filter: var(--blocklyReplacementGlowFilter);","}"]}},Df=class extends ag{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(e.height<=0)){if(H.isSpacer(e)){const n=e.precedesStatement;var t=e.followsStatement;if(n||t){const a=this.constants_.INSIDE_CORNERS;var i=a.rightHeight;i=e.height-(n?i:0),t=t?a.pathBottomRight:"",e=i>0?it("V",e.yPos+i):"",this.outlinePath_+=t+e+(n?a.pathTopRight:"");return}}this.outlinePath_+=it("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ti(e.xPos,this.info_.startY),this.outlinePath_+=it("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=it("V",e.baseline),this.outlinePath_+=it("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=$i(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-e.connectionWidth*2,i=e.height;return it("h",t)+e.shape.pathRightDown(i)+it("h",-t)+e.shape.pathUp(i)+"z"}drawStatementInput_(e){var t=e.getLastInput();const i=t.xPos+t.notchOffset+t.shape.width,n=this.constants_.INSIDE_CORNERS,a=t.shape.pathRight+it("h",-(t.notchOffset-n.width))+n.pathTop,d=e.height-2*n.height;t=n.pathBottom+it("h",t.notchOffset-n.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=it("H",i)+a+it("v",d)+t+it("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===Je.NEXT_STATEMENT||t.type===Je.PREVIOUS_STATEMENT||t.type===Je.OUTPUT_VALUE&&!e.isDynamicShape)return super.drawConnectionHighlightPath(e);e=t.type===Je.INPUT_VALUE?$i(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):$i(e.width,-e.height/2)+e.shape.pathDown(e.height);const i=t.getSourceBlock();let n,a;return(a=(n=i.pathObject).addConnectionHighlight)==null?void 0:a.call(n,t,e,t.getOffsetInBlock(),i.RTL)}},bc=class extends kt{constructor(e,t,i,n,a,d,m){if(super(kt.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",i=Number(Ot(i)),t=Number(Ot(t)),isNaN(i)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(i<=0||t<=0)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new bt(t,i+bc.Y_PADDING),this.imageHeight=i,typeof a=="function"&&(this.clickHandler=a),e!==kt.SKIP_SETUP&&(m?this.configure_(m):(this.flipRtl=!!d,this.altText=Ot(n)||""),this.setValue(Ot(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Ot(e.alt))}initView(){this.imageElement=be(ae.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Oi,"xlink:href",this.value_),this.fieldGroup_&&Ge(this.fieldGroup_,"blocklyImageField"),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(Oi,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}isClickable(){return super.isClickable()&&!!this.clickHandler}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};bc.Y_PADDING=1,Ls("field_image",bc),bc.prototype.DEFAULT_VALUE="";var fd=class extends kt{set size_(e){super.size_=e}get size_(){const e=super.size_;return e.width<14&&(e.width=14),e}constructor(e,t,i){super(kt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,e!==kt.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new ni;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()),this.fieldGroup_&&Ge(this.fieldGroup_,"blocklyInputField")}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new ni;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&He()&&this.value_!==e&&t&&N(new(We($e.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new ni;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(me(e,"blocklyInvalidInput"),Si(e,jt.INVALID,!1)):(Ge(e,"blocklyInvalidInput"),Si(e,jt.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new ni;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1,i=!0){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(dp||Mh||Ii)?this.showPromptEditor():this.showInlineEditor(t,i)}showPromptEditor(){Cr(u.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e,t){const i=this.getSourceBlock();if(!i)throw new ni;on(this,i.RTL,this.widgetDispose_.bind(this),this.workspace_,t),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new ni;u.setGroup$$module$build$src$core$events$utils(!0);const t=sn();var i=this.getClickTarget_();if(!i)throw Error("A click target has not been set.");Ge(i,"blocklyEditing"),i=document.createElement("input"),i.className="blocklyHtmlInput",i.setAttribute("spellcheck",this.spellcheck_);const n=this.workspace_.getAbsoluteScale();var a=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";return t.style.fontSize=a,i.style.fontSize=a,a=fd.BORDERRADIUS*n+"px",this.isFullBlockField()&&(a=this.getScaledBBox(),a=(a.bottom-a.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),i.style.border=1*n+"px solid "+e,t.style.borderRadius=a,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*n+"px")),i.style.borderRadius=a,t.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(i),i}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&He()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(N(new(We($e.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),u.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=sn().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");me(e,"blocklyEditing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=L(e,"keydown",this,this.onHtmlInputKeyDown_),this.onInputWrapper=L(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(x(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onInputWrapper&&(x(this.onInputWrapper),this.onInputWrapper=null)}onHtmlInputKeyDown_(e){if(e.key==="Enter")zs(this),oo();else if(e.key==="Escape")this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),zs(this),oo();else if(e.key==="Tab"){e.preventDefault();var t,i=(t=this.workspace_)==null?void 0:t.getCursor();t=n=>(n instanceof fd||n instanceof wt&&n.isSimpleReporter())&&n!==this.getSourceBlock(),e=e.shiftKey?i?.getPreviousNode(this,t,!1):i?.getNextNode(this,t,!1),e=e instanceof wt&&e.isSimpleReporter()?e.getFields().next().value:e,e instanceof fd&&(zs(this),oo(),i=e.getSourceBlock(),e.isFullBlockField()&&i&&i instanceof wt?u.getFocusManager$$module$build$src$core$focus_manager().focusNode(i):u.getFocusManager$$module$build$src$core$focus_manager().focusNode(e),e.showEditor())}}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&He()&&this.value_!==e&&N(new(We($e.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){to().then(()=>{const e=this.getSourceBlock();if(!e)throw new ni;const t=sn(),i=this.getScaledBBox();t.style.width=i.right-i.left+"px",t.style.height=i.bottom-i.top+"px";const n=i.top;t.style.left=`${e.RTL?i.right-t.offsetWidth:i.left}px`,t.style.top=`${n}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof wt?(Yr(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};fd.BORDERRADIUS=4,u.FieldTextInput$$module$build$src$core$field_textinput=class extends fd{constructor(e,t,i){super(e,t,i)}initView(){super.initView(),this.fieldGroup_&&Ge(this.fieldGroup_,"blocklyTextInputField")}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Ot(e.text),void 0,e)}},Ls("field_input",u.FieldTextInput$$module$build$src$core$field_textinput),u.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",u.FieldTextInput$$module$build$src$core$field_textinput;var xf=class extends ne{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},gg=class extends rg{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Bf=class extends nt{constructor(e){super(e),this.width=this.height=0,this.type|=H.getType("RIGHT_CONNECTION")}},Pf=class extends Rg{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Uf=class extends Zp{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new Pf(this.constants_),this.bottomRow=new xf(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=t.statementInputCount>0,this.rightSide=this.outputConnection?new Bf(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof Rn||e instanceof ts||t instanceof ts?!0:e instanceof u.ValueInput$$module$build$src$core$inputs$value_input||e instanceof zo||e instanceof Rn?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&H.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&H.isLeftRoundedCorner(e)&&t&&(H.isPreviousConnection(t)||H.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&H.isLeftSquareCorner(e)&&t&&H.isHat(t)||e&&H.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(H.isTopRow(e)&&H.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const i=H.isInputRow(e)&&e.hasStatement,n=H.isInputRow(t)&&t.hasStatement;return n||i?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),n&&i?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):H.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):H.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const i=this.width-this.startX;return H.isInputRow(e)&&e.hasStatement||H.isInputRow(t)&&t.hasStatement?Math.max(i,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):i}getElemCenterline_(e,t){if(e.hasStatement&&!H.isSpacer(t)&&!H.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(H.isInlineInput(t)){const i=t.connectedBlock;if(i&&i.outputConnection&&i.nextConnection)return e.yPos+i.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof zo||e instanceof Rn)&&t.hasDummyInput&&t.align===u.Align$$module$build$src$core$inputs$align.LEFT&&e.align===u.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof ts){t.elements.push(new gg(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let i;for(let n=0;n<e.elements.length;n++){const a=e.elements[n];if(H.isSpacer(a)&&(i=a),H.isField(a)&&a.parentInput===this.rightAlignedDummyInputs.get(e))break}if(i){i.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let a=2;a<this.rows.length-1;a+=2){var i=this.rows[a-1];const d=this.rows[a];var n=this.rows[a+1];if(i=a===2?!!this.topRow.hasPreviousConnection:!!i.followsStatement,n=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!n.precedesStatement,H.isInputRow(d)&&d.hasStatement){d.measure();let m,F;t=d.width-((F=(m=d.getLastInput())==null?void 0:m.width)!=null?F:0)+e}else if(i&&(a===2||n)&&H.isInputRow(d)&&!d.hasStatement){n=d.xPos,i=null;for(let m=0;m<d.elements.length;m++){const F=d.elements[m];H.isSpacer(F)&&(i=F),!(i&&(H.isField(F)||H.isInput(F))&&n<t)||H.isField(F)&&(F.field instanceof On||F.field instanceof bc)||(i.width+=t-n),n+=F.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,i=0;i<this.rows.length;i++){const n=this.rows[i];n.yPos=t,t+=n.height}this.height=t,i=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(i),i=e.width(i),this.outputConnection.height=t,this.outputConnection.width=i,this.outputConnection.startX=i,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(i),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=i,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=i,this.width+=i+e,this.widthWithChildren+=i+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var i=this.rows[t];if(!H.isInputRow(i))continue;e=i.elements[i.elements.length-2];let n=this.getNegativeSpacing_(i.elements[1]),a=this.getNegativeSpacing_(e);e=n+a;const d=this.constants_.MIN_BLOCK_WIDTH+this.outputConnection.width*2;this.width-e<d&&(e=this.width-d,n=e/2,a=e/2),i.elements.unshift(new ot(this.constants_,-n)),i.elements.push(new ot(this.constants_,-a))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)i=this.rows[t],H.isTopOrBottomRow(i)&&(i.elements[1].width-=e),i.width-=e,i.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var i=this.outputConnection.shape.type;const n=this.constants_;if(this.inputRows.length>1)switch(i){case n.SHAPES.ROUND:return i=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i=this.height/2>i?i:this.height/2,t-i*(1-Math.sin(Math.acos((i-this.constants_.SMALL_PADDING)/i)));default:return 0}if(H.isInlineInput(e)){const a=e.connectedBlock;return e=a?a.pathObject.outputShapeType:e.shape.type,e==null||a&&a.outputConnection&&(a.statementInputCount||a.nextConnection)||i===n.SHAPES.HEXAGONAL&&i!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[i][e]}return H.isField(e)?i===n.SHAPES.ROUND&&e.field instanceof u.FieldTextInput$$module$build$src$core$field_textinput?t-2.75*n.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[i][0]:H.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let n=2;n<this.rows.length-1;n+=2){const a=this.rows[n-1],d=this.rows[n],m=this.rows[n+1];var e=n===2,t=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!m.precedesStatement;if(e?this.topRow.hasPreviousConnection:a.followsStatement){var i=d.elements[1];if(i=d.elements.length===3&&i instanceof tt&&(i.field instanceof On||i.field instanceof bc),!e&&i)a.height-=this.constants_.SMALL_PADDING,m.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)a.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<d.elements.length;t++)if(i=d.elements[t],H.isInlineInput(i)&&i.connectedBlock&&!i.connectedBlock.isShadow()&&i.connectedBlock.getHeightWidth().height>=40){e=!0;break}e&&(a.height-=this.constants_.SMALL_PADDING,m.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Ff=class extends ug{constructor(e,t,i){super(e,t,i),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=i}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.getColourTertiary());for(const i of this.outlines.values())i.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.classList.add("blocklyPathSelected"),me(this.svgPathSelected,_t.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),me(this.svgPathSelected,_t.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME),this.svgPathSelected.removeAttribute("tabindex"),this.svgPathSelected.removeAttribute("id"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,be(ae.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,i;(t=this.outlines.get(e))==null||(i=t.parentNode)==null||i.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Bg=class extends cg{constructor(e){super(e)}makeConstants_(){return new Mf}makeRenderInfo_(e){return new Uf(this,e)}makeDrawer_(e,t){return new Df(e,t)}makePathObject(e,t){return new Ff(e,t,this.getConstants())}getConstants(){return this.constants_}};Zr("zelos",Bg);var Hf=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,i){u.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=i,i.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{u.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){u.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{u.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===Je.PREVIOUS_STATEMENT||t.type===Je.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Bg)}previewMarker(e,t){const i=e.getSourceBlock(),n=this.createInsertionMarker(i),a=this.getMatchingConnection(i,n,e);if(!a)return null;n.queueRender(),Co(),a.connect(t);const d={x:t.x-a.x,y:t.y-a.y},m=a.getOffsetInBlock().clone();return to().then(()=>{if(!n.isDeadOrDying()){u.disable$$module$build$src$core$events$utils();try{n?.positionNearConnection(a,d,m),n?.getSvgRoot().setAttribute("visibility","visible")}finally{u.enable$$module$build$src$core$events$utils()}}}),a}createInsertionMarker(e){const t=Vs(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);e=Zo(t,this.workspace);for(const i of e.getDescendants(!1))i.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,i){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let n=0;n<e.length;n++)if(e[n]===i)return t[n];return null}hidePreview(){u.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{u.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),i=t.outputConnection;let n;if((n=t.previousConnection)!=null&&n.targetConnection||i!=null&&i.targetConnection)t.unplug(!0);else{let a;(a=e.targetBlock())==null||a.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};p(ye.CONNECTION_PREVIEWER,Zt,Hf);var ka={};ka.Align=u.Align$$module$build$src$core$inputs$align,ka.DummyInput=zo,ka.EndRowInput=Rn,ka.Input=ya,ka.StatementInput=ts,ka.ValueInput=u.ValueInput$$module$build$src$core$inputs$value_input,ka.inputTypes=u.inputTypes$$module$build$src$core$inputs$input_types;var Gf=!1,Vf;u.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=$());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let i=0,n;n=e[i];i++){let a=this.blockToCode(n);Array.isArray(a)&&(a=a[0]),a&&(n.outputConnection&&(a=this.scrubNakedValue(a),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(a=this.injectId(this.STATEMENT_PREFIX,n)+a),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(a+=this.injectId(this.STATEMENT_SUFFIX,n))),t.push(a))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let i=0;i<e.length;i++){const n=e[i].getCommentText();n&&t.push(n)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var i=this.forBlock[e.type];if(typeof i!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(i=i.call(e,e,this),Array.isArray(i)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,i[0],t),i[1]]}if(typeof i=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,e)+i),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,i,t);if(i===null)return"";throw SyntaxError("Invalid code generated: "+i)}valueToCode(e,t,i){if(isNaN(i))throw TypeError("Expecting valid order from block: "+e.type);var n=e.getInputTargetBlock(t);if(!n&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!n||(t=this.blockToCode(n),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${n.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+n.type);if(!e)return"";n=!1;var a=Math.floor(i);const d=Math.floor(t);if(a<=d&&(a!==d||a!==0&&a!==99)){for(n=!0,a=0;a<this.ORDER_OVERRIDES.length;a++)if(this.ORDER_OVERRIDES[a][0]===i&&this.ORDER_OVERRIDES[a][1]===t){n=!1;break}}return n&&(e="("+e+")"),e}statementToCode(e,t){const i=e.getInputTargetBlock(t);if(!i&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(i),typeof e!="string")throw TypeError("Expecting code from statement block: "+(i&&i.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const i=this.nameDB_.getDistinctName(e,u.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=i,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,i);let n;for(;n!==t;)n=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,u.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,u.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,i){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},Vf={},Vf.CodeGenerator=u.CodeGenerator$$module$build$src$core$generator;var Pg=class extends _l{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),i=t.getScrollMetrics(),n=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(i.top+(i.height-n.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),i=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===dt.LEFT?e.width:i.width-this.getWidth():this.toolboxPosition_===dt.LEFT?0:i.width:this.toolboxPosition_===dt.LEFT?0:i.width+t.left-this.getWidth()}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height;var t=this.getWidth()-this.CORNER_RADIUS;this.setBackgroundPath(t,e.height-2*this.CORNER_RADIUS),e=this.getX(),t=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,t)}}setBackgroundPath(e,t){const i=this.toolboxPosition_===dt.RIGHT;var n=e+this.CORNER_RADIUS;n=["M "+(i?n:0)+",0"],n.push("h",i?-e:e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("v",Math.max(0,t)),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("h",i?e:-e),n.push("z"),this.svgBackground_.setAttribute("d",n.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=fe(e);if(t.y){const i=this.workspace_.getMetricsManager(),n=i.getScrollMetrics();t=i.getViewMetrics().top-n.top+t.y;let a;(a=this.workspace_.scrollbar)==null||a.setY(t),su(this.workspace_),oo()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;var t=this.MARGIN;const i=this.RTL?t:t+this.tabWidth_;for(const n of e)n.getElement().moveBy(i,t),t+=n.getElement().getBoundingRectangle().getHeight()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===dt.LEFT?new at(-1e9,1e9,-1e9,t+e.width):new at(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((t,i)=>Math.max(t,i.getElement().getBoundingRectangle().getWidth()),0);if(e+=this.MARGIN*1.5+this.tabWidth_,e*=this.workspace_.scale,e+=ui.scrollbarThickness,this.getWidth()!==e){if(this.RTL)for(const t of this.getContents()){const i=t.getElement().getBoundingRectangle().left,n=e/this.workspace_.scale-t.getElement().getBoundingRectangle().getWidth()-this.MARGIN-this.tabWidth_;t.getElement().moveBy(n-i,0)}this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==dt.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Pg.registryName="verticalFlyout",p(ye.FLYOUTS_VERTICAL_TOOLBOX,Zt,Pg);var zf=class extends _l{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),i=t.getScrollMetrics(),n=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(i.left+(i.width-n.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),i=e.getViewMetrics();e=e.getToolboxMetrics();const n=this.toolboxPosition_===dt.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?n?e.height:i.height-this.getHeight():n?0:i.height:n?0:i.height+t.top-this.getHeight()}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,e=e.width-2*this.CORNER_RADIUS;var t=this.getHeight()-this.CORNER_RADIUS;this.setBackgroundPath(e,t),e=this.getX(),t=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,t)}}setBackgroundPath(e,t){const i=this.toolboxPosition_===dt.TOP,n=["M 0,"+(i?0:this.CORNER_RADIUS)];i?(n.push("h",e+2*this.CORNER_RADIUS),n.push("v",t),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("h",-e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),n.push("h",e),n.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),n.push("v",t),n.push("h",-e-2*this.CORNER_RADIUS)),n.push("z"),this.svgBackground_.setAttribute("d",n.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=fe(e);if(t=t.x||t.y){const i=this.workspace_.getMetricsManager(),n=i.getScrollMetrics();t=i.getViewMetrics().left-n.left+t;let a;(a=this.workspace_.scrollbar)==null||a.setX(t),su(this.workspace_),oo()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;const t=this.MARGIN;let i=t+this.tabWidth_;this.RTL&&(e=e.reverse());for(const n of e)e=n.getElement().getBoundingRectangle(),e=this.RTL?i+e.getWidth():i,n.getElement().moveBy(e,t),i+=n.getElement().getBoundingRectangle().getWidth()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===dt.TOP?new at(-1e9,t+e.height,-1e9,1e9):new at(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((t,i)=>Math.max(t,i.getElement().getBoundingRectangle().getHeight()),0);e+=this.MARGIN*1.5,e*=this.workspace_.scale,e+=ui.scrollbarThickness,this.getHeight()!==e&&(this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==dt.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets())}};p(ye.FLYOUTS_HORIZONTAL_TOOLBOX,Zt,zf);var t$=class extends ei{constructor(e,t,i,n,a){super(kt.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=t$.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new bt(0,0),e!==kt.SKIP_SETUP&&(a?this.configure_(a):this.setTypes(i,n),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new ni;this.variable||(e=u.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}initView(){super.initView(),Ge(this.fieldGroup_,"blocklyVariableField")}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new ni;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new ni;const i=e.getAttribute("id"),n=e.textContent,a=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=u.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,i,n,a),a!==null&&a!==t.getType())throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.getType()+", and does not match variable field that references it: "+Ys(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.getName(),this.variable.getType()&&e.setAttribute("variabletype",this.variable.getType()),e}saveState(e){var t=this.saveLegacyState(t$);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.getName(),t.type=this.variable.getType())),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new ni;this.loadLegacyState(t$,e)||(e=u.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.getName():""}getVariable(){return this.variable}getDefaultType(){return this.defaultType}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new ni;return t=u.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.getType(),this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new ni;this.variable=u.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let i=0;i<t.length;i++)if(e===t[i])return!0;return!1}getVariableTypes(){if(this.variableTypes)return this.variableTypes;if(!this.sourceBlock_||this.sourceBlock_.isDeadOrDying())return[""];let e=this.sourceBlock_.workspace.getVariableMap().getTypes();if(this.sourceBlock_.isInFlyout){const t=this.sourceBlock_.workspace.getPotentialVariableMap();if(!t)return e;e=Array.from(new Set([...e,...t.getTypes()]))}return e}setTypes(e=null,t=""){var i=this.getText();if(Array.isArray(e)){if(e.length===0)throw Error(`'variableTypes' of field variable ${i} was an empty list. If you want to include all variable types, pass 'null' instead.`);i=!1;for(let n=0;n<e.length;n++)e[n]===t&&(i=!0);if(!i)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error(`'variableTypes' was not an array or null in the definition of FieldVariable ${i}`);this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===rd&&this.variable){u.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===Hp&&this.variable){e=this.variable.getWorkspace(),u.deleteVariable$$module$build$src$core$variables(e,this.variable,this.sourceBlock_);return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Ot(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];var i=this.getSourceBlock();if(i&&!i.isDeadOrDying()){i=i.workspace;const d=this.getVariableTypes();for(let m=0;m<d.length;m++){const F=d[m],Re=i.getVariableMap().getVariablesOfType(F);if(t=t.concat(Re),i.isFlyout){var n=void 0,a=void 0;t=t.concat((a=(n=i.getPotentialVariableMap())==null?void 0:n.getVariablesOfType(F))!=null?a:[])}}}for(t.sort(qo),n=[],a=0;a<t.length;a++)n[a]=[t[a].getName(),t[a].getId()];return n.push([u.Msg$$module$build$src$core$msg.RENAME_VARIABLE,rd]),u.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&n.push([u.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),Hp]),n}};Ls("field_variable",t$);var Ug=class extends fd{constructor(e,t,i,n,a,d){super(kt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==kt.SKIP_SETUP&&(d?this.configure_(d):this.setConstraints(t,i,n),this.setValue(e),a&&this.setValidator(a))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,i){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(i),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const i=t.indexOf(".");this.decimalPlaces=i===-1?e?0:null:t.length-i-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return this.min_>-1/0&&(e.min=`${this.min_}`,Si(e,jt.VALUEMIN,this.min_)),this.max_<1/0&&(e.max=`${this.max_}`,Si(e,jt.VALUEMAX,this.max_)),e}initView(){super.initView(),this.fieldGroup_&&Ge(this.fieldGroup_,"blocklyNumberField")}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Ls("field_number",Ug),Ug.prototype.DEFAULT_VALUE=0;var Wf=class extends On{constructor(e,t,i){super(String(e??""),t,i),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Ot(e.text),void 0,e)}};Ls("field_label_serializable",Wf);var Sc=class extends kt{constructor(e,t,i){super(kt.SKIP_SETUP),this.SERIALIZABLE=!0,this.value_=this.value_,this.checkChar=Sc.CHECK_CHAR,e!==kt.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Sc);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();Ge(this.fieldGroup_,"blocklyCheckboxField"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Sc.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Sc.CHECK_CHAR="",Ls("field_checkbox",Sc),Sc.prototype.DEFAULT_VALUE=!1;var Xf=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){u.getGroup$$module$build$src$core$events$utils()||u.setGroup$$module$build$src$core$events$utils(!0),this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),ws(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let i;(i=this.dragTarget)==null||i.onDragExit(t),e?.onDragEnter(t)}e?.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=De.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,Wt.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=u.getGroup$$module$build$src$core$events$utils();var i=this.workspace.getDragTarget(e);const n=this.getRoot(this.draggable);if(i){let a;(a=this.dragTarget)==null||a.onDrop(n)}this.shouldReturnToStart(e,n)&&this.draggable.revertDrag(),(i=ws(n)&&this.wouldDeleteDraggable(e,n))&&this.draggable instanceof wt&&Ul(this.draggable.getRootBlock()),this.draggable.endDrag(e),i&&ws(n)&&(u.setGroup$$module$build$src$core$events$utils(t),n.dispose()),u.setGroup$$module$build$src$core$events$utils(!1),!i&&qe(this.draggable)&&u.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.draggable)}getRoot(e){return e instanceof wt?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new De(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};p(ye.BLOCK_DRAGGER,Zt,Xf);var i$={};i$.BlockDragStrategy=Vp,i$.BubbleDragStrategy=tg,i$.CommentDragStrategy=ed,i$.Dragger=Xf;var Fg=class extends go{constructor(e,t,i){super(e?e.workspace.id:void 0),this.type=$e.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=i)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Fg),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};p(ye.EVENT,$e.BLOCK_DRAG,Fg);var Hg=class extends ar{constructor(e,t,i,n){super(e),this.type=$e.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=i,this.newValue=n)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Hg),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};p(ye.EVENT,$e.BLOCK_FIELD_INTERMEDIATE_CHANGE,Hg);var Gg=class extends ar{constructor(e){super(e),this.type=$e.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Gg),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(i=e.oldCoordinate.split(","),t.oldCoordinate=new De(Number(i[0]),Number(i[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(i=e.newCoordinate.split(","),t.newCoordinate=new De(Number(i[0]),Number(i[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const i=t.getParent();return i?(e.parentId=i.id,(t=i.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&De.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var i=t.getBlockById(this.blockId);if(i){var n=e?this.newParentId:this.oldParentId,a=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,n){var d=t.getBlockById(n);if(!d){console.warn("Can't connect to non-existent block: "+n);return}}if(i.getParent()&&i.unplug(),e)a=i.getRelativeToSurfaceXY(),i.moveBy(e.x-a.x,e.y-a.y,this.reason);else{t=i.outputConnection,(!t||i.previousConnection&&i.previousConnection.isConnected())&&(t=i.previousConnection);let m,F;i=(F=t)==null?void 0:F.type,a?(i=d.getInput(a))&&(m=i.connection):i===Je.PREVIOUS_STATEMENT&&(m=d.nextConnection),m&&t?t.connect(m):console.warn("Can't connect to non-existent input: "+a)}}else console.warn("Can't move non-existent block: "+this.blockId)}};p(ye.EVENT,$e.BLOCK_MOVE,Gg);var Vg=class extends go{constructor(e,t,i){super(e?e.workspace.id:void 0),this.type=$e.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=i)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Vg),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},zg;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(zg||(zg={})),p(ye.EVENT,$e.BUBBLE_OPEN,Vg);var _r=class extends rs{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=u.getGroup$$module$build$src$core$events$utils(),this.recordUndo=Oe())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new _r),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const i=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");ji(e.json,i)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=i.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},Wg=class extends _r{constructor(e,t,i){super(e),this.type=$e.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof i>"u"?"":i)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Wg),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var i=e?this.newContents_:this.oldContents_;if(i===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(i)}else console.warn("Can't change non-existent comment: "+this.commentId)}};p(ye.EVENT,$e.COMMENT_CHANGE,Wg);var Xg=class extends _r{constructor(e,t){super(e),this.newCollapsed=t,this.type=$e.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Xg),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};p(ye.EVENT,$e.COMMENT_COLLAPSE,Xg);var Yg=class extends _r{constructor(e){super(e),this.type=$e.COMMENT_CREATE,e&&(this.xml=Wr(e),this.json=Or(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ys(this.xml),e.json=this.json,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Yg),t.xml=u.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){_r.CommentCreateDeleteHelper(this,e)}};p(ye.EVENT,$e.COMMENT_CREATE,Yg);var jg=class extends _r{constructor(e){super(e),this.type=$e.COMMENT_DELETE,e&&(this.xml=Wr(e),this.json=Or(e,{addCoordinates:!0}))}run(e){_r.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ys(this.xml),e.json=this.json,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new jg),t.xml=u.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};p(ye.EVENT,$e.COMMENT_DELETE,jg);var Kg=class extends go{constructor(e,t){super(e?e.workspace.id:void 0),this.type=$e.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Kg),t.isStart=e.isStart,t.commentId=e.commentId,t}};p(ye.EVENT,$e.COMMENT_DRAG,Kg);var Jg=class extends _r{constructor(e){super(e),this.type=$e.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Jg),i=e.oldCoordinate.split(","),t.oldCoordinate_=new De(Number(i[0]),Number(i[1])),i=e.newCoordinate.split(","),t.newCoordinate_=new De(Number(i[0]),Number(i[1])),t}isNull(){return De.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};p(ye.EVENT,$e.COMMENT_MOVE,Jg);var qg=class extends _r{constructor(e){super(e),this.type=$e.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new qg),t.oldSize=new bt(e.oldWidth,e.oldHeight),t.newSize=new bt(e.newWidth,e.newHeight),t}isNull(){return bt.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};p(ye.EVENT,$e.COMMENT_RESIZE,qg);var Zg=class extends go{constructor(e,t,i){super(i),this.type=$e.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Zg),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};p(ye.EVENT,$e.TOOLBOX_ITEM_SELECT,Zg);var Qg=class extends pd{constructor(e,t,i){super(e),this.oldType=t,this.newType=i,this.type=$e.VAR_TYPE_CHANGE}toJson(){const e=super.toJson();if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");return e.oldType=this.oldType,e.newType=this.newType,e}static fromJson(e,t,i){return t=super.fromJson(e,t,i??new Qg),t.oldType=e.oldType,t.newType=e.newType,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");const i=t.getVariableMap().getVariableById(this.varId);i&&(e?t.getVariableMap().changeVariableType(i,this.newType):t.getVariableMap().changeVariableType(i,this.oldType))}};p(ye.EVENT,$e.VAR_TYPE_CHANGE,Qg);var Yf=class extends rs{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=$e.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};p(ye.EVENT,$e.FINISHED_LOADING,Yf);var jf,Kf,Jf,qf,Zf,Qf,e_,t_,i_,s_,o_,n_,r_,l_,a_,u_,c_,h_,d_,p_,$_,g_,f_,__,je;u.BLOCK_CHANGE$$module$build$src$core$events$events=$e.BLOCK_CHANGE,u.BLOCK_CREATE$$module$build$src$core$events$events=$e.BLOCK_CREATE,u.BLOCK_DELETE$$module$build$src$core$events$events=$e.BLOCK_DELETE,jf=$e.BLOCK_DRAG,u.BLOCK_MOVE$$module$build$src$core$events$events=$e.BLOCK_MOVE,Kf=$e.BLOCK_FIELD_INTERMEDIATE_CHANGE,Jf=$e.BUBBLE_OPEN,qf=$e.BLOCK_CHANGE,Zf=$e.CLICK,Qf=$e.COMMENT_CHANGE,e_=$e.COMMENT_CREATE,t_=$e.COMMENT_DELETE,i_=$e.COMMENT_MOVE,s_=$e.COMMENT_RESIZE,o_=$e.COMMENT_DRAG,n_=$e.BLOCK_CREATE,r_=$e.BLOCK_DELETE,l_=$e.FINISHED_LOADING,a_=$e.BLOCK_MOVE,u_=$e.SELECTED,c_=$e.THEME_CHANGE,h_=$e.TOOLBOX_ITEM_SELECT,d_=$e.TRASHCAN_OPEN,p_=$e.UI,$_=$e.VAR_CREATE,g_=$e.VAR_DELETE,f_=$e.VAR_RENAME,__=$e.VIEWPORT_CHANGE,je={},je.Abstract=rs,je.BLOCK_CHANGE=u.BLOCK_CHANGE$$module$build$src$core$events$events,je.BLOCK_CREATE=u.BLOCK_CREATE$$module$build$src$core$events$events,je.BLOCK_DELETE=u.BLOCK_DELETE$$module$build$src$core$events$events,je.BLOCK_DRAG=jf,je.BLOCK_FIELD_INTERMEDIATE_CHANGE=Kf,je.BLOCK_MOVE=u.BLOCK_MOVE$$module$build$src$core$events$events,je.BUBBLE_OPEN=Jf,je.BUMP_EVENTS=gp,je.BlockBase=ar,je.BlockChange=ur,je.BlockCreate=sc,je.BlockDelete=Ss,je.BlockDrag=Fg,je.BlockFieldIntermediateChange=Hg,je.BlockMove=Gg,je.BubbleOpen=Vg,je.BubbleType=zg,je.CHANGE=qf,je.CLICK=Zf,je.COMMENT_CHANGE=Qf,je.COMMENT_CREATE=e_,je.COMMENT_DELETE=t_,je.COMMENT_DRAG=o_,je.COMMENT_MOVE=i_,je.COMMENT_RESIZE=s_,je.CREATE=n_,je.Click=Pu,je.ClickTarget=Ph,je.CommentBase=_r,je.CommentChange=Wg,je.CommentCollapse=Xg,je.CommentCreate=Yg,je.CommentDelete=jg,je.CommentDrag=Kg,je.CommentMove=Jg,je.CommentResize=qg,je.DELETE=r_,je.FINISHED_LOADING=l_,je.FinishedLoading=Yf,je.MOVE=a_,je.SELECTED=u_,je.Selected=pl,je.THEME_CHANGE=c_,je.TOOLBOX_ITEM_SELECT=h_,je.TRASHCAN_OPEN=d_,je.ThemeChange=Fs,je.ToolboxItemSelect=Zg,je.TrashcanOpen=kg,je.UI=p_,je.UiBase=go,je.VAR_CREATE=$_,je.VAR_DELETE=g_,je.VAR_RENAME=f_,je.VIEWPORT_CHANGE=__,je.VarBase=pd,je.VarCreate=Ag,je.VarDelete=Ng,je.VarRename=Lg,je.VarTypeChange=Qg,je.ViewportChange=oc,je.clearPendingUndo=Me,je.disable=u.disable$$module$build$src$core$events$utils,je.disableOrphans=Dt,je.enable=u.enable$$module$build$src$core$events$utils,je.filter=Ae,je.fire=N,je.fromJson=pt,je.get=We,je.getDescendantIds=Qe,je.getGroup=u.getGroup$$module$build$src$core$events$utils,je.getRecordUndo=Oe,je.isEnabled=He,je.setGroup=u.setGroup$$module$build$src$core$events$utils,je.setRecordUndo=u.setRecordUndo$$module$build$src$core$events$utils;var mr={};mr.BottomRow=xf,mr.ConstantProvider=Mf,mr.Drawer=Df,mr.PathObject=Ff,mr.RenderInfo=Uf,mr.Renderer=Bg,mr.RightConnectionShape=Bf,mr.StatementInput=gg,mr.TopRow=Pf,er();var Wi={};Wi.registerCleanup=vu,Wi.registerCollapse=Oh,Wi.registerCollapseExpandBlock=Ch,Wi.registerComment=np,Wi.registerCommentCreate=ea,Wi.registerCommentDelete=Ah,Wi.registerCommentDuplicate=Nh,Wi.registerCommentOptions=P$,Wi.registerDefaultOptions=er,Wi.registerDelete=Ru,Wi.registerDeleteAll=Ou,Wi.registerDisable=el,Wi.registerDuplicate=Rh,Wi.registerExpand=sp,Wi.registerHelp=Ql,Wi.registerInline=rp,Wi.registerRedo=yh,Wi.registerUndo=vh;var ef="button",m_=class{load(e,t){return e=new zi(t.getWorkspace(),t.targetWorkspace,e,!1),e.show(),new $r(e,ef)}gapForItem(e,t){return t}disposeItem(e){e=e.getElement(),e instanceof zi&&e.dispose()}getType(){return ef}};p(ye.FLYOUT_INFLATER,ef,m_);var s$={};s$.Bubble=Bt,s$.MiniWorkspaceBubble=In,s$.TextBubble=zp,s$.TextInputBubble=l;var Tm="WORKSPACE_AT_BLOCK_CAPACITY",tf="block",T_=class{constructor(){this.permanentlyDisabledBlocks=new Set,this.listeners=new Map,this.capacityWrapper=this.filterFlyoutBasedOnCapacity.bind(this)}load(e,t){return this.setFlyout(t),e=this.createBlock(e,t.getWorkspace()),e.isEnabled()?this.updateStateBasedOnCapacity(e):this.permanentlyDisabledBlocks.add(e),e.getDescendants(!1).forEach(i=>i.isInFlyout=!0),this.addBlockListeners(e),new $r(e,tf)}createBlock(e,t){return e.blockxml?(e=typeof e.blockxml=="string"?u.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,t=ao(e,t)):(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[ci]),"x"in e&&delete e.x,"y"in e&&delete e.y,t=Rl(e,t)),t}gapForItem(e,t){let i;return e.gap?i=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?u.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,i=parseInt(e.getAttribute("gap"))),!i||isNaN(i)?t:i}disposeItem(e){e=e.getElement(),e instanceof wt&&(this.removeListeners(e.id),e.dispose(!1,!1))}removeListeners(e){let t;((t=this.listeners.get(e))!=null?t:[]).forEach(i=>x(i)),this.listeners.delete(e)}setFlyout(e){if(this.flyout!==e){if(this.flyout){let i;(i=this.flyout.targetWorkspace)==null||i.removeChangeListener(this.capacityWrapper)}this.flyout=e;var t;(t=this.flyout.targetWorkspace)==null||t.addChangeListener(this.capacityWrapper)}}updateStateBasedOnCapacity(e){let t,i;const n=(t=this.flyout)==null||(i=t.targetWorkspace)==null?void 0:i.isCapacityAvailable(Xi(e));for(;e;)e.setDisabledReason(!n,Tm),e=e.getNextBlock()}addBlockListeners(e){const t=[];t.push(L(e.getSvgRoot(),"pointerdown",e,i=>{let n,a;const d=(n=this.flyout)==null||(a=n.targetWorkspace)==null?void 0:a.getGesture(i);d&&this.flyout&&(d.setStartBlock(e),d.handleFlyoutStart(i,this.flyout))})),t.push(J(e.getSvgRoot(),"pointermove",null,()=>{let i,n;!((i=this.flyout)==null||(n=i.targetWorkspace)==null)&&n.isDragging()||e.addSelect()})),t.push(J(e.getSvgRoot(),"pointerleave",null,()=>{let i,n;!((i=this.flyout)==null||(n=i.targetWorkspace)==null)&&n.isDragging()||e.removeSelect()})),this.listeners.set(e.id,t)}filterFlyoutBasedOnCapacity(e){!this.flyout||e&&e.type!==$e.BLOCK_CREATE&&e.type!==$e.BLOCK_DELETE||this.flyout.getWorkspace().getTopBlocks(!1).forEach(t=>{this.permanentlyDisabledBlocks.has(t)||this.updateStateBasedOnCapacity(t)})}getType(){return tf}};p(ye.FLYOUT_INFLATER,tf,T_);var E_=class extends lg{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},b_=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=ti(e.xPos,this.info_.startY);for(let t=0,i;i=e.elements[t];t++)H.isLeftSquareCorner(i)?this.steps_+=this.highlightConstants_.START_POINT:H.isLeftRoundedCorner(i)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):H.isPreviousConnection(i)?this.steps_+=this.notchPaths_.pathLeft:H.isHat(i)?this.steps_+=this.startPaths_.path(this.RTL_):H.isSpacer(i)&&i.width!==0&&(this.steps_+=it("H",i.xPos+i.width-this.highlightOffset));this.steps_+=it("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+it("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const i=e.height-t.connectionHeight;this.steps_+=$i(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+it("v",i)}else this.steps_+=$i(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const i=e.height-2*this.insideCornerPaths_.height;this.steps_+=$i(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+it("v",i)+this.insideCornerPaths_.pathBottom(this.RTL_)+ks(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=$i(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+ks(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof Og&&e.followsStatement&&(this.steps_+=it("H",t)),this.RTL_&&(this.steps_+=it("H",t),e.height>this.highlightOffset&&(this.steps_+=it("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=it("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];H.isLeftSquareCorner(t)?this.steps_+=$i(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):H.isLeftRoundedCorner(t)&&(this.steps_+=$i(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=$i(this.info_.startX,e):(this.steps_+=$i(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=it("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,H.isLeftRoundedCorner(e.elements[0])?this.steps_+=it("V",this.outsideCornerPaths_.height):this.steps_+=it("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,i=e.xPos+e.connectionWidth;var n=e.centerline-e.height/2;const a=e.width-e.connectionWidth,d=n+t;this.RTL_?(n=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=$i(i-t,d)+it("v",n)+this.puzzleTabPaths_.pathDown(this.RTL_)+it("v",e)+it("h",a)):this.inlineSteps_+=$i(e.xPos+e.width+t,d)+it("v",e.height)+it("h",-a)+$i(i,n+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},S_=class extends ag{constructor(e,t){super(e,t),this.highlighter_=new b_(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=it("H",e.xPos+e.width)+it("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let i=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let i=e.xPos+e.statementEdge+t.notchOffset;i=this.info_.RTL?i*-1:i+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(i,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let i=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,i=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-i:i)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},v_=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=ti(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,i=(1-Math.SQRT1_2)*(e+t)-t,n=ti(i,i)+qt("a","0 0,0",e,et(-i-t,e-i)),a=qt("a","0 0,0",e+t,et(e+t,e+t)),d=ti(i,-i)+qt("a","0 0,0",e+t,et(e-i,i+t));return{width:e+t,height:e,pathTop(m){return m?n:""},pathBottom(m){return m?a:d}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,i=(1-Math.SQRT1_2)*(e-t)+t,n=ti(i,i)+qt("a","0 0,1",e-t,et(e-i,-i+t)),a=ti(t,e)+qt("a","0 0,1",e-t,et(e,-e+t)),d=-i,m=ti(i,d)+qt("a","0 0,1",e-t,et(-i+t,-d-e));return{height:e,topLeft(F){return F?n:a},bottomLeft(){return m}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,i=ti(-2,-t+2.5+.9)+ks(e*-.45,-2.1),n=it("v",2.5)+ti(-e*.97,2.5)+os("q",[et(-e*.05,10),et(e*.3,9.5)])+ti(e*.67,-1.9)+it("v",2.5),a=it("v",-1.5)+ti(e*-.92,-.5)+os("q",[et(e*-.19,-5.5),et(0,-11)])+ti(e*.92,1),d=ti(-5,t-.7)+ks(e*.46,-2.1);return{width:e,height:t,pathUp(m){return m?i:a},pathDown(m){return m?n:d}}}makeNotch(){return{pathLeft:it("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:ks(5.1,2.6)+ti(-10.2,6.8)+ks(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=ti(25,-8.7)+os("c",[et(29.7,-6.2),et(57.2,-.5),et(75,8.7)]),i=os("c",[et(17.8,-9.2),et(45.3,-14.9),et(75,-8.7)])+$i(100.5,e+.5);return{path(n){return n?t:i}}}},y_=class extends Li{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},I_=class extends rg{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},O_=class extends Zp{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof ts||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof u.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new y_(this.constants_,e)),t.hasInlineInput=!0):e instanceof ts?(t.elements.push(new I_(this.constants_,e)),t.hasStatement=!0):e instanceof u.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new ke(this.constants_,e)),t.hasExternalInput=!0):(e instanceof zo||e instanceof Rn)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let i=0,n;n=this.rows[i];i++)n.hasExternalInput&&(e=!0);for(let i=0,n;n=this.rows[i];i++){var t=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new ot(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let a=0;a<t.length-1;a++){n.elements.push(t[a]);const d=this.getInRowSpacing_(t[a],t[a+1]);n.elements.push(new ot(this.constants_,d))}n.elements.push(t[t.length-1]),n.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&n.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),n.elements.push(new ot(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&H.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&H.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&H.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!H.isInput(e)&&(!t||H.isStatementInput(t)))return H.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:H.isIcon(e)?this.constants_.LARGE_PADDING*2+1:H.isHat(e)?this.constants_.NO_PADDING:H.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:H.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:H.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(H.isInput(e)&&!t){if(H.isExternalInput(e))return this.constants_.NO_PADDING;if(H.isInlineInput(e))return this.constants_.LARGE_PADDING;if(H.isStatementInput(e))return this.constants_.NO_PADDING}if(!H.isInput(e)&&t&&H.isInput(t)){if(H.isField(e)&&e.isEditable){if(H.isInlineInput(t)||H.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(H.isInlineInput(t)||H.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(H.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(H.isIcon(e)&&t&&!H.isInput(t))return this.constants_.LARGE_PADDING;if(H.isInlineInput(e)&&t&&H.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(H.isLeftSquareCorner(e)&&t){if(H.isHat(t))return this.constants_.NO_PADDING;if(H.isPreviousConnection(t))return t.notchOffset;if(H.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(H.isLeftRoundedCorner(e)&&t){if(H.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(H.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return H.isField(e)&&t&&H.isField(t)&&e.isEditable===t.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:t&&H.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return H.isTopRow(e)&&H.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:H.isTopRow(e)||H.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(H.isSpacer(t))return e.yPos+t.height/2;if(H.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,H.isNextConnection(t)?e+t.height/2:e-t.height/2;if(H.isTopRow(e))return H.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let i=e.yPos;return H.isField(t)||H.isIcon(t)?(i+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(i+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):i=H.isInlineInput(t)?i+t.height/2:i+e.height/2,i}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,i=null;for(let n=this.rows.length-1,a;a=this.rows[n];n--)t.set(a,e),H.isInputRow(a)&&(a.hasStatement&&this.alignStatementRow_(a),i&&i.hasStatement&&a.width<i.width?t.set(a,i.width):e=a.hasStatement?a.width:Math.max(e,a.width),i=a);e=0;for(let n=0,a;a=this.rows[n];n++)a.hasStatement?e=this.getDesiredRowWidth_(a):H.isSpacer(a)?a.width=Math.max(e,t.get(a)):(i=a.width,e=Math.max(e,t.get(a))-i,e>0&&this.addAlignmentPadding_(a,e),e=a.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let n=0,a;a=this.rows[n];n++){a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks);var i=t-this.topRow.ascenderHeight;a===this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,t+=i),this.recordElemPositions_(a)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,i.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},R_=class extends ug{constructor(e,t,i){super(e,t,i),this.constants=i,this.colourDark="#000000",this.svgPathDark=be(ae.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=be(ae.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=tn("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){super.updateHighlighted(e),this.svgPathLight.style.display=e?"none":"inline"}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},C_=class extends cg{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t,i){super.refreshDom(e,t,i),this.getHighlightConstants().init()}makeConstants_(){return new E_}makeRenderInfo_(e){return new O_(this,e)}makeDrawer_(e,t){return new S_(e,t)}makePathObject(e,t){return new R_(e,t,this.getConstants())}makeHighlightConstants_(){return new v_(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Zr("geras",C_);var Tr={};Tr.ConstantProvider=E_,Tr.Drawer=S_,Tr.HighlightConstantProvider=v_,Tr.Highlighter=b_,Tr.InlineInput=y_,Tr.PathObject=R_,Tr.RenderInfo=O_,Tr.Renderer=C_,Tr.StatementInput=I_;var A_=class extends Zp{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const n=this.rows[t];var i=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new ot(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let a=0;a<i.length-1;a++){n.elements.push(i[a]);const d=this.getInRowSpacing_(i[a],i[a+1]);n.elements.push(new ot(this.constants_,d))}n.elements.push(i[i.length-1]),n.endsWithElemSpacer()&&(i=this.getInRowSpacing_(i[i.length-1],null),e&&n.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),n.elements.push(new ot(this.constants_,i)))}}}getInRowSpacing_(e,t){if(!e)return t&&H.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&H.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&H.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!H.isInput(e)&&!t)return H.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:H.isIcon(e)?this.constants_.LARGE_PADDING*2+1:H.isHat(e)?this.constants_.NO_PADDING:H.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:H.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:H.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(H.isInput(e)&&!t){if(H.isExternalInput(e))return this.constants_.NO_PADDING;if(H.isInlineInput(e))return this.constants_.LARGE_PADDING;if(H.isStatementInput(e))return this.constants_.NO_PADDING}if(!H.isInput(e)&&t&&H.isInput(t)){if(H.isField(e)&&e.isEditable){if(H.isInlineInput(t)||H.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(H.isInlineInput(t)||H.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(H.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(H.isIcon(e)&&t&&!H.isInput(t))return this.constants_.LARGE_PADDING;if(H.isInlineInput(e)&&t&&H.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(H.isLeftSquareCorner(e)&&t){if(H.isHat(t))return this.constants_.NO_PADDING;if(H.isPreviousConnection(t)||H.isNextConnection(t))return t.notchOffset}return H.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:H.isField(e)&&t&&H.isField(t)&&e.isEditable===t.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:t&&H.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return H.isTopRow(e)&&H.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:H.isTopRow(e)||H.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(H.isSpacer(t))return e.yPos+t.height/2;if(H.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,H.isNextConnection(t)?e+t.height/2:e-t.height/2;if(H.isTopRow(e))return H.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let i=e.yPos;return i=H.isField(t)&&e.hasStatement?i+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):i+e.height/2}finalize_(){let e=0,t=0;for(var i=0;i<this.rows.length;i++){const a=this.rows[i];a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks);var n=t-this.topRow.ascenderHeight;a===this.bottomRow&&n<this.constants_.MIN_BLOCK_HEIGHT&&(n=this.constants_.MIN_BLOCK_HEIGHT-n,this.bottomRow.height+=n,t+=n),this.recordElemPositions_(a)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,i.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},N_=class extends cg{constructor(e){super(e)}makeRenderInfo_(e){return new A_(this,e)}};Zr("thrasos",N_);var sf={};sf.RenderInfo=A_,sf.Renderer=N_;var Em={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},bm={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Sm=new gl("zelos",Em,bm),vm={Classic:nc,Zelos:Sm},of=class{constructor(e,t,i){this.id_=e.toolboxitemid||oe(),this.level_=(this.parent_=i||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}getFocusableElement(){const e=this.getDiv();if(!e)throw Error("Trying to access toolbox item before DOM is initialized.");if(!(e instanceof HTMLElement))throw Error("Toolbox item div is unexpectedly not an HTML element.");return e}getFocusableTree(){return this.parentToolbox_}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}},Mn=class extends of{constructor(e,t,i){super(e,t,i),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategoryContainer",row:"blocklyToolboxCategory",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyToolboxCategoryIcon",label:"blocklyToolboxCategoryLabel",contents:"blocklyToolboxCategoryGroup",selected:"blocklyToolboxSelected",openicon:"blocklyToolboxCategoryIconOpen",closedicon:"blocklyToolboxCategoryIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const i=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(i)}}parseCategoryDef_(e){this.name_="name"in e?Ot(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Cs(this.htmlDiv_,Ai.TREEITEM),Si(this.htmlDiv_,jt.SELECTED,!1),Si(this.htmlDiv_,jt.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Cs(this.iconDom_,Ai.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&Si(this.htmlDiv_,jt.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const t=this.cssConfig_.container;return t&&Ge(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&Ge(e,t),t=`${Mn.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&Ge(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&Ge(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&Ge(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Mn.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Ot(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=Hr(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):As(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&_(e,t),(t=this.cssConfig_.openicon)&&Ge(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&_(e,t),(t=this.cssConfig_.closedicon)&&Ge(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const i=this.parseColour(Mn.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||i,t&&Ge(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&me(this.rowDiv_,t);Si(this.htmlDiv_,jt.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Ma(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){M(this.htmlDiv_)}};Mn.registrationName="category",Mn.nestedPadding=19,Mn.borderWidth=8,Mn.defaultBackgroundColour="#57e",Ke(`
.blocklyToolboxCategory:not(.blocklyToolboxSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolbox[layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 5px 1px 0;
}

.blocklyToolbox[dir="RTL"][layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 0 1px 5px;
}

.blocklyToolboxCategory {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategory {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyToolboxCategoryIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyToolboxCategoryIconClosed {
  background-position: -32px -1px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategoryIconClosed {
  background-position: 0 -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: -32px -17px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: 0 -17px;
}

.blocklyToolboxCategoryIconOpen {
  background-position: -16px -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconOpen {
  background-position: -16px -17px;
}

.blocklyToolboxCategoryLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyToolboxCategoryLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxSelected .blocklyToolboxCategoryLabel {
  color: #fff;
}
`),p(ye.TOOLBOX_ITEM,Mn.registrationName,Mn);var o$=class extends of{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const t=this.cssConfig_.container;return t&&Ge(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){M(this.htmlDiv)}};o$.registrationName="sep",Ke(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolbox[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),p(ye.TOOLBOX_ITEM,o$.registrationName,o$);var _d=class extends Mn{constructor(e,t,i){super(e,t,i),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxCategoryGroup",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let i=0;i<t.length;i++){const n=t[i];!S(ye.TOOLBOX_ITEM,n.kind)||n.kind.toLowerCase()===o$.registrationName&&e?(this.flyoutItems_.push(n),e=!0):(this.createToolboxItem(n),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&yc(e)&&(t=_d.registrationName),e=new(E(ye.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Cs(this.subcategoriesDiv_,Ai.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Si(this.htmlDiv_,jt.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&Ge(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var i=this.cssConfig_.contents;for(i&&Ge(t,i),i=0;i<e.length;i++){const n=e[i];n.init();const a=n.getDiv();if(t.appendChild(a),n.getClickTarget){let d;(d=n.getClickTarget())==null||d.setAttribute("id",n.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Si(this.htmlDiv_,jt.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let i=0;i<t.length;i++)t[i].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};_d.registrationName="collapsibleCategory",p(ye.TOOLBOX_ITEM,_d.registrationName,_d);var L_=class extends ad{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.height_=this.width_=0,this.flyout=null,this.contents=new Map,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_);const i=this.flyout.createDom("svg");Ge(i,"blocklyToolboxFlyout"),B(i,t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:Wt.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[Wt.Capability.AUTOHIDEABLE,Wt.Capability.DELETE_AREA,Wt.Capability.DRAG_TARGET]}),u.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!0)}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return t.id=oe(),this.contentsDiv_=this.createContentsContainer_(),Cs(this.contentsDiv_,Ai.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Ge(e,"blocklyToolbox"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return Ge(e,"blocklyToolboxCategoryGroup"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=L(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=L(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(Q(e)||e.target===this.HtmlDiv)$().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),$().hideChaff(!0)}U()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=e.copyOptionsForFlyout();return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?V(ye.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):V(ye.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e,this.contents.forEach(t=>t.dispose()),this.contents.clear(),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let i=0;i<e.length;i++)this.createToolboxItem(e[i],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var i=e.kind;i.toUpperCase()==="CATEGORY"&&yc(e)&&(i=_d.registrationName),(i=E(ye.TOOLBOX_ITEM,i.toLowerCase()))&&(e=new i(e,this),e.init(),this.addToolboxItem_(e),(i=e.getDiv())&&t.appendChild(i),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents.set(e.getId(),e),e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return[...this.contents.values()]}addStyle(e){e&&this.HtmlDiv&&Ge(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&me(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,i=t+e.height,n=e.left;return e=n+e.width,this.toolboxPosition===dt.TOP?new at(-1e7,i,-1e7,1e7):this.toolboxPosition===dt.BOTTOM?new at(t,1e7,-1e7,1e7):this.toolboxPosition===dt.LEFT?new at(-1e7,1e7,-1e7,e):new at(-1e7,1e7,n,1e7)}wouldDelete(e){return e instanceof wt?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(ws(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contents.get(e)||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===dt.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===dt.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_;var t=this.HtmlDiv.getBoundingClientRect();const i=this.getFlyout(),n=this.toolboxPosition===dt.LEFT?e.scrollX+t.width+(i!=null&&i.isVisible()?i.getWidth():0):e.scrollX;t=this.toolboxPosition===dt.TOP?e.scrollY+t.height+(i!=null&&i.isVisible()?i.getHeight():0):e.scrollY,e.translate(n,t),Os(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){this.contents.forEach(e=>{e.refreshTheme&&e.refreshTheme()})}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!ia(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),Si(this.contentsDiv_,jt.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),Si(this.contentsDiv_,jt.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){(e=this.getToolboxItems()[e])&&this.setSelectedItem(e)}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const i=e&&e.getName();let n=t&&t.getName();e===t&&(n=null),e=new(We($e.TOOLBOX_ITEM_SELECT))(i,n,this.workspace_.id),N(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let t=e.indexOf(this.selectedItem_)+1;if(t>-1&&t<e.length){let i=e[t];for(;i&&!i.isSelectable();)i=e[++t];if(i&&i.isSelectable())return this.setSelectedItem(i),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let t=e.indexOf(this.selectedItem_)-1;if(t>-1&&t<e.length){let i=e[t];for(;i&&!i.isSelectable();)i=e[--t];if(i&&i.isSelectable())return this.setSelectedItem(i),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose(),this.contents.forEach(e=>e.dispose());for(let e=0;e<this.boundEvents_.length;e++)x(this.boundEvents_[e]);this.boundEvents_=[],this.contents.clear(),this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),M(this.HtmlDiv)),u.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}getFocusableElement(){if(!this.HtmlDiv)throw Error("Toolbox DOM has not yet been created.");return this.HtmlDiv}getFocusableTree(){return this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(!e||e===this){let t;return(t=this.getToolboxItems().find(i=>i.isSelectable()))!=null?t:null}return null}getNestedTrees(){return[]}lookUpFocusableNode(e){return this.getToolboxItemById(e)}onTreeFocus(e,t){e!==this?this.getSelectedItem()!==e&&this.setSelectedItem(e):this.clearSelection()}onTreeBlur(e){let t;e&&e===((t=this.flyout)==null?void 0:t.getWorkspace())||(this.clearSelection(),this.flyout&&Pt(this.flyout)&&this.flyout.autoHide(!1))}};Ke(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolbox {
  box-sizing: border-box;
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxCategoryGroup {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxCategoryGroup:focus {
  outline: none;
}
`),p(ye.TOOLBOX,Zt,L_);var ym="12.2.0",Im=Je.INPUT_VALUE,Om=Je.OUTPUT_VALUE,Rm=Je.NEXT_STATEMENT,Cm=Je.PREVIOUS_STATEMENT,Am=dt.TOP,Nm=dt.BOTTOM,Lm=dt.LEFT,km=dt.RIGHT;dd.prototype.newBlock=function(e,t){return new pr(this,e,t)},ys.prototype.newBlock=function(e,t){return new wt(this,e,t)},dd.prototype.newComment=function(e){return new Sa(this,e)},ys.prototype.newComment=function(e){return new Go(this,e)},ys.newTrashcan=function(e){return new Rf(e)},In.prototype.newWorkspaceSvg=function(e){return new ys(e)},u.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Zn(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],u.Names$$module$build$src$core$names.NameType.PROCEDURE)};var ge={};return ge.Block=pr,ge.BlockFlyoutInflater=T_,ge.BlockNavigationPolicy=Nn,ge.BlockSvg=wt,ge.Blocks=Kt,ge.ButtonFlyoutInflater=m_,ge.COLLAPSED_FIELD_NAME=da,ge.COLLAPSED_INPUT_NAME=Eo,ge.COLLAPSE_CHARS=cc,ge.CodeGenerator=u.CodeGenerator$$module$build$src$core$generator,ge.CollapsibleToolboxCategory=_d,ge.ComponentManager=Wt,ge.Connection=vt,ge.ConnectionChecker=vf,ge.ConnectionDB=dl,ge.ConnectionNavigationPolicy=Oa,ge.ConnectionType=Je,ge.ContextMenu=hl,ge.ContextMenuItems=Wi,ge.ContextMenuRegistry=gt,ge.Css=ai,ge.DELETE_VARIABLE_ID=Hp,ge.DeleteArea=ad,ge.DragTarget=ig,ge.DropDownDiv=mi,ge.Events=je,ge.Extensions=Zs,ge.Field=kt,ge.FieldCheckbox=Sc,ge.FieldDropdown=ei,ge.FieldImage=bc,ge.FieldLabel=On,ge.FieldLabelSerializable=Wf,ge.FieldNavigationPolicy=Ln,ge.FieldNumber=Ug,ge.FieldTextInput=u.FieldTextInput$$module$build$src$core$field_textinput,ge.FieldVariable=t$,ge.Flyout=_l,ge.FlyoutButton=zi,ge.FlyoutButtonNavigationPolicy=Wp,ge.FlyoutItem=$r,ge.FlyoutMetricsManager=fc,ge.FlyoutNavigationPolicy=ud,ge.FlyoutNavigator=Yp,ge.FlyoutSeparator=Oo,ge.FlyoutSeparatorNavigationPolicy=An,ge.FocusManager=_t,ge.FocusableTreeTraverser=Ri,ge.Generator=u.CodeGenerator$$module$build$src$core$generator,ge.Gesture=Ec,ge.Grid=Kp,ge.HorizontalFlyout=zf,ge.INPUT_VALUE=Im,ge.Input=ya,ge.InsertionMarkerPreviewer=Hf,ge.KeyboardNavigationController=mc,ge.LabelFlyoutInflater=wf,ge.LineCursor=o,ge.Marker=s,ge.MarkerManager=r,ge.Menu=ii,ge.MenuItem=qs,ge.MetricsManager=gc,ge.Msg=u.Msg$$module$build$src$core$msg,ge.NEXT_STATEMENT=Rm,ge.Names=u.Names$$module$build$src$core$names,ge.Navigator=Xp,ge.OPPOSITE_TYPE=dr,ge.OUTPUT_VALUE=Om,ge.Options=Vo,ge.PREVIOUS_STATEMENT=Cm,ge.PROCEDURE_CATEGORY_NAME=xe,ge.Procedures=de,ge.RENAME_VARIABLE_ID=rd,ge.RenderedConnection=Ti,ge.Scrollbar=ui,ge.ScrollbarPair=Ca,ge.SeparatorFlyoutInflater=og,ge.ShortcutItems=fr,ge.ShortcutRegistry=zt,ge.TOOLBOX_AT_BOTTOM=Nm,ge.TOOLBOX_AT_LEFT=Lm,ge.TOOLBOX_AT_RIGHT=km,ge.TOOLBOX_AT_TOP=Am,ge.Theme=gl,ge.ThemeManager=Sf,ge.Themes=vm,ge.Toast=En,ge.Toolbox=L_,ge.ToolboxCategory=Mn,ge.ToolboxItem=of,ge.ToolboxSeparator=o$,ge.Tooltip=Us,ge.Touch=dn,ge.Trashcan=Rf,ge.UnattachedFieldError=ni,ge.VARIABLE_CATEGORY_NAME=zu,ge.VARIABLE_DYNAMIC_CATEGORY_NAME=Cg,ge.VERSION=ym,ge.VariableMap=Of,ge.VariableModel=If,ge.Variables=hi,ge.VariablesDynamic=Na,ge.VerticalFlyout=Pg,ge.WidgetDiv=bs,ge.Workspace=dd,ge.WorkspaceAudio=yf,ge.WorkspaceDragger=Aa,ge.WorkspaceNavigationPolicy=Ra,ge.WorkspaceSvg=ys,ge.Xml=es,ge.ZoomControls=Sp,ge.blockAnimations=dc,ge.blockRendering=Gt,ge.browserEvents=Ks,ge.bubbles=s$,ge.bumpObjects=pc,ge.clipboard=wn,ge.comments=La,ge.common=li,ge.config=u.config$$module$build$src$core$config,ge.constants=pa,ge.defineBlocksWithJsonArray=y,ge.dialog=bn,ge.dragging=i$,ge.fieldRegistry=$l,ge.geras=Tr,ge.getFocusManager=u.getFocusManager$$module$build$src$core$focus_manager,ge.getMainWorkspace=$,ge.getSelected=ee,ge.hasBubble=kr,ge.hideChaff=Au,ge.icons=he,ge.inject=Zd,ge.inputs=ka,ge.isCopyable=jl,ge.isDeletable=ws,ge.isDraggable=$t,ge.isIcon=rh,ge.isObservable=Do,ge.isPaster=ta,ge.isRenderedElement=Cu,ge.isSelectable=ut,ge.isSerializable=Ki,ge.isVariableBackedParameterModel=Va,ge.keyboardNavigationController=Tc,ge.layers=q$,ge.navigateBlock=Hi,ge.navigateStacks=qn,ge.procedures=de,ge.registry=qi,ge.renderManagement=bo,ge.serialization=mm,ge.setLocale=Pi,ge.setParentContainer=ds,ge.svgResize=Os,ge.thrasos=sf,ge.uiPosition=To,ge.utils=Yt,ge.zelos=mr,ge.__namespace__=u,ge})}(mg)),mg.exports}var Xm=Tf();const Ym=l$(Xm),{Block:jm,BlockFlyoutInflater:Km,BlockNavigationPolicy:Jm,BlockSvg:qm,Blocks:$f,ButtonFlyoutInflater:Zm,COLLAPSED_FIELD_NAME:Qm,COLLAPSED_INPUT_NAME:eT,COLLAPSE_CHARS:tT,CodeGenerator:iT,CollapsibleToolboxCategory:sT,ComponentManager:oT,Connection:nT,ConnectionChecker:rT,ConnectionDB:lT,ConnectionNavigationPolicy:aT,ConnectionType:gf,ContextMenu:uT,ContextMenuItems:cT,ContextMenuRegistry:hT,Css:dT,DELETE_VARIABLE_ID:pT,DeleteArea:$T,DragTarget:gT,DropDownDiv:fT,Events:_T,Extensions:mT,Field:TT,FieldCheckbox:ET,FieldDropdown:em,FieldImage:bT,FieldLabel:ST,FieldLabelSerializable:vT,FieldNavigationPolicy:yT,FieldNumber:IT,FieldTextInput:tm,FieldVariable:OT,Flyout:RT,FlyoutButton:CT,FlyoutButtonNavigationPolicy:AT,FlyoutItem:NT,FlyoutMetricsManager:LT,FlyoutNavigationPolicy:kT,FlyoutNavigator:wT,FlyoutSeparator:MT,FlyoutSeparatorNavigationPolicy:DT,FocusManager:xT,FocusableTreeTraverser:BT,Generator:PT,Gesture:UT,Grid:FT,HorizontalFlyout:HT,INPUT_VALUE:GT,Input:VT,InsertionMarkerPreviewer:zT,KeyboardNavigationController:WT,LabelFlyoutInflater:XT,LineCursor:YT,Marker:jT,MarkerManager:KT,Menu:JT,MenuItem:qT,MetricsManager:ZT,Msg:QT,NEXT_STATEMENT:eE,Names:tE,Navigator:iE,OPPOSITE_TYPE:sE,OUTPUT_VALUE:oE,Options:nE,PREVIOUS_STATEMENT:rE,PROCEDURE_CATEGORY_NAME:lE,Procedures:aE,RENAME_VARIABLE_ID:uE,RenderedConnection:cE,Scrollbar:hE,ScrollbarPair:dE,SeparatorFlyoutInflater:pE,ShortcutItems:$E,ShortcutRegistry:gE,TOOLBOX_AT_BOTTOM:fE,TOOLBOX_AT_LEFT:_E,TOOLBOX_AT_RIGHT:mE,TOOLBOX_AT_TOP:TE,Theme:im,ThemeManager:EE,Themes:sm,Toast:bE,Toolbox:SE,ToolboxCategory:ff,ToolboxItem:vE,ToolboxSeparator:yE,Tooltip:IE,Touch:OE,Trashcan:RE,UnattachedFieldError:CE,VARIABLE_CATEGORY_NAME:AE,VARIABLE_DYNAMIC_CATEGORY_NAME:NE,VERSION:LE,VariableMap:kE,VariableModel:wE,Variables:ME,VariablesDynamic:DE,VerticalFlyout:xE,WidgetDiv:BE,Workspace:PE,WorkspaceAudio:UE,WorkspaceDragger:FE,WorkspaceNavigationPolicy:HE,WorkspaceSvg:GE,Xml:VE,ZoomControls:zE,blockAnimations:WE,blockRendering:om,browserEvents:XE,bubbles:YE,bumpObjects:jE,clipboard:KE,comments:JE,common:nm,config:qE,constants:ZE,defineBlocksWithJsonArray:QE,dialog:eb,dragging:tb,fieldRegistry:ib,geras:sb,getFocusManager:ob,getMainWorkspace:nb,getSelected:rb,hasBubble:lb,hideChaff:ab,icons:ub,inject:rm,inputs:cb,isCopyable:hb,isDeletable:db,isDraggable:pb,isIcon:$b,isObservable:gb,isPaster:fb,isRenderedElement:_b,isSelectable:mb,isSerializable:Tb,isVariableBackedParameterModel:Eb,keyboardNavigationController:bb,layers:Sb,navigateBlock:vb,navigateStacks:yb,procedures:Ib,registry:_f,renderManagement:Ob,serialization:Rb,setLocale:lm,setParentContainer:Cb,svgResize:Ab,thrasos:Nb,uiPosition:Lb,utils:am,zelos:Sg}=Ym,kb=Object.freeze(Object.defineProperty({__proto__:null,Block:jm,BlockFlyoutInflater:Km,BlockNavigationPolicy:Jm,BlockSvg:qm,Blocks:$f,ButtonFlyoutInflater:Zm,COLLAPSED_FIELD_NAME:Qm,COLLAPSED_INPUT_NAME:eT,COLLAPSE_CHARS:tT,CodeGenerator:iT,CollapsibleToolboxCategory:sT,ComponentManager:oT,Connection:nT,ConnectionChecker:rT,ConnectionDB:lT,ConnectionNavigationPolicy:aT,ConnectionType:gf,ContextMenu:uT,ContextMenuItems:cT,ContextMenuRegistry:hT,Css:dT,DELETE_VARIABLE_ID:pT,DeleteArea:$T,DragTarget:gT,DropDownDiv:fT,Events:_T,Extensions:mT,Field:TT,FieldCheckbox:ET,FieldDropdown:em,FieldImage:bT,FieldLabel:ST,FieldLabelSerializable:vT,FieldNavigationPolicy:yT,FieldNumber:IT,FieldTextInput:tm,FieldVariable:OT,Flyout:RT,FlyoutButton:CT,FlyoutButtonNavigationPolicy:AT,FlyoutItem:NT,FlyoutMetricsManager:LT,FlyoutNavigationPolicy:kT,FlyoutNavigator:wT,FlyoutSeparator:MT,FlyoutSeparatorNavigationPolicy:DT,FocusManager:xT,FocusableTreeTraverser:BT,Generator:PT,Gesture:UT,Grid:FT,HorizontalFlyout:HT,INPUT_VALUE:GT,Input:VT,InsertionMarkerPreviewer:zT,KeyboardNavigationController:WT,LabelFlyoutInflater:XT,LineCursor:YT,Marker:jT,MarkerManager:KT,Menu:JT,MenuItem:qT,MetricsManager:ZT,Msg:QT,NEXT_STATEMENT:eE,Names:tE,Navigator:iE,OPPOSITE_TYPE:sE,OUTPUT_VALUE:oE,Options:nE,PREVIOUS_STATEMENT:rE,PROCEDURE_CATEGORY_NAME:lE,Procedures:aE,RENAME_VARIABLE_ID:uE,RenderedConnection:cE,Scrollbar:hE,ScrollbarPair:dE,SeparatorFlyoutInflater:pE,ShortcutItems:$E,ShortcutRegistry:gE,TOOLBOX_AT_BOTTOM:fE,TOOLBOX_AT_LEFT:_E,TOOLBOX_AT_RIGHT:mE,TOOLBOX_AT_TOP:TE,Theme:im,ThemeManager:EE,Themes:sm,Toast:bE,Toolbox:SE,ToolboxCategory:ff,ToolboxItem:vE,ToolboxSeparator:yE,Tooltip:IE,Touch:OE,Trashcan:RE,UnattachedFieldError:CE,VARIABLE_CATEGORY_NAME:AE,VARIABLE_DYNAMIC_CATEGORY_NAME:NE,VERSION:LE,VariableMap:kE,VariableModel:wE,Variables:ME,VariablesDynamic:DE,VerticalFlyout:xE,WidgetDiv:BE,Workspace:PE,WorkspaceAudio:UE,WorkspaceDragger:FE,WorkspaceNavigationPolicy:HE,WorkspaceSvg:GE,Xml:VE,ZoomControls:zE,blockAnimations:WE,blockRendering:om,browserEvents:XE,bubbles:YE,bumpObjects:jE,clipboard:KE,comments:JE,common:nm,config:qE,constants:ZE,defineBlocksWithJsonArray:QE,dialog:eb,dragging:tb,fieldRegistry:ib,geras:sb,getFocusManager:ob,getMainWorkspace:nb,getSelected:rb,hasBubble:lb,hideChaff:ab,icons:ub,inject:rm,inputs:cb,isCopyable:hb,isDeletable:db,isDraggable:pb,isIcon:$b,isObservable:gb,isPaster:fb,isRenderedElement:_b,isSelectable:mb,isSerializable:Tb,isVariableBackedParameterModel:Eb,keyboardNavigationController:bb,layers:Sb,navigateBlock:vb,navigateStacks:yb,procedures:Ib,registry:_f,renderManagement:Ob,serialization:Rb,setLocale:lm,setParentContainer:Cb,svgResize:Ab,thrasos:Nb,uiPosition:Lb,utils:am,zelos:Sg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wb=im.defineTheme("dark",{name:"dark",base:sm.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"#333",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0"}});var Tg={exports:{}},Mb=Tg.exports,Y_;function Db(){return Y_||(Y_=1,function(Pe,ze){(function(u,p){Pe.exports=p(Tf())})(Mb,function(u){var p=u.__namespace__,G=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),b={customContextMenu:function($){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(ee={text:p.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:I(this)},ie=this.getField("VAR").getText(),ie={text:p.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ie),enabled:!0,callback:S(this)},$.unshift(ee),$.unshift(ie));else{if(this.type==="variables_get_dynamic")var R="variables_set_dynamic",ee=p.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else R="variables_get_dynamic",ee=p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ie=this.getField("VAR");R={type:R,fields:{VAR:ie.saveState(!0)}},$.push({enabled:this.workspace.remainingCapacity()>0,text:ee.replace("%1",ie.getText()),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,R)})}},onchange:function($){$=this.getFieldValue("VAR"),$=p.getVariable$$module$build$src$core$variables(this.workspace,$),this.type==="variables_get_dynamic"?this.outputConnection.setCheck($.getType()):this.getInput("VALUE").connection.setCheck($.getType())}},I=function($){return function(){const R=$.workspace,ee=$.getField("VAR").getVariable();p.renameVariable$$module$build$src$core$variables(R,ee)}},S=function($){return function(){const R=$.getField("VAR").getVariable();R&&p.deleteVariable$$module$build$src$core$variables(R.getWorkspace(),R,$)}};p.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",b),p.defineBlocks$$module$build$src$core$common(G);var E={blocks:G},C=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),z={customContextMenu:function($){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(ee={text:p.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:V(this)},ie=this.getField("VAR").getText(),ie={text:p.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ie),enabled:!0,callback:j(this)},$.unshift(ee),$.unshift(ie));else{if(this.type==="variables_get")var R="variables_set",ee=p.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else R="variables_get",ee=p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ie=this.getField("VAR");R={type:R,fields:{VAR:ie.saveState(!0)}},$.push({enabled:this.workspace.remainingCapacity()>0,text:ee.replace("%1",ie.getText()),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,R)})}}},V=function($){return function(){const R=$.workspace,ee=$.getField("VAR").getVariable();p.renameVariable$$module$build$src$core$variables(R,ee)}},j=function($){return function(){const R=$.getField("VAR").getVariable();R&&p.deleteVariable$$module$build$src$core$variables(R.getWorkspace(),R,$)}};p.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",z),p.defineBlocks$$module$build$src$core$common(C);var A={blocks:C},U=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),O={init:function(){this.WHERE_OPTIONS_1=[[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const $=R=>{const ee=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+R]});return ee.setValidator(function(ie){const Ue=this.getValue();ie=ie==="FROM_START"||ie==="FROM_END",ie!==(Ue==="FROM_START"||Ue==="FROM_END")&&this.getSourceBlock().updateAt_(R,ie)}),ee};this.appendDummyInput("WHERE1_INPUT").appendField($(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField($(2),"WHERE2"),this.appendDummyInput("AT2"),p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");var R=this.getInput("AT1")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return $.setAttribute("at1",`${R}`),R=this.getInput("AT2")instanceof p.ValueInput$$module$build$src$core$inputs$value_input,$.setAttribute("at2",`${R}`),$},domToMutation:function($){const R=$.getAttribute("at1")==="true";$=$.getAttribute("at2")==="true",this.updateAt_(1,R),this.updateAt_(2,$)},updateAt_:function($,R){this.removeInput("AT"+$),this.removeInput("ORDINAL"+$,!0),R?(this.appendValueInput("AT"+$).setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+$).appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+$),$===2&&p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),$===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};U.text_getSubstring=O,U.text_changeCase={init:function(){const $=[[p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(p.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},U.text_trim={init:function(){const $=[[p.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[p.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[p.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(p.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},U.text_print={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var P={updateType_:function($){this.outputConnection.setCheck($==="NUMBER"?"Number":"String")},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("type",this.getFieldValue("TYPE")),$},domToMutation:function($){this.updateType_($.getAttribute("type"))}};U.text_prompt_ext=Object.assign({},P,{init:function(){var $=[[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),$.setValidator(R=>{this.updateType_(R)}),this.appendValueInput("TEXT").appendField($,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),U.text_prompt=Object.assign({},P,{init:function(){this.mixin(w);var $=[[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(p.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),$.setValidator(R=>{this.updateType_(R)}),this.appendDummyInput().appendField($,"TYPE").appendField(this.newQuote_(!0)).appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:p.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),U.text_count={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},U.text_replace={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},U.text_reverse={init:function(){this.jsonInit({message0:p.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:p.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:p.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var w={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function($){for(let R=0,ee;ee=this.inputList[R];R++)for(let ie=0,Ue;Ue=ee.fieldRow[ie];ie++)if($===Ue.name){ee.insertFieldAt(ie,this.newQuote_(!0)),ee.insertFieldAt(ie+2,this.newQuote_(!1));return}console.warn('field named "'+$+'" not found in '+this.toDevString())},newQuote_:function($){return $=this.RTL?!$:$,p.fromJson$$module$build$src$core$field_registry({type:"field_image",src:$?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:$?"":""})}},L=function(){this.mixin(w),this.quoteField_("TEXT")},J={itemCount_:0,mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("items",`${this.itemCount_}`),$},domToMutation:function($){this.itemCount_=parseInt($.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function($){this.itemCount_=$.itemCount,this.updateShape_()},decompose:function($){const R=$.newBlock("text_create_join_container");R.initSvg();let ee=R.getInput("STACK").connection;for(let ie=0;ie<this.itemCount_;ie++){const Ue=$.newBlock("text_create_join_item");Ue.initSvg(),ee.connect(Ue.previousConnection),ee=Ue.nextConnection}return R},compose:function($){var R=$.getInputTargetBlock("STACK");for($=[];R;)R.isInsertionMarker()||$.push(R.valueConnection_),R=R.getNextBlock();for(R=0;R<this.itemCount_;R++){const ee=this.getInput("ADD"+R).connection.targetConnection;ee&&!$.includes(ee)&&ee.disconnect()}for(this.itemCount_=$.length,this.updateShape_(),R=0;R<this.itemCount_;R++){let ee;(ee=$[R])==null||ee.reconnect(this,"ADD"+R)}},saveConnections:function($){$=$.getInputTargetBlock("STACK");let R=0;for(;$;){if($.isInsertionMarker()){$=$.getNextBlock();continue}const ee=this.getInput("ADD"+R);$.valueConnection_=ee&&ee.connection.targetConnection,$=$.getNextBlock(),R++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var $=0;$<this.itemCount_;$++)if(!this.getInput("ADD"+$)){const R=this.appendValueInput("ADD"+$).setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT);$===0&&R.appendField(p.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for($=this.itemCount_;this.getInput("ADD"+$);$++)this.removeInput("ADD"+$)}},x=function(){this.mixin(w),this.itemCount_=2,this.updateShape_(),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};p.register$$module$build$src$core$extensions("text_append_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var D=function(){this.setTooltip(()=>p.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},Q={isAt_:!1,mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("at",`${this.isAt_}`),$},domToMutation:function($){$=$.getAttribute("at")!=="false",this.updateAt_($)},updateAt_:function($){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),$&&(this.appendValueInput("AT").setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),p.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=$}},te=function(){this.getField("WHERE").setValidator(function($){$=$==="FROM_START"||$==="FROM_END";const R=this.getSourceBlock();$!==R.isAt_&&R.updateAt_($)}),this.updateAt_(!0),this.setTooltip(()=>{var $=this.getFieldValue("WHERE");let R=p.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return($==="FROM_START"||$==="FROM_END")&&($=$==="FROM_START"?p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(R+="  "+$.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),R})};p.register$$module$build$src$core$extensions("text_indexOf_tooltip",D),p.register$$module$build$src$core$extensions("text_quotes",L),p.registerMixin$$module$build$src$core$extensions("quote_image_mixin",w),p.registerMutator$$module$build$src$core$extensions("text_join_mutator",J,x),p.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",Q,te),p.defineBlocks$$module$build$src$core$common(U);var fe={blocks:U},oe={},Se={setStatements_:function($){this.hasStatements_!==$&&($?(this.appendStatementInput("STACK").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=$)},updateParams_:function(){let $="";this.arguments_.length&&($=p.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),p.disable$$module$build$src$core$events$utils();try{this.setFieldValue($,"PARAMS")}finally{p.enable$$module$build$src$core$events$utils()}},mutationToDom:function($){const R=p.createElement$$module$build$src$core$utils$xml("mutation");$&&R.setAttribute("name",this.getFieldValue("NAME"));for(let ee=0;ee<this.argumentVarModels_.length;ee++){const ie=p.createElement$$module$build$src$core$utils$xml("arg"),Ue=this.argumentVarModels_[ee];ie.setAttribute("name",Ue.getName()),ie.setAttribute("varid",Ue.getId()),$&&this.paramIds_&&ie.setAttribute("paramId",this.paramIds_[ee]),R.appendChild(ie)}return this.hasStatements_||R.setAttribute("statements","false"),R},domToMutation:function($){this.arguments_=[],this.argumentVarModels_=[];for(let ee=0,ie;ie=$.childNodes[ee];ee++)if(ie.nodeName.toLowerCase()==="arg"){var R=ie;const Ue=R.getAttribute("name");R=R.getAttribute("varid")||R.getAttribute("varId"),this.arguments_.push(Ue),R=p.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,R,Ue,""),R!==null?this.argumentVarModels_.push(R):console.log(`Failed to create a variable named "${Ue}", ignoring.`)}this.updateParams_(),p.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_($.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const $=Object.create(null);if(this.argumentVarModels_.length){$.params=[];for(let R=0;R<this.argumentVarModels_.length;R++)$.params.push({name:this.argumentVarModels_[R].getName(),id:this.argumentVarModels_[R].getId()})}return this.hasStatements_||($.hasStatements=!1),$},loadExtraState:function($){if(this.arguments_=[],this.argumentVarModels_=[],$.params)for(let ee=0;ee<$.params.length;ee++){var R=$.params[ee];R=p.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,R.id,R.name,""),this.arguments_.push(R.getName()),this.argumentVarModels_.push(R)}this.updateParams_(),p.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_($.hasStatements!==!1)},decompose:function($){const R=p.createElement$$module$build$src$core$utils$xml("block");R.setAttribute("type","procedures_mutatorcontainer");var ee=p.createElement$$module$build$src$core$utils$xml("statement");ee.setAttribute("name","STACK"),R.appendChild(ee);for(let Ue=0;Ue<this.arguments_.length;Ue++){const At=p.createElement$$module$build$src$core$utils$xml("block");At.setAttribute("type","procedures_mutatorarg");var ie=p.createElement$$module$build$src$core$utils$xml("field");ie.setAttribute("name","NAME");const ds=p.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Ue]);ie.appendChild(ds),At.appendChild(ie),ie=p.createElement$$module$build$src$core$utils$xml("next"),At.appendChild(ie),ee.appendChild(At),ee=ie}return $=p.domToBlock$$module$build$src$core$xml(R,$),this.type==="procedures_defreturn"?$.setFieldValue(this.hasStatements_,"STATEMENTS"):$.removeInput("STATEMENT_INPUT"),p.mutateCallers$$module$build$src$core$procedures(this),$},compose:function($){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let R=$.getInputTargetBlock("STACK");for(;R&&!R.isInsertionMarker();){var ee=R.getFieldValue("NAME");this.arguments_.push(ee),ee=this.workspace.getVariable(ee,""),this.argumentVarModels_.push(ee),this.paramIds_.push(R.id),R=R.nextConnection&&R.nextConnection.targetBlock()}if(this.updateParams_(),p.mutateCallers$$module$build$src$core$procedures(this),$=$.getFieldValue("STATEMENTS"),$!==null&&($=$==="TRUE",this.hasStatements_!==$))if($){this.setStatements_(!0);var ie;(ie=this.statementConnection_)==null||ie.reconnect(this,"STACK"),this.statementConnection_=null}else ie=this.getInput("STACK").connection,(this.statementConnection_=ie.targetConnection)&&(ie=ie.targetBlock(),ie.unplug(),ie.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function($,R){var ee=this.workspace.getVariableById($);if(ee.getType()===""){ee=ee.getName(),R=this.workspace.getVariableById(R);var ie=!1;for(let Ue=0;Ue<this.argumentVarModels_.length;Ue++)this.argumentVarModels_[Ue].getId()===$&&(this.arguments_[Ue]=R.getName(),this.argumentVarModels_[Ue]=R,ie=!0);ie&&(this.displayRenamedVar_(ee,R.getName()),p.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function($){const R=$.getName();let ee=!1,ie;for(let Ue=0;Ue<this.argumentVarModels_.length;Ue++)this.argumentVarModels_[Ue].getId()===$.getId()&&(ie=this.arguments_[Ue],this.arguments_[Ue]=R,ee=!0);ee&&(this.displayRenamedVar_(ie,R),p.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function($,R){this.updateParams_();var ee=this.getIcon(p.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(ee&&ee.bubbleIsVisible()){ee=ee.getWorkspace().getAllBlocks(!1);for(let ie=0,Ue;Ue=ee[ie];ie++)Ue.type==="procedures_mutatorarg"&&p.Names$$module$build$src$core$names.equals($,Ue.getFieldValue("NAME"))&&Ue.setFieldValue(R,"NAME")}},customContextMenu:function($){if(!this.isInFlyout){var R=this.getFieldValue("NAME"),ee={type:this.callType_,extraState:{name:R,params:this.arguments_}};if($.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",R),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,ee)}),!this.isCollapsed())for(R=0;R<this.argumentVarModels_.length;R++){ee=this.argumentVarModels_[R];const ie={type:"variables_get",fields:{VAR:{name:ee.getName(),id:ee.getId(),type:ee.getType()}}};$.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ee.getName()),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,ie)})}}}};oe.procedures_defnoreturn=Object.assign({},Se,{init:function(){var $=p.findLegalName$$module$build$src$core$procedures("",this);$=p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:$}),$.setValidator(p.rename$$module$build$src$core$procedures),$.setSpellcheck(!1),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField($,"NAME").appendField("","PARAMS"),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),oe.procedures_defreturn=Object.assign({},Se,{init:function(){var $=p.findLegalName$$module$build$src$core$procedures("",this);$=p.fromJson$$module$build$src$core$field_registry({type:"field_input",text:$}),$.setValidator(p.rename$$module$build$src$core$procedures),$.setSpellcheck(!1),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField($,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT).appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Xe={init:function(){this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(p.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};oe.procedures_mutatorcontainer=Xe;var Y=class extends p.FieldTextInput$$module$build$src$core$field_textinput{constructor(){super(...arguments),this.editingInteractively=!1}showEditor_($){super.showEditor_($),this.editingInteractively=!0,this.editingVariable=void 0}onFinishEditing_($){super.onFinishEditing_($),this.editingInteractively=!1}},ve={init:function(){const $=new Y(p.DEFAULT_ARG$$module$build$src$core$procedures,this.validator_);this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField($,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1},validator_:function($){var R=this.getSourceBlock();const ee=R.workspace.getRootWorkspace();if($=$.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!$)return null;const ie=(R.workspace.targetWorkspace||R.workspace).getAllBlocks(!1),Ue=$.toLowerCase();for(let At=0;At<ie.length;At++){if(ie[At].id===this.getSourceBlock().id)continue;const ds=ie[At].getFieldValue("NAME");if(ds&&ds.toLowerCase()===Ue)return null}return R.isInFlyout||((R=ee.getVariable($,""))&&R.getName()!==$&&ee.renameVariableById(R.getId(),$),R||(this.editingInteractively?this.editingVariable?ee.renameVariableById(this.editingVariable.getId(),$):this.editingVariable=ee.createVariable($,""):ee.createVariable($,""))),$}};oe.procedures_mutatorarg=ve;var T="DISABLED_PROCEDURE_DEFINITION",Ie={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function($,R){p.Names$$module$build$src$core$names.equals($,this.getProcedureCall())&&(this.setFieldValue(R,"NAME"),this.setTooltip((this.outputConnection?p.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:p.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",R)))},setProcedureParameters_:function($,R){var ee=p.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((ee=(ee=ee&&ee.getIcon(p.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&ee.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),$.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=R;else{if(R.length!==$.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Ue=0;Ue<this.arguments_.length;Ue++){var ie=this.getInput("ARG"+Ue);ie&&(ie=ie.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ue]]=ie,ee&&ie&&!R.includes(this.quarkIds_[Ue])&&(ie.disconnect(),ie.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat($),this.argumentVarModels_=[],$=0;$<this.arguments_.length;$++)ee=p.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[$],""),this.argumentVarModels_.push(ee);if(this.updateShape_(),this.quarkIds_=R){for(R=0;R<this.arguments_.length;R++)if($=this.quarkIds_[R],$ in this.quarkConnections_){let Ue;(Ue=this.quarkConnections_[$])!=null&&Ue.reconnect(this,"ARG"+R)||delete this.quarkConnections_[$]}}}},updateShape_:function(){for(var $=0;$<this.arguments_.length;$++){var R=this.getField("ARGNAME"+$);if(R){p.disable$$module$build$src$core$events$utils();try{R.setValue(this.arguments_[$])}finally{p.enable$$module$build$src$core$events$utils()}}else R=p.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[$]}),this.appendValueInput("ARG"+$).setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT).appendField(R,"ARGNAME"+$)}for($=this.arguments_.length;this.getInput("ARG"+$);$++)this.removeInput("ARG"+$);($=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||$.appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&$.removeField("WITH"))},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");$.setAttribute("name",this.getProcedureCall());for(let R=0;R<this.arguments_.length;R++){const ee=p.createElement$$module$build$src$core$utils$xml("arg");ee.setAttribute("name",this.arguments_[R]),$.appendChild(ee)}return $},domToMutation:function($){var R=$.getAttribute("name");this.renameProcedure(this.getProcedureCall(),R),R=[];const ee=[];for(let ie=0,Ue;Ue=$.childNodes[ie];ie++)Ue.nodeName.toLowerCase()==="arg"&&(R.push(Ue.getAttribute("name")),ee.push(Ue.getAttribute("paramId")));this.setProcedureParameters_(R,ee)},saveExtraState:function(){const $=Object.create(null);return $.name=this.getProcedureCall(),this.arguments_.length&&($.params=this.arguments_),$},loadExtraState:function($){if(this.renameProcedure(this.getProcedureCall(),$.name),$=$.params){const R=[];R.length=$.length,R.fill(null),this.setProcedureParameters_($,R)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function($){if(this.workspace&&!this.workspace.isFlyout&&$.recordUndo)if($.type===p.BLOCK_CREATE$$module$build$src$core$events$events&&$.ids.includes(this.id)){var R=this.getProcedureCall(),ee=p.getDefinition$$module$build$src$core$procedures(R,this.workspace);if(!ee||ee.type===this.defType_&&JSON.stringify(ee.getVars())===JSON.stringify(this.arguments_)||(ee=null),ee)ee.isEnabled()||(this.setDisabledReason(!0,T),this.setWarningText(p.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",R)));else{p.setGroup$$module$build$src$core$events$utils($.group),$=p.createElement$$module$build$src$core$utils$xml("xml"),R=p.createElement$$module$build$src$core$utils$xml("block"),R.setAttribute("type",this.defType_),ee=this.getRelativeToSurfaceXY();var ie=ee.y+p.config$$module$build$src$core$config.snapRadius*2;R.setAttribute("x",`${ee.x+p.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),R.setAttribute("y",`${ie}`),ee=this.mutationToDom(),R.appendChild(ee),ee=p.createElement$$module$build$src$core$utils$xml("field"),ee.setAttribute("name","NAME"),ie=this.getProcedureCall();const Ue=p.findLegalName$$module$build$src$core$procedures(ie,this);ie!==Ue&&this.renameProcedure(ie,Ue),ee.appendChild(p.createTextNode$$module$build$src$core$utils$xml(ie)),R.appendChild(ee),$.appendChild(R),p.domToWorkspace$$module$build$src$core$xml($,this.workspace),p.setGroup$$module$build$src$core$events$utils(!1)}}else $.type===p.BLOCK_DELETE$$module$build$src$core$events$events?(R=this.getProcedureCall(),p.getDefinition$$module$build$src$core$procedures(R,this.workspace)||(p.setGroup$$module$build$src$core$events$utils($.group),this.dispose(!0),p.setGroup$$module$build$src$core$events$utils(!1))):$.type===p.BLOCK_CHANGE$$module$build$src$core$events$events&&$.element==="disabled"&&(R=this.getProcedureCall(),(ie=p.getDefinition$$module$build$src$core$procedures(R,this.workspace))&&ie.id===$.blockId&&((ee=p.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),p.setGroup$$module$build$src$core$events$utils($.group),$=ie.isEnabled(),this.setDisabledReason(!$,T),this.setWarningText($?null:p.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",R)),p.setGroup$$module$build$src$core$events$utils(ee)))},customContextMenu:function($){if(this.workspace.isMovable()){var R=this.getProcedureCall(),ee=this.workspace;$.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const ie=p.getDefinition$$module$build$src$core$procedures(R,ee);ie&&(ee.centerOnBlock(ie.id),p.getFocusManager$$module$build$src$core$focus_manager().focusNode(ie))}})}}};oe.procedures_callnoreturn=Object.assign({},Ie,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),oe.procedures_callreturn=Object.assign({},Ie,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var ce="UNPARENTED_IFRETURN",ue={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(p.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(p.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("value",String(Number(this.hasReturnValue_))),$},domToMutation:function($){this.hasReturnValue_=$.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function($){if(!(this.workspace.isDragging&&this.workspace.isDragging()||$.type!==p.BLOCK_MOVE$$module$build$src$core$events$events&&$.type!==p.BLOCK_CREATE$$module$build$src$core$events$events)){$=!1;var R=this;do{if(this.FUNCTION_TYPES.includes(R.type)){$=!0;break}R=R.getSurroundParent()}while(R);if($?(R.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):R.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(p.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(p.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{p.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!$,ce)}finally{p.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};oe.procedures_ifreturn=ue,p.defineBlocks$$module$build$src$core$common(oe);var Fe={blocks:oe},Oe=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),N={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};p.register$$module$build$src$core$extensions("math_op_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("OP",N));var W={mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation"),R=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return $.setAttribute("divisor_input",String(R)),$},domToMutation:function($){$=$.getAttribute("divisor_input")==="true",this.updateShape_($)},updateShape_:function($){const R=this.getInput("DIVISOR");$?R||this.appendValueInput("DIVISOR").setCheck("Number"):R&&this.removeInput("DIVISOR")}},q=function(){this.getField("PROPERTY").setValidator(function($){$=$==="DIVISIBLE_BY",this.getSourceBlock().updateShape_($)})};p.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",W,q),p.register$$module$build$src$core$extensions("math_change_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Ce={updateType_:function($){$==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("op",this.getFieldValue("OP")),$},domToMutation:function($){if($=$.getAttribute("op"),$===null)throw new TypeError("xmlElement had no op attribute");this.updateType_($)}},Ae=function(){this.getField("OP").setValidator((function($){this.updateType_($)}).bind(this))};p.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Ce,Ae),p.defineBlocks$$module$build$src$core$common(Oe);var Me={blocks:Oe},He=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),yt={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};p.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",yt));var Qe={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};p.register$$module$build$src$core$extensions("controls_flow_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Qe));var pt={customContextMenu:function($){if(!this.isInFlyout){var R=this.getField("VAR"),ee=R.getVariable().getName();this.isCollapsed()||ee===null||(R={type:"variables_get",fields:{VAR:R.saveState(!0)}},$.push({enabled:!0,text:p.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ee),callback:p.callbackFactory$$module$build$src$core$contextmenu(this,R)}))}}};p.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",pt),p.register$$module$build$src$core$extensions("controls_for_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),p.register$$module$build$src$core$extensions("controls_forEach_tooltip",p.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var We=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),Dt="CONTROL_FLOW_NOT_IN_LOOP",be={getSurroundLoop:function(){let $=this;do{if(We.has($.type))return $;$=$.getSurroundParent()}while($);return null},onchange:function($){const R=this.workspace;if(R.isDragging&&!R.isDragging()&&($.type===p.BLOCK_MOVE$$module$build$src$core$events$events||$.type===p.BLOCK_CREATE$$module$build$src$core$events$events)&&($=!!this.getSurroundLoop(),this.setWarningText($?null:p.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{p.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!$,Dt)}finally{p.setRecordUndo$$module$build$src$core$events$utils(!0)}}};p.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",be),p.defineBlocks$$module$build$src$core$common(He);var Ge={blocks:He,loopTypes:We},_=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),me={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};p.register$$module$build$src$core$extensions("logic_op_tooltip",p.buildTooltipForDropdown$$module$build$src$core$extensions("OP",me));var Ee={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const $=p.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&$.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&$.setAttribute("else","1"),$},domToMutation:function($){this.elseifCount_=parseInt($.getAttribute("elseif"),10)||0,this.elseCount_=parseInt($.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const $=Object.create(null);return this.elseifCount_&&($.elseIfCount=this.elseifCount_),this.elseCount_&&($.hasElse=!0),$},loadExtraState:function($){this.elseifCount_=$.elseIfCount||0,this.elseCount_=$.hasElse?1:0,this.updateShape_()},decompose:function($){const R=$.newBlock("controls_if_if");R.initSvg();let ee=R.nextConnection;for(let ie=1;ie<=this.elseifCount_;ie++){const Ue=$.newBlock("controls_if_elseif");Ue.initSvg(),ee.connect(Ue.previousConnection),ee=Ue.nextConnection}return this.elseCount_&&($=$.newBlock("controls_if_else"),$.initSvg(),ee.connect($.previousConnection)),R},compose:function($){$=$.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const R=[null],ee=[null];let ie=null;for(;$;){if(!$.isInsertionMarker())switch($.type){case"controls_if_elseif":this.elseifCount_++,R.push($.valueConnection_),ee.push($.statementConnection_);break;case"controls_if_else":this.elseCount_++,ie=$.statementConnection_;break;default:throw TypeError("Unknown block type: "+$.type)}$=$.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(R,ee,ie)},saveConnections:function($){$=$.nextConnection.targetBlock();let R=1;for(;$;){if(!$.isInsertionMarker())switch($.type){case"controls_if_elseif":var ee=this.getInput("IF"+R);const ie=this.getInput("DO"+R);$.valueConnection_=ee&&ee.connection.targetConnection,$.statementConnection_=ie&&ie.connection.targetConnection,R++;break;case"controls_if_else":ee=this.getInput("ELSE"),$.statementConnection_=ee&&ee.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+$.type)}$=$.getNextBlock()}},rebuildShape_:function(){const $=[null],R=[null];let ee=null;this.getInput("ELSE")&&(ee=this.getInput("ELSE").connection.targetConnection);for(let ie=1;this.getInput("IF"+ie);ie++){const Ue=this.getInput("IF"+ie),At=this.getInput("DO"+ie);$.push(Ue.connection.targetConnection),R.push(At.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_($,R,ee)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var $=1;this.getInput("IF"+$);$++)this.removeInput("IF"+$),this.removeInput("DO"+$);for($=1;$<=this.elseifCount_;$++)this.appendValueInput("IF"+$).setCheck("Boolean").appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+$).appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(p.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function($,R,ee){for(let ie=1;ie<=this.elseifCount_;ie++){let Ue;(Ue=$[ie])==null||Ue.reconnect(this,"IF"+ie);let At;(At=R[ie])==null||At.reconnect(this,"DO"+ie)}ee?.reconnect(this,"ELSE")}};p.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Ee,null,["controls_if_elseif","controls_if_else"]);var M=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return p.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};p.register$$module$build$src$core$extensions("controls_if_tooltip",M);var B={onchange:function($){this.prevBlocks_||(this.prevBlocks_=[null,null]);var R=this.getInputTargetBlock("A");const ee=this.getInputTargetBlock("B");R&&ee&&!this.workspace.connectionChecker.doTypeChecks(R.outputConnection,ee.outputConnection)&&(p.setGroup$$module$build$src$core$events$utils($.group),$=this.prevBlocks_[0],$!==R&&(R.unplug(),!$||$.isDisposed()||$.isShadow()||this.getInput("A").connection.connect($.outputConnection)),R=this.prevBlocks_[1],R!==ee&&(ee.unplug(),!R||R.isDisposed()||R.isShadow()||this.getInput("B").connection.connect(R.outputConnection)),this.bumpNeighbours(),p.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},se=function(){this.mixin(B)};p.register$$module$build$src$core$extensions("logic_compare",se);var we={prevParentConnection_:null,onchange:function($){const R=this.getInputTargetBlock("THEN"),ee=this.getInputTargetBlock("ELSE"),ie=this.outputConnection.targetConnection;if((R||ee)&&ie)for(let Ue=0;Ue<2;Ue++){const At=Ue===1?R:ee;At&&!At.workspace.connectionChecker.doTypeChecks(At.outputConnection,ie)&&(p.setGroup$$module$build$src$core$events$utils($.group),ie===this.prevParentConnection_?(this.unplug(),ie.getSourceBlock().bumpNeighbours()):(At.unplug(),At.bumpNeighbours()),p.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=ie}};p.registerMixin$$module$build$src$core$extensions("logic_ternary",we),p.defineBlocks$$module$build$src$core$common(_);var Be={blocks:_},le=p.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Ve={init:function(){this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new p.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("items",String(this.itemCount_)),$},domToMutation:function($){if($=$.getAttribute("items"),!$)throw new TypeError("element did not have items");this.itemCount_=parseInt($,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function($){this.itemCount_=$.itemCount,this.updateShape_()},decompose:function($){const R=$.newBlock("lists_create_with_container");R.initSvg();let ee=R.getInput("STACK").connection;for(let ie=0;ie<this.itemCount_;ie++){const Ue=$.newBlock("lists_create_with_item");if(Ue.initSvg(),!Ue.previousConnection)throw Error("itemBlock has no previousConnection");ee.connect(Ue.previousConnection),ee=Ue.nextConnection}return R},compose:function($){var R=$.getInputTargetBlock("STACK");for($=[];R;)R.isInsertionMarker()||$.push(R.valueConnection_),R=R.getNextBlock();for(R=0;R<this.itemCount_;R++){const ee=this.getInput("ADD"+R).connection.targetConnection;ee&&!$.includes(ee)&&ee.disconnect()}for(this.itemCount_=$.length,this.updateShape_(),R=0;R<this.itemCount_;R++){let ee;(ee=$[R])==null||ee.reconnect(this,"ADD"+R)}},saveConnections:function($){$=$.getInputTargetBlock("STACK");let R=0;for(;$;){if($.isInsertionMarker()){$=$.getNextBlock();continue}const ee=this.getInput("ADD"+R);let ie;$.valueConnection_=(ie=ee)==null?void 0:ie.connection.targetConnection,$=$.getNextBlock(),R++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var $=0;$<this.itemCount_;$++)if(!this.getInput("ADD"+$)){const R=this.appendValueInput("ADD"+$).setAlign(p.Align$$module$build$src$core$inputs$align.RIGHT);$===0&&R.appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for($=this.itemCount_;this.getInput("ADD"+$);$++)this.removeInput("ADD"+$)}};le.lists_create_with=Ve;var Ye={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};le.lists_create_with_container=Ye;var k={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};le.lists_create_with_item=k;var qe={init:function(){var $=[[p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),!$)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField($,"END"),this.setInputsInline(!0),this.setTooltip(()=>p.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};le.lists_indexOf=qe;var ut={init:function(){var $=[[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),$.setValidator(function(R){R=R==="REMOVE",this.getSourceBlock().updateStatement_(R)}),this.appendValueInput("VALUE").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField($,"MODE").appendField("","SPACE"),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),$.setValidator(function(R){const ee=this.getValue();R=R==="FROM_START"||R==="FROM_END",R!==(ee==="FROM_START"||ee==="FROM_END")&&this.getSourceBlock().updateAt_(R)}),this.appendDummyInput().appendField($,"WHERE"),this.appendDummyInput("AT"),p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const R=this.getFieldValue("MODE"),ee=this.getFieldValue("WHERE");let ie="";switch(R+" "+ee){case"GET FROM_START":case"GET FROM_END":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":ie=p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(ee==="FROM_START"||ee==="FROM_END")&&(ie+="  "+(ee==="FROM_START"?p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ie})},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");$.setAttribute("statement",String(!this.outputConnection));const R=this.getInput("AT")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return $.setAttribute("at",String(R)),$},domToMutation:function($){const R=$.getAttribute("statement")==="true";this.updateStatement_(R),$=$.getAttribute("at")!=="false",this.updateAt_($)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function($){$.isStatement?this.updateStatement_(!0):typeof $=="string"&&this.domToMutation(p.textToDom$$module$build$src$core$utils$xml($))},updateStatement_:function($){$!==!this.outputConnection&&(this.unplug(!0,!0),$?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function($){this.removeInput("AT"),this.removeInput("ORDINAL",!0),$?(this.appendValueInput("AT").setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};le.lists_getIndex=ut;var Ze={init:function(){var $=[[p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[p.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:$}),this.appendDummyInput().appendField($,"MODE").appendField("","SPACE"),$=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),$.setValidator(function(R){const ee=this.getValue();R=R==="FROM_START"||R==="FROM_END",R!==(ee==="FROM_START"||ee==="FROM_END")&&this.getSourceBlock().updateAt_(R)}),this.appendDummyInput().appendField($,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const R=this.getFieldValue("MODE"),ee=this.getFieldValue("WHERE");let ie="";switch(R+" "+ee){case"SET FROM_START":case"SET FROM_END":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":ie=p.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(ee==="FROM_START"||ee==="FROM_END")&&(ie+="  "+p.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ie})},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation"),R=this.getInput("AT")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return $.setAttribute("at",String(R)),$},domToMutation:function($){$=$.getAttribute("at")!=="false",this.updateAt_($)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function($){this.removeInput("AT"),this.removeInput("ORDINAL",!0),$?(this.appendValueInput("AT").setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};le.lists_setIndex=Ze;var ht={init:function(){this.WHERE_OPTIONS_1=[[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const $=R=>{const ee=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+R]});return ee.setValidator(function(ie){const Ue=this.getValue();ie=ie==="FROM_START"||ie==="FROM_END",ie!==(Ue==="FROM_START"||Ue==="FROM_END")&&this.getSourceBlock().updateAt_(R,ie)}),ee};this.appendDummyInput("WHERE1_INPUT").appendField($(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField($(2),"WHERE2"),this.appendDummyInput("AT2"),p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");var R=this.getInput("AT1")instanceof p.ValueInput$$module$build$src$core$inputs$value_input;return $.setAttribute("at1",String(R)),R=this.getInput("AT2")instanceof p.ValueInput$$module$build$src$core$inputs$value_input,$.setAttribute("at2",String(R)),$},domToMutation:function($){const R=$.getAttribute("at1")==="true";$=$.getAttribute("at2")==="true",this.updateAt_(1,R),this.updateAt_(2,$)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function($,R){this.removeInput("AT"+$),this.removeInput("ORDINAL"+$,!0),R?(this.appendValueInput("AT"+$).setCheck("Number"),p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+$).appendField(p.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+$),$===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),p.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};le.lists_getSublist=ht,le.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},le.lists_split={init:function(){const $=p.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[p.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[p.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!$)throw Error("field_dropdown not found");$.setValidator(R=>{this.updateType_(R)}),this.setHelpUrl(p.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField($,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(p.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const R=this.getFieldValue("MODE");if(R==="SPLIT")return p.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(R==="JOIN")return p.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+R)})},updateType_:function($){if(this.getFieldValue("MODE")!==$){const R=this.getInput("INPUT").connection;R.setShadowDom(null);const ee=R.targetBlock();ee&&(R.disconnect(),ee.isShadow()?ee.dispose(!1):this.bumpNeighbours())}$==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const $=p.createElement$$module$build$src$core$utils$xml("mutation");return $.setAttribute("mode",this.getFieldValue("MODE")),$},domToMutation:function($){this.updateType_($.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function($){this.updateType_($.mode)}},p.defineBlocks$$module$build$src$core$common(le);var pi={blocks:le},Ct=Object.assign({},le,_,He,Oe,oe,U,C,G),wi={blocks:Ct,lists:pi,logic:Be,loops:Ge,math:Me,procedures:Fe,texts:fe,variables:A,variablesDynamic:E};return wi.__namespace__=p,wi})}(Tg)),Tg.exports}var xb=Db();const Bb=l$(xb),{blocks:vN,lists:yN,logic:IN,loops:ON,math:RN,procedures:CN,texts:AN,variables:NN,variablesDynamic:LN}=Bb;var Eg={exports:{}},Pb=Eg.exports,j_;function Ub(){return j_||(j_=1,function(Pe,ze){(function(u,p){Pe.exports=p(Tf())})(Pb,function(u){var p=u.__namespace__,G=function(g,y){return["[]",k.ATOMIC]},b=function(g,y){const K=Array(g.itemCount_);for(let re=0;re<g.itemCount_;re++)K[re]=y.valueToCode(g,"ADD"+re,k.NONE)||"null";return["["+K.join(", ")+"]",k.ATOMIC]},I=function(g,y){const K=y.provideFunction_("listsRepeat",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),re=y.valueToCode(g,"ITEM",k.NONE)||"null";return g=y.valueToCode(g,"NUM",k.NONE)||"0",[K+"("+re+", "+g+")",k.FUNCTION_CALL]},S=function(g,y){return[(y.valueToCode(g,"VALUE",k.MEMBER)||"[]")+".length",k.MEMBER]},E=function(g,y){return["!"+(y.valueToCode(g,"VALUE",k.MEMBER)||"[]")+".length",k.LOGICAL_NOT]},C=function(g,y){const K=g.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",re=y.valueToCode(g,"FIND",k.NONE)||"''";return y=(y.valueToCode(g,"VALUE",k.MEMBER)||"[]")+"."+K+"("+re+")",g.workspace.options.oneBasedIndex?[y+" + 1",k.ADDITION]:[y,k.FUNCTION_CALL]},z=function(g,y){const K=g.getFieldValue("MODE")||"GET",re=g.getFieldValue("WHERE")||"FROM_START";var Ne=y.valueToCode(g,"VALUE",re==="RANDOM"?k.NONE:k.MEMBER)||"[]";switch(re){case"FIRST":if(K==="GET")return[Ne+"[0]",k.MEMBER];if(K==="GET_REMOVE")return[Ne+".shift()",k.MEMBER];if(K==="REMOVE")return Ne+`.shift();
`;break;case"LAST":if(K==="GET")return[Ne+".slice(-1)[0]",k.MEMBER];if(K==="GET_REMOVE")return[Ne+".pop()",k.MEMBER];if(K==="REMOVE")return Ne+`.pop();
`;break;case"FROM_START":if(g=y.getAdjusted(g,"AT"),K==="GET")return[Ne+"["+g+"]",k.MEMBER];if(K==="GET_REMOVE")return[Ne+".splice("+g+", 1)[0]",k.FUNCTION_CALL];if(K==="REMOVE")return Ne+".splice("+g+`, 1);
`;break;case"FROM_END":if(g=y.getAdjusted(g,"AT",1,!0),K==="GET")return[Ne+".slice("+g+")[0]",k.FUNCTION_CALL];if(K==="GET_REMOVE")return[Ne+".splice("+g+", 1)[0]",k.FUNCTION_CALL];if(K==="REMOVE")return Ne+".splice("+g+", 1);";break;case"RANDOM":if(Ne=y.provideFunction_("listsGetRandomItem",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ne+", "+(K!=="GET")+")",K==="GET"||K==="GET_REMOVE")return[Ne,k.FUNCTION_CALL];if(K==="REMOVE")return Ne+`;
`}throw Error("Unhandled combination (lists_getIndex).")},V=function(g,y){function K(){if(re.match(/^\w+$/))return"";const Yi=y.nameDB_.getDistinctName("tmpList",p.NameType$$module$build$src$core$names.VARIABLE),ps="var "+Yi+" = "+re+`;
`;return re=Yi,ps}let re=y.valueToCode(g,"LIST",k.MEMBER)||"[]";const Ne=g.getFieldValue("MODE")||"GET";var Ke=g.getFieldValue("WHERE")||"FROM_START";const ct=y.valueToCode(g,"TO",k.ASSIGNMENT)||"null";switch(Ke){case"FIRST":if(Ne==="SET")return re+"[0] = "+ct+`;
`;if(Ne==="INSERT")return re+".unshift("+ct+`);
`;break;case"LAST":if(Ne==="SET")return K()+(re+"["+re+".length - 1] = "+ct+`;
`);if(Ne==="INSERT")return re+".push("+ct+`);
`;break;case"FROM_START":if(g=y.getAdjusted(g,"AT"),Ne==="SET")return re+"["+g+"] = "+ct+`;
`;if(Ne==="INSERT")return re+".splice("+g+", 0, "+ct+`);
`;break;case"FROM_END":if(g=y.getAdjusted(g,"AT",1,!1,k.SUBTRACTION),Ke=K(),Ne==="SET")return Ke+(re+"["+re+".length - "+g+"] = "+ct+`;
`);if(Ne==="INSERT")return Ke+(re+".splice("+re+".length - "+g+", 0, "+ct+`);
`);break;case"RANDOM":if(g=K(),Ke=y.nameDB_.getDistinctName("tmpX",p.NameType$$module$build$src$core$names.VARIABLE),g+="var "+Ke+" = Math.floor(Math.random() * "+re+`.length);
`,Ne==="SET")return g+(re+"["+Ke+"] = "+ct+`;
`);if(Ne==="INSERT")return g+(re+".splice("+Ke+", 0, "+ct+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},j=function(g,y){var K={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},re=y.valueToCode(g,"LIST",k.MEMBER)||"[]";const Ne=g.getFieldValue("WHERE1"),Ke=g.getFieldValue("WHERE2");if(Ne==="FIRST"&&Ke==="LAST")re+=".slice(0)";else if(re.match(/^\w+$/)||Ne!=="FROM_END"&&Ke==="FROM_START"){switch(Ne){case"FROM_START":K=y.getAdjusted(g,"AT1");break;case"FROM_END":K=y.getAdjusted(g,"AT1",1,!1,k.SUBTRACTION),K=re+".length - "+K;break;case"FIRST":K="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Ke){case"FROM_START":y=y.getAdjusted(g,"AT2",1);break;case"FROM_END":y=y.getAdjusted(g,"AT2",0,!1,k.SUBTRACTION),y=re+".length - "+y;break;case"LAST":y=re+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}re=re+".slice("+K+", "+y+")"}else{const ct=y.getAdjusted(g,"AT1");g=y.getAdjusted(g,"AT2"),re=y.provideFunction_("subsequence"+K[Ne]+K[Ke],`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ne==="FROM_END"||Ne==="FROM_START"?", at1":""}${Ke==="FROM_END"||Ke==="FROM_START"?", at2":""}) {
  var start = ${ut("sequence",Ne,"at1")};
  var end = ${ut("sequence",Ke,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+re+(Ne==="FROM_END"||Ne==="FROM_START"?", "+ct:"")+(Ke==="FROM_END"||Ke==="FROM_START"?", "+g:"")+")"}return[re,k.FUNCTION_CALL]},A=function(g,y){const K=y.valueToCode(g,"LIST",k.FUNCTION_CALL)||"[]",re=g.getFieldValue("DIRECTION")==="1"?1:-1;return g=g.getFieldValue("TYPE"),y=y.provideFunction_("listsGetSortCompare",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[K+".slice().sort("+y+'("'+g+'", '+re+"))",k.FUNCTION_CALL]},U=function(g,y){let K=y.valueToCode(g,"INPUT",k.MEMBER);if(y=y.valueToCode(g,"DELIM",k.NONE)||"''",g=g.getFieldValue("MODE"),g==="SPLIT")K||(K="''"),g="split";else if(g==="JOIN")K||(K="[]"),g="join";else throw Error("Unknown mode: "+g);return[K+"."+g+"("+y+")",k.FUNCTION_CALL]},O=function(g,y){return[(y.valueToCode(g,"LIST",k.FUNCTION_CALL)||"[]")+".slice().reverse()",k.FUNCTION_CALL]},P=function(g,y){var K=0;let re="";y.STATEMENT_PREFIX&&(re+=y.injectId(y.STATEMENT_PREFIX,g));do{const Ne=y.valueToCode(g,"IF"+K,k.NONE)||"false";let Ke=y.statementToCode(g,"DO"+K);y.STATEMENT_SUFFIX&&(Ke=y.prefixLines(y.injectId(y.STATEMENT_SUFFIX,g),y.INDENT)+Ke),re+=(K>0?" else ":"")+"if ("+Ne+`) {
`+Ke+"}",K++}while(g.getInput("IF"+K));return(g.getInput("ELSE")||y.STATEMENT_SUFFIX)&&(K=g.getInput("ELSE")?y.statementToCode(g,"ELSE"):"",y.STATEMENT_SUFFIX&&(K=y.prefixLines(y.injectId(y.STATEMENT_SUFFIX,g),y.INDENT)+K),re+=` else {
`+K+"}"),re+`
`},w=function(g,y){const K={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[g.getFieldValue("OP")],re=K==="=="||K==="!="?k.EQUALITY:k.RELATIONAL,Ne=y.valueToCode(g,"A",re)||"0";return g=y.valueToCode(g,"B",re)||"0",[Ne+" "+K+" "+g,re]},L=function(g,y){const K=g.getFieldValue("OP")==="AND"?"&&":"||",re=K==="&&"?k.LOGICAL_AND:k.LOGICAL_OR;let Ne=y.valueToCode(g,"A",re);return g=y.valueToCode(g,"B",re),Ne||g?(y=K==="&&"?"true":"false",Ne||(Ne=y),g||(g=y)):g=Ne="false",[Ne+" "+K+" "+g,re]},J=function(g,y){const K=k.LOGICAL_NOT;return["!"+(y.valueToCode(g,"BOOL",K)||"true"),K]},x=function(g,y){return[g.getFieldValue("BOOL")==="TRUE"?"true":"false",k.ATOMIC]},D=function(g,y){return["null",k.ATOMIC]},Q=function(g,y){const K=y.valueToCode(g,"IF",k.CONDITIONAL)||"false",re=y.valueToCode(g,"THEN",k.CONDITIONAL)||"null";return g=y.valueToCode(g,"ELSE",k.CONDITIONAL)||"null",[K+" ? "+re+" : "+g,k.CONDITIONAL]},te=function(g,y){let K;K=g.getField("TIMES")?String(Number(g.getFieldValue("TIMES"))):y.valueToCode(g,"TIMES",k.ASSIGNMENT)||"0";let re=y.statementToCode(g,"DO");re=y.addLoopTrap(re,g),g="";const Ne=y.nameDB_.getDistinctName("count",p.NameType$$module$build$src$core$names.VARIABLE);let Ke=K;return K.match(/^\w+$/)||p.isNumber$$module$build$src$core$utils$string(K)||(Ke=y.nameDB_.getDistinctName("repeat_end",p.NameType$$module$build$src$core$names.VARIABLE),g+="var "+Ke+" = "+K+`;
`),g+("for (var "+Ne+" = 0; "+Ne+" < "+Ke+"; "+Ne+`++) {
`+re+`}
`)},fe=function(g,y){const K=g.getFieldValue("MODE")==="UNTIL";let re=y.valueToCode(g,"BOOL",K?k.LOGICAL_NOT:k.NONE)||"false",Ne=y.statementToCode(g,"DO");return Ne=y.addLoopTrap(Ne,g),K&&(re="!"+re),"while ("+re+`) {
`+Ne+`}
`},oe=function(g,y){var K=y.getVariableName(g.getFieldValue("VAR")),re=y.valueToCode(g,"FROM",k.ASSIGNMENT)||"0",Ne=y.valueToCode(g,"TO",k.ASSIGNMENT)||"0";const Ke=y.valueToCode(g,"BY",k.ASSIGNMENT)||"1";let ct=y.statementToCode(g,"DO");if(ct=y.addLoopTrap(ct,g),p.isNumber$$module$build$src$core$utils$string(re)&&p.isNumber$$module$build$src$core$utils$string(Ne)&&p.isNumber$$module$build$src$core$utils$string(Ke))y=Number(re)<=Number(Ne),g="for ("+K+" = "+re+"; "+K+(y?" <= ":" >= ")+Ne+"; "+K,K=Math.abs(Number(Ke)),g=K===1?g+(y?"++":"--"):g+((y?" += ":" -= ")+K),g+=`) {
`+ct+`}
`;else{g="";let Yi=re;re.match(/^\w+$/)||p.isNumber$$module$build$src$core$utils$string(re)||(Yi=y.nameDB_.getDistinctName(K+"_start",p.NameType$$module$build$src$core$names.VARIABLE),g+="var "+Yi+" = "+re+`;
`),re=Ne,Ne.match(/^\w+$/)||p.isNumber$$module$build$src$core$utils$string(Ne)||(re=y.nameDB_.getDistinctName(K+"_end",p.NameType$$module$build$src$core$names.VARIABLE),g+="var "+re+" = "+Ne+`;
`),Ne=y.nameDB_.getDistinctName(K+"_inc",p.NameType$$module$build$src$core$names.VARIABLE),g+="var "+Ne+" = ",g=p.isNumber$$module$build$src$core$utils$string(Ke)?g+(Math.abs(Number(Ke))+`;
`):g+("Math.abs("+Ke+`);
`),g+="if ("+Yi+" > "+re+`) {
`,g+=y.INDENT+Ne+" = -"+Ne+`;
`,g=g+`}
for (`+(K+" = "+Yi+"; "+Ne+" >= 0 ? "+K+" <= "+re+" : "+K+" >= "+re+"; "+K+" += "+Ne+`) {
`+ct+`}
`)}return g},Se=function(g,y){const K=y.getVariableName(g.getFieldValue("VAR"));var re=y.valueToCode(g,"LIST",k.ASSIGNMENT)||"[]";let Ne=y.statementToCode(g,"DO");Ne=y.addLoopTrap(Ne,g),g="";let Ke=re;return re.match(/^\w+$/)||(Ke=y.nameDB_.getDistinctName(K+"_list",p.NameType$$module$build$src$core$names.VARIABLE),g+="var "+Ke+" = "+re+`;
`),re=y.nameDB_.getDistinctName(K+"_index",p.NameType$$module$build$src$core$names.VARIABLE),Ne=y.INDENT+K+" = "+Ke+"["+re+`];
`+Ne,g+("for (var "+re+" in "+Ke+`) {
`+Ne+`}
`)},Xe=function(g,y){let K="";if(y.STATEMENT_PREFIX&&(K+=y.injectId(y.STATEMENT_PREFIX,g)),y.STATEMENT_SUFFIX&&(K+=y.injectId(y.STATEMENT_SUFFIX,g)),y.STATEMENT_PREFIX){const re=g.getSurroundLoop();re&&!re.suppressPrefixSuffix&&(K+=y.injectId(y.STATEMENT_PREFIX,re))}switch(g.getFieldValue("FLOW")){case"BREAK":return K+`break;
`;case"CONTINUE":return K+`continue;
`}throw Error("Unknown flow statement.")},Y=function(g,y){return g=Number(g.getFieldValue("NUM")),[String(g),g>=0?k.ATOMIC:k.UNARY_NEGATION]},ve=function(g,y){var K={ADD:[" + ",k.ADDITION],MINUS:[" - ",k.SUBTRACTION],MULTIPLY:[" * ",k.MULTIPLICATION],DIVIDE:[" / ",k.DIVISION],POWER:[null,k.NONE]}[g.getFieldValue("OP")];const re=K[0];K=K[1];const Ne=y.valueToCode(g,"A",K)||"0";return g=y.valueToCode(g,"B",K)||"0",re?[Ne+re+g,K]:["Math.pow("+Ne+", "+g+")",k.FUNCTION_CALL]},T=function(g,y){const K=g.getFieldValue("OP");let re;if(K==="NEG")return g=y.valueToCode(g,"NUM",k.UNARY_NEGATION)||"0",g[0]==="-"&&(g=" "+g),["-"+g,k.UNARY_NEGATION];switch(g=K==="SIN"||K==="COS"||K==="TAN"?y.valueToCode(g,"NUM",k.DIVISION)||"0":y.valueToCode(g,"NUM",k.NONE)||"0",K){case"ABS":re="Math.abs("+g+")";break;case"ROOT":re="Math.sqrt("+g+")";break;case"LN":re="Math.log("+g+")";break;case"EXP":re="Math.exp("+g+")";break;case"POW10":re="Math.pow(10,"+g+")";break;case"ROUND":re="Math.round("+g+")";break;case"ROUNDUP":re="Math.ceil("+g+")";break;case"ROUNDDOWN":re="Math.floor("+g+")";break;case"SIN":re="Math.sin("+g+" / 180 * Math.PI)";break;case"COS":re="Math.cos("+g+" / 180 * Math.PI)";break;case"TAN":re="Math.tan("+g+" / 180 * Math.PI)"}if(re)return[re,k.FUNCTION_CALL];switch(K){case"LOG10":re="Math.log("+g+") / Math.log(10)";break;case"ASIN":re="Math.asin("+g+") / Math.PI * 180";break;case"ACOS":re="Math.acos("+g+") / Math.PI * 180";break;case"ATAN":re="Math.atan("+g+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+K)}return[re,k.DIVISION]},Ie=function(g,y){return{PI:["Math.PI",k.MEMBER],E:["Math.E",k.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",k.DIVISION],SQRT2:["Math.SQRT2",k.MEMBER],SQRT1_2:["Math.SQRT1_2",k.MEMBER],INFINITY:["Infinity",k.ATOMIC]}[g.getFieldValue("CONSTANT")]},ce=function(g,y){var K={EVEN:[" % 2 === 0",k.MODULUS,k.EQUALITY],ODD:[" % 2 === 1",k.MODULUS,k.EQUALITY],WHOLE:[" % 1 === 0",k.MODULUS,k.EQUALITY],POSITIVE:[" > 0",k.RELATIONAL,k.RELATIONAL],NEGATIVE:[" < 0",k.RELATIONAL,k.RELATIONAL],DIVISIBLE_BY:[null,k.MODULUS,k.EQUALITY],PRIME:[null,k.NONE,k.FUNCTION_CALL]};const re=g.getFieldValue("PROPERTY"),[Ne,Ke,ct]=K[re];return K=y.valueToCode(g,"NUMBER_TO_CHECK",Ke)||"0",re==="PRIME"?g=y.provideFunction_("mathIsPrime",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+K+")":re==="DIVISIBLE_BY"?(g=y.valueToCode(g,"DIVISOR",k.MODULUS)||"0",g=K+" % "+g+" === 0"):g=K+Ne,[g,ct]},ue=function(g,y){const K=y.valueToCode(g,"DELTA",k.ADDITION)||"0";return g=y.getVariableName(g.getFieldValue("VAR")),g+" = (typeof "+g+" === 'number' ? "+g+" : 0) + "+K+`;
`},Fe=function(g,y){var K=g.getFieldValue("OP");switch(K){case"SUM":g=y.valueToCode(g,"LIST",k.MEMBER)||"[]",g+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":g=y.valueToCode(g,"LIST",k.NONE)||"[]",g="Math.min.apply(null, "+g+")";break;case"MAX":g=y.valueToCode(g,"LIST",k.NONE)||"[]",g="Math.max.apply(null, "+g+")";break;case"AVERAGE":K=y.provideFunction_("mathMean",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),g=y.valueToCode(g,"LIST",k.NONE)||"[]",g=K+"("+g+")";break;case"MEDIAN":K=y.provideFunction_("mathMedian",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),g=y.valueToCode(g,"LIST",k.NONE)||"[]",g=K+"("+g+")";break;case"MODE":K=y.provideFunction_("mathModes",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),g=y.valueToCode(g,"LIST",k.NONE)||"[]",g=K+"("+g+")";break;case"STD_DEV":K=y.provideFunction_("mathStandardDeviation",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),g=y.valueToCode(g,"LIST",k.NONE)||"[]",g=K+"("+g+")";break;case"RANDOM":K=y.provideFunction_("mathRandomList",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),g=y.valueToCode(g,"LIST",k.NONE)||"[]",g=K+"("+g+")";break;default:throw Error("Unknown operator: "+K)}return[g,k.FUNCTION_CALL]},Oe=function(g,y){const K=y.valueToCode(g,"DIVIDEND",k.MODULUS)||"0";return g=y.valueToCode(g,"DIVISOR",k.MODULUS)||"0",[K+" % "+g,k.MODULUS]},N=function(g,y){const K=y.valueToCode(g,"VALUE",k.NONE)||"0",re=y.valueToCode(g,"LOW",k.NONE)||"0";return g=y.valueToCode(g,"HIGH",k.NONE)||"Infinity",["Math.min(Math.max("+K+", "+re+"), "+g+")",k.FUNCTION_CALL]},W=function(g,y){const K=y.valueToCode(g,"FROM",k.NONE)||"0";return g=y.valueToCode(g,"TO",k.NONE)||"0",[y.provideFunction_("mathRandomInt",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+K+", "+g+")",k.FUNCTION_CALL]},q=function(g,y){return["Math.random()",k.FUNCTION_CALL]},Ce=function(g,y){const K=y.valueToCode(g,"X",k.NONE)||"0";return["Math.atan2("+(y.valueToCode(g,"Y",k.NONE)||"0")+", "+K+") / Math.PI * 180",k.DIVISION]},Ae=function(g,y){const K=y.getProcedureName(g.getFieldValue("NAME"));var re="";y.STATEMENT_PREFIX&&(re+=y.injectId(y.STATEMENT_PREFIX,g)),y.STATEMENT_SUFFIX&&(re+=y.injectId(y.STATEMENT_SUFFIX,g)),re&&(re=y.prefixLines(re,y.INDENT));let Ne="";y.INFINITE_LOOP_TRAP&&(Ne=y.prefixLines(y.injectId(y.INFINITE_LOOP_TRAP,g),y.INDENT));let Ke="";g.getInput("STACK")&&(Ke=y.statementToCode(g,"STACK"));let ct="";g.getInput("RETURN")&&(ct=y.valueToCode(g,"RETURN",k.NONE)||"");let Yi="";Ke&&ct&&(Yi=re),ct&&(ct=y.INDENT+"return "+ct+`;
`);const ps=[],bi=g.getVars();for(let Vt=0;Vt<bi.length;Vt++)ps[Vt]=y.getVariableName(bi[Vt]);return re="function "+K+"("+ps.join(", ")+`) {
`+re+Ne+Ke+Yi+ct+"}",re=y.scrub_(g,re),y.definitions_["%"+K]=re,null},Me=function(g,y){const K=y.getProcedureName(g.getFieldValue("NAME")),re=[],Ne=g.getVars();for(let Ke=0;Ke<Ne.length;Ke++)re[Ke]=y.valueToCode(g,"ARG"+Ke,k.NONE)||"null";return[K+"("+re.join(", ")+")",k.FUNCTION_CALL]},He=function(g,y){return y.forBlock.procedures_callreturn(g,y)[0]+`;
`},yt=function(g,y){let K="if ("+(y.valueToCode(g,"CONDITION",k.NONE)||"false")+`) {
`;return y.STATEMENT_SUFFIX&&(K+=y.prefixLines(y.injectId(y.STATEMENT_SUFFIX,g),y.INDENT)),g.hasReturnValue_?(g=y.valueToCode(g,"VALUE",k.NONE)||"null",K+=y.INDENT+"return "+g+`;
`):K+=y.INDENT+`return;
`,K+`}
`},Qe=function(g,y){return[y.quote_(g.getFieldValue("TEXT")),k.ATOMIC]},pt=function(g,y){switch(g.itemCount_){case 0:return["''",k.ATOMIC];case 1:return g=y.valueToCode(g,"ADD0",k.NONE)||"''",R(g);case 2:var K=y.valueToCode(g,"ADD0",k.NONE)||"''";return g=y.valueToCode(g,"ADD1",k.NONE)||"''",[R(K)[0]+" + "+R(g)[0],k.ADDITION];default:K=Array(g.itemCount_);for(let re=0;re<g.itemCount_;re++)K[re]=y.valueToCode(g,"ADD"+re,k.NONE)||"''";return["["+K.join(",")+"].join('')",k.FUNCTION_CALL]}},We=function(g,y){const K=y.getVariableName(g.getFieldValue("VAR"));return g=y.valueToCode(g,"TEXT",k.NONE)||"''",K+" += "+R(g)[0]+`;
`},Dt=function(g,y){return[(y.valueToCode(g,"VALUE",k.MEMBER)||"''")+".length",k.MEMBER]},be=function(g,y){return["!"+(y.valueToCode(g,"VALUE",k.MEMBER)||"''")+".length",k.LOGICAL_NOT]},Ge=function(g,y){const K=g.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",re=y.valueToCode(g,"FIND",k.NONE)||"''";return y=(y.valueToCode(g,"VALUE",k.MEMBER)||"''")+"."+K+"("+re+")",g.workspace.options.oneBasedIndex?[y+" + 1",k.ADDITION]:[y,k.FUNCTION_CALL]},_=function(g,y){const K=g.getFieldValue("WHERE")||"FROM_START",re=y.valueToCode(g,"VALUE",K==="RANDOM"?k.NONE:k.MEMBER)||"''";switch(K){case"FIRST":return[re+".charAt(0)",k.FUNCTION_CALL];case"LAST":return[re+".slice(-1)",k.FUNCTION_CALL];case"FROM_START":return g=y.getAdjusted(g,"AT"),[re+".charAt("+g+")",k.FUNCTION_CALL];case"FROM_END":return g=y.getAdjusted(g,"AT",1,!0),[re+".slice("+g+").charAt(0)",k.FUNCTION_CALL];case"RANDOM":return[y.provideFunction_("textRandomLetter",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+re+")",k.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},me=function(g,y){var K={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const re=g.getFieldValue("WHERE1"),Ne=g.getFieldValue("WHERE2");var Ke=re!=="FROM_END"&&re!=="LAST"&&Ne!=="FROM_END"&&Ne!=="LAST",ct=y.valueToCode(g,"STRING",Ke?k.MEMBER:k.NONE)||"''";if(re==="FIRST"&&Ne==="LAST")return[ct,k.NONE];if(ct.match(/^'?\w+'?$/)||Ke){switch(re){case"FROM_START":K=y.getAdjusted(g,"AT1");break;case"FROM_END":K=y.getAdjusted(g,"AT1",1,!1,k.SUBTRACTION),K=ct+".length - "+K;break;case"FIRST":K="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ne){case"FROM_START":y=y.getAdjusted(g,"AT2",1);break;case"FROM_END":y=y.getAdjusted(g,"AT2",0,!1,k.SUBTRACTION),y=ct+".length - "+y;break;case"LAST":y=ct+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}ct=ct+".slice("+K+", "+y+")"}else Ke=y.getAdjusted(g,"AT1"),g=y.getAdjusted(g,"AT2"),ct=y.provideFunction_("subsequence"+K[re]+K[Ne],`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(sequence${re==="FROM_END"||re==="FROM_START"?", at1":""}${Ne==="FROM_END"||Ne==="FROM_START"?", at2":""}) {
  var start = ${ee("sequence",re,"at1")};
  var end = ${ee("sequence",Ne,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ct+(re==="FROM_END"||re==="FROM_START"?", "+Ke:"")+(Ne==="FROM_END"||Ne==="FROM_START"?", "+g:"")+")";return[ct,k.FUNCTION_CALL]},Ee=function(g,y){const K={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[g.getFieldValue("CASE")];return g=y.valueToCode(g,"TEXT",K?k.MEMBER:k.NONE)||"''",[K?g+K:y.provideFunction_("textToTitleCase",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+g+")",k.FUNCTION_CALL]},M=function(g,y){const K={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[g.getFieldValue("MODE")];return[(y.valueToCode(g,"TEXT",k.MEMBER)||"''")+K,k.FUNCTION_CALL]},B=function(g,y){return"window.alert("+(y.valueToCode(g,"TEXT",k.NONE)||"''")+`);
`},se=function(g,y){return y="window.prompt("+(g.getField("TEXT")?y.quote_(g.getFieldValue("TEXT")):y.valueToCode(g,"TEXT",k.NONE)||"''")+")",g.getFieldValue("TYPE")==="NUMBER"&&(y="Number("+y+")"),[y,k.FUNCTION_CALL]},we=function(g,y){const K=y.valueToCode(g,"TEXT",k.NONE)||"''";return g=y.valueToCode(g,"SUB",k.NONE)||"''",[y.provideFunction_("textCount",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+K+", "+g+")",k.FUNCTION_CALL]},Be=function(g,y){const K=y.valueToCode(g,"TEXT",k.NONE)||"''",re=y.valueToCode(g,"FROM",k.NONE)||"''";return g=y.valueToCode(g,"TO",k.NONE)||"''",[y.provideFunction_("textReplace",`
function ${y.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+K+", "+re+", "+g+")",k.FUNCTION_CALL]},le=function(g,y){return[(y.valueToCode(g,"TEXT",k.MEMBER)||"''")+".split('').reverse().join('')",k.FUNCTION_CALL]},Ve=function(g,y){return[y.getVariableName(g.getFieldValue("VAR")),k.ATOMIC]},Ye=function(g,y){const K=y.valueToCode(g,"VALUE",k.ASSIGNMENT)||"0";return y.getVariableName(g.getFieldValue("VAR"))+" = "+K+`;
`},k;(function(g){g[g.ATOMIC=0]="ATOMIC",g[g.NEW=1.1]="NEW",g[g.MEMBER=1.2]="MEMBER",g[g.FUNCTION_CALL=2]="FUNCTION_CALL",g[g.INCREMENT=3]="INCREMENT",g[g.DECREMENT=3]="DECREMENT",g[g.BITWISE_NOT=4.1]="BITWISE_NOT",g[g.UNARY_PLUS=4.2]="UNARY_PLUS",g[g.UNARY_NEGATION=4.3]="UNARY_NEGATION",g[g.LOGICAL_NOT=4.4]="LOGICAL_NOT",g[g.TYPEOF=4.5]="TYPEOF",g[g.VOID=4.6]="VOID",g[g.DELETE=4.7]="DELETE",g[g.AWAIT=4.8]="AWAIT",g[g.EXPONENTIATION=5]="EXPONENTIATION",g[g.MULTIPLICATION=5.1]="MULTIPLICATION",g[g.DIVISION=5.2]="DIVISION",g[g.MODULUS=5.3]="MODULUS",g[g.SUBTRACTION=6.1]="SUBTRACTION",g[g.ADDITION=6.2]="ADDITION",g[g.BITWISE_SHIFT=7]="BITWISE_SHIFT",g[g.RELATIONAL=8]="RELATIONAL",g[g.IN=8]="IN",g[g.INSTANCEOF=8]="INSTANCEOF",g[g.EQUALITY=9]="EQUALITY",g[g.BITWISE_AND=10]="BITWISE_AND",g[g.BITWISE_XOR=11]="BITWISE_XOR",g[g.BITWISE_OR=12]="BITWISE_OR",g[g.LOGICAL_AND=13]="LOGICAL_AND",g[g.LOGICAL_OR=14]="LOGICAL_OR",g[g.CONDITIONAL=15]="CONDITIONAL",g[g.ASSIGNMENT=16]="ASSIGNMENT",g[g.YIELD=17]="YIELD",g[g.COMMA=18]="COMMA",g[g.NONE=99]="NONE"})(k||(k={}));var qe=class extends p.CodeGenerator$$module$build$src$core$generator{constructor(g="JavaScript"){super(g),this.ORDER_OVERRIDES=[[k.FUNCTION_CALL,k.MEMBER],[k.FUNCTION_CALL,k.FUNCTION_CALL],[k.MEMBER,k.MEMBER],[k.MEMBER,k.FUNCTION_CALL],[k.LOGICAL_NOT,k.LOGICAL_NOT],[k.MULTIPLICATION,k.MULTIPLICATION],[k.ADDITION,k.ADDITION],[k.LOGICAL_AND,k.LOGICAL_AND],[k.LOGICAL_OR,k.LOGICAL_OR]],this.isInitialized=!1;for(const y in k)g=k[y],typeof g!="string"&&(this["ORDER_"+y]=g);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(g){super.init(g),this.nameDB_?this.nameDB_.reset():this.nameDB_=new p.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(g.getVariableMap()),this.nameDB_.populateVariables(g),this.nameDB_.populateProcedures(g);const y=[];var K=p.allDeveloperVariables$$module$build$src$core$variables(g);for(let re=0;re<K.length;re++)y.push(this.nameDB_.getName(K[re],p.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(g=p.allUsedVarModels$$module$build$src$core$variables(g),K=0;K<g.length;K++)y.push(this.nameDB_.getName(g[K].getId(),p.NameType$$module$build$src$core$names.VARIABLE));y.length&&(this.definitions_.variables="var "+y.join(", ")+";"),this.isInitialized=!0}finish(g){const y=Object.values(this.definitions_);return super.finish(g),this.isInitialized=!1,this.nameDB_.reset(),y.join(`

`)+`


`+g}scrubNakedValue(g){return g+`;
`}quote_(g){return g=g.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+g+"'"}multiline_quote_(g){return g.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(g,y,K=!1){let re="";if(!g.outputConnection||!g.outputConnection.targetConnection){var Ne=g.getCommentText();Ne&&(Ne=p.wrap$$module$build$src$core$utils$string(Ne,this.COMMENT_WRAP-3),re+=this.prefixLines(Ne+`
`,"// "));for(let Ke=0;Ke<g.inputList.length;Ke++)g.inputList[Ke].type===p.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Ne=g.inputList[Ke].connection.targetBlock())&&(Ne=this.allNestedComments(Ne))&&(re+=this.prefixLines(Ne,"// "))}return g=g.nextConnection&&g.nextConnection.targetBlock(),K=K?"":this.blockToCode(g),re+y+K}getAdjusted(g,y,K=0,re=!1,Ne=k.NONE){g.workspace.options.oneBasedIndex&&K--;const Ke=g.workspace.options.oneBasedIndex?"1":"0";let ct=Ne;return K>0?ct=k.ADDITION:K<0?ct=k.SUBTRACTION:re&&(ct=k.UNARY_NEGATION),g=this.valueToCode(g,y,ct)||Ke,K===0&&!re?g:p.isNumber$$module$build$src$core$utils$string(g)?(g=String(Number(g)+K),re&&(g=String(-Number(g))),g):(K>0?g=`${g} + ${K}`:K<0&&(g=`${g} - ${-K}`),re&&(g=K?`-(${g})`:`-${g}`),Math.floor(Ne)>=Math.floor(ct)&&(g=`(${g})`),g)}},ut=function(g,y,K){return y==="FIRST"?"0":y==="FROM_END"?g+".length - 1 - "+K:y==="LAST"?g+".length - 1":K},Ze={};Ze.lists_create_empty=G,Ze.lists_create_with=b,Ze.lists_getIndex=z,Ze.lists_getSublist=j,Ze.lists_indexOf=C,Ze.lists_isEmpty=E,Ze.lists_length=S,Ze.lists_repeat=I,Ze.lists_reverse=O,Ze.lists_setIndex=V,Ze.lists_sort=A,Ze.lists_split=U;var ht={};ht.controls_if=P,ht.controls_ifelse=P,ht.logic_boolean=x,ht.logic_compare=w,ht.logic_negate=J,ht.logic_null=D,ht.logic_operation=L,ht.logic_ternary=Q;var pi={};pi.controls_flow_statements=Xe,pi.controls_for=oe,pi.controls_forEach=Se,pi.controls_repeat=te,pi.controls_repeat_ext=te,pi.controls_whileUntil=fe;var Ct={};Ct.math_arithmetic=ve,Ct.math_atan2=Ce,Ct.math_change=ue,Ct.math_constant=Ie,Ct.math_constrain=N,Ct.math_modulo=Oe,Ct.math_number=Y,Ct.math_number_property=ce,Ct.math_on_list=Fe,Ct.math_random_float=q,Ct.math_random_int=W,Ct.math_round=T,Ct.math_single=T,Ct.math_trig=T;var wi={};wi.procedures_callnoreturn=He,wi.procedures_callreturn=Me,wi.procedures_defnoreturn=Ae,wi.procedures_defreturn=Ae,wi.procedures_ifreturn=yt;var $=/^\s*'([^']|\\')*'\s*$/,R=function(g){return $.test(g)?[g,k.ATOMIC]:["String("+g+")",k.FUNCTION_CALL]},ee=function(g,y,K){return y==="FIRST"?"0":y==="FROM_END"?g+".length - 1 - "+K:y==="LAST"?g+".length - 1":K},ie={};ie.text=Qe,ie.text_append=We,ie.text_changeCase=Ee,ie.text_charAt=_,ie.text_count=we,ie.text_getSubstring=me,ie.text_indexOf=Ge,ie.text_isEmpty=be,ie.text_join=pt,ie.text_length=Dt,ie.text_print=B,ie.text_prompt=se,ie.text_prompt_ext=se,ie.text_replace=Be,ie.text_reverse=le,ie.text_trim=M;var Ue={};Ue.variables_get=Ve,Ue.variables_set=Ye;var At={};At.variables_get_dynamic=Ve,At.variables_set_dynamic=Ye;var ds=new qe,Os=Object.assign({},Ze,ht,pi,Ct,wi,ie,Ue,At);for(const g in Os)ds.forBlock[g]=Os[g];var Xi={};return Xi.JavascriptGenerator=qe,Xi.Order=k,Xi.javascriptGenerator=ds,Xi.__namespace__=p,Xi})}(Eg)),Eg.exports}var Fb=Ub();const Hb=l$(Fb),{JavascriptGenerator:kN,Order:wN,javascriptGenerator:MN}=Hb;var bg={exports:{}},Gb=bg.exports,K_;function Vb(){return K_||(K_=1,function(Pe,ze){(function(u,p){Pe.exports=p()})(Gb,function(){var u=u||{Msg:Object.create(null)};return u.Msg.ADD_COMMENT="Add Comment",u.Msg.ALT_KEY="Alt",u.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",u.Msg.CHANGE_VALUE_TITLE="Change value:",u.Msg.CHROME_OS="ChromeOS",u.Msg.CLEAN_UP="Clean up Blocks",u.Msg.CLOSE="Close",u.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",u.Msg.COLLAPSE_ALL="Collapse Blocks",u.Msg.COLLAPSE_BLOCK="Collapse Block",u.Msg.COLOUR_BLEND_COLOUR1="colour 1",u.Msg.COLOUR_BLEND_COLOUR2="colour 2",u.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",u.Msg.COLOUR_BLEND_RATIO="ratio",u.Msg.COLOUR_BLEND_TITLE="blend",u.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",u.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",u.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",u.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",u.Msg.COLOUR_RANDOM_TITLE="random colour",u.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",u.Msg.COLOUR_RGB_BLUE="blue",u.Msg.COLOUR_RGB_GREEN="green",u.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",u.Msg.COLOUR_RGB_RED="red",u.Msg.COLOUR_RGB_TITLE="colour with",u.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",u.Msg.COMMAND_KEY=" Command",u.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",u.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",u.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",u.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",u.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",u.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",u.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",u.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",u.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",u.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",u.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",u.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",u.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",u.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",u.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",u.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",u.Msg.CONTROLS_IF_MSG_ELSE="else",u.Msg.CONTROLS_IF_MSG_ELSEIF="else if",u.Msg.CONTROLS_IF_MSG_IF="if",u.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",u.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",u.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",u.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",u.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",u.Msg.CONTROLS_REPEAT_INPUT_DO="do",u.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",u.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",u.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",u.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",u.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",u.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",u.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",u.Msg.CONTROL_KEY="Ctrl",u.Msg.COPY_SHORTCUT="Copy",u.Msg.CUT_SHORTCUT="Cut",u.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",u.Msg.DELETE_BLOCK="Delete Block",u.Msg.DELETE_VARIABLE="Delete the '%1' variable",u.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",u.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",u.Msg.DIALOG_CANCEL="Cancel",u.Msg.DIALOG_OK="OK",u.Msg.DISABLE_BLOCK="Disable Block",u.Msg.DUPLICATE_BLOCK="Duplicate",u.Msg.DUPLICATE_COMMENT="Duplicate Comment",u.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",u.Msg.ENABLE_BLOCK="Enable Block",u.Msg.EXPAND_ALL="Expand Blocks",u.Msg.EXPAND_BLOCK="Expand Block",u.Msg.EXTERNAL_INPUTS="External Inputs",u.Msg.HELP="Help",u.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",u.Msg.INLINE_INPUTS="Inline Inputs",u.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",u.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",u.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",u.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",u.Msg.LINUX="Linux",u.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",u.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",u.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",u.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",u.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",u.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",u.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",u.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",u.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",u.Msg.LISTS_GET_INDEX_FIRST="first",u.Msg.LISTS_GET_INDEX_FROM_END="# from end",u.Msg.LISTS_GET_INDEX_FROM_START="#",u.Msg.LISTS_GET_INDEX_GET="get",u.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",u.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",u.Msg.LISTS_GET_INDEX_LAST="last",u.Msg.LISTS_GET_INDEX_RANDOM="random",u.Msg.LISTS_GET_INDEX_REMOVE="remove",u.Msg.LISTS_GET_INDEX_TAIL="",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",u.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",u.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",u.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",u.Msg.LISTS_GET_SUBLIST_END_LAST="to last",u.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",u.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",u.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",u.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",u.Msg.LISTS_GET_SUBLIST_TAIL="",u.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",u.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",u.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",u.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",u.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",u.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",u.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",u.Msg.LISTS_INLIST="in list",u.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",u.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",u.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",u.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",u.Msg.LISTS_LENGTH_TITLE="length of %1",u.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",u.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",u.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",u.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",u.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",u.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",u.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",u.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",u.Msg.LISTS_SET_INDEX_INPUT_TO="as",u.Msg.LISTS_SET_INDEX_INSERT="insert at",u.Msg.LISTS_SET_INDEX_SET="set",u.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",u.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",u.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",u.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",u.Msg.LISTS_SORT_ORDER_DESCENDING="descending",u.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",u.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",u.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",u.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",u.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",u.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",u.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",u.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",u.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",u.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",u.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",u.Msg.LOGIC_BOOLEAN_FALSE="false",u.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",u.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",u.Msg.LOGIC_BOOLEAN_TRUE="true",u.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",u.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",u.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",u.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",u.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",u.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",u.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",u.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",u.Msg.LOGIC_NEGATE_TITLE="not %1",u.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",u.Msg.LOGIC_NULL="null",u.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",u.Msg.LOGIC_NULL_TOOLTIP="Returns null.",u.Msg.LOGIC_OPERATION_AND="and",u.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",u.Msg.LOGIC_OPERATION_OR="or",u.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",u.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",u.Msg.LOGIC_TERNARY_CONDITION="test",u.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",u.Msg.LOGIC_TERNARY_IF_FALSE="if false",u.Msg.LOGIC_TERNARY_IF_TRUE="if true",u.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",u.Msg.MAC_OS="macOS",u.Msg.MATH_ADDITION_SYMBOL="+",u.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",u.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",u.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",u.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",u.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",u.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",u.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",u.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",u.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",u.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",u.Msg.MATH_CHANGE_TITLE="change %1 by %2",u.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",u.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",u.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",u.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",u.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",u.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",u.Msg.MATH_DIVISION_SYMBOL="",u.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",u.Msg.MATH_IS_EVEN="is even",u.Msg.MATH_IS_NEGATIVE="is negative",u.Msg.MATH_IS_ODD="is odd",u.Msg.MATH_IS_POSITIVE="is positive",u.Msg.MATH_IS_PRIME="is prime",u.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",u.Msg.MATH_IS_WHOLE="is whole",u.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",u.Msg.MATH_MODULO_TITLE="remainder of %1  %2",u.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",u.Msg.MATH_MULTIPLICATION_SYMBOL="",u.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",u.Msg.MATH_NUMBER_TOOLTIP="A number.",u.Msg.MATH_ONLIST_HELPURL="",u.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",u.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",u.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",u.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",u.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",u.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",u.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",u.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",u.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",u.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",u.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",u.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",u.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",u.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",u.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",u.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",u.Msg.MATH_POWER_SYMBOL="^",u.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",u.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",u.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",u.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",u.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",u.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",u.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",u.Msg.MATH_ROUND_OPERATOR_ROUND="round",u.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",u.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",u.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",u.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",u.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",u.Msg.MATH_SINGLE_OP_ROOT="square root",u.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",u.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",u.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",u.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",u.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",u.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",u.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",u.Msg.MATH_SUBTRACTION_SYMBOL="-",u.Msg.MATH_TRIG_ACOS="acos",u.Msg.MATH_TRIG_ASIN="asin",u.Msg.MATH_TRIG_ATAN="atan",u.Msg.MATH_TRIG_COS="cos",u.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",u.Msg.MATH_TRIG_SIN="sin",u.Msg.MATH_TRIG_TAN="tan",u.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",u.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",u.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",u.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",u.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",u.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",u.Msg.MOVE_BLOCK="Move Block",u.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",u.Msg.NEW_NUMBER_VARIABLE="Create number variable...",u.Msg.NEW_STRING_VARIABLE="Create string variable...",u.Msg.NEW_VARIABLE="Create variable...",u.Msg.NEW_VARIABLE_TITLE="New variable name:",u.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",u.Msg.OPTION_KEY=" Option",u.Msg.ORDINAL_NUMBER_SUFFIX="",u.Msg.PASTE_SHORTCUT="Paste",u.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",u.Msg.PROCEDURES_BEFORE_PARAMS="with:",u.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",u.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",u.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",u.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",u.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",u.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",u.Msg.PROCEDURES_CREATE_DO="Create '%1'",u.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",u.Msg.PROCEDURES_DEFNORETURN_DO="",u.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",u.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",u.Msg.PROCEDURES_DEFNORETURN_TITLE="to",u.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",u.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",u.Msg.PROCEDURES_DEFRETURN_RETURN="return",u.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",u.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",u.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",u.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",u.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",u.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",u.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",u.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",u.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",u.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",u.Msg.REDO="Redo",u.Msg.REMOVE_COMMENT="Remove Comment",u.Msg.RENAME_VARIABLE="Rename variable...",u.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",u.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",u.Msg.SHORTCUTS_EDITING="Editing",u.Msg.SHORTCUTS_GENERAL="General",u.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",u.Msg.TEXT_APPEND_TITLE="to %1 append text %2",u.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",u.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",u.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",u.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",u.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",u.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",u.Msg.TEXT_CHARAT_FIRST="get first letter",u.Msg.TEXT_CHARAT_FROM_END="get letter # from end",u.Msg.TEXT_CHARAT_FROM_START="get letter #",u.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",u.Msg.TEXT_CHARAT_LAST="get last letter",u.Msg.TEXT_CHARAT_RANDOM="get random letter",u.Msg.TEXT_CHARAT_TAIL="",u.Msg.TEXT_CHARAT_TITLE="in text %1 %2",u.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",u.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",u.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",u.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",u.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",u.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",u.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",u.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",u.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",u.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",u.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",u.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",u.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",u.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",u.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",u.Msg.TEXT_GET_SUBSTRING_TAIL="",u.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",u.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",u.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",u.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",u.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",u.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",u.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",u.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",u.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",u.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",u.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",u.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",u.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",u.Msg.TEXT_LENGTH_TITLE="length of %1",u.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",u.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",u.Msg.TEXT_PRINT_TITLE="print %1",u.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",u.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",u.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",u.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",u.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",u.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",u.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",u.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",u.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",u.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",u.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",u.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",u.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",u.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",u.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",u.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",u.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",u.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",u.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",u.Msg.TODAY="Today",u.Msg.UNDO="Undo",u.Msg.UNKNOWN="Unknown",u.Msg.UNNAMED_KEY="unnamed",u.Msg.VARIABLES_DEFAULT_NAME="item",u.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",u.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",u.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",u.Msg.VARIABLES_SET="set %1 to %2",u.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",u.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",u.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",u.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",u.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",u.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",u.Msg.WINDOWS="Windows",u.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",u.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",u.Msg.CONTROLS_FOREACH_INPUT_DO=u.Msg.CONTROLS_REPEAT_INPUT_DO,u.Msg.CONTROLS_FOR_INPUT_DO=u.Msg.CONTROLS_REPEAT_INPUT_DO,u.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=u.Msg.CONTROLS_IF_MSG_ELSEIF,u.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=u.Msg.CONTROLS_IF_MSG_ELSE,u.Msg.CONTROLS_IF_IF_TITLE_IF=u.Msg.CONTROLS_IF_MSG_IF,u.Msg.CONTROLS_IF_MSG_THEN=u.Msg.CONTROLS_REPEAT_INPUT_DO,u.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=u.Msg.CONTROLS_REPEAT_INPUT_DO,u.Msg.LISTS_CREATE_WITH_ITEM_TITLE=u.Msg.VARIABLES_DEFAULT_NAME,u.Msg.LISTS_GET_INDEX_HELPURL=u.Msg.LISTS_INDEX_OF_HELPURL,u.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=u.Msg.LISTS_INLIST,u.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=u.Msg.LISTS_INLIST,u.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=u.Msg.LISTS_INLIST,u.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=u.Msg.LISTS_INLIST,u.Msg.MATH_CHANGE_TITLE_ITEM=u.Msg.VARIABLES_DEFAULT_NAME,u.Msg.PROCEDURES_DEFRETURN_COMMENT=u.Msg.PROCEDURES_DEFNORETURN_COMMENT,u.Msg.PROCEDURES_DEFRETURN_DO=u.Msg.PROCEDURES_DEFNORETURN_DO,u.Msg.PROCEDURES_DEFRETURN_PROCEDURE=u.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,u.Msg.PROCEDURES_DEFRETURN_TITLE=u.Msg.PROCEDURES_DEFNORETURN_TITLE,u.Msg.TEXT_APPEND_VARIABLE=u.Msg.VARIABLES_DEFAULT_NAME,u.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=u.Msg.VARIABLES_DEFAULT_NAME,u.Msg.MATH_HUE="230",u.Msg.LOOPS_HUE="120",u.Msg.LISTS_HUE="260",u.Msg.LOGIC_HUE="210",u.Msg.VARIABLES_HUE="330",u.Msg.TEXTS_HUE="160",u.Msg.PROCEDURES_HUE="290",u.Msg.COLOUR_HUE="20",u.Msg.VARIABLES_DYNAMIC_HUE="310",u.Msg})}(bg)),bg.exports}var zb=Vb();const Wb=l$(zb),{LOGIC_HUE:Xb,LOOPS_HUE:Yb,MATH_HUE:jb,TEXTS_HUE:Kb,LISTS_HUE:Jb,COLOUR_HUE:qb,VARIABLES_HUE:Zb,VARIABLES_DYNAMIC_HUE:Qb,PROCEDURES_HUE:eS,VARIABLES_DEFAULT_NAME:tS,UNNAMED_KEY:iS,TODAY:sS,DUPLICATE_BLOCK:oS,ADD_COMMENT:nS,REMOVE_COMMENT:rS,DUPLICATE_COMMENT:lS,EXTERNAL_INPUTS:aS,INLINE_INPUTS:uS,DELETE_BLOCK:cS,DELETE_X_BLOCKS:hS,DELETE_ALL_BLOCKS:dS,CLEAN_UP:pS,CLOSE:$S,COLLAPSE_BLOCK:gS,COLLAPSE_ALL:fS,EXPAND_BLOCK:_S,EXPAND_ALL:mS,DISABLE_BLOCK:TS,ENABLE_BLOCK:ES,HELP:bS,UNDO:SS,REDO:vS,CHANGE_VALUE_TITLE:yS,RENAME_VARIABLE:IS,RENAME_VARIABLE_TITLE:OS,NEW_VARIABLE:RS,NEW_STRING_VARIABLE:CS,NEW_NUMBER_VARIABLE:AS,NEW_COLOUR_VARIABLE:NS,NEW_VARIABLE_TYPE_TITLE:LS,NEW_VARIABLE_TITLE:kS,VARIABLE_ALREADY_EXISTS:wS,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:MS,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:DS,DELETE_VARIABLE_CONFIRMATION:xS,CANNOT_DELETE_VARIABLE_PROCEDURE:BS,DELETE_VARIABLE:PS,COLOUR_PICKER_HELPURL:US,COLOUR_PICKER_TOOLTIP:FS,COLOUR_RANDOM_HELPURL:HS,COLOUR_RANDOM_TITLE:GS,COLOUR_RANDOM_TOOLTIP:VS,COLOUR_RGB_HELPURL:zS,COLOUR_RGB_TITLE:WS,COLOUR_RGB_RED:XS,COLOUR_RGB_GREEN:YS,COLOUR_RGB_BLUE:jS,COLOUR_RGB_TOOLTIP:KS,COLOUR_BLEND_HELPURL:JS,COLOUR_BLEND_TITLE:qS,COLOUR_BLEND_COLOUR1:ZS,COLOUR_BLEND_COLOUR2:QS,COLOUR_BLEND_RATIO:ev,COLOUR_BLEND_TOOLTIP:tv,CONTROLS_REPEAT_HELPURL:iv,CONTROLS_REPEAT_TITLE:sv,CONTROLS_REPEAT_INPUT_DO:ov,CONTROLS_REPEAT_TOOLTIP:nv,CONTROLS_WHILEUNTIL_HELPURL:rv,CONTROLS_WHILEUNTIL_INPUT_DO:lv,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:av,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:uv,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:cv,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:hv,CONTROLS_FOR_HELPURL:dv,CONTROLS_FOR_TOOLTIP:pv,CONTROLS_FOR_TITLE:$v,CONTROLS_FOR_INPUT_DO:gv,CONTROLS_FOREACH_HELPURL:fv,CONTROLS_FOREACH_TITLE:_v,CONTROLS_FOREACH_INPUT_DO:mv,CONTROLS_FOREACH_TOOLTIP:Tv,CONTROLS_FLOW_STATEMENTS_HELPURL:Ev,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:bv,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:Sv,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:vv,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:yv,CONTROLS_FLOW_STATEMENTS_WARNING:Iv,CONTROLS_IF_HELPURL:Ov,CONTROLS_IF_TOOLTIP_1:Rv,CONTROLS_IF_TOOLTIP_2:Cv,CONTROLS_IF_TOOLTIP_3:Av,CONTROLS_IF_TOOLTIP_4:Nv,CONTROLS_IF_MSG_IF:Lv,CONTROLS_IF_MSG_ELSEIF:kv,CONTROLS_IF_MSG_ELSE:wv,CONTROLS_IF_MSG_THEN:Mv,CONTROLS_IF_IF_TITLE_IF:Dv,CONTROLS_IF_IF_TOOLTIP:xv,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:Bv,CONTROLS_IF_ELSEIF_TOOLTIP:Pv,CONTROLS_IF_ELSE_TITLE_ELSE:Uv,CONTROLS_IF_ELSE_TOOLTIP:Fv,LOGIC_COMPARE_HELPURL:Hv,LOGIC_COMPARE_TOOLTIP_EQ:Gv,LOGIC_COMPARE_TOOLTIP_NEQ:Vv,LOGIC_COMPARE_TOOLTIP_LT:zv,LOGIC_COMPARE_TOOLTIP_LTE:Wv,LOGIC_COMPARE_TOOLTIP_GT:Xv,LOGIC_COMPARE_TOOLTIP_GTE:Yv,LOGIC_OPERATION_HELPURL:jv,LOGIC_OPERATION_TOOLTIP_AND:Kv,LOGIC_OPERATION_AND:Jv,LOGIC_OPERATION_TOOLTIP_OR:qv,LOGIC_OPERATION_OR:Zv,LOGIC_NEGATE_HELPURL:Qv,LOGIC_NEGATE_TITLE:ey,LOGIC_NEGATE_TOOLTIP:ty,LOGIC_BOOLEAN_HELPURL:iy,LOGIC_BOOLEAN_TRUE:sy,LOGIC_BOOLEAN_FALSE:oy,LOGIC_BOOLEAN_TOOLTIP:ny,LOGIC_NULL_HELPURL:ry,LOGIC_NULL:ly,LOGIC_NULL_TOOLTIP:ay,LOGIC_TERNARY_HELPURL:uy,LOGIC_TERNARY_CONDITION:cy,LOGIC_TERNARY_IF_TRUE:hy,LOGIC_TERNARY_IF_FALSE:dy,LOGIC_TERNARY_TOOLTIP:py,MATH_NUMBER_HELPURL:$y,MATH_NUMBER_TOOLTIP:gy,MATH_ADDITION_SYMBOL:fy,MATH_SUBTRACTION_SYMBOL:_y,MATH_DIVISION_SYMBOL:my,MATH_MULTIPLICATION_SYMBOL:Ty,MATH_POWER_SYMBOL:Ey,MATH_TRIG_SIN:by,MATH_TRIG_COS:Sy,MATH_TRIG_TAN:vy,MATH_TRIG_ASIN:yy,MATH_TRIG_ACOS:Iy,MATH_TRIG_ATAN:Oy,MATH_ARITHMETIC_HELPURL:Ry,MATH_ARITHMETIC_TOOLTIP_ADD:Cy,MATH_ARITHMETIC_TOOLTIP_MINUS:Ay,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:Ny,MATH_ARITHMETIC_TOOLTIP_DIVIDE:Ly,MATH_ARITHMETIC_TOOLTIP_POWER:ky,MATH_SINGLE_HELPURL:wy,MATH_SINGLE_OP_ROOT:My,MATH_SINGLE_TOOLTIP_ROOT:Dy,MATH_SINGLE_OP_ABSOLUTE:xy,MATH_SINGLE_TOOLTIP_ABS:By,MATH_SINGLE_TOOLTIP_NEG:Py,MATH_SINGLE_TOOLTIP_LN:Uy,MATH_SINGLE_TOOLTIP_LOG10:Fy,MATH_SINGLE_TOOLTIP_EXP:Hy,MATH_SINGLE_TOOLTIP_POW10:Gy,MATH_TRIG_HELPURL:Vy,MATH_TRIG_TOOLTIP_SIN:zy,MATH_TRIG_TOOLTIP_COS:Wy,MATH_TRIG_TOOLTIP_TAN:Xy,MATH_TRIG_TOOLTIP_ASIN:Yy,MATH_TRIG_TOOLTIP_ACOS:jy,MATH_TRIG_TOOLTIP_ATAN:Ky,MATH_CONSTANT_HELPURL:Jy,MATH_CONSTANT_TOOLTIP:qy,MATH_IS_EVEN:Zy,MATH_IS_ODD:Qy,MATH_IS_PRIME:eI,MATH_IS_WHOLE:tI,MATH_IS_POSITIVE:iI,MATH_IS_NEGATIVE:sI,MATH_IS_DIVISIBLE_BY:oI,MATH_IS_TOOLTIP:nI,MATH_CHANGE_HELPURL:rI,MATH_CHANGE_TITLE:lI,MATH_CHANGE_TITLE_ITEM:aI,MATH_CHANGE_TOOLTIP:uI,MATH_ROUND_HELPURL:cI,MATH_ROUND_TOOLTIP:hI,MATH_ROUND_OPERATOR_ROUND:dI,MATH_ROUND_OPERATOR_ROUNDUP:pI,MATH_ROUND_OPERATOR_ROUNDDOWN:$I,MATH_ONLIST_HELPURL:gI,MATH_ONLIST_OPERATOR_SUM:fI,MATH_ONLIST_TOOLTIP_SUM:_I,MATH_ONLIST_OPERATOR_MIN:mI,MATH_ONLIST_TOOLTIP_MIN:TI,MATH_ONLIST_OPERATOR_MAX:EI,MATH_ONLIST_TOOLTIP_MAX:bI,MATH_ONLIST_OPERATOR_AVERAGE:SI,MATH_ONLIST_TOOLTIP_AVERAGE:vI,MATH_ONLIST_OPERATOR_MEDIAN:yI,MATH_ONLIST_TOOLTIP_MEDIAN:II,MATH_ONLIST_OPERATOR_MODE:OI,MATH_ONLIST_TOOLTIP_MODE:RI,MATH_ONLIST_OPERATOR_STD_DEV:CI,MATH_ONLIST_TOOLTIP_STD_DEV:AI,MATH_ONLIST_OPERATOR_RANDOM:NI,MATH_ONLIST_TOOLTIP_RANDOM:LI,MATH_MODULO_HELPURL:kI,MATH_MODULO_TITLE:wI,MATH_MODULO_TOOLTIP:MI,MATH_CONSTRAIN_HELPURL:DI,MATH_CONSTRAIN_TITLE:xI,MATH_CONSTRAIN_TOOLTIP:BI,MATH_RANDOM_INT_HELPURL:PI,MATH_RANDOM_INT_TITLE:UI,MATH_RANDOM_INT_TOOLTIP:FI,MATH_RANDOM_FLOAT_HELPURL:HI,MATH_RANDOM_FLOAT_TITLE_RANDOM:GI,MATH_RANDOM_FLOAT_TOOLTIP:VI,MATH_ATAN2_HELPURL:zI,MATH_ATAN2_TITLE:WI,MATH_ATAN2_TOOLTIP:XI,TEXT_TEXT_HELPURL:YI,TEXT_TEXT_TOOLTIP:jI,TEXT_JOIN_HELPURL:KI,TEXT_JOIN_TITLE_CREATEWITH:JI,TEXT_JOIN_TOOLTIP:qI,TEXT_CREATE_JOIN_TITLE_JOIN:ZI,TEXT_CREATE_JOIN_TOOLTIP:QI,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:eO,TEXT_CREATE_JOIN_ITEM_TOOLTIP:tO,TEXT_APPEND_HELPURL:iO,TEXT_APPEND_TITLE:sO,TEXT_APPEND_VARIABLE:oO,TEXT_APPEND_TOOLTIP:nO,TEXT_LENGTH_HELPURL:rO,TEXT_LENGTH_TITLE:lO,TEXT_LENGTH_TOOLTIP:aO,TEXT_ISEMPTY_HELPURL:uO,TEXT_ISEMPTY_TITLE:cO,TEXT_ISEMPTY_TOOLTIP:hO,TEXT_INDEXOF_HELPURL:dO,TEXT_INDEXOF_TOOLTIP:pO,TEXT_INDEXOF_TITLE:$O,TEXT_INDEXOF_OPERATOR_FIRST:gO,TEXT_INDEXOF_OPERATOR_LAST:fO,TEXT_CHARAT_HELPURL:_O,TEXT_CHARAT_TITLE:mO,TEXT_CHARAT_FROM_START:TO,TEXT_CHARAT_FROM_END:EO,TEXT_CHARAT_FIRST:bO,TEXT_CHARAT_LAST:SO,TEXT_CHARAT_RANDOM:vO,TEXT_CHARAT_TAIL:yO,TEXT_CHARAT_TOOLTIP:IO,TEXT_GET_SUBSTRING_TOOLTIP:OO,TEXT_GET_SUBSTRING_HELPURL:RO,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:CO,TEXT_GET_SUBSTRING_START_FROM_START:AO,TEXT_GET_SUBSTRING_START_FROM_END:NO,TEXT_GET_SUBSTRING_START_FIRST:LO,TEXT_GET_SUBSTRING_END_FROM_START:kO,TEXT_GET_SUBSTRING_END_FROM_END:wO,TEXT_GET_SUBSTRING_END_LAST:MO,TEXT_GET_SUBSTRING_TAIL:DO,TEXT_CHANGECASE_HELPURL:xO,TEXT_CHANGECASE_TOOLTIP:BO,TEXT_CHANGECASE_OPERATOR_UPPERCASE:PO,TEXT_CHANGECASE_OPERATOR_LOWERCASE:UO,TEXT_CHANGECASE_OPERATOR_TITLECASE:FO,TEXT_TRIM_HELPURL:HO,TEXT_TRIM_TOOLTIP:GO,TEXT_TRIM_OPERATOR_BOTH:VO,TEXT_TRIM_OPERATOR_LEFT:zO,TEXT_TRIM_OPERATOR_RIGHT:WO,TEXT_PRINT_HELPURL:XO,TEXT_PRINT_TITLE:YO,TEXT_PRINT_TOOLTIP:jO,TEXT_PROMPT_HELPURL:KO,TEXT_PROMPT_TYPE_TEXT:JO,TEXT_PROMPT_TYPE_NUMBER:qO,TEXT_PROMPT_TOOLTIP_NUMBER:ZO,TEXT_PROMPT_TOOLTIP_TEXT:QO,TEXT_COUNT_MESSAGE0:eR,TEXT_COUNT_HELPURL:tR,TEXT_COUNT_TOOLTIP:iR,TEXT_REPLACE_MESSAGE0:sR,TEXT_REPLACE_HELPURL:oR,TEXT_REPLACE_TOOLTIP:nR,TEXT_REVERSE_MESSAGE0:rR,TEXT_REVERSE_HELPURL:lR,TEXT_REVERSE_TOOLTIP:aR,LISTS_CREATE_EMPTY_HELPURL:uR,LISTS_CREATE_EMPTY_TITLE:cR,LISTS_CREATE_EMPTY_TOOLTIP:hR,LISTS_CREATE_WITH_HELPURL:dR,LISTS_CREATE_WITH_TOOLTIP:pR,LISTS_CREATE_WITH_INPUT_WITH:$R,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:gR,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:fR,LISTS_CREATE_WITH_ITEM_TITLE:_R,LISTS_CREATE_WITH_ITEM_TOOLTIP:mR,LISTS_REPEAT_HELPURL:TR,LISTS_REPEAT_TOOLTIP:ER,LISTS_REPEAT_TITLE:bR,LISTS_LENGTH_HELPURL:SR,LISTS_LENGTH_TITLE:vR,LISTS_LENGTH_TOOLTIP:yR,LISTS_ISEMPTY_HELPURL:IR,LISTS_ISEMPTY_TITLE:OR,LISTS_ISEMPTY_TOOLTIP:RR,LISTS_INLIST:CR,LISTS_INDEX_OF_HELPURL:AR,LISTS_INDEX_OF_INPUT_IN_LIST:NR,LISTS_INDEX_OF_FIRST:LR,LISTS_INDEX_OF_LAST:kR,LISTS_INDEX_OF_TOOLTIP:wR,LISTS_GET_INDEX_HELPURL:MR,LISTS_GET_INDEX_GET:DR,LISTS_GET_INDEX_GET_REMOVE:xR,LISTS_GET_INDEX_REMOVE:BR,LISTS_GET_INDEX_FROM_START:PR,LISTS_GET_INDEX_FROM_END:UR,LISTS_GET_INDEX_FIRST:FR,LISTS_GET_INDEX_LAST:HR,LISTS_GET_INDEX_RANDOM:GR,LISTS_GET_INDEX_TAIL:VR,LISTS_GET_INDEX_INPUT_IN_LIST:zR,LISTS_INDEX_FROM_START_TOOLTIP:WR,LISTS_INDEX_FROM_END_TOOLTIP:XR,LISTS_GET_INDEX_TOOLTIP_GET_FROM:YR,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:jR,LISTS_GET_INDEX_TOOLTIP_GET_LAST:KR,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:JR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:qR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:ZR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:QR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:eC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:tC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:iC,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:sC,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:oC,LISTS_SET_INDEX_HELPURL:nC,LISTS_SET_INDEX_INPUT_IN_LIST:rC,LISTS_SET_INDEX_SET:lC,LISTS_SET_INDEX_INSERT:aC,LISTS_SET_INDEX_INPUT_TO:uC,LISTS_SET_INDEX_TOOLTIP_SET_FROM:cC,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:hC,LISTS_SET_INDEX_TOOLTIP_SET_LAST:dC,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:pC,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:$C,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:gC,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:fC,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:_C,LISTS_GET_SUBLIST_HELPURL:mC,LISTS_GET_SUBLIST_INPUT_IN_LIST:TC,LISTS_GET_SUBLIST_START_FROM_START:EC,LISTS_GET_SUBLIST_START_FROM_END:bC,LISTS_GET_SUBLIST_START_FIRST:SC,LISTS_GET_SUBLIST_END_FROM_START:vC,LISTS_GET_SUBLIST_END_FROM_END:yC,LISTS_GET_SUBLIST_END_LAST:IC,LISTS_GET_SUBLIST_TAIL:OC,LISTS_GET_SUBLIST_TOOLTIP:RC,LISTS_SORT_HELPURL:CC,LISTS_SORT_TITLE:AC,LISTS_SORT_TOOLTIP:NC,LISTS_SORT_ORDER_ASCENDING:LC,LISTS_SORT_ORDER_DESCENDING:kC,LISTS_SORT_TYPE_NUMERIC:wC,LISTS_SORT_TYPE_TEXT:MC,LISTS_SORT_TYPE_IGNORECASE:DC,LISTS_SPLIT_HELPURL:xC,LISTS_SPLIT_LIST_FROM_TEXT:BC,LISTS_SPLIT_TEXT_FROM_LIST:PC,LISTS_SPLIT_WITH_DELIMITER:UC,LISTS_SPLIT_TOOLTIP_SPLIT:FC,LISTS_SPLIT_TOOLTIP_JOIN:HC,LISTS_REVERSE_HELPURL:GC,LISTS_REVERSE_MESSAGE0:VC,LISTS_REVERSE_TOOLTIP:zC,ORDINAL_NUMBER_SUFFIX:WC,VARIABLES_GET_HELPURL:XC,VARIABLES_GET_TOOLTIP:YC,VARIABLES_GET_CREATE_SET:jC,VARIABLES_SET_HELPURL:KC,VARIABLES_SET:JC,VARIABLES_SET_TOOLTIP:qC,VARIABLES_SET_CREATE_GET:ZC,PROCEDURES_DEFNORETURN_HELPURL:QC,PROCEDURES_DEFNORETURN_TITLE:eA,PROCEDURES_DEFNORETURN_PROCEDURE:tA,PROCEDURES_BEFORE_PARAMS:iA,PROCEDURES_CALL_BEFORE_PARAMS:sA,PROCEDURES_CALL_DISABLED_DEF_WARNING:oA,PROCEDURES_DEFNORETURN_DO:nA,PROCEDURES_DEFNORETURN_TOOLTIP:rA,PROCEDURES_DEFNORETURN_COMMENT:lA,PROCEDURES_DEFRETURN_HELPURL:aA,PROCEDURES_DEFRETURN_TITLE:uA,PROCEDURES_DEFRETURN_PROCEDURE:cA,PROCEDURES_DEFRETURN_DO:hA,PROCEDURES_DEFRETURN_COMMENT:dA,PROCEDURES_DEFRETURN_RETURN:pA,PROCEDURES_DEFRETURN_TOOLTIP:$A,PROCEDURES_ALLOW_STATEMENTS:gA,PROCEDURES_DEF_DUPLICATE_WARNING:fA,PROCEDURES_CALLNORETURN_HELPURL:_A,PROCEDURES_CALLNORETURN_TOOLTIP:mA,PROCEDURES_CALLRETURN_HELPURL:TA,PROCEDURES_CALLRETURN_TOOLTIP:EA,PROCEDURES_MUTATORCONTAINER_TITLE:bA,PROCEDURES_MUTATORCONTAINER_TOOLTIP:SA,PROCEDURES_MUTATORARG_TITLE:vA,PROCEDURES_MUTATORARG_TOOLTIP:yA,PROCEDURES_HIGHLIGHT_DEF:IA,PROCEDURES_CREATE_DO:OA,PROCEDURES_IFRETURN_TOOLTIP:RA,PROCEDURES_IFRETURN_HELPURL:CA,PROCEDURES_IFRETURN_WARNING:AA,WORKSPACE_COMMENT_DEFAULT_TEXT:NA,WORKSPACE_ARIA_LABEL:LA,COLLAPSED_WARNINGS_WARNING:kA,DIALOG_OK:wA,DIALOG_CANCEL:MA,EDIT_BLOCK_CONTENTS:DA,MOVE_BLOCK:xA,WINDOWS:BA,MAC_OS:PA,CHROME_OS:UA,LINUX:FA,UNKNOWN:HA,CONTROL_KEY:GA,COMMAND_KEY:VA,OPTION_KEY:zA,ALT_KEY:WA,CUT_SHORTCUT:XA,COPY_SHORTCUT:YA,PASTE_SHORTCUT:jA,HELP_PROMPT:KA,SHORTCUTS_GENERAL:JA,SHORTCUTS_EDITING:qA,SHORTCUTS_CODE_NAVIGATION:ZA,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:QA,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:eN,KEYBOARD_NAV_COPIED_HINT:tN,KEYBOARD_NAV_CUT_HINT:iN}=Wb,sN=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:nS,ALT_KEY:WA,CANNOT_DELETE_VARIABLE_PROCEDURE:BS,CHANGE_VALUE_TITLE:yS,CHROME_OS:UA,CLEAN_UP:pS,CLOSE:$S,COLLAPSED_WARNINGS_WARNING:kA,COLLAPSE_ALL:fS,COLLAPSE_BLOCK:gS,COLOUR_BLEND_COLOUR1:ZS,COLOUR_BLEND_COLOUR2:QS,COLOUR_BLEND_HELPURL:JS,COLOUR_BLEND_RATIO:ev,COLOUR_BLEND_TITLE:qS,COLOUR_BLEND_TOOLTIP:tv,COLOUR_HUE:qb,COLOUR_PICKER_HELPURL:US,COLOUR_PICKER_TOOLTIP:FS,COLOUR_RANDOM_HELPURL:HS,COLOUR_RANDOM_TITLE:GS,COLOUR_RANDOM_TOOLTIP:VS,COLOUR_RGB_BLUE:jS,COLOUR_RGB_GREEN:YS,COLOUR_RGB_HELPURL:zS,COLOUR_RGB_RED:XS,COLOUR_RGB_TITLE:WS,COLOUR_RGB_TOOLTIP:KS,COMMAND_KEY:VA,CONTROLS_FLOW_STATEMENTS_HELPURL:Ev,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:bv,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:Sv,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:vv,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:yv,CONTROLS_FLOW_STATEMENTS_WARNING:Iv,CONTROLS_FOREACH_HELPURL:fv,CONTROLS_FOREACH_INPUT_DO:mv,CONTROLS_FOREACH_TITLE:_v,CONTROLS_FOREACH_TOOLTIP:Tv,CONTROLS_FOR_HELPURL:dv,CONTROLS_FOR_INPUT_DO:gv,CONTROLS_FOR_TITLE:$v,CONTROLS_FOR_TOOLTIP:pv,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:Bv,CONTROLS_IF_ELSEIF_TOOLTIP:Pv,CONTROLS_IF_ELSE_TITLE_ELSE:Uv,CONTROLS_IF_ELSE_TOOLTIP:Fv,CONTROLS_IF_HELPURL:Ov,CONTROLS_IF_IF_TITLE_IF:Dv,CONTROLS_IF_IF_TOOLTIP:xv,CONTROLS_IF_MSG_ELSE:wv,CONTROLS_IF_MSG_ELSEIF:kv,CONTROLS_IF_MSG_IF:Lv,CONTROLS_IF_MSG_THEN:Mv,CONTROLS_IF_TOOLTIP_1:Rv,CONTROLS_IF_TOOLTIP_2:Cv,CONTROLS_IF_TOOLTIP_3:Av,CONTROLS_IF_TOOLTIP_4:Nv,CONTROLS_REPEAT_HELPURL:iv,CONTROLS_REPEAT_INPUT_DO:ov,CONTROLS_REPEAT_TITLE:sv,CONTROLS_REPEAT_TOOLTIP:nv,CONTROLS_WHILEUNTIL_HELPURL:rv,CONTROLS_WHILEUNTIL_INPUT_DO:lv,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:uv,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:av,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:hv,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:cv,CONTROL_KEY:GA,COPY_SHORTCUT:YA,CUT_SHORTCUT:XA,DELETE_ALL_BLOCKS:dS,DELETE_BLOCK:cS,DELETE_VARIABLE:PS,DELETE_VARIABLE_CONFIRMATION:xS,DELETE_X_BLOCKS:hS,DIALOG_CANCEL:MA,DIALOG_OK:wA,DISABLE_BLOCK:TS,DUPLICATE_BLOCK:oS,DUPLICATE_COMMENT:lS,EDIT_BLOCK_CONTENTS:DA,ENABLE_BLOCK:ES,EXPAND_ALL:mS,EXPAND_BLOCK:_S,EXTERNAL_INPUTS:aS,HELP:bS,HELP_PROMPT:KA,INLINE_INPUTS:uS,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:eN,KEYBOARD_NAV_COPIED_HINT:tN,KEYBOARD_NAV_CUT_HINT:iN,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:QA,LINUX:FA,LISTS_CREATE_EMPTY_HELPURL:uR,LISTS_CREATE_EMPTY_TITLE:cR,LISTS_CREATE_EMPTY_TOOLTIP:hR,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:gR,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:fR,LISTS_CREATE_WITH_HELPURL:dR,LISTS_CREATE_WITH_INPUT_WITH:$R,LISTS_CREATE_WITH_ITEM_TITLE:_R,LISTS_CREATE_WITH_ITEM_TOOLTIP:mR,LISTS_CREATE_WITH_TOOLTIP:pR,LISTS_GET_INDEX_FIRST:FR,LISTS_GET_INDEX_FROM_END:UR,LISTS_GET_INDEX_FROM_START:PR,LISTS_GET_INDEX_GET:DR,LISTS_GET_INDEX_GET_REMOVE:xR,LISTS_GET_INDEX_HELPURL:MR,LISTS_GET_INDEX_INPUT_IN_LIST:zR,LISTS_GET_INDEX_LAST:HR,LISTS_GET_INDEX_RANDOM:GR,LISTS_GET_INDEX_REMOVE:BR,LISTS_GET_INDEX_TAIL:VR,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:jR,LISTS_GET_INDEX_TOOLTIP_GET_FROM:YR,LISTS_GET_INDEX_TOOLTIP_GET_LAST:KR,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:JR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:ZR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:qR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:QR,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:eC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:iC,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:tC,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:sC,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:oC,LISTS_GET_SUBLIST_END_FROM_END:yC,LISTS_GET_SUBLIST_END_FROM_START:vC,LISTS_GET_SUBLIST_END_LAST:IC,LISTS_GET_SUBLIST_HELPURL:mC,LISTS_GET_SUBLIST_INPUT_IN_LIST:TC,LISTS_GET_SUBLIST_START_FIRST:SC,LISTS_GET_SUBLIST_START_FROM_END:bC,LISTS_GET_SUBLIST_START_FROM_START:EC,LISTS_GET_SUBLIST_TAIL:OC,LISTS_GET_SUBLIST_TOOLTIP:RC,LISTS_HUE:Jb,LISTS_INDEX_FROM_END_TOOLTIP:XR,LISTS_INDEX_FROM_START_TOOLTIP:WR,LISTS_INDEX_OF_FIRST:LR,LISTS_INDEX_OF_HELPURL:AR,LISTS_INDEX_OF_INPUT_IN_LIST:NR,LISTS_INDEX_OF_LAST:kR,LISTS_INDEX_OF_TOOLTIP:wR,LISTS_INLIST:CR,LISTS_ISEMPTY_HELPURL:IR,LISTS_ISEMPTY_TITLE:OR,LISTS_ISEMPTY_TOOLTIP:RR,LISTS_LENGTH_HELPURL:SR,LISTS_LENGTH_TITLE:vR,LISTS_LENGTH_TOOLTIP:yR,LISTS_REPEAT_HELPURL:TR,LISTS_REPEAT_TITLE:bR,LISTS_REPEAT_TOOLTIP:ER,LISTS_REVERSE_HELPURL:GC,LISTS_REVERSE_MESSAGE0:VC,LISTS_REVERSE_TOOLTIP:zC,LISTS_SET_INDEX_HELPURL:nC,LISTS_SET_INDEX_INPUT_IN_LIST:rC,LISTS_SET_INDEX_INPUT_TO:uC,LISTS_SET_INDEX_INSERT:aC,LISTS_SET_INDEX_SET:lC,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:gC,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:$C,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:fC,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:_C,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:hC,LISTS_SET_INDEX_TOOLTIP_SET_FROM:cC,LISTS_SET_INDEX_TOOLTIP_SET_LAST:dC,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:pC,LISTS_SORT_HELPURL:CC,LISTS_SORT_ORDER_ASCENDING:LC,LISTS_SORT_ORDER_DESCENDING:kC,LISTS_SORT_TITLE:AC,LISTS_SORT_TOOLTIP:NC,LISTS_SORT_TYPE_IGNORECASE:DC,LISTS_SORT_TYPE_NUMERIC:wC,LISTS_SORT_TYPE_TEXT:MC,LISTS_SPLIT_HELPURL:xC,LISTS_SPLIT_LIST_FROM_TEXT:BC,LISTS_SPLIT_TEXT_FROM_LIST:PC,LISTS_SPLIT_TOOLTIP_JOIN:HC,LISTS_SPLIT_TOOLTIP_SPLIT:FC,LISTS_SPLIT_WITH_DELIMITER:UC,LOGIC_BOOLEAN_FALSE:oy,LOGIC_BOOLEAN_HELPURL:iy,LOGIC_BOOLEAN_TOOLTIP:ny,LOGIC_BOOLEAN_TRUE:sy,LOGIC_COMPARE_HELPURL:Hv,LOGIC_COMPARE_TOOLTIP_EQ:Gv,LOGIC_COMPARE_TOOLTIP_GT:Xv,LOGIC_COMPARE_TOOLTIP_GTE:Yv,LOGIC_COMPARE_TOOLTIP_LT:zv,LOGIC_COMPARE_TOOLTIP_LTE:Wv,LOGIC_COMPARE_TOOLTIP_NEQ:Vv,LOGIC_HUE:Xb,LOGIC_NEGATE_HELPURL:Qv,LOGIC_NEGATE_TITLE:ey,LOGIC_NEGATE_TOOLTIP:ty,LOGIC_NULL:ly,LOGIC_NULL_HELPURL:ry,LOGIC_NULL_TOOLTIP:ay,LOGIC_OPERATION_AND:Jv,LOGIC_OPERATION_HELPURL:jv,LOGIC_OPERATION_OR:Zv,LOGIC_OPERATION_TOOLTIP_AND:Kv,LOGIC_OPERATION_TOOLTIP_OR:qv,LOGIC_TERNARY_CONDITION:cy,LOGIC_TERNARY_HELPURL:uy,LOGIC_TERNARY_IF_FALSE:dy,LOGIC_TERNARY_IF_TRUE:hy,LOGIC_TERNARY_TOOLTIP:py,LOOPS_HUE:Yb,MAC_OS:PA,MATH_ADDITION_SYMBOL:fy,MATH_ARITHMETIC_HELPURL:Ry,MATH_ARITHMETIC_TOOLTIP_ADD:Cy,MATH_ARITHMETIC_TOOLTIP_DIVIDE:Ly,MATH_ARITHMETIC_TOOLTIP_MINUS:Ay,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:Ny,MATH_ARITHMETIC_TOOLTIP_POWER:ky,MATH_ATAN2_HELPURL:zI,MATH_ATAN2_TITLE:WI,MATH_ATAN2_TOOLTIP:XI,MATH_CHANGE_HELPURL:rI,MATH_CHANGE_TITLE:lI,MATH_CHANGE_TITLE_ITEM:aI,MATH_CHANGE_TOOLTIP:uI,MATH_CONSTANT_HELPURL:Jy,MATH_CONSTANT_TOOLTIP:qy,MATH_CONSTRAIN_HELPURL:DI,MATH_CONSTRAIN_TITLE:xI,MATH_CONSTRAIN_TOOLTIP:BI,MATH_DIVISION_SYMBOL:my,MATH_HUE:jb,MATH_IS_DIVISIBLE_BY:oI,MATH_IS_EVEN:Zy,MATH_IS_NEGATIVE:sI,MATH_IS_ODD:Qy,MATH_IS_POSITIVE:iI,MATH_IS_PRIME:eI,MATH_IS_TOOLTIP:nI,MATH_IS_WHOLE:tI,MATH_MODULO_HELPURL:kI,MATH_MODULO_TITLE:wI,MATH_MODULO_TOOLTIP:MI,MATH_MULTIPLICATION_SYMBOL:Ty,MATH_NUMBER_HELPURL:$y,MATH_NUMBER_TOOLTIP:gy,MATH_ONLIST_HELPURL:gI,MATH_ONLIST_OPERATOR_AVERAGE:SI,MATH_ONLIST_OPERATOR_MAX:EI,MATH_ONLIST_OPERATOR_MEDIAN:yI,MATH_ONLIST_OPERATOR_MIN:mI,MATH_ONLIST_OPERATOR_MODE:OI,MATH_ONLIST_OPERATOR_RANDOM:NI,MATH_ONLIST_OPERATOR_STD_DEV:CI,MATH_ONLIST_OPERATOR_SUM:fI,MATH_ONLIST_TOOLTIP_AVERAGE:vI,MATH_ONLIST_TOOLTIP_MAX:bI,MATH_ONLIST_TOOLTIP_MEDIAN:II,MATH_ONLIST_TOOLTIP_MIN:TI,MATH_ONLIST_TOOLTIP_MODE:RI,MATH_ONLIST_TOOLTIP_RANDOM:LI,MATH_ONLIST_TOOLTIP_STD_DEV:AI,MATH_ONLIST_TOOLTIP_SUM:_I,MATH_POWER_SYMBOL:Ey,MATH_RANDOM_FLOAT_HELPURL:HI,MATH_RANDOM_FLOAT_TITLE_RANDOM:GI,MATH_RANDOM_FLOAT_TOOLTIP:VI,MATH_RANDOM_INT_HELPURL:PI,MATH_RANDOM_INT_TITLE:UI,MATH_RANDOM_INT_TOOLTIP:FI,MATH_ROUND_HELPURL:cI,MATH_ROUND_OPERATOR_ROUND:dI,MATH_ROUND_OPERATOR_ROUNDDOWN:$I,MATH_ROUND_OPERATOR_ROUNDUP:pI,MATH_ROUND_TOOLTIP:hI,MATH_SINGLE_HELPURL:wy,MATH_SINGLE_OP_ABSOLUTE:xy,MATH_SINGLE_OP_ROOT:My,MATH_SINGLE_TOOLTIP_ABS:By,MATH_SINGLE_TOOLTIP_EXP:Hy,MATH_SINGLE_TOOLTIP_LN:Uy,MATH_SINGLE_TOOLTIP_LOG10:Fy,MATH_SINGLE_TOOLTIP_NEG:Py,MATH_SINGLE_TOOLTIP_POW10:Gy,MATH_SINGLE_TOOLTIP_ROOT:Dy,MATH_SUBTRACTION_SYMBOL:_y,MATH_TRIG_ACOS:Iy,MATH_TRIG_ASIN:yy,MATH_TRIG_ATAN:Oy,MATH_TRIG_COS:Sy,MATH_TRIG_HELPURL:Vy,MATH_TRIG_SIN:by,MATH_TRIG_TAN:vy,MATH_TRIG_TOOLTIP_ACOS:jy,MATH_TRIG_TOOLTIP_ASIN:Yy,MATH_TRIG_TOOLTIP_ATAN:Ky,MATH_TRIG_TOOLTIP_COS:Wy,MATH_TRIG_TOOLTIP_SIN:zy,MATH_TRIG_TOOLTIP_TAN:Xy,MOVE_BLOCK:xA,NEW_COLOUR_VARIABLE:NS,NEW_NUMBER_VARIABLE:AS,NEW_STRING_VARIABLE:CS,NEW_VARIABLE:RS,NEW_VARIABLE_TITLE:kS,NEW_VARIABLE_TYPE_TITLE:LS,OPTION_KEY:zA,ORDINAL_NUMBER_SUFFIX:WC,PASTE_SHORTCUT:jA,PROCEDURES_ALLOW_STATEMENTS:gA,PROCEDURES_BEFORE_PARAMS:iA,PROCEDURES_CALLNORETURN_HELPURL:_A,PROCEDURES_CALLNORETURN_TOOLTIP:mA,PROCEDURES_CALLRETURN_HELPURL:TA,PROCEDURES_CALLRETURN_TOOLTIP:EA,PROCEDURES_CALL_BEFORE_PARAMS:sA,PROCEDURES_CALL_DISABLED_DEF_WARNING:oA,PROCEDURES_CREATE_DO:OA,PROCEDURES_DEFNORETURN_COMMENT:lA,PROCEDURES_DEFNORETURN_DO:nA,PROCEDURES_DEFNORETURN_HELPURL:QC,PROCEDURES_DEFNORETURN_PROCEDURE:tA,PROCEDURES_DEFNORETURN_TITLE:eA,PROCEDURES_DEFNORETURN_TOOLTIP:rA,PROCEDURES_DEFRETURN_COMMENT:dA,PROCEDURES_DEFRETURN_DO:hA,PROCEDURES_DEFRETURN_HELPURL:aA,PROCEDURES_DEFRETURN_PROCEDURE:cA,PROCEDURES_DEFRETURN_RETURN:pA,PROCEDURES_DEFRETURN_TITLE:uA,PROCEDURES_DEFRETURN_TOOLTIP:$A,PROCEDURES_DEF_DUPLICATE_WARNING:fA,PROCEDURES_HIGHLIGHT_DEF:IA,PROCEDURES_HUE:eS,PROCEDURES_IFRETURN_HELPURL:CA,PROCEDURES_IFRETURN_TOOLTIP:RA,PROCEDURES_IFRETURN_WARNING:AA,PROCEDURES_MUTATORARG_TITLE:vA,PROCEDURES_MUTATORARG_TOOLTIP:yA,PROCEDURES_MUTATORCONTAINER_TITLE:bA,PROCEDURES_MUTATORCONTAINER_TOOLTIP:SA,REDO:vS,REMOVE_COMMENT:rS,RENAME_VARIABLE:IS,RENAME_VARIABLE_TITLE:OS,SHORTCUTS_CODE_NAVIGATION:ZA,SHORTCUTS_EDITING:qA,SHORTCUTS_GENERAL:JA,TEXTS_HUE:Kb,TEXT_APPEND_HELPURL:iO,TEXT_APPEND_TITLE:sO,TEXT_APPEND_TOOLTIP:nO,TEXT_APPEND_VARIABLE:oO,TEXT_CHANGECASE_HELPURL:xO,TEXT_CHANGECASE_OPERATOR_LOWERCASE:UO,TEXT_CHANGECASE_OPERATOR_TITLECASE:FO,TEXT_CHANGECASE_OPERATOR_UPPERCASE:PO,TEXT_CHANGECASE_TOOLTIP:BO,TEXT_CHARAT_FIRST:bO,TEXT_CHARAT_FROM_END:EO,TEXT_CHARAT_FROM_START:TO,TEXT_CHARAT_HELPURL:_O,TEXT_CHARAT_LAST:SO,TEXT_CHARAT_RANDOM:vO,TEXT_CHARAT_TAIL:yO,TEXT_CHARAT_TITLE:mO,TEXT_CHARAT_TOOLTIP:IO,TEXT_COUNT_HELPURL:tR,TEXT_COUNT_MESSAGE0:eR,TEXT_COUNT_TOOLTIP:iR,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:eO,TEXT_CREATE_JOIN_ITEM_TOOLTIP:tO,TEXT_CREATE_JOIN_TITLE_JOIN:ZI,TEXT_CREATE_JOIN_TOOLTIP:QI,TEXT_GET_SUBSTRING_END_FROM_END:wO,TEXT_GET_SUBSTRING_END_FROM_START:kO,TEXT_GET_SUBSTRING_END_LAST:MO,TEXT_GET_SUBSTRING_HELPURL:RO,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:CO,TEXT_GET_SUBSTRING_START_FIRST:LO,TEXT_GET_SUBSTRING_START_FROM_END:NO,TEXT_GET_SUBSTRING_START_FROM_START:AO,TEXT_GET_SUBSTRING_TAIL:DO,TEXT_GET_SUBSTRING_TOOLTIP:OO,TEXT_INDEXOF_HELPURL:dO,TEXT_INDEXOF_OPERATOR_FIRST:gO,TEXT_INDEXOF_OPERATOR_LAST:fO,TEXT_INDEXOF_TITLE:$O,TEXT_INDEXOF_TOOLTIP:pO,TEXT_ISEMPTY_HELPURL:uO,TEXT_ISEMPTY_TITLE:cO,TEXT_ISEMPTY_TOOLTIP:hO,TEXT_JOIN_HELPURL:KI,TEXT_JOIN_TITLE_CREATEWITH:JI,TEXT_JOIN_TOOLTIP:qI,TEXT_LENGTH_HELPURL:rO,TEXT_LENGTH_TITLE:lO,TEXT_LENGTH_TOOLTIP:aO,TEXT_PRINT_HELPURL:XO,TEXT_PRINT_TITLE:YO,TEXT_PRINT_TOOLTIP:jO,TEXT_PROMPT_HELPURL:KO,TEXT_PROMPT_TOOLTIP_NUMBER:ZO,TEXT_PROMPT_TOOLTIP_TEXT:QO,TEXT_PROMPT_TYPE_NUMBER:qO,TEXT_PROMPT_TYPE_TEXT:JO,TEXT_REPLACE_HELPURL:oR,TEXT_REPLACE_MESSAGE0:sR,TEXT_REPLACE_TOOLTIP:nR,TEXT_REVERSE_HELPURL:lR,TEXT_REVERSE_MESSAGE0:rR,TEXT_REVERSE_TOOLTIP:aR,TEXT_TEXT_HELPURL:YI,TEXT_TEXT_TOOLTIP:jI,TEXT_TRIM_HELPURL:HO,TEXT_TRIM_OPERATOR_BOTH:VO,TEXT_TRIM_OPERATOR_LEFT:zO,TEXT_TRIM_OPERATOR_RIGHT:WO,TEXT_TRIM_TOOLTIP:GO,TODAY:sS,UNDO:SS,UNKNOWN:HA,UNNAMED_KEY:iS,VARIABLES_DEFAULT_NAME:tS,VARIABLES_DYNAMIC_HUE:Qb,VARIABLES_GET_CREATE_SET:jC,VARIABLES_GET_HELPURL:XC,VARIABLES_GET_TOOLTIP:YC,VARIABLES_HUE:Zb,VARIABLES_SET:JC,VARIABLES_SET_CREATE_GET:ZC,VARIABLES_SET_HELPURL:KC,VARIABLES_SET_TOOLTIP:qC,VARIABLE_ALREADY_EXISTS:wS,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:MS,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:DS,WINDOWS:BA,WORKSPACE_ARIA_LABEL:LA,WORKSPACE_COMMENT_DEFAULT_TEXT:NA},Symbol.toStringTag,{value:"Module"})),Ui=(Pe,ze)=>`<value name="${Pe}"><shadow type="math_number"><field name="NUM">${ze}</field></shadow></value>`,Ft=(Pe,ze)=>`<value name="${Pe}"><shadow type="inline_string_shadow"><field name="TEXT">${ze}</field></shadow></value>`,rt={Events:"#e3ab32",Logic:"#e4ba2e",Math:"#16ad19",Strings:"#00b963",Json:"#345fc4",Objects:"#bc47b4"},oN=[["A","a"],["B","b"],["C","c"],["D","d"],["E","e"],["F","f"],["G","g"],["H","h"],["I","i"],["J","j"],["K","k"],["L","l"],["M","m"],["N","n"],["O","o"],["P","p"],["Q","q"],["R","r"],["S","s"],["T","t"],["U","u"],["V","v"],["W","w"],["X","x"],["Y","y"],["Z","z"],["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["Arrow Up","ArrowUp"],["Arrow Down","ArrowDown"],["Arrow Left","ArrowLeft"],["Arrow Right","ArrowRight"],["Enter","Enter"],["Escape","Escape"],["Backspace","Backspace"],["Tab","Tab"],["Caps Lock","CapsLock"],["Shift","Shift"],["Control","Control"],["Alt","Alt"],["Meta (Cmd/Win)","Meta"],["Space"," "],["Page Up","PageUp"],["Page Down","PageDown"],["End","End"],["Home","Home"],["Insert","Insert"],["Delete","Delete"],["F1","F1"],["F2","F2"],["F3","F3"],["F4","F4"],["F5","F5"],["F6","F6"],["F7","F7"],["F8","F8"],["F9","F9"],["F10","F10"],["F11","F11"],["F12","F12"],[";",";"],["=","="],[",",","],["-","-"],[".","."],["/","/"],["`","`"],["[","["],["\\","\\"],["]","]"],["'","'"]];function nN(){return`<xml id="toolbox" style="display: none">
        <category name="Events" colour="${rt.Events}">
          <label text="Events"></label>
          <block type="events_whenstarted"></block>
          <block type="events_whenstopped"></block>
          <block type="events_whenkeypressed" gap="50"></block>
          <button text="Create event" callbackKey="createGameEvent"></button>
          <block type="events_whenreceivedevent"></block>
          <block type="events_callevent"></block>
        </category>
          <category name="Logic" colour="${rt.Logic}">
          <label text="Logic"></label>
          <block type="logic_wait">
            ${Ui("SECONDS",10)}
          </block>
          <block type="logic_repeat">
            ${Ui("REPEAT",10)}
          </block>
          <block type="logic_forever"></block>
          <block type="logic_if"></block>
          <block type="logic_ifelse"></block>
          <block type="logic_ifelsestring">
            ${Ft("VALUE1","apple")}
            ${Ft("VALUE2","banana")}
          </block>
          <block type="logic_waituntil"></block>
          <block type="logic_while"></block>
          <block type="logic_stop"></block>
        </category>
        <category name="Math" colour="${rt.Math}">
          <label text="Math"></label>
          <block type="math_add">
            ${Ui("NUM1",0)}
            ${Ui("NUM2",0)}
          </block>
          <block type="math_subtract">
            ${Ui("NUM1",0)}
            ${Ui("NUM2",0)}
          </block>
          <block type="math_multiply">
            ${Ui("NUM1",0)}
            ${Ui("NUM2",0)}
          </block>
          <block type="math_divide" gap="50">
            ${Ui("NUM1",0)}
            ${Ui("NUM2",0)}
          </block>
          <block type="math_comparison">
            ${Ft("VALUE1",50)}
            ${Ft("VALUE2",25)}
          </block>
          <block type="math_boolcomparison"></block>
          <block type="math_randomnum">
            ${Ui("MIN",0)}
            ${Ui("MAX",10)}
          </block>
          <block type="math_mathop">
            ${Ui("NUM",10)}
          </block>
        </category>
        <category name="Strings" colour="${rt.Strings}">
          <label text="Strings"></label>
          <block type="strings_newline"></block>
          <block type="strings_letterof">
            ${Ui("LETTER",1)}
            ${Ft("STRING","apple")}
          </block>
          <block type="strings_letterrange">
            ${Ui("START",1)}
            ${Ui("END",3)}
            ${Ft("STRING","apple")}
          </block>
          <block type="strings_split">
            ${Ft("STRING","Hello, world!")}
            ${Ft("SPLIT",", ")}
            ${Ui("ITEM",1)}
          </block>
          <block type="strings_replace">
            ${Ft("TARGET","morning")}
            ${Ft("REPLACE","afternoon")}
            ${Ft("STRING","Good morning!")}
          </block>
          <block type="strings_join">
            ${Ft("STRING1","apple")}
            ${Ft("STRING2","banana")}
          </block>
          <block type="strings_reverse">
            ${Ft("STRING","apple")}
          </block>
          <block type="strings_length" gap="50">
            ${Ft("STRING","apple")}
          </block>
        </category>
        <category name="Json" colour="${rt.Json}">
          <label text="Json"></label>
          <block type="json_validate">${Ft("STRING",'{"Hello": "World"}')}</block>
          <block type="json_objectall"><value name="JSON"></value></block>
          <block type="json_parse">${Ft("STRING",'{"apple": "banana"}')}</block>
          <block type="json_stringify"></block>
          <block type="json_new"></block>
          <label text="Objects"></label>
          <block type="json_objectlen"></block>
          <block type="json_objectvalue">${Ft("KEY","key")}</block>
          <block type="json_setobjectvalue">
            ${Ft("KEY","key")}
            ${Ft("VALUE","value")}
          </block>
          <block type="json_delobjectvalue">${Ft("KEY","key")}</block>
          <label text="Arrays"></label>
          <block type="json_arraylen"></block>
          <block type="json_arrayitem">${Ui("ITEM",1)}</block>
          <block type="json_arraydelete">${Ui("ITEM",1)}</block>
          <block type="json_arrayindex">${Ft("ITEM","value")}</block>
          <block type="json_arrayadd">${Ft("ITEM","value")}</block>
          <block type="json_arrayreplace">
            ${Ui("ITEM","1")}
            ${Ft("REPLACEMENT","apple")}
          </block>
          <block type="json_arrayinsert">
            ${Ft("VALUE","apple")}
            ${Ui("ITEM",1)}
          </block>
          <label text="Extra"></label>
          <block type="json_splittoarray">
            ${Ft("STRING","apple")}
            ${Ft("SPLIT","p")}
          </block>
          <block type="json_joinarray">${Ft("JOIN",",")}</block>
        </category>
        <category name="Objects" colour="${rt.Objects}">
          <label text="Objects"></label>
          <button text="How to select game objects" callbackKey="openObjectSelectingDocs"></button>
          <block type="objects_new"></block>
          <block type="objects_select" gap="50">${Ft("SELECTOR","project/block")}</block>
          <block type="objects_setattribute">
            ${Ft("ATTRIBUTE","name")}
            ${Ft("VALUE","My object")}
          </block>
          <block type="objects_getattribute">${Ft("ATTRIBUTE","name")}</block>
          <block type="objects_getattributejson" gap="50"></block>
          <block type="objects_append"></block>
          <block type="objects_delete"></block>
        </category>
        </xml>
    `}function rN(){return[{type:"events_whenstarted",message0:"When game started %1",args0:[{type:"field_image",src:"./assets/blockIcons/play.svg",width:20,height:20,alt:"*"}],hat:"cap",nextStatement:null,colour:rt.Events},{type:"events_whenstopped",message0:"when game stopped %1",args0:[{type:"field_image",src:"./assets/blockIcons/stop-sign.svg",width:20,height:20,alt:"*"}],hat:"cap",nextStatement:null,colour:rt.Events},{type:"events_whenkeypressed",message0:"when key %1 pressed %2",args0:[{type:"field_dropdown",name:"KEY",options:oN},{type:"field_image",src:"./assets/blockIcons/keyboard.svg",width:20,height:20,alt:"*"}],colour:rt.Events,hat:"cap",nextStatement:null},{type:"events_whenreceivedevent",message0:"when event %1 called %2",args0:[{type:"field_dropdown",name:"EVENT",options:[["TODO: add events","TODO"]]},{type:"field_image",src:"./assets/blockIcons/satellite.svg",width:20,height:20,alt:"*"}],hat:"cap",nextStatement:null,colour:rt.Events},{type:"events_callevent",message0:"call event %1 %2",args0:[{type:"field_dropdown",name:"EVENT",options:[["TODO: add events","TODO"]]},{type:"field_image",src:"./assets/blockIcons/satellite.svg",width:20,height:20,alt:"*"}],nextStatement:null,previousStatement:null,colour:rt.Events},{type:"logic_wait",message0:"wait %1 seconds",args0:[{type:"input_value",name:"SECONDS",check:["Number","String"]}],nextStatement:null,previousStatement:null,colour:rt.Logic},{type:"logic_repeat",message0:`repeat %1 times
%2`,args0:[{type:"input_value",name:"REPEAT"},{type:"input_statement",name:"STATEMENT"}],previousStatement:null,nextStatement:null,colour:rt.Logic},{type:"logic_forever",message0:`forever
%1`,args0:[{type:"input_statement",name:"STATEMENT"}],colour:rt.Logic,previousStatement:null},{type:"logic_if",message0:"if %1 then %2",args0:[{type:"input_value",name:"CONDITION",check:"Boolean"},{type:"input_statement",name:"STATEMENT"}],nextStatement:null,previousStatement:null,colour:rt.Logic},{type:"logic_ifelse",message0:"if %1 then %2 else %3",args0:[{type:"input_value",name:"CONDITION",check:"Boolean"},{type:"input_statement",name:"STATEMENT1"},{type:"input_statement",name:"STATEMENT2"}],nextStatement:null,previousStatement:null,colour:rt.Logic},{type:"logic_ifelsestring",message0:"if %1 then %2 else %3",args0:[{type:"input_value",name:"CONDITION",check:"Boolean"},{type:"input_value",name:"VALUE1"},{type:"input_value",name:"VALUE2"}],inputsInline:!0,output:"String",colour:rt.Logic},{type:"logic_waituntil",message0:"wait until %1",args0:[{type:"input_value",name:"CONDITION",check:"Boolean"}],previousStatement:null,nextStatement:null,colour:rt.Logic},{type:"logic_while",message0:`while %1 do 
%2`,args0:[{type:"input_value",name:"CONDITION",check:"Boolean"},{type:"input_statement",name:"STATEMENT"}],nextStatement:null,previousStatement:null,colour:rt.Logic},{type:"logic_stop",message0:"stop %1",args0:[{type:"field_dropdown",name:"STOP",options:[["Game","GAME"],["This thread","THREAD"],["All threads in script","THISSCRIPT"],["All scripts in object","ALLSCRIPTS"]]}],previousStatement:null,colour:rt.Logic},{type:"math_add",message0:"%1+%2",args0:[{type:"input_value",name:"NUM1",check:["Number","String"]},{type:"input_value",name:"NUM2",check:["Number","String"]}],output:"Number",colour:rt.Math,inputsInline:!0},{type:"math_subtract",message0:"%1-%2",args0:[{type:"input_value",name:"NUM1",check:["Number","String"]},{type:"input_value",name:"NUM2",check:["Number","String"]}],output:"Number",colour:rt.Math,inputsInline:!0},{type:"math_multiply",message0:"%1*%2",args0:[{type:"input_value",name:"NUM1",check:["Number","String"]},{type:"input_value",name:"NUM2",check:["Number","String"]}],output:"Number",colour:rt.Math,inputsInline:!0},{type:"math_divide",message0:"%1/%2",args0:[{type:"input_value",name:"NUM1",check:["Number","String"]},{type:"input_value",name:"NUM2",check:["Number","String"]}],output:"Number",colour:rt.Math,inputsInline:!0},{type:"math_comparison",message0:"%1%2%3",args0:[{type:"input_value",name:"VALUE1"},{type:"field_dropdown",name:"COMPARISON",options:[["=","EQUALS"],["","NOTEQUALS"],[">","GREATERTHAN"],["<","LESSTHAN"],["","GREATERTHANOREQUAL"],["","LESSTHANOREQUAL"]]},{type:"input_value",name:"VALUE2"}],output:"Boolean",colour:rt.Math,inputsInline:!0},{type:"math_randomnum",message0:"random number from %1 to %2",args0:[{type:"input_value",name:"MIN"},{type:"input_value",name:"MAX"}],output:"Number",colour:rt.Math,inputsInline:!0},{type:"math_mathop",message0:"%1 of %2",args0:[{type:"field_dropdown",name:"OPERATION",options:[["abs","ABS"],["floor","FLOOR"],["ceiling","CEILING"],["sqrt","SQRT"],["sin","SIN"],["cos","COS"],["tan","TAN"],["asin","ASIN"],["acos","ACOS"],["atan","ATAN"],["In","IN"],["log","LOG"],["e ^","POWERE"],["10 ^","POWER10"]]},{type:"input_value",name:"NUM"}],output:"Number",colour:rt.Math},{type:"strings_newline",message0:"newline character",output:"String",colour:rt.Strings},{type:"strings_join",message0:"join %1%2",args0:[{type:"input_value",name:"STRING1"},{type:"input_value",name:"STRING2"}],output:"String",colour:rt.Strings,inputsInline:!0},{type:"strings_letterof",message0:"letter %1 of %2",args0:[{type:"input_value",name:"LETTER"},{type:"input_value",name:"STRING"}],output:"String",colour:rt.Strings,inputsInline:!0},{type:"strings_split",message0:"split %1 by %2 and get item %3",args0:[{type:"input_value",name:"STRING"},{type:"input_value",name:"SPLIT"},{type:"input_value",name:"ITEM"}],output:"String",colour:rt.Strings,inputsInline:!0},{type:"strings_replace",message0:"replace all %1 with %2 in %3",args0:[{type:"input_value",name:"TARGET"},{type:"input_value",name:"REPLACE"},{type:"input_value",name:"STRING"}],output:"String",colour:rt.Strings,inputsInline:!0},{type:"strings_letterrange",message0:"letters %1 to %2 in %3",args0:[{type:"input_value",name:"START"},{type:"input_value",name:"END"},{type:"input_value",name:"STRING"}],output:"String",colour:rt.Strings,inputsInline:!0},{type:"strings_reverse",message0:"reverse %1",args0:[{type:"input_value",name:"STRING"}],output:"String",inputsInline:!0,colour:rt.Strings},{type:"strings_length",message0:"length of %1",args0:[{type:"input_value",name:"STRING"}],output:"Number",colour:rt.Strings,inputsInline:!0},{type:"json_new",message0:"new %1",args0:[{type:"field_dropdown",name:"TYPE",options:[["Object","OBJECT"],["Array","ARRAY"]]}],output:"Json",colour:rt.Json},{type:"json_validate",message0:"is %1 valid %2",args0:[{type:"input_value",name:"STRING"},{type:"field_dropdown",name:"TYPE",options:[["Json","JSON"],["Object","OBJECT"],["Array","ARRAY"]]}],output:"Boolean",colour:rt.Json},{type:"json_objectall",message0:"all %1 of object %2",args0:[{type:"field_dropdown",name:"TYPE",options:[["Keys","KEYS"],["Values","VALUES"]]},{type:"input_value",name:"JSON",check:"Json"}],output:"Json",colour:rt.Json},{type:"json_parse",message0:"parse %1",args0:[{type:"input_value",name:"STRING"}],output:"Json",colour:rt.Json},{type:"json_stringify",message0:"stringify %1",args0:[{type:"input_value",name:"JSON",check:"Json"}],output:"String",colour:rt.Json},{type:"json_objectlen",message0:"length of object %1",args0:[{type:"input_value",name:"OBJECT",check:"Json"}],colour:rt.Json,output:"Number"},{type:"json_objectvalue",message0:"value of %1 in %2",args0:[{type:"input_value",name:"KEY"},{type:"input_value",name:"JSON",check:"Json"}],inputsInline:!0,colour:rt.Json,output:"String"},{type:"json_setobjectvalue",message0:"set %1 to %2 in %3",args0:[{type:"input_value",name:"KEY"},{type:"input_value",name:"VALUE"},{type:"input_value",name:"JSON",check:"Json"}],colour:rt.Json,output:"Json",inputsInline:!0},{type:"json_delobjectvalue",message0:"delete %1 in %2",args0:[{type:"input_value",name:"KEY"},{type:"input_value",name:"JSON",check:"Json"}],colour:rt.Json,output:"Json",inputsInline:!0},{type:"json_arraylen",message0:"length of array %1",args0:[{type:"input_value",name:"ARRAY",check:"Json"}],colour:rt.Json,output:"Number"},{type:"json_arrayitem",message0:"item %1 of array %2",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"ARRAY",check:"Json"}],colour:rt.Json,inputsInline:!0,output:"String"},{type:"json_arrayadd",message0:"add %1 to array %2",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"ARRAY",check:"Json"}],colour:rt.Json,output:"Json",inputsInline:!0},{type:"json_arraydelete",message0:"delete item %1 from array %2",args0:[{type:"input_value",name:"ITEM",check:["Number","String"]},{type:"input_value",name:"ARRAY",check:"Json"}],output:"Json",colour:rt.Json,inputsInline:!0},{type:"json_arrayreplace",message0:"replace item %1 of array %2 with %3",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"ARRAY",check:"Json"},{type:"input_value",name:"REPLACEMENT"}],colour:rt.Json,output:"Json",inputsInline:!0},{type:"json_arrayinsert",message0:"insert %1 at %2 of array %3",args0:[{type:"input_value",name:"VALUE"},{type:"input_value",name:"ITEM"},{type:"input_value",name:"ARRAY",check:"Json"}],colour:rt.Json,output:"Json",inputsInline:!0},{type:"json_arrayindex",message0:"index of %1 in array %2",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"ARRAY",check:"Json"}],colour:rt.Json,output:"String",inputsInline:!0},{type:"json_splittoarray",message0:"split %1 by %2 to array",args0:[{type:"input_value",name:"STRING",check:["String","Number"]},{type:"input_value",name:"SPLIT",check:["String","Number"]}],colour:rt.Json,output:"Json",inputsInline:!0},{type:"json_joinarray",message0:"join array %1 by %2",args0:[{type:"input_value",name:"ARRAY",check:"Json"},{type:"input_value",name:"JOIN",check:["String","Number"]}],colour:rt.Json,output:"String",inputsInline:!0},{type:"objects_new",message0:"new object %1",args0:[{type:"field_dropdown",name:"TYPE",options:[["TODO: add object types","TODO"]]}],colour:rt.Objects,output:"Object"},{type:"objects_select",message0:"select object %1",args0:[{type:"input_value",name:"SELECTOR"}],colour:rt.Objects,output:"Object",inputsInline:!0},{type:"objects_setattribute",message0:"set attribute %1 to %2 in %3",args0:[{type:"input_value",name:"ATTRIBUTE"},{type:"input_value",name:"VALUE"},{type:"input_value",name:"OBJECT",check:"Object"}],colour:rt.Objects,inputsInline:!0,previousStatement:null,nextStatement:null},{type:"objects_getattribute",message0:"get attribute %1 from %2",args0:[{type:"input_value",name:"ATTRIBUTE"},{type:"input_value",name:"OBJECT",check:"Object"}],colour:rt.Objects,output:"String",inputsInline:!0},{type:"objects_getattributejson",message0:"get attribute json from %1",args0:[{type:"input_value",name:"OBJECT",check:"Object"}],output:"Json",colour:rt.Objects},{type:"objects_append",message0:"append %1 to %2",args0:[{type:"input_value",name:"OBJECT",check:"Object"},{type:"input_value",name:"APPEND",check:"Object"}],colour:rt.Objects,nextStatement:null,previousStatement:null,inputsInline:!0},{type:"objects_delete",message0:"delete %1",args0:[{type:"input_value",name:"OBJECT",check:"Object"}],colour:rt.Objects,nextStatement:null,previousStatement:null}]}const Gs=am.svgPaths;class lN extends Sg.ConstantProvider{constructor(){super(),this.NOTCH_WIDTH=6*this.GRID_UNIT,this.NOTCH_HEIGHT=1.5*this.GRID_UNIT}init(){super.init(),this.PLUS=this.makePlus()}makePlus(){const ze=this.CORNER_RADIUS;function u(p,G,b){return Gs.arc("a","0 0,1",ze,Gs.point((G?-1:1)*ze,(G?-1:1)*ze))+Gs.arc("a","0 0,0",ze,Gs.point((G?-1:1)*ze,(G?-1:1)*ze))+Gs.lineOnAxis("h",(b?1:-1)*ze/2)+Gs.arc("a","0 0,1",ze,Gs.point((G?-1:1)*ze,(G?-1:1)*ze))+Gs.lineOnAxis("v",(b?1:-1)*(p-ze*6))+Gs.arc("a","0 0,1",ze,Gs.point((G?1:-1)*ze,(G?-1:1)*ze))+Gs.lineOnAxis("h",(b?-1:1)*ze/2)+Gs.arc("a","0 0,0",ze,Gs.point((G?1:-1)*ze,(G?-1:1)*ze))+Gs.arc("a","0 0,1",ze,Gs.point((G?1:-1)*ze,(G?-1:1)*ze))}return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(p){const G=p/2,b=ze*4;return G>b?b:G},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return u(p,!1,!1)},pathUp(p){return u(p,!0,!1)},pathRightDown(p){return u(p,!1,!0)},pathRightUp(p){return u(p,!1,!0)}}}shapeFor(ze){let u=ze.getCheck();if(!u&&ze.targetConnection&&(u=ze.targetConnection.getCheck()),ze.type==gf.INPUT_VALUE||ze.type==gf.OUTPUT_VALUE){if(u&&u.length>1)return this.ROUNDED;if(u&&u.includes("Json"))return this.PLUS;if(u&&u.includes("Object"))return this.SQUARED}return super.shapeFor(ze)}}class aN extends Sg.PathObject{updateShadow_(){}}class uN extends Sg.Renderer{constructor(ze){super(ze)}makeConstants_(){return new lN}makePathObject(ze,u){return new aN(ze,u,this.getConstants())}}function cN({readonly:Pe,context:ze}){const u=Tl.useRef(null);return Tl.useRef(null),Tl.useEffect(()=>{lm(sN);const p=nN();nm.defineBlocksWithJsonArray(rN()),$f.inline_string_shadow={init:function(){this.appendDummyInput().appendField(new tm(""),"TEXT"),this.setOutput(!0,"String"),this.setColour(160)}},$f.math_boolcomparison={init:function(){this.appendValueInput("A").setCheck("Boolean").appendField(""),this.appendDummyInput("COMPARISON").appendField(new em([["and","AND"],["or","OR"],["not","NOT"],["nor","NOR"],["nand","NAND"],["xor","XOR"],["xnor","XNOR"]],this.updateShape.bind(this)),"COMPARISON"),this.appendValueInput("B").setCheck("Boolean").appendField(""),this.setOutput(!0,"Boolean"),this.setColour(rt.Math),this.setInputsInline(!0),this.updateShape(this.getFieldValue("COMPARISON"))},mutationToDom:function(){const I=document.createElement("mutation");return I.setAttribute("comparison",this.getFieldValue("COMPARISON")),I},domToMutation:function(I){this.updateShape(I.getAttribute("comparison"))},updateShape:function(I){I==="NOT"?this.getInput("A")&&this.removeInput("A"):this.getInput("A")||(this.appendValueInput("A").setCheck("Boolean").appendField(""),this.moveInputBefore("A","COMPARISON"))}};class G extends ff{createIconDom_(){const S=document.createElement("div");return S.classList.add("categoryBubble"),S.id=btoa(this.name_.toLowerCase()),S.style.backgroundColor=this.colour_,S.style.border="none",this.iconElement_=S,S}setSelected(S){super.setSelected(S),this.iconElement_&&(this.iconElement_.style.filter=S?"brightness(0.85)":"")}}_f.register(_f.Type.TOOLBOX_ITEM,ff.registrationName,G,!0),om.register("lcRenderer",uN);const b=rm(u.current,{readOnly:Pe,toolbox:p,sounds:!1,renderer:"lcRenderer",grid:{spacing:40,length:3,colour:"rgba(255, 255, 255, 0.10)",snap:!1},move:{scrollbars:{horizontal:!0,vertical:!0},drag:!0,wheel:!0},theme:wb,comments:!0,trashcan:!0,zoom:{controls:!0,wheel:!1,startScale:.75,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},disable:!1});b.registerButtonCallback("createGameEvent",I=>{alert("this would make a popup to make a game event.")}),b.registerButtonCallback("openObjectSelectingDocs",I=>{alert("This would open a guide on how to select game objects")}),window.Blockly=kb,window.BlocklyWorkspace=b}),ki.jsx("div",{className:"blocklyDiv",ref:u,style:{display:"absolute",margin:0,padding:0}})}function J_({onClick:Pe,children:ze}){return ki.jsx("div",{className:"toolbarButton",onClick:Pe,children:ze})}function df({onClick:Pe,children:ze}){return ki.jsx("div",{tabIndex:0,className:"dropdownOption",onClick:Pe,children:ze})}function hN(){const[Pe,ze]=Tl.useState(!1),[u,p]=Tl.useState({top:0,left:0}),[G,b]=Tl.useState(null),I=Tl.useRef(null),S=(E,C)=>{const z=E.currentTarget.getBoundingClientRect();p({top:z.bottom+window.scrollY,left:z.left+window.scrollX}),b(C),ze(!0)};return Tl.useEffect(()=>{const E=I.current;if(!E)return;const C=()=>{setTimeout(()=>{E.contains(document.activeElement)||(ze(!1),b(null))},0)};return E.addEventListener("focusout",C),()=>{E.removeEventListener("focusout",C)}},[Pe]),Tl.useEffect(()=>{Pe&&I.current?.focus()},[Pe]),ki.jsxs("div",{className:"toolbar",children:[ki.jsx("img",{src:"assets/logo.svg",className:"logo"}),ki.jsx(J_,{onClick:E=>S(E,"file"),children:"File"}),ki.jsx(J_,{onClick:E=>S(E,"edit"),children:"Edit"}),Pe&&ki.jsxs("div",{className:"dropdown",ref:I,tabIndex:-1,style:{outline:"none",left:u.left,top:u.top},children:[G==="file"&&ki.jsxs(ki.Fragment,{children:[ki.jsx(df,{onClick:()=>window.Blockly.serialization.workspaces.load({blocks:{languageVersion:0,blocks:[]}},BlocklyWorkspace),children:"New project"}),ki.jsx(df,{onClick:async()=>{window.vm.loadProject(await window.vm.util.openFile(".bs"))},children:"Load project"}),ki.jsx(df,{onClick:()=>{window.confirm("WARNING: block-scape is still in development, we can't guarantee projects will load in the future! Would you like to continue?")&&window.vm.saveWorkspace()},children:"Save as"})]}),G==="edit"&&ki.jsx(ki.Fragment,{})]})]})}function dN(){return ki.jsxs(ki.Fragment,{children:[ki.jsx(hN,{}),ki.jsx(cN,{})]})}var fg={exports:{}},q_;function pN(){if(q_)return fg.exports;q_=1;var Pe=typeof Reflect=="object"?Reflect:null,ze=Pe&&typeof Pe.apply=="function"?Pe.apply:function(D,Q,te){return Function.prototype.apply.call(D,Q,te)},u;Pe&&typeof Pe.ownKeys=="function"?u=Pe.ownKeys:Object.getOwnPropertySymbols?u=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:u=function(D){return Object.getOwnPropertyNames(D)};function p(x){console&&console.warn&&console.warn(x)}var G=Number.isNaN||function(D){return D!==D};function b(){b.init.call(this)}fg.exports=b,fg.exports.once=w,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._eventsCount=0,b.prototype._maxListeners=void 0;var I=10;function S(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(b,"defaultMaxListeners",{enumerable:!0,get:function(){return I},set:function(x){if(typeof x!="number"||x<0||G(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");I=x}}),b.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||G(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function E(x){return x._maxListeners===void 0?b.defaultMaxListeners:x._maxListeners}b.prototype.getMaxListeners=function(){return E(this)},b.prototype.emit=function(D){for(var Q=[],te=1;te<arguments.length;te++)Q.push(arguments[te]);var fe=D==="error",oe=this._events;if(oe!==void 0)fe=fe&&oe.error===void 0;else if(!fe)return!1;if(fe){var Se;if(Q.length>0&&(Se=Q[0]),Se instanceof Error)throw Se;var Xe=new Error("Unhandled error."+(Se?" ("+Se.message+")":""));throw Xe.context=Se,Xe}var Y=oe[D];if(Y===void 0)return!1;if(typeof Y=="function")ze(Y,this,Q);else for(var ve=Y.length,T=U(Y,ve),te=0;te<ve;++te)ze(T[te],this,Q);return!0};function C(x,D,Q,te){var fe,oe,Se;if(S(Q),oe=x._events,oe===void 0?(oe=x._events=Object.create(null),x._eventsCount=0):(oe.newListener!==void 0&&(x.emit("newListener",D,Q.listener?Q.listener:Q),oe=x._events),Se=oe[D]),Se===void 0)Se=oe[D]=Q,++x._eventsCount;else if(typeof Se=="function"?Se=oe[D]=te?[Q,Se]:[Se,Q]:te?Se.unshift(Q):Se.push(Q),fe=E(x),fe>0&&Se.length>fe&&!Se.warned){Se.warned=!0;var Xe=new Error("Possible EventEmitter memory leak detected. "+Se.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");Xe.name="MaxListenersExceededWarning",Xe.emitter=x,Xe.type=D,Xe.count=Se.length,p(Xe)}return x}b.prototype.addListener=function(D,Q){return C(this,D,Q,!1)},b.prototype.on=b.prototype.addListener,b.prototype.prependListener=function(D,Q){return C(this,D,Q,!0)};function z(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function V(x,D,Q){var te={fired:!1,wrapFn:void 0,target:x,type:D,listener:Q},fe=z.bind(te);return fe.listener=Q,te.wrapFn=fe,fe}b.prototype.once=function(D,Q){return S(Q),this.on(D,V(this,D,Q)),this},b.prototype.prependOnceListener=function(D,Q){return S(Q),this.prependListener(D,V(this,D,Q)),this},b.prototype.removeListener=function(D,Q){var te,fe,oe,Se,Xe;if(S(Q),fe=this._events,fe===void 0)return this;if(te=fe[D],te===void 0)return this;if(te===Q||te.listener===Q)--this._eventsCount===0?this._events=Object.create(null):(delete fe[D],fe.removeListener&&this.emit("removeListener",D,te.listener||Q));else if(typeof te!="function"){for(oe=-1,Se=te.length-1;Se>=0;Se--)if(te[Se]===Q||te[Se].listener===Q){Xe=te[Se].listener,oe=Se;break}if(oe<0)return this;oe===0?te.shift():O(te,oe),te.length===1&&(fe[D]=te[0]),fe.removeListener!==void 0&&this.emit("removeListener",D,Xe||Q)}return this},b.prototype.off=b.prototype.removeListener,b.prototype.removeAllListeners=function(D){var Q,te,fe;if(te=this._events,te===void 0)return this;if(te.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):te[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete te[D]),this;if(arguments.length===0){var oe=Object.keys(te),Se;for(fe=0;fe<oe.length;++fe)Se=oe[fe],Se!=="removeListener"&&this.removeAllListeners(Se);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Q=te[D],typeof Q=="function")this.removeListener(D,Q);else if(Q!==void 0)for(fe=Q.length-1;fe>=0;fe--)this.removeListener(D,Q[fe]);return this};function j(x,D,Q){var te=x._events;if(te===void 0)return[];var fe=te[D];return fe===void 0?[]:typeof fe=="function"?Q?[fe.listener||fe]:[fe]:Q?P(fe):U(fe,fe.length)}b.prototype.listeners=function(D){return j(this,D,!0)},b.prototype.rawListeners=function(D){return j(this,D,!1)},b.listenerCount=function(x,D){return typeof x.listenerCount=="function"?x.listenerCount(D):A.call(x,D)},b.prototype.listenerCount=A;function A(x){var D=this._events;if(D!==void 0){var Q=D[x];if(typeof Q=="function")return 1;if(Q!==void 0)return Q.length}return 0}b.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function U(x,D){for(var Q=new Array(D),te=0;te<D;++te)Q[te]=x[te];return Q}function O(x,D){for(;D+1<x.length;D++)x[D]=x[D+1];x.pop()}function P(x){for(var D=new Array(x.length),Q=0;Q<D.length;++Q)D[Q]=x[Q].listener||x[Q];return D}function w(x,D){return new Promise(function(Q,te){function fe(Se){x.removeListener(D,oe),te(Se)}function oe(){typeof x.removeListener=="function"&&x.removeListener("error",fe),Q([].slice.call(arguments))}J(x,D,oe,{once:!0}),D!=="error"&&L(x,fe,{once:!0})})}function L(x,D,Q){typeof x.on=="function"&&J(x,"error",D,Q)}function J(x,D,Q,te){if(typeof x.on=="function")te.once?x.once(D,Q):x.on(D,Q);else if(typeof x.addEventListener=="function")x.addEventListener(D,function fe(oe){te.once&&x.removeEventListener(D,fe),Q(oe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return fg.exports}var um=pN();function $N(Pe){let ze="";for(;Pe>=0;)ze=String.fromCharCode(Pe%26+97)+ze,Pe=Math.floor(Pe/26)-1;return ze}function gN(Pe){const ze=window.Blockly.serialization.workspaces.save(Pe);if(window.workspaceState=ze,Object.keys(ze).length<1)return{};const u={},p=b=>{const I={};return Object.entries(b).forEach(([S,E])=>{if(I[S]={},E.shadow){switch(E.shadow.type){case"inline_string_shadow":I[S].shadow=["string",E.shadow.fields.TEXT,E.shadow.id];break;case"math_number":I[S].shadow=["number",E.shadow.fields.NUM,E.shadow.id];break;default:I[S].shadow=null}I[S].id=E.shadow.id}else I[S].shadow=null;E.block&&(I[S].block=G(E.block,null,!1))}),I},G=(b,I,S)=>{const E=$N(Object.keys(u).length);return u[E]={type:b.type,id:b.id},b.inputs&&(u[E].inputs=p(b.inputs)),b.fields&&(u[E].fields=b.fields),b.icons?.comment&&(u[E].comment=b.icons?.comment),I&&(u[E].previous=I),b.next&&(u[E].next=G(b.next.block,E,!1)),S&&(u[E].position=[b.x,b.y],u[E].top=!0),E};return console.log(u),console.log(ze),ze.blocks.blocks.forEach(b=>G(b,null,!0)),u}function fN(Pe,ze){const u=[],p=b=>{const I={};return Object.entries(b).forEach(([S,E])=>{if(I[S]={},E.block&&(I[S].block=G(E.block)),E.shadow)switch(E.shadow[0]){case"number":I[S].shadow={fields:{NUM:E.shadow[1]},id:E.shadow[2],type:"math_number"};break;case"string":I[S].shadow={fields:{TEXT:E.shadow[1]},id:E.shadow[2],type:"inline_string_shadow"};break;default:console.warn(`Invalid shadow type: ${E.shadow[0]}`)}}),I},G=b=>{const I=Pe[b],S={type:I.type,id:I.id};return I.position&&(S.x=I.position[0],S.y=I.position[1]),I.next&&(S.next={block:G(I.next)}),I.inputs&&(S.inputs=p(I.inputs)),S};Object.keys(Pe).filter(b=>Pe[b].top===!0).forEach(b=>{u.push(G(b))}),console.log(u),window.Blockly.serialization.workspaces.load({blocks:{languageVersion:0,blocks:u}},ze)}function _g(Pe){throw new Error('Could not dynamically require "'+Pe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pf={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Z_;function _N(){return Z_||(Z_=1,function(Pe,ze){(function(u){Pe.exports=u()})(function(){return function u(p,G,b){function I(C,z){if(!G[C]){if(!p[C]){var V=typeof _g=="function"&&_g;if(!z&&V)return V(C,!0);if(S)return S(C,!0);var j=new Error("Cannot find module '"+C+"'");throw j.code="MODULE_NOT_FOUND",j}var A=G[C]={exports:{}};p[C][0].call(A.exports,function(U){var O=p[C][1][U];return I(O||U)},A,A.exports,u,p,G,b)}return G[C].exports}for(var S=typeof _g=="function"&&_g,E=0;E<b.length;E++)I(b[E]);return I}({1:[function(u,p,G){var b=u("./utils"),I=u("./support"),S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";G.encode=function(E){for(var C,z,V,j,A,U,O,P=[],w=0,L=E.length,J=L,x=b.getTypeOf(E)!=="string";w<E.length;)J=L-w,V=x?(C=E[w++],z=w<L?E[w++]:0,w<L?E[w++]:0):(C=E.charCodeAt(w++),z=w<L?E.charCodeAt(w++):0,w<L?E.charCodeAt(w++):0),j=C>>2,A=(3&C)<<4|z>>4,U=1<J?(15&z)<<2|V>>6:64,O=2<J?63&V:64,P.push(S.charAt(j)+S.charAt(A)+S.charAt(U)+S.charAt(O));return P.join("")},G.decode=function(E){var C,z,V,j,A,U,O=0,P=0,w="data:";if(E.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var L,J=3*(E=E.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(E.charAt(E.length-1)===S.charAt(64)&&J--,E.charAt(E.length-2)===S.charAt(64)&&J--,J%1!=0)throw new Error("Invalid base64 input, bad content length.");for(L=I.uint8array?new Uint8Array(0|J):new Array(0|J);O<E.length;)C=S.indexOf(E.charAt(O++))<<2|(j=S.indexOf(E.charAt(O++)))>>4,z=(15&j)<<4|(A=S.indexOf(E.charAt(O++)))>>2,V=(3&A)<<6|(U=S.indexOf(E.charAt(O++))),L[P++]=C,A!==64&&(L[P++]=z),U!==64&&(L[P++]=V);return L}},{"./support":30,"./utils":32}],2:[function(u,p,G){var b=u("./external"),I=u("./stream/DataWorker"),S=u("./stream/Crc32Probe"),E=u("./stream/DataLengthProbe");function C(z,V,j,A,U){this.compressedSize=z,this.uncompressedSize=V,this.crc32=j,this.compression=A,this.compressedContent=U}C.prototype={getContentWorker:function(){var z=new I(b.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new E("data_length")),V=this;return z.on("end",function(){if(this.streamInfo.data_length!==V.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),z},getCompressedWorker:function(){return new I(b.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},C.createWorkerFrom=function(z,V,j){return z.pipe(new S).pipe(new E("uncompressedSize")).pipe(V.compressWorker(j)).pipe(new E("compressedSize")).withStreamInfo("compression",V)},p.exports=C},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(u,p,G){var b=u("./stream/GenericWorker");G.STORE={magic:"\0\0",compressWorker:function(){return new b("STORE compression")},uncompressWorker:function(){return new b("STORE decompression")}},G.DEFLATE=u("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(u,p,G){var b=u("./utils"),I=function(){for(var S,E=[],C=0;C<256;C++){S=C;for(var z=0;z<8;z++)S=1&S?3988292384^S>>>1:S>>>1;E[C]=S}return E}();p.exports=function(S,E){return S!==void 0&&S.length?b.getTypeOf(S)!=="string"?function(C,z,V,j){var A=I,U=j+V;C^=-1;for(var O=j;O<U;O++)C=C>>>8^A[255&(C^z[O])];return-1^C}(0|E,S,S.length,0):function(C,z,V,j){var A=I,U=j+V;C^=-1;for(var O=j;O<U;O++)C=C>>>8^A[255&(C^z.charCodeAt(O))];return-1^C}(0|E,S,S.length,0):0}},{"./utils":32}],5:[function(u,p,G){G.base64=!1,G.binary=!1,G.dir=!1,G.createFolders=!0,G.date=null,G.compression=null,G.compressionOptions=null,G.comment=null,G.unixPermissions=null,G.dosPermissions=null},{}],6:[function(u,p,G){var b=null;b=typeof Promise<"u"?Promise:u("lie"),p.exports={Promise:b}},{lie:37}],7:[function(u,p,G){var b=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",I=u("pako"),S=u("./utils"),E=u("./stream/GenericWorker"),C=b?"uint8array":"array";function z(V,j){E.call(this,"FlateWorker/"+V),this._pako=null,this._pakoAction=V,this._pakoOptions=j,this.meta={}}G.magic="\b\0",S.inherits(z,E),z.prototype.processChunk=function(V){this.meta=V.meta,this._pako===null&&this._createPako(),this._pako.push(S.transformTo(C,V.data),!1)},z.prototype.flush=function(){E.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},z.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this._pako=null},z.prototype._createPako=function(){this._pako=new I[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var V=this;this._pako.onData=function(j){V.push({data:j,meta:V.meta})}},G.compressWorker=function(V){return new z("Deflate",V)},G.uncompressWorker=function(){return new z("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(u,p,G){function b(A,U){var O,P="";for(O=0;O<U;O++)P+=String.fromCharCode(255&A),A>>>=8;return P}function I(A,U,O,P,w,L){var J,x,D=A.file,Q=A.compression,te=L!==C.utf8encode,fe=S.transformTo("string",L(D.name)),oe=S.transformTo("string",C.utf8encode(D.name)),Se=D.comment,Xe=S.transformTo("string",L(Se)),Y=S.transformTo("string",C.utf8encode(Se)),ve=oe.length!==D.name.length,T=Y.length!==Se.length,Ie="",ce="",ue="",Fe=D.dir,Oe=D.date,N={crc32:0,compressedSize:0,uncompressedSize:0};U&&!O||(N.crc32=A.crc32,N.compressedSize=A.compressedSize,N.uncompressedSize=A.uncompressedSize);var W=0;U&&(W|=8),te||!ve&&!T||(W|=2048);var q=0,Ce=0;Fe&&(q|=16),w==="UNIX"?(Ce=798,q|=function(Me,He){var yt=Me;return Me||(yt=He?16893:33204),(65535&yt)<<16}(D.unixPermissions,Fe)):(Ce=20,q|=function(Me){return 63&(Me||0)}(D.dosPermissions)),J=Oe.getUTCHours(),J<<=6,J|=Oe.getUTCMinutes(),J<<=5,J|=Oe.getUTCSeconds()/2,x=Oe.getUTCFullYear()-1980,x<<=4,x|=Oe.getUTCMonth()+1,x<<=5,x|=Oe.getUTCDate(),ve&&(ce=b(1,1)+b(z(fe),4)+oe,Ie+="up"+b(ce.length,2)+ce),T&&(ue=b(1,1)+b(z(Xe),4)+Y,Ie+="uc"+b(ue.length,2)+ue);var Ae="";return Ae+=`
\0`,Ae+=b(W,2),Ae+=Q.magic,Ae+=b(J,2),Ae+=b(x,2),Ae+=b(N.crc32,4),Ae+=b(N.compressedSize,4),Ae+=b(N.uncompressedSize,4),Ae+=b(fe.length,2),Ae+=b(Ie.length,2),{fileRecord:V.LOCAL_FILE_HEADER+Ae+fe+Ie,dirRecord:V.CENTRAL_FILE_HEADER+b(Ce,2)+Ae+b(Xe.length,2)+"\0\0\0\0"+b(q,4)+b(P,4)+fe+Ie+Xe}}var S=u("../utils"),E=u("../stream/GenericWorker"),C=u("../utf8"),z=u("../crc32"),V=u("../signature");function j(A,U,O,P){E.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=U,this.zipPlatform=O,this.encodeFileName=P,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}S.inherits(j,E),j.prototype.push=function(A){var U=A.meta.percent||0,O=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,E.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:O?(U+100*(O-P-1))/O:100}}))},j.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var U=this.streamFiles&&!A.file.dir;if(U){var O=I(A,U,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:O.fileRecord,meta:{percent:0}})}else this.accumulate=!0},j.prototype.closedSource=function(A){this.accumulate=!1;var U=this.streamFiles&&!A.file.dir,O=I(A,U,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(O.dirRecord),U)this.push({data:function(P){return V.DATA_DESCRIPTOR+b(P.crc32,4)+b(P.compressedSize,4)+b(P.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:O.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},j.prototype.flush=function(){for(var A=this.bytesWritten,U=0;U<this.dirRecords.length;U++)this.push({data:this.dirRecords[U],meta:{percent:100}});var O=this.bytesWritten-A,P=function(w,L,J,x,D){var Q=S.transformTo("string",D(x));return V.CENTRAL_DIRECTORY_END+"\0\0\0\0"+b(w,2)+b(w,2)+b(L,4)+b(J,4)+b(Q.length,2)+Q}(this.dirRecords.length,O,A,this.zipComment,this.encodeFileName);this.push({data:P,meta:{percent:100}})},j.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},j.prototype.registerPrevious=function(A){this._sources.push(A);var U=this;return A.on("data",function(O){U.processChunk(O)}),A.on("end",function(){U.closedSource(U.previous.streamInfo),U._sources.length?U.prepareNextSource():U.end()}),A.on("error",function(O){U.error(O)}),this},j.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},j.prototype.error=function(A){var U=this._sources;if(!E.prototype.error.call(this,A))return!1;for(var O=0;O<U.length;O++)try{U[O].error(A)}catch{}return!0},j.prototype.lock=function(){E.prototype.lock.call(this);for(var A=this._sources,U=0;U<A.length;U++)A[U].lock()},p.exports=j},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(u,p,G){var b=u("../compressions"),I=u("./ZipFileWorker");G.generateWorker=function(S,E,C){var z=new I(E.streamFiles,C,E.platform,E.encodeFileName),V=0;try{S.forEach(function(j,A){V++;var U=function(L,J){var x=L||J,D=b[x];if(!D)throw new Error(x+" is not a valid compression method !");return D}(A.options.compression,E.compression),O=A.options.compressionOptions||E.compressionOptions||{},P=A.dir,w=A.date;A._compressWorker(U,O).withStreamInfo("file",{name:j,dir:P,date:w,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(z)}),z.entriesCount=V}catch(j){z.error(j)}return z}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(u,p,G){function b(){if(!(this instanceof b))return new b;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var I=new b;for(var S in this)typeof this[S]!="function"&&(I[S]=this[S]);return I}}(b.prototype=u("./object")).loadAsync=u("./load"),b.support=u("./support"),b.defaults=u("./defaults"),b.version="3.10.1",b.loadAsync=function(I,S){return new b().loadAsync(I,S)},b.external=u("./external"),p.exports=b},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(u,p,G){var b=u("./utils"),I=u("./external"),S=u("./utf8"),E=u("./zipEntries"),C=u("./stream/Crc32Probe"),z=u("./nodejsUtils");function V(j){return new I.Promise(function(A,U){var O=j.decompressed.getContentWorker().pipe(new C);O.on("error",function(P){U(P)}).on("end",function(){O.streamInfo.crc32!==j.decompressed.crc32?U(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}p.exports=function(j,A){var U=this;return A=b.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:S.utf8decode}),z.isNode&&z.isStream(j)?I.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):b.prepareContent("the loaded zip file",j,!0,A.optimizedBinaryString,A.base64).then(function(O){var P=new E(A);return P.load(O),P}).then(function(O){var P=[I.Promise.resolve(O)],w=O.files;if(A.checkCRC32)for(var L=0;L<w.length;L++)P.push(V(w[L]));return I.Promise.all(P)}).then(function(O){for(var P=O.shift(),w=P.files,L=0;L<w.length;L++){var J=w[L],x=J.fileNameStr,D=b.resolve(J.fileNameStr);U.file(D,J.decompressed,{binary:!0,optimizedBinaryString:!0,date:J.date,dir:J.dir,comment:J.fileCommentStr.length?J.fileCommentStr:null,unixPermissions:J.unixPermissions,dosPermissions:J.dosPermissions,createFolders:A.createFolders}),J.dir||(U.file(D).unsafeOriginalName=x)}return P.zipComment.length&&(U.comment=P.zipComment),U})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(u,p,G){var b=u("../utils"),I=u("../stream/GenericWorker");function S(E,C){I.call(this,"Nodejs stream input adapter for "+E),this._upstreamEnded=!1,this._bindStream(C)}b.inherits(S,I),S.prototype._bindStream=function(E){var C=this;(this._stream=E).pause(),E.on("data",function(z){C.push({data:z,meta:{percent:0}})}).on("error",function(z){C.isPaused?this.generatedError=z:C.error(z)}).on("end",function(){C.isPaused?C._upstreamEnded=!0:C.end()})},S.prototype.pause=function(){return!!I.prototype.pause.call(this)&&(this._stream.pause(),!0)},S.prototype.resume=function(){return!!I.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=S},{"../stream/GenericWorker":28,"../utils":32}],13:[function(u,p,G){var b=u("readable-stream").Readable;function I(S,E,C){b.call(this,E),this._helper=S;var z=this;S.on("data",function(V,j){z.push(V)||z._helper.pause(),C&&C(j)}).on("error",function(V){z.emit("error",V)}).on("end",function(){z.push(null)})}u("../utils").inherits(I,b),I.prototype._read=function(){this._helper.resume()},p.exports=I},{"../utils":32,"readable-stream":16}],14:[function(u,p,G){p.exports={isNode:typeof Buffer<"u",newBufferFrom:function(b,I){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(b,I);if(typeof b=="number")throw new Error('The "data" argument must not be a number');return new Buffer(b,I)},allocBuffer:function(b){if(Buffer.alloc)return Buffer.alloc(b);var I=new Buffer(b);return I.fill(0),I},isBuffer:function(b){return Buffer.isBuffer(b)},isStream:function(b){return b&&typeof b.on=="function"&&typeof b.pause=="function"&&typeof b.resume=="function"}}},{}],15:[function(u,p,G){function b(D,Q,te){var fe,oe=S.getTypeOf(Q),Se=S.extend(te||{},z);Se.date=Se.date||new Date,Se.compression!==null&&(Se.compression=Se.compression.toUpperCase()),typeof Se.unixPermissions=="string"&&(Se.unixPermissions=parseInt(Se.unixPermissions,8)),Se.unixPermissions&&16384&Se.unixPermissions&&(Se.dir=!0),Se.dosPermissions&&16&Se.dosPermissions&&(Se.dir=!0),Se.dir&&(D=w(D)),Se.createFolders&&(fe=P(D))&&L.call(this,fe,!0);var Xe=oe==="string"&&Se.binary===!1&&Se.base64===!1;te&&te.binary!==void 0||(Se.binary=!Xe),(Q instanceof V&&Q.uncompressedSize===0||Se.dir||!Q||Q.length===0)&&(Se.base64=!1,Se.binary=!0,Q="",Se.compression="STORE",oe="string");var Y=null;Y=Q instanceof V||Q instanceof E?Q:U.isNode&&U.isStream(Q)?new O(D,Q):S.prepareContent(D,Q,Se.binary,Se.optimizedBinaryString,Se.base64);var ve=new j(D,Y,Se);this.files[D]=ve}var I=u("./utf8"),S=u("./utils"),E=u("./stream/GenericWorker"),C=u("./stream/StreamHelper"),z=u("./defaults"),V=u("./compressedObject"),j=u("./zipObject"),A=u("./generate"),U=u("./nodejsUtils"),O=u("./nodejs/NodejsStreamInputAdapter"),P=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var Q=D.lastIndexOf("/");return 0<Q?D.substring(0,Q):""},w=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},L=function(D,Q){return Q=Q!==void 0?Q:z.createFolders,D=w(D),this.files[D]||b.call(this,D,null,{dir:!0,createFolders:Q}),this.files[D]};function J(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var Q,te,fe;for(Q in this.files)fe=this.files[Q],(te=Q.slice(this.root.length,Q.length))&&Q.slice(0,this.root.length)===this.root&&D(te,fe)},filter:function(D){var Q=[];return this.forEach(function(te,fe){D(te,fe)&&Q.push(fe)}),Q},file:function(D,Q,te){if(arguments.length!==1)return D=this.root+D,b.call(this,D,Q,te),this;if(J(D)){var fe=D;return this.filter(function(Se,Xe){return!Xe.dir&&fe.test(Se)})}var oe=this.files[this.root+D];return oe&&!oe.dir?oe:null},folder:function(D){if(!D)return this;if(J(D))return this.filter(function(oe,Se){return Se.dir&&D.test(oe)});var Q=this.root+D,te=L.call(this,Q),fe=this.clone();return fe.root=te.name,fe},remove:function(D){D=this.root+D;var Q=this.files[D];if(Q||(D.slice(-1)!=="/"&&(D+="/"),Q=this.files[D]),Q&&!Q.dir)delete this.files[D];else for(var te=this.filter(function(oe,Se){return Se.name.slice(0,D.length)===D}),fe=0;fe<te.length;fe++)delete this.files[te[fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var Q,te={};try{if((te=S.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:I.utf8encode})).type=te.type.toLowerCase(),te.compression=te.compression.toUpperCase(),te.type==="binarystring"&&(te.type="string"),!te.type)throw new Error("No output type specified.");S.checkSupport(te.type),te.platform!=="darwin"&&te.platform!=="freebsd"&&te.platform!=="linux"&&te.platform!=="sunos"||(te.platform="UNIX"),te.platform==="win32"&&(te.platform="DOS");var fe=te.comment||this.comment||"";Q=A.generateWorker(this,te,fe)}catch(oe){(Q=new E("error")).error(oe)}return new C(Q,te.type||"string",te.mimeType)},generateAsync:function(D,Q){return this.generateInternalStream(D).accumulate(Q)},generateNodeStream:function(D,Q){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(Q)}};p.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(u,p,G){p.exports=u("stream")},{stream:void 0}],17:[function(u,p,G){var b=u("./DataReader");function I(S){b.call(this,S);for(var E=0;E<this.data.length;E++)S[E]=255&S[E]}u("../utils").inherits(I,b),I.prototype.byteAt=function(S){return this.data[this.zero+S]},I.prototype.lastIndexOfSignature=function(S){for(var E=S.charCodeAt(0),C=S.charCodeAt(1),z=S.charCodeAt(2),V=S.charCodeAt(3),j=this.length-4;0<=j;--j)if(this.data[j]===E&&this.data[j+1]===C&&this.data[j+2]===z&&this.data[j+3]===V)return j-this.zero;return-1},I.prototype.readAndCheckSignature=function(S){var E=S.charCodeAt(0),C=S.charCodeAt(1),z=S.charCodeAt(2),V=S.charCodeAt(3),j=this.readData(4);return E===j[0]&&C===j[1]&&z===j[2]&&V===j[3]},I.prototype.readData=function(S){if(this.checkOffset(S),S===0)return[];var E=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},p.exports=I},{"../utils":32,"./DataReader":18}],18:[function(u,p,G){var b=u("../utils");function I(S){this.data=S,this.length=S.length,this.index=0,this.zero=0}I.prototype={checkOffset:function(S){this.checkIndex(this.index+S)},checkIndex:function(S){if(this.length<this.zero+S||S<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+S+"). Corrupted zip ?")},setIndex:function(S){this.checkIndex(S),this.index=S},skip:function(S){this.setIndex(this.index+S)},byteAt:function(){},readInt:function(S){var E,C=0;for(this.checkOffset(S),E=this.index+S-1;E>=this.index;E--)C=(C<<8)+this.byteAt(E);return this.index+=S,C},readString:function(S){return b.transformTo("string",this.readData(S))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var S=this.readInt(4);return new Date(Date.UTC(1980+(S>>25&127),(S>>21&15)-1,S>>16&31,S>>11&31,S>>5&63,(31&S)<<1))}},p.exports=I},{"../utils":32}],19:[function(u,p,G){var b=u("./Uint8ArrayReader");function I(S){b.call(this,S)}u("../utils").inherits(I,b),I.prototype.readData=function(S){this.checkOffset(S);var E=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},p.exports=I},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(u,p,G){var b=u("./DataReader");function I(S){b.call(this,S)}u("../utils").inherits(I,b),I.prototype.byteAt=function(S){return this.data.charCodeAt(this.zero+S)},I.prototype.lastIndexOfSignature=function(S){return this.data.lastIndexOf(S)-this.zero},I.prototype.readAndCheckSignature=function(S){return S===this.readData(4)},I.prototype.readData=function(S){this.checkOffset(S);var E=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},p.exports=I},{"../utils":32,"./DataReader":18}],21:[function(u,p,G){var b=u("./ArrayReader");function I(S){b.call(this,S)}u("../utils").inherits(I,b),I.prototype.readData=function(S){if(this.checkOffset(S),S===0)return new Uint8Array(0);var E=this.data.subarray(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},p.exports=I},{"../utils":32,"./ArrayReader":17}],22:[function(u,p,G){var b=u("../utils"),I=u("../support"),S=u("./ArrayReader"),E=u("./StringReader"),C=u("./NodeBufferReader"),z=u("./Uint8ArrayReader");p.exports=function(V){var j=b.getTypeOf(V);return b.checkSupport(j),j!=="string"||I.uint8array?j==="nodebuffer"?new C(V):I.uint8array?new z(b.transformTo("uint8array",V)):new S(b.transformTo("array",V)):new E(V)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(u,p,G){G.LOCAL_FILE_HEADER="PK",G.CENTRAL_FILE_HEADER="PK",G.CENTRAL_DIRECTORY_END="PK",G.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",G.ZIP64_CENTRAL_DIRECTORY_END="PK",G.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(u,p,G){var b=u("./GenericWorker"),I=u("../utils");function S(E){b.call(this,"ConvertWorker to "+E),this.destType=E}I.inherits(S,b),S.prototype.processChunk=function(E){this.push({data:I.transformTo(this.destType,E.data),meta:E.meta})},p.exports=S},{"../utils":32,"./GenericWorker":28}],25:[function(u,p,G){var b=u("./GenericWorker"),I=u("../crc32");function S(){b.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}u("../utils").inherits(S,b),S.prototype.processChunk=function(E){this.streamInfo.crc32=I(E.data,this.streamInfo.crc32||0),this.push(E)},p.exports=S},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(u,p,G){var b=u("../utils"),I=u("./GenericWorker");function S(E){I.call(this,"DataLengthProbe for "+E),this.propName=E,this.withStreamInfo(E,0)}b.inherits(S,I),S.prototype.processChunk=function(E){if(E){var C=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=C+E.data.length}I.prototype.processChunk.call(this,E)},p.exports=S},{"../utils":32,"./GenericWorker":28}],27:[function(u,p,G){var b=u("../utils"),I=u("./GenericWorker");function S(E){I.call(this,"DataWorker");var C=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,E.then(function(z){C.dataIsReady=!0,C.data=z,C.max=z&&z.length||0,C.type=b.getTypeOf(z),C.isPaused||C._tickAndRepeat()},function(z){C.error(z)})}b.inherits(S,I),S.prototype.cleanUp=function(){I.prototype.cleanUp.call(this),this.data=null},S.prototype.resume=function(){return!!I.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,b.delay(this._tickAndRepeat,[],this)),!0)},S.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(b.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},S.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var E=null,C=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":E=this.data.substring(this.index,C);break;case"uint8array":E=this.data.subarray(this.index,C);break;case"array":case"nodebuffer":E=this.data.slice(this.index,C)}return this.index=C,this.push({data:E,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=S},{"../utils":32,"./GenericWorker":28}],28:[function(u,p,G){function b(I){this.name=I||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}b.prototype={push:function(I){this.emit("data",I)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(I){this.emit("error",I)}return!0},error:function(I){return!this.isFinished&&(this.isPaused?this.generatedError=I:(this.isFinished=!0,this.emit("error",I),this.previous&&this.previous.error(I),this.cleanUp()),!0)},on:function(I,S){return this._listeners[I].push(S),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(I,S){if(this._listeners[I])for(var E=0;E<this._listeners[I].length;E++)this._listeners[I][E].call(this,S)},pipe:function(I){return I.registerPrevious(this)},registerPrevious:function(I){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=I.streamInfo,this.mergeStreamInfo(),this.previous=I;var S=this;return I.on("data",function(E){S.processChunk(E)}),I.on("end",function(){S.end()}),I.on("error",function(E){S.error(E)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var I=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),I=!0),this.previous&&this.previous.resume(),!I},flush:function(){},processChunk:function(I){this.push(I)},withStreamInfo:function(I,S){return this.extraStreamInfo[I]=S,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var I in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,I)&&(this.streamInfo[I]=this.extraStreamInfo[I])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var I="Worker "+this.name;return this.previous?this.previous+" -> "+I:I}},p.exports=b},{}],29:[function(u,p,G){var b=u("../utils"),I=u("./ConvertWorker"),S=u("./GenericWorker"),E=u("../base64"),C=u("../support"),z=u("../external"),V=null;if(C.nodestream)try{V=u("../nodejs/NodejsStreamOutputAdapter")}catch{}function j(U,O){return new z.Promise(function(P,w){var L=[],J=U._internalType,x=U._outputType,D=U._mimeType;U.on("data",function(Q,te){L.push(Q),O&&O(te)}).on("error",function(Q){L=[],w(Q)}).on("end",function(){try{var Q=function(te,fe,oe){switch(te){case"blob":return b.newBlob(b.transformTo("arraybuffer",fe),oe);case"base64":return E.encode(fe);default:return b.transformTo(te,fe)}}(x,function(te,fe){var oe,Se=0,Xe=null,Y=0;for(oe=0;oe<fe.length;oe++)Y+=fe[oe].length;switch(te){case"string":return fe.join("");case"array":return Array.prototype.concat.apply([],fe);case"uint8array":for(Xe=new Uint8Array(Y),oe=0;oe<fe.length;oe++)Xe.set(fe[oe],Se),Se+=fe[oe].length;return Xe;case"nodebuffer":return Buffer.concat(fe);default:throw new Error("concat : unsupported type '"+te+"'")}}(J,L),D);P(Q)}catch(te){w(te)}L=[]}).resume()})}function A(U,O,P){var w=O;switch(O){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=O,this._mimeType=P,b.checkSupport(w),this._worker=U.pipe(new I(w)),U.lock()}catch(L){this._worker=new S("error"),this._worker.error(L)}}A.prototype={accumulate:function(U){return j(this,U)},on:function(U,O){var P=this;return U==="data"?this._worker.on(U,function(w){O.call(P,w.data,w.meta)}):this._worker.on(U,function(){b.delay(O,arguments,P)}),this},resume:function(){return b.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(U){if(b.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new V(this,{objectMode:this._outputType!=="nodebuffer"},U)}},p.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(u,p,G){if(G.base64=!0,G.array=!0,G.string=!0,G.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",G.nodebuffer=typeof Buffer<"u",G.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")G.blob=!1;else{var b=new ArrayBuffer(0);try{G.blob=new Blob([b],{type:"application/zip"}).size===0}catch{try{var I=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);I.append(b),G.blob=I.getBlob("application/zip").size===0}catch{G.blob=!1}}}try{G.nodestream=!!u("readable-stream").Readable}catch{G.nodestream=!1}},{"readable-stream":16}],31:[function(u,p,G){for(var b=u("./utils"),I=u("./support"),S=u("./nodejsUtils"),E=u("./stream/GenericWorker"),C=new Array(256),z=0;z<256;z++)C[z]=252<=z?6:248<=z?5:240<=z?4:224<=z?3:192<=z?2:1;C[254]=C[254]=1;function V(){E.call(this,"utf-8 decode"),this.leftOver=null}function j(){E.call(this,"utf-8 encode")}G.utf8encode=function(A){return I.nodebuffer?S.newBufferFrom(A,"utf-8"):function(U){var O,P,w,L,J,x=U.length,D=0;for(L=0;L<x;L++)(64512&(P=U.charCodeAt(L)))==55296&&L+1<x&&(64512&(w=U.charCodeAt(L+1)))==56320&&(P=65536+(P-55296<<10)+(w-56320),L++),D+=P<128?1:P<2048?2:P<65536?3:4;for(O=I.uint8array?new Uint8Array(D):new Array(D),L=J=0;J<D;L++)(64512&(P=U.charCodeAt(L)))==55296&&L+1<x&&(64512&(w=U.charCodeAt(L+1)))==56320&&(P=65536+(P-55296<<10)+(w-56320),L++),P<128?O[J++]=P:(P<2048?O[J++]=192|P>>>6:(P<65536?O[J++]=224|P>>>12:(O[J++]=240|P>>>18,O[J++]=128|P>>>12&63),O[J++]=128|P>>>6&63),O[J++]=128|63&P);return O}(A)},G.utf8decode=function(A){return I.nodebuffer?b.transformTo("nodebuffer",A).toString("utf-8"):function(U){var O,P,w,L,J=U.length,x=new Array(2*J);for(O=P=0;O<J;)if((w=U[O++])<128)x[P++]=w;else if(4<(L=C[w]))x[P++]=65533,O+=L-1;else{for(w&=L===2?31:L===3?15:7;1<L&&O<J;)w=w<<6|63&U[O++],L--;1<L?x[P++]=65533:w<65536?x[P++]=w:(w-=65536,x[P++]=55296|w>>10&1023,x[P++]=56320|1023&w)}return x.length!==P&&(x.subarray?x=x.subarray(0,P):x.length=P),b.applyFromCharCode(x)}(A=b.transformTo(I.uint8array?"uint8array":"array",A))},b.inherits(V,E),V.prototype.processChunk=function(A){var U=b.transformTo(I.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(I.uint8array){var O=U;(U=new Uint8Array(O.length+this.leftOver.length)).set(this.leftOver,0),U.set(O,this.leftOver.length)}else U=this.leftOver.concat(U);this.leftOver=null}var P=function(L,J){var x;for((J=J||L.length)>L.length&&(J=L.length),x=J-1;0<=x&&(192&L[x])==128;)x--;return x<0||x===0?J:x+C[L[x]]>J?x:J}(U),w=U;P!==U.length&&(I.uint8array?(w=U.subarray(0,P),this.leftOver=U.subarray(P,U.length)):(w=U.slice(0,P),this.leftOver=U.slice(P,U.length))),this.push({data:G.utf8decode(w),meta:A.meta})},V.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:G.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},G.Utf8DecodeWorker=V,b.inherits(j,E),j.prototype.processChunk=function(A){this.push({data:G.utf8encode(A.data),meta:A.meta})},G.Utf8EncodeWorker=j},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(u,p,G){var b=u("./support"),I=u("./base64"),S=u("./nodejsUtils"),E=u("./external");function C(O){return O}function z(O,P){for(var w=0;w<O.length;++w)P[w]=255&O.charCodeAt(w);return P}u("setimmediate"),G.newBlob=function(O,P){G.checkSupport("blob");try{return new Blob([O],{type:P})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(O),w.getBlob(P)}catch{throw new Error("Bug : can't construct the Blob.")}}};var V={stringifyByChunk:function(O,P,w){var L=[],J=0,x=O.length;if(x<=w)return String.fromCharCode.apply(null,O);for(;J<x;)P==="array"||P==="nodebuffer"?L.push(String.fromCharCode.apply(null,O.slice(J,Math.min(J+w,x)))):L.push(String.fromCharCode.apply(null,O.subarray(J,Math.min(J+w,x)))),J+=w;return L.join("")},stringifyByChar:function(O){for(var P="",w=0;w<O.length;w++)P+=String.fromCharCode(O[w]);return P},applyCanBeUsed:{uint8array:function(){try{return b.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return b.nodebuffer&&String.fromCharCode.apply(null,S.allocBuffer(1)).length===1}catch{return!1}}()}};function j(O){var P=65536,w=G.getTypeOf(O),L=!0;if(w==="uint8array"?L=V.applyCanBeUsed.uint8array:w==="nodebuffer"&&(L=V.applyCanBeUsed.nodebuffer),L)for(;1<P;)try{return V.stringifyByChunk(O,w,P)}catch{P=Math.floor(P/2)}return V.stringifyByChar(O)}function A(O,P){for(var w=0;w<O.length;w++)P[w]=O[w];return P}G.applyFromCharCode=j;var U={};U.string={string:C,array:function(O){return z(O,new Array(O.length))},arraybuffer:function(O){return U.string.uint8array(O).buffer},uint8array:function(O){return z(O,new Uint8Array(O.length))},nodebuffer:function(O){return z(O,S.allocBuffer(O.length))}},U.array={string:j,array:C,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return S.newBufferFrom(O)}},U.arraybuffer={string:function(O){return j(new Uint8Array(O))},array:function(O){return A(new Uint8Array(O),new Array(O.byteLength))},arraybuffer:C,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return S.newBufferFrom(new Uint8Array(O))}},U.uint8array={string:j,array:function(O){return A(O,new Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:C,nodebuffer:function(O){return S.newBufferFrom(O)}},U.nodebuffer={string:j,array:function(O){return A(O,new Array(O.length))},arraybuffer:function(O){return U.nodebuffer.uint8array(O).buffer},uint8array:function(O){return A(O,new Uint8Array(O.length))},nodebuffer:C},G.transformTo=function(O,P){if(P=P||"",!O)return P;G.checkSupport(O);var w=G.getTypeOf(P);return U[w][O](P)},G.resolve=function(O){for(var P=O.split("/"),w=[],L=0;L<P.length;L++){var J=P[L];J==="."||J===""&&L!==0&&L!==P.length-1||(J===".."?w.pop():w.push(J))}return w.join("/")},G.getTypeOf=function(O){return typeof O=="string"?"string":Object.prototype.toString.call(O)==="[object Array]"?"array":b.nodebuffer&&S.isBuffer(O)?"nodebuffer":b.uint8array&&O instanceof Uint8Array?"uint8array":b.arraybuffer&&O instanceof ArrayBuffer?"arraybuffer":void 0},G.checkSupport=function(O){if(!b[O.toLowerCase()])throw new Error(O+" is not supported by this platform")},G.MAX_VALUE_16BITS=65535,G.MAX_VALUE_32BITS=-1,G.pretty=function(O){var P,w,L="";for(w=0;w<(O||"").length;w++)L+="\\x"+((P=O.charCodeAt(w))<16?"0":"")+P.toString(16).toUpperCase();return L},G.delay=function(O,P,w){setImmediate(function(){O.apply(w||null,P||[])})},G.inherits=function(O,P){function w(){}w.prototype=P.prototype,O.prototype=new w},G.extend=function(){var O,P,w={};for(O=0;O<arguments.length;O++)for(P in arguments[O])Object.prototype.hasOwnProperty.call(arguments[O],P)&&w[P]===void 0&&(w[P]=arguments[O][P]);return w},G.prepareContent=function(O,P,w,L,J){return E.Promise.resolve(P).then(function(x){return b.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new E.Promise(function(D,Q){var te=new FileReader;te.onload=function(fe){D(fe.target.result)},te.onerror=function(fe){Q(fe.target.error)},te.readAsArrayBuffer(x)}):x}).then(function(x){var D=G.getTypeOf(x);return D?(D==="arraybuffer"?x=G.transformTo("uint8array",x):D==="string"&&(J?x=I.decode(x):w&&L!==!0&&(x=function(Q){return z(Q,b.uint8array?new Uint8Array(Q.length):new Array(Q.length))}(x))),x):E.Promise.reject(new Error("Can't read the data of '"+O+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(u,p,G){var b=u("./reader/readerFor"),I=u("./utils"),S=u("./signature"),E=u("./zipEntry"),C=u("./support");function z(V){this.files=[],this.loadOptions=V}z.prototype={checkSignature:function(V){if(!this.reader.readAndCheckSignature(V)){this.reader.index-=4;var j=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+I.pretty(j)+", expected "+I.pretty(V)+")")}},isSignature:function(V,j){var A=this.reader.index;this.reader.setIndex(V);var U=this.reader.readString(4)===j;return this.reader.setIndex(A),U},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var V=this.reader.readData(this.zipCommentLength),j=C.uint8array?"uint8array":"array",A=I.transformTo(j,V);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var V,j,A,U=this.zip64EndOfCentralSize-44;0<U;)V=this.reader.readInt(2),j=this.reader.readInt(4),A=this.reader.readData(j),this.zip64ExtensibleData[V]={id:V,length:j,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var V,j;for(V=0;V<this.files.length;V++)j=this.files[V],this.reader.setIndex(j.localHeaderOffset),this.checkSignature(S.LOCAL_FILE_HEADER),j.readLocalPart(this.reader),j.handleUTF8(),j.processAttributes()},readCentralDir:function(){var V;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(S.CENTRAL_FILE_HEADER);)(V=new E({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(V);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var V=this.reader.lastIndexOfSignature(S.CENTRAL_DIRECTORY_END);if(V<0)throw this.isSignature(0,S.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(V);var j=V;if(this.checkSignature(S.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===I.MAX_VALUE_16BITS||this.diskWithCentralDirStart===I.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===I.MAX_VALUE_16BITS||this.centralDirRecords===I.MAX_VALUE_16BITS||this.centralDirSize===I.MAX_VALUE_32BITS||this.centralDirOffset===I.MAX_VALUE_32BITS){if(this.zip64=!0,(V=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(V),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,S.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var U=j-A;if(0<U)this.isSignature(j,S.CENTRAL_FILE_HEADER)||(this.reader.zero=U);else if(U<0)throw new Error("Corrupted zip: missing "+Math.abs(U)+" bytes.")},prepareReader:function(V){this.reader=b(V)},load:function(V){this.prepareReader(V),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=z},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(u,p,G){var b=u("./reader/readerFor"),I=u("./utils"),S=u("./compressedObject"),E=u("./crc32"),C=u("./utf8"),z=u("./compressions"),V=u("./support");function j(A,U){this.options=A,this.loadOptions=U}j.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var U,O;if(A.skip(22),this.fileNameLength=A.readInt(2),O=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(O),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((U=function(P){for(var w in z)if(Object.prototype.hasOwnProperty.call(z,w)&&z[w].magic===P)return z[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+I.pretty(this.compressionMethod)+" unknown (inner file : "+I.transformTo("string",this.fileName)+")");this.decompressed=new S(this.compressedSize,this.uncompressedSize,this.crc32,U,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var U=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(U),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=b(this.extraFields[1].value);this.uncompressedSize===I.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===I.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===I.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===I.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var U,O,P,w=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<w;)U=A.readInt(2),O=A.readInt(2),P=A.readData(O),this.extraFields[U]={id:U,length:O,value:P};A.setIndex(w)},handleUTF8:function(){var A=V.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=C.utf8decode(this.fileName),this.fileCommentStr=C.utf8decode(this.fileComment);else{var U=this.findExtraFieldUnicodePath();if(U!==null)this.fileNameStr=U;else{var O=I.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(O)}var P=this.findExtraFieldUnicodeComment();if(P!==null)this.fileCommentStr=P;else{var w=I.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var U=b(A.value);return U.readInt(1)!==1||E(this.fileName)!==U.readInt(4)?null:C.utf8decode(U.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var U=b(A.value);return U.readInt(1)!==1||E(this.fileComment)!==U.readInt(4)?null:C.utf8decode(U.readData(A.length-5))}return null}},p.exports=j},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(u,p,G){function b(U,O,P){this.name=U,this.dir=P.dir,this.date=P.date,this.comment=P.comment,this.unixPermissions=P.unixPermissions,this.dosPermissions=P.dosPermissions,this._data=O,this._dataBinary=P.binary,this.options={compression:P.compression,compressionOptions:P.compressionOptions}}var I=u("./stream/StreamHelper"),S=u("./stream/DataWorker"),E=u("./utf8"),C=u("./compressedObject"),z=u("./stream/GenericWorker");b.prototype={internalStream:function(U){var O=null,P="string";try{if(!U)throw new Error("No output type specified.");var w=(P=U.toLowerCase())==="string"||P==="text";P!=="binarystring"&&P!=="text"||(P="string"),O=this._decompressWorker();var L=!this._dataBinary;L&&!w&&(O=O.pipe(new E.Utf8EncodeWorker)),!L&&w&&(O=O.pipe(new E.Utf8DecodeWorker))}catch(J){(O=new z("error")).error(J)}return new I(O,P,"")},async:function(U,O){return this.internalStream(U).accumulate(O)},nodeStream:function(U,O){return this.internalStream(U||"nodebuffer").toNodejsStream(O)},_compressWorker:function(U,O){if(this._data instanceof C&&this._data.compression.magic===U.magic)return this._data.getCompressedWorker();var P=this._decompressWorker();return this._dataBinary||(P=P.pipe(new E.Utf8EncodeWorker)),C.createWorkerFrom(P,U,O)},_decompressWorker:function(){return this._data instanceof C?this._data.getContentWorker():this._data instanceof z?this._data:new S(this._data)}};for(var V=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],j=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<V.length;A++)b.prototype[V[A]]=j;p.exports=b},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(u,p,G){(function(b){var I,S,E=b.MutationObserver||b.WebKitMutationObserver;if(E){var C=0,z=new E(U),V=b.document.createTextNode("");z.observe(V,{characterData:!0}),I=function(){V.data=C=++C%2}}else if(b.setImmediate||b.MessageChannel===void 0)I="document"in b&&"onreadystatechange"in b.document.createElement("script")?function(){var O=b.document.createElement("script");O.onreadystatechange=function(){U(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},b.document.documentElement.appendChild(O)}:function(){setTimeout(U,0)};else{var j=new b.MessageChannel;j.port1.onmessage=U,I=function(){j.port2.postMessage(0)}}var A=[];function U(){var O,P;S=!0;for(var w=A.length;w;){for(P=A,A=[],O=-1;++O<w;)P[O]();w=A.length}S=!1}p.exports=function(O){A.push(O)!==1||S||I()}}).call(this,typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(u,p,G){var b=u("immediate");function I(){}var S={},E=["REJECTED"],C=["FULFILLED"],z=["PENDING"];function V(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=z,this.queue=[],this.outcome=void 0,w!==I&&O(this,w)}function j(w,L,J){this.promise=w,typeof L=="function"&&(this.onFulfilled=L,this.callFulfilled=this.otherCallFulfilled),typeof J=="function"&&(this.onRejected=J,this.callRejected=this.otherCallRejected)}function A(w,L,J){b(function(){var x;try{x=L(J)}catch(D){return S.reject(w,D)}x===w?S.reject(w,new TypeError("Cannot resolve promise with itself")):S.resolve(w,x)})}function U(w){var L=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof L=="function")return function(){L.apply(w,arguments)}}function O(w,L){var J=!1;function x(te){J||(J=!0,S.reject(w,te))}function D(te){J||(J=!0,S.resolve(w,te))}var Q=P(function(){L(D,x)});Q.status==="error"&&x(Q.value)}function P(w,L){var J={};try{J.value=w(L),J.status="success"}catch(x){J.status="error",J.value=x}return J}(p.exports=V).prototype.finally=function(w){if(typeof w!="function")return this;var L=this.constructor;return this.then(function(J){return L.resolve(w()).then(function(){return J})},function(J){return L.resolve(w()).then(function(){throw J})})},V.prototype.catch=function(w){return this.then(null,w)},V.prototype.then=function(w,L){if(typeof w!="function"&&this.state===C||typeof L!="function"&&this.state===E)return this;var J=new this.constructor(I);return this.state!==z?A(J,this.state===C?w:L,this.outcome):this.queue.push(new j(J,w,L)),J},j.prototype.callFulfilled=function(w){S.resolve(this.promise,w)},j.prototype.otherCallFulfilled=function(w){A(this.promise,this.onFulfilled,w)},j.prototype.callRejected=function(w){S.reject(this.promise,w)},j.prototype.otherCallRejected=function(w){A(this.promise,this.onRejected,w)},S.resolve=function(w,L){var J=P(U,L);if(J.status==="error")return S.reject(w,J.value);var x=J.value;if(x)O(w,x);else{w.state=C,w.outcome=L;for(var D=-1,Q=w.queue.length;++D<Q;)w.queue[D].callFulfilled(L)}return w},S.reject=function(w,L){w.state=E,w.outcome=L;for(var J=-1,x=w.queue.length;++J<x;)w.queue[J].callRejected(L);return w},V.resolve=function(w){return w instanceof this?w:S.resolve(new this(I),w)},V.reject=function(w){var L=new this(I);return S.reject(L,w)},V.all=function(w){var L=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var J=w.length,x=!1;if(!J)return this.resolve([]);for(var D=new Array(J),Q=0,te=-1,fe=new this(I);++te<J;)oe(w[te],te);return fe;function oe(Se,Xe){L.resolve(Se).then(function(Y){D[Xe]=Y,++Q!==J||x||(x=!0,S.resolve(fe,D))},function(Y){x||(x=!0,S.reject(fe,Y))})}},V.race=function(w){var L=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var J=w.length,x=!1;if(!J)return this.resolve([]);for(var D=-1,Q=new this(I);++D<J;)te=w[D],L.resolve(te).then(function(fe){x||(x=!0,S.resolve(Q,fe))},function(fe){x||(x=!0,S.reject(Q,fe))});var te;return Q}},{immediate:36}],38:[function(u,p,G){var b={};(0,u("./lib/utils/common").assign)(b,u("./lib/deflate"),u("./lib/inflate"),u("./lib/zlib/constants")),p.exports=b},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(u,p,G){var b=u("./zlib/deflate"),I=u("./utils/common"),S=u("./utils/strings"),E=u("./zlib/messages"),C=u("./zlib/zstream"),z=Object.prototype.toString,V=0,j=-1,A=0,U=8;function O(w){if(!(this instanceof O))return new O(w);this.options=I.assign({level:j,method:U,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},w||{});var L=this.options;L.raw&&0<L.windowBits?L.windowBits=-L.windowBits:L.gzip&&0<L.windowBits&&L.windowBits<16&&(L.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var J=b.deflateInit2(this.strm,L.level,L.method,L.windowBits,L.memLevel,L.strategy);if(J!==V)throw new Error(E[J]);if(L.header&&b.deflateSetHeader(this.strm,L.header),L.dictionary){var x;if(x=typeof L.dictionary=="string"?S.string2buf(L.dictionary):z.call(L.dictionary)==="[object ArrayBuffer]"?new Uint8Array(L.dictionary):L.dictionary,(J=b.deflateSetDictionary(this.strm,x))!==V)throw new Error(E[J]);this._dict_set=!0}}function P(w,L){var J=new O(L);if(J.push(w,!0),J.err)throw J.msg||E[J.err];return J.result}O.prototype.push=function(w,L){var J,x,D=this.strm,Q=this.options.chunkSize;if(this.ended)return!1;x=L===~~L?L:L===!0?4:0,typeof w=="string"?D.input=S.string2buf(w):z.call(w)==="[object ArrayBuffer]"?D.input=new Uint8Array(w):D.input=w,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new I.Buf8(Q),D.next_out=0,D.avail_out=Q),(J=b.deflate(D,x))!==1&&J!==V)return this.onEnd(J),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(S.buf2binstring(I.shrinkBuf(D.output,D.next_out))):this.onData(I.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&J!==1);return x===4?(J=b.deflateEnd(this.strm),this.onEnd(J),this.ended=!0,J===V):x!==2||(this.onEnd(V),!(D.avail_out=0))},O.prototype.onData=function(w){this.chunks.push(w)},O.prototype.onEnd=function(w){w===V&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},G.Deflate=O,G.deflate=P,G.deflateRaw=function(w,L){return(L=L||{}).raw=!0,P(w,L)},G.gzip=function(w,L){return(L=L||{}).gzip=!0,P(w,L)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(u,p,G){var b=u("./zlib/inflate"),I=u("./utils/common"),S=u("./utils/strings"),E=u("./zlib/constants"),C=u("./zlib/messages"),z=u("./zlib/zstream"),V=u("./zlib/gzheader"),j=Object.prototype.toString;function A(O){if(!(this instanceof A))return new A(O);this.options=I.assign({chunkSize:16384,windowBits:0,to:""},O||{});var P=this.options;P.raw&&0<=P.windowBits&&P.windowBits<16&&(P.windowBits=-P.windowBits,P.windowBits===0&&(P.windowBits=-15)),!(0<=P.windowBits&&P.windowBits<16)||O&&O.windowBits||(P.windowBits+=32),15<P.windowBits&&P.windowBits<48&&(15&P.windowBits)==0&&(P.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var w=b.inflateInit2(this.strm,P.windowBits);if(w!==E.Z_OK)throw new Error(C[w]);this.header=new V,b.inflateGetHeader(this.strm,this.header)}function U(O,P){var w=new A(P);if(w.push(O,!0),w.err)throw w.msg||C[w.err];return w.result}A.prototype.push=function(O,P){var w,L,J,x,D,Q,te=this.strm,fe=this.options.chunkSize,oe=this.options.dictionary,Se=!1;if(this.ended)return!1;L=P===~~P?P:P===!0?E.Z_FINISH:E.Z_NO_FLUSH,typeof O=="string"?te.input=S.binstring2buf(O):j.call(O)==="[object ArrayBuffer]"?te.input=new Uint8Array(O):te.input=O,te.next_in=0,te.avail_in=te.input.length;do{if(te.avail_out===0&&(te.output=new I.Buf8(fe),te.next_out=0,te.avail_out=fe),(w=b.inflate(te,E.Z_NO_FLUSH))===E.Z_NEED_DICT&&oe&&(Q=typeof oe=="string"?S.string2buf(oe):j.call(oe)==="[object ArrayBuffer]"?new Uint8Array(oe):oe,w=b.inflateSetDictionary(this.strm,Q)),w===E.Z_BUF_ERROR&&Se===!0&&(w=E.Z_OK,Se=!1),w!==E.Z_STREAM_END&&w!==E.Z_OK)return this.onEnd(w),!(this.ended=!0);te.next_out&&(te.avail_out!==0&&w!==E.Z_STREAM_END&&(te.avail_in!==0||L!==E.Z_FINISH&&L!==E.Z_SYNC_FLUSH)||(this.options.to==="string"?(J=S.utf8border(te.output,te.next_out),x=te.next_out-J,D=S.buf2string(te.output,J),te.next_out=x,te.avail_out=fe-x,x&&I.arraySet(te.output,te.output,J,x,0),this.onData(D)):this.onData(I.shrinkBuf(te.output,te.next_out)))),te.avail_in===0&&te.avail_out===0&&(Se=!0)}while((0<te.avail_in||te.avail_out===0)&&w!==E.Z_STREAM_END);return w===E.Z_STREAM_END&&(L=E.Z_FINISH),L===E.Z_FINISH?(w=b.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===E.Z_OK):L!==E.Z_SYNC_FLUSH||(this.onEnd(E.Z_OK),!(te.avail_out=0))},A.prototype.onData=function(O){this.chunks.push(O)},A.prototype.onEnd=function(O){O===E.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},G.Inflate=A,G.inflate=U,G.inflateRaw=function(O,P){return(P=P||{}).raw=!0,U(O,P)},G.ungzip=U},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(u,p,G){var b=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";G.assign=function(E){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var z=C.shift();if(z){if(typeof z!="object")throw new TypeError(z+"must be non-object");for(var V in z)z.hasOwnProperty(V)&&(E[V]=z[V])}}return E},G.shrinkBuf=function(E,C){return E.length===C?E:E.subarray?E.subarray(0,C):(E.length=C,E)};var I={arraySet:function(E,C,z,V,j){if(C.subarray&&E.subarray)E.set(C.subarray(z,z+V),j);else for(var A=0;A<V;A++)E[j+A]=C[z+A]},flattenChunks:function(E){var C,z,V,j,A,U;for(C=V=0,z=E.length;C<z;C++)V+=E[C].length;for(U=new Uint8Array(V),C=j=0,z=E.length;C<z;C++)A=E[C],U.set(A,j),j+=A.length;return U}},S={arraySet:function(E,C,z,V,j){for(var A=0;A<V;A++)E[j+A]=C[z+A]},flattenChunks:function(E){return[].concat.apply([],E)}};G.setTyped=function(E){E?(G.Buf8=Uint8Array,G.Buf16=Uint16Array,G.Buf32=Int32Array,G.assign(G,I)):(G.Buf8=Array,G.Buf16=Array,G.Buf32=Array,G.assign(G,S))},G.setTyped(b)},{}],42:[function(u,p,G){var b=u("./common"),I=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch{I=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{S=!1}for(var E=new b.Buf8(256),C=0;C<256;C++)E[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function z(V,j){if(j<65537&&(V.subarray&&S||!V.subarray&&I))return String.fromCharCode.apply(null,b.shrinkBuf(V,j));for(var A="",U=0;U<j;U++)A+=String.fromCharCode(V[U]);return A}E[254]=E[254]=1,G.string2buf=function(V){var j,A,U,O,P,w=V.length,L=0;for(O=0;O<w;O++)(64512&(A=V.charCodeAt(O)))==55296&&O+1<w&&(64512&(U=V.charCodeAt(O+1)))==56320&&(A=65536+(A-55296<<10)+(U-56320),O++),L+=A<128?1:A<2048?2:A<65536?3:4;for(j=new b.Buf8(L),O=P=0;P<L;O++)(64512&(A=V.charCodeAt(O)))==55296&&O+1<w&&(64512&(U=V.charCodeAt(O+1)))==56320&&(A=65536+(A-55296<<10)+(U-56320),O++),A<128?j[P++]=A:(A<2048?j[P++]=192|A>>>6:(A<65536?j[P++]=224|A>>>12:(j[P++]=240|A>>>18,j[P++]=128|A>>>12&63),j[P++]=128|A>>>6&63),j[P++]=128|63&A);return j},G.buf2binstring=function(V){return z(V,V.length)},G.binstring2buf=function(V){for(var j=new b.Buf8(V.length),A=0,U=j.length;A<U;A++)j[A]=V.charCodeAt(A);return j},G.buf2string=function(V,j){var A,U,O,P,w=j||V.length,L=new Array(2*w);for(A=U=0;A<w;)if((O=V[A++])<128)L[U++]=O;else if(4<(P=E[O]))L[U++]=65533,A+=P-1;else{for(O&=P===2?31:P===3?15:7;1<P&&A<w;)O=O<<6|63&V[A++],P--;1<P?L[U++]=65533:O<65536?L[U++]=O:(O-=65536,L[U++]=55296|O>>10&1023,L[U++]=56320|1023&O)}return z(L,U)},G.utf8border=function(V,j){var A;for((j=j||V.length)>V.length&&(j=V.length),A=j-1;0<=A&&(192&V[A])==128;)A--;return A<0||A===0?j:A+E[V[A]]>j?A:j}},{"./common":41}],43:[function(u,p,G){p.exports=function(b,I,S,E){for(var C=65535&b|0,z=b>>>16&65535|0,V=0;S!==0;){for(S-=V=2e3<S?2e3:S;z=z+(C=C+I[E++]|0)|0,--V;);C%=65521,z%=65521}return C|z<<16|0}},{}],44:[function(u,p,G){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(u,p,G){var b=function(){for(var I,S=[],E=0;E<256;E++){I=E;for(var C=0;C<8;C++)I=1&I?3988292384^I>>>1:I>>>1;S[E]=I}return S}();p.exports=function(I,S,E,C){var z=b,V=C+E;I^=-1;for(var j=C;j<V;j++)I=I>>>8^z[255&(I^S[j])];return-1^I}},{}],46:[function(u,p,G){var b,I=u("../utils/common"),S=u("./trees"),E=u("./adler32"),C=u("./crc32"),z=u("./messages"),V=0,j=4,A=0,U=-2,O=-1,P=4,w=2,L=8,J=9,x=286,D=30,Q=19,te=2*x+1,fe=15,oe=3,Se=258,Xe=Se+oe+1,Y=42,ve=113,T=1,Ie=2,ce=3,ue=4;function Fe(_,me){return _.msg=z[me],me}function Oe(_){return(_<<1)-(4<_?9:0)}function N(_){for(var me=_.length;0<=--me;)_[me]=0}function W(_){var me=_.state,Ee=me.pending;Ee>_.avail_out&&(Ee=_.avail_out),Ee!==0&&(I.arraySet(_.output,me.pending_buf,me.pending_out,Ee,_.next_out),_.next_out+=Ee,me.pending_out+=Ee,_.total_out+=Ee,_.avail_out-=Ee,me.pending-=Ee,me.pending===0&&(me.pending_out=0))}function q(_,me){S._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,me),_.block_start=_.strstart,W(_.strm)}function Ce(_,me){_.pending_buf[_.pending++]=me}function Ae(_,me){_.pending_buf[_.pending++]=me>>>8&255,_.pending_buf[_.pending++]=255&me}function Me(_,me){var Ee,M,B=_.max_chain_length,se=_.strstart,we=_.prev_length,Be=_.nice_match,le=_.strstart>_.w_size-Xe?_.strstart-(_.w_size-Xe):0,Ve=_.window,Ye=_.w_mask,k=_.prev,qe=_.strstart+Se,ut=Ve[se+we-1],Ze=Ve[se+we];_.prev_length>=_.good_match&&(B>>=2),Be>_.lookahead&&(Be=_.lookahead);do if(Ve[(Ee=me)+we]===Ze&&Ve[Ee+we-1]===ut&&Ve[Ee]===Ve[se]&&Ve[++Ee]===Ve[se+1]){se+=2,Ee++;do;while(Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&Ve[++se]===Ve[++Ee]&&se<qe);if(M=Se-(qe-se),se=qe-Se,we<M){if(_.match_start=me,Be<=(we=M))break;ut=Ve[se+we-1],Ze=Ve[se+we]}}while((me=k[me&Ye])>le&&--B!=0);return we<=_.lookahead?we:_.lookahead}function He(_){var me,Ee,M,B,se,we,Be,le,Ve,Ye,k=_.w_size;do{if(B=_.window_size-_.lookahead-_.strstart,_.strstart>=k+(k-Xe)){for(I.arraySet(_.window,_.window,k,k,0),_.match_start-=k,_.strstart-=k,_.block_start-=k,me=Ee=_.hash_size;M=_.head[--me],_.head[me]=k<=M?M-k:0,--Ee;);for(me=Ee=k;M=_.prev[--me],_.prev[me]=k<=M?M-k:0,--Ee;);B+=k}if(_.strm.avail_in===0)break;if(we=_.strm,Be=_.window,le=_.strstart+_.lookahead,Ve=B,Ye=void 0,Ye=we.avail_in,Ve<Ye&&(Ye=Ve),Ee=Ye===0?0:(we.avail_in-=Ye,I.arraySet(Be,we.input,we.next_in,Ye,le),we.state.wrap===1?we.adler=E(we.adler,Be,Ye,le):we.state.wrap===2&&(we.adler=C(we.adler,Be,Ye,le)),we.next_in+=Ye,we.total_in+=Ye,Ye),_.lookahead+=Ee,_.lookahead+_.insert>=oe)for(se=_.strstart-_.insert,_.ins_h=_.window[se],_.ins_h=(_.ins_h<<_.hash_shift^_.window[se+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[se+oe-1])&_.hash_mask,_.prev[se&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=se,se++,_.insert--,!(_.lookahead+_.insert<oe)););}while(_.lookahead<Xe&&_.strm.avail_in!==0)}function yt(_,me){for(var Ee,M;;){if(_.lookahead<Xe){if(He(_),_.lookahead<Xe&&me===V)return T;if(_.lookahead===0)break}if(Ee=0,_.lookahead>=oe&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+oe-1])&_.hash_mask,Ee=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),Ee!==0&&_.strstart-Ee<=_.w_size-Xe&&(_.match_length=Me(_,Ee)),_.match_length>=oe)if(M=S._tr_tally(_,_.strstart-_.match_start,_.match_length-oe),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=oe){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+oe-1])&_.hash_mask,Ee=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else M=S._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(M&&(q(_,!1),_.strm.avail_out===0))return T}return _.insert=_.strstart<oe-1?_.strstart:oe-1,me===j?(q(_,!0),_.strm.avail_out===0?ce:ue):_.last_lit&&(q(_,!1),_.strm.avail_out===0)?T:Ie}function Qe(_,me){for(var Ee,M,B;;){if(_.lookahead<Xe){if(He(_),_.lookahead<Xe&&me===V)return T;if(_.lookahead===0)break}if(Ee=0,_.lookahead>=oe&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+oe-1])&_.hash_mask,Ee=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=oe-1,Ee!==0&&_.prev_length<_.max_lazy_match&&_.strstart-Ee<=_.w_size-Xe&&(_.match_length=Me(_,Ee),_.match_length<=5&&(_.strategy===1||_.match_length===oe&&4096<_.strstart-_.match_start)&&(_.match_length=oe-1)),_.prev_length>=oe&&_.match_length<=_.prev_length){for(B=_.strstart+_.lookahead-oe,M=S._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-oe),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=B&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+oe-1])&_.hash_mask,Ee=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=oe-1,_.strstart++,M&&(q(_,!1),_.strm.avail_out===0))return T}else if(_.match_available){if((M=S._tr_tally(_,0,_.window[_.strstart-1]))&&q(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return T}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(M=S._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<oe-1?_.strstart:oe-1,me===j?(q(_,!0),_.strm.avail_out===0?ce:ue):_.last_lit&&(q(_,!1),_.strm.avail_out===0)?T:Ie}function pt(_,me,Ee,M,B){this.good_length=_,this.max_lazy=me,this.nice_length=Ee,this.max_chain=M,this.func=B}function We(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*te),this.dyn_dtree=new I.Buf16(2*(2*D+1)),this.bl_tree=new I.Buf16(2*(2*Q+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(fe+1),this.heap=new I.Buf16(2*x+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*x+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Dt(_){var me;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=w,(me=_.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?Y:ve,_.adler=me.wrap===2?0:1,me.last_flush=V,S._tr_init(me),A):Fe(_,U)}function be(_){var me=Dt(_);return me===A&&function(Ee){Ee.window_size=2*Ee.w_size,N(Ee.head),Ee.max_lazy_match=b[Ee.level].max_lazy,Ee.good_match=b[Ee.level].good_length,Ee.nice_match=b[Ee.level].nice_length,Ee.max_chain_length=b[Ee.level].max_chain,Ee.strstart=0,Ee.block_start=0,Ee.lookahead=0,Ee.insert=0,Ee.match_length=Ee.prev_length=oe-1,Ee.match_available=0,Ee.ins_h=0}(_.state),me}function Ge(_,me,Ee,M,B,se){if(!_)return U;var we=1;if(me===O&&(me=6),M<0?(we=0,M=-M):15<M&&(we=2,M-=16),B<1||J<B||Ee!==L||M<8||15<M||me<0||9<me||se<0||P<se)return Fe(_,U);M===8&&(M=9);var Be=new We;return(_.state=Be).strm=_,Be.wrap=we,Be.gzhead=null,Be.w_bits=M,Be.w_size=1<<Be.w_bits,Be.w_mask=Be.w_size-1,Be.hash_bits=B+7,Be.hash_size=1<<Be.hash_bits,Be.hash_mask=Be.hash_size-1,Be.hash_shift=~~((Be.hash_bits+oe-1)/oe),Be.window=new I.Buf8(2*Be.w_size),Be.head=new I.Buf16(Be.hash_size),Be.prev=new I.Buf16(Be.w_size),Be.lit_bufsize=1<<B+6,Be.pending_buf_size=4*Be.lit_bufsize,Be.pending_buf=new I.Buf8(Be.pending_buf_size),Be.d_buf=1*Be.lit_bufsize,Be.l_buf=3*Be.lit_bufsize,Be.level=me,Be.strategy=se,Be.method=Ee,be(_)}b=[new pt(0,0,0,0,function(_,me){var Ee=65535;for(Ee>_.pending_buf_size-5&&(Ee=_.pending_buf_size-5);;){if(_.lookahead<=1){if(He(_),_.lookahead===0&&me===V)return T;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var M=_.block_start+Ee;if((_.strstart===0||_.strstart>=M)&&(_.lookahead=_.strstart-M,_.strstart=M,q(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-Xe&&(q(_,!1),_.strm.avail_out===0))return T}return _.insert=0,me===j?(q(_,!0),_.strm.avail_out===0?ce:ue):(_.strstart>_.block_start&&(q(_,!1),_.strm.avail_out),T)}),new pt(4,4,8,4,yt),new pt(4,5,16,8,yt),new pt(4,6,32,32,yt),new pt(4,4,16,16,Qe),new pt(8,16,32,32,Qe),new pt(8,16,128,128,Qe),new pt(8,32,128,256,Qe),new pt(32,128,258,1024,Qe),new pt(32,258,258,4096,Qe)],G.deflateInit=function(_,me){return Ge(_,me,L,15,8,0)},G.deflateInit2=Ge,G.deflateReset=be,G.deflateResetKeep=Dt,G.deflateSetHeader=function(_,me){return _&&_.state?_.state.wrap!==2?U:(_.state.gzhead=me,A):U},G.deflate=function(_,me){var Ee,M,B,se;if(!_||!_.state||5<me||me<0)return _?Fe(_,U):U;if(M=_.state,!_.output||!_.input&&_.avail_in!==0||M.status===666&&me!==j)return Fe(_,_.avail_out===0?-5:U);if(M.strm=_,Ee=M.last_flush,M.last_flush=me,M.status===Y)if(M.wrap===2)_.adler=0,Ce(M,31),Ce(M,139),Ce(M,8),M.gzhead?(Ce(M,(M.gzhead.text?1:0)+(M.gzhead.hcrc?2:0)+(M.gzhead.extra?4:0)+(M.gzhead.name?8:0)+(M.gzhead.comment?16:0)),Ce(M,255&M.gzhead.time),Ce(M,M.gzhead.time>>8&255),Ce(M,M.gzhead.time>>16&255),Ce(M,M.gzhead.time>>24&255),Ce(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),Ce(M,255&M.gzhead.os),M.gzhead.extra&&M.gzhead.extra.length&&(Ce(M,255&M.gzhead.extra.length),Ce(M,M.gzhead.extra.length>>8&255)),M.gzhead.hcrc&&(_.adler=C(_.adler,M.pending_buf,M.pending,0)),M.gzindex=0,M.status=69):(Ce(M,0),Ce(M,0),Ce(M,0),Ce(M,0),Ce(M,0),Ce(M,M.level===9?2:2<=M.strategy||M.level<2?4:0),Ce(M,3),M.status=ve);else{var we=L+(M.w_bits-8<<4)<<8;we|=(2<=M.strategy||M.level<2?0:M.level<6?1:M.level===6?2:3)<<6,M.strstart!==0&&(we|=32),we+=31-we%31,M.status=ve,Ae(M,we),M.strstart!==0&&(Ae(M,_.adler>>>16),Ae(M,65535&_.adler)),_.adler=1}if(M.status===69)if(M.gzhead.extra){for(B=M.pending;M.gzindex<(65535&M.gzhead.extra.length)&&(M.pending!==M.pending_buf_size||(M.gzhead.hcrc&&M.pending>B&&(_.adler=C(_.adler,M.pending_buf,M.pending-B,B)),W(_),B=M.pending,M.pending!==M.pending_buf_size));)Ce(M,255&M.gzhead.extra[M.gzindex]),M.gzindex++;M.gzhead.hcrc&&M.pending>B&&(_.adler=C(_.adler,M.pending_buf,M.pending-B,B)),M.gzindex===M.gzhead.extra.length&&(M.gzindex=0,M.status=73)}else M.status=73;if(M.status===73)if(M.gzhead.name){B=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>B&&(_.adler=C(_.adler,M.pending_buf,M.pending-B,B)),W(_),B=M.pending,M.pending===M.pending_buf_size)){se=1;break}se=M.gzindex<M.gzhead.name.length?255&M.gzhead.name.charCodeAt(M.gzindex++):0,Ce(M,se)}while(se!==0);M.gzhead.hcrc&&M.pending>B&&(_.adler=C(_.adler,M.pending_buf,M.pending-B,B)),se===0&&(M.gzindex=0,M.status=91)}else M.status=91;if(M.status===91)if(M.gzhead.comment){B=M.pending;do{if(M.pending===M.pending_buf_size&&(M.gzhead.hcrc&&M.pending>B&&(_.adler=C(_.adler,M.pending_buf,M.pending-B,B)),W(_),B=M.pending,M.pending===M.pending_buf_size)){se=1;break}se=M.gzindex<M.gzhead.comment.length?255&M.gzhead.comment.charCodeAt(M.gzindex++):0,Ce(M,se)}while(se!==0);M.gzhead.hcrc&&M.pending>B&&(_.adler=C(_.adler,M.pending_buf,M.pending-B,B)),se===0&&(M.status=103)}else M.status=103;if(M.status===103&&(M.gzhead.hcrc?(M.pending+2>M.pending_buf_size&&W(_),M.pending+2<=M.pending_buf_size&&(Ce(M,255&_.adler),Ce(M,_.adler>>8&255),_.adler=0,M.status=ve)):M.status=ve),M.pending!==0){if(W(_),_.avail_out===0)return M.last_flush=-1,A}else if(_.avail_in===0&&Oe(me)<=Oe(Ee)&&me!==j)return Fe(_,-5);if(M.status===666&&_.avail_in!==0)return Fe(_,-5);if(_.avail_in!==0||M.lookahead!==0||me!==V&&M.status!==666){var Be=M.strategy===2?function(le,Ve){for(var Ye;;){if(le.lookahead===0&&(He(le),le.lookahead===0)){if(Ve===V)return T;break}if(le.match_length=0,Ye=S._tr_tally(le,0,le.window[le.strstart]),le.lookahead--,le.strstart++,Ye&&(q(le,!1),le.strm.avail_out===0))return T}return le.insert=0,Ve===j?(q(le,!0),le.strm.avail_out===0?ce:ue):le.last_lit&&(q(le,!1),le.strm.avail_out===0)?T:Ie}(M,me):M.strategy===3?function(le,Ve){for(var Ye,k,qe,ut,Ze=le.window;;){if(le.lookahead<=Se){if(He(le),le.lookahead<=Se&&Ve===V)return T;if(le.lookahead===0)break}if(le.match_length=0,le.lookahead>=oe&&0<le.strstart&&(k=Ze[qe=le.strstart-1])===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]){ut=le.strstart+Se;do;while(k===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]&&k===Ze[++qe]&&qe<ut);le.match_length=Se-(ut-qe),le.match_length>le.lookahead&&(le.match_length=le.lookahead)}if(le.match_length>=oe?(Ye=S._tr_tally(le,1,le.match_length-oe),le.lookahead-=le.match_length,le.strstart+=le.match_length,le.match_length=0):(Ye=S._tr_tally(le,0,le.window[le.strstart]),le.lookahead--,le.strstart++),Ye&&(q(le,!1),le.strm.avail_out===0))return T}return le.insert=0,Ve===j?(q(le,!0),le.strm.avail_out===0?ce:ue):le.last_lit&&(q(le,!1),le.strm.avail_out===0)?T:Ie}(M,me):b[M.level].func(M,me);if(Be!==ce&&Be!==ue||(M.status=666),Be===T||Be===ce)return _.avail_out===0&&(M.last_flush=-1),A;if(Be===Ie&&(me===1?S._tr_align(M):me!==5&&(S._tr_stored_block(M,0,0,!1),me===3&&(N(M.head),M.lookahead===0&&(M.strstart=0,M.block_start=0,M.insert=0))),W(_),_.avail_out===0))return M.last_flush=-1,A}return me!==j?A:M.wrap<=0?1:(M.wrap===2?(Ce(M,255&_.adler),Ce(M,_.adler>>8&255),Ce(M,_.adler>>16&255),Ce(M,_.adler>>24&255),Ce(M,255&_.total_in),Ce(M,_.total_in>>8&255),Ce(M,_.total_in>>16&255),Ce(M,_.total_in>>24&255)):(Ae(M,_.adler>>>16),Ae(M,65535&_.adler)),W(_),0<M.wrap&&(M.wrap=-M.wrap),M.pending!==0?A:1)},G.deflateEnd=function(_){var me;return _&&_.state?(me=_.state.status)!==Y&&me!==69&&me!==73&&me!==91&&me!==103&&me!==ve&&me!==666?Fe(_,U):(_.state=null,me===ve?Fe(_,-3):A):U},G.deflateSetDictionary=function(_,me){var Ee,M,B,se,we,Be,le,Ve,Ye=me.length;if(!_||!_.state||(se=(Ee=_.state).wrap)===2||se===1&&Ee.status!==Y||Ee.lookahead)return U;for(se===1&&(_.adler=E(_.adler,me,Ye,0)),Ee.wrap=0,Ye>=Ee.w_size&&(se===0&&(N(Ee.head),Ee.strstart=0,Ee.block_start=0,Ee.insert=0),Ve=new I.Buf8(Ee.w_size),I.arraySet(Ve,me,Ye-Ee.w_size,Ee.w_size,0),me=Ve,Ye=Ee.w_size),we=_.avail_in,Be=_.next_in,le=_.input,_.avail_in=Ye,_.next_in=0,_.input=me,He(Ee);Ee.lookahead>=oe;){for(M=Ee.strstart,B=Ee.lookahead-(oe-1);Ee.ins_h=(Ee.ins_h<<Ee.hash_shift^Ee.window[M+oe-1])&Ee.hash_mask,Ee.prev[M&Ee.w_mask]=Ee.head[Ee.ins_h],Ee.head[Ee.ins_h]=M,M++,--B;);Ee.strstart=M,Ee.lookahead=oe-1,He(Ee)}return Ee.strstart+=Ee.lookahead,Ee.block_start=Ee.strstart,Ee.insert=Ee.lookahead,Ee.lookahead=0,Ee.match_length=Ee.prev_length=oe-1,Ee.match_available=0,_.next_in=Be,_.input=le,_.avail_in=we,Ee.wrap=se,A},G.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(u,p,G){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(u,p,G){p.exports=function(b,I){var S,E,C,z,V,j,A,U,O,P,w,L,J,x,D,Q,te,fe,oe,Se,Xe,Y,ve,T,Ie;S=b.state,E=b.next_in,T=b.input,C=E+(b.avail_in-5),z=b.next_out,Ie=b.output,V=z-(I-b.avail_out),j=z+(b.avail_out-257),A=S.dmax,U=S.wsize,O=S.whave,P=S.wnext,w=S.window,L=S.hold,J=S.bits,x=S.lencode,D=S.distcode,Q=(1<<S.lenbits)-1,te=(1<<S.distbits)-1;e:do{J<15&&(L+=T[E++]<<J,J+=8,L+=T[E++]<<J,J+=8),fe=x[L&Q];t:for(;;){if(L>>>=oe=fe>>>24,J-=oe,(oe=fe>>>16&255)===0)Ie[z++]=65535&fe;else{if(!(16&oe)){if((64&oe)==0){fe=x[(65535&fe)+(L&(1<<oe)-1)];continue t}if(32&oe){S.mode=12;break e}b.msg="invalid literal/length code",S.mode=30;break e}Se=65535&fe,(oe&=15)&&(J<oe&&(L+=T[E++]<<J,J+=8),Se+=L&(1<<oe)-1,L>>>=oe,J-=oe),J<15&&(L+=T[E++]<<J,J+=8,L+=T[E++]<<J,J+=8),fe=D[L&te];i:for(;;){if(L>>>=oe=fe>>>24,J-=oe,!(16&(oe=fe>>>16&255))){if((64&oe)==0){fe=D[(65535&fe)+(L&(1<<oe)-1)];continue i}b.msg="invalid distance code",S.mode=30;break e}if(Xe=65535&fe,J<(oe&=15)&&(L+=T[E++]<<J,(J+=8)<oe&&(L+=T[E++]<<J,J+=8)),A<(Xe+=L&(1<<oe)-1)){b.msg="invalid distance too far back",S.mode=30;break e}if(L>>>=oe,J-=oe,(oe=z-V)<Xe){if(O<(oe=Xe-oe)&&S.sane){b.msg="invalid distance too far back",S.mode=30;break e}if(ve=w,(Y=0)===P){if(Y+=U-oe,oe<Se){for(Se-=oe;Ie[z++]=w[Y++],--oe;);Y=z-Xe,ve=Ie}}else if(P<oe){if(Y+=U+P-oe,(oe-=P)<Se){for(Se-=oe;Ie[z++]=w[Y++],--oe;);if(Y=0,P<Se){for(Se-=oe=P;Ie[z++]=w[Y++],--oe;);Y=z-Xe,ve=Ie}}}else if(Y+=P-oe,oe<Se){for(Se-=oe;Ie[z++]=w[Y++],--oe;);Y=z-Xe,ve=Ie}for(;2<Se;)Ie[z++]=ve[Y++],Ie[z++]=ve[Y++],Ie[z++]=ve[Y++],Se-=3;Se&&(Ie[z++]=ve[Y++],1<Se&&(Ie[z++]=ve[Y++]))}else{for(Y=z-Xe;Ie[z++]=Ie[Y++],Ie[z++]=Ie[Y++],Ie[z++]=Ie[Y++],2<(Se-=3););Se&&(Ie[z++]=Ie[Y++],1<Se&&(Ie[z++]=Ie[Y++]))}break}}break}}while(E<C&&z<j);E-=Se=J>>3,L&=(1<<(J-=Se<<3))-1,b.next_in=E,b.next_out=z,b.avail_in=E<C?C-E+5:5-(E-C),b.avail_out=z<j?j-z+257:257-(z-j),S.hold=L,S.bits=J}},{}],49:[function(u,p,G){var b=u("../utils/common"),I=u("./adler32"),S=u("./crc32"),E=u("./inffast"),C=u("./inftrees"),z=1,V=2,j=0,A=-2,U=1,O=852,P=592;function w(Y){return(Y>>>24&255)+(Y>>>8&65280)+((65280&Y)<<8)+((255&Y)<<24)}function L(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new b.Buf16(320),this.work=new b.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function J(Y){var ve;return Y&&Y.state?(ve=Y.state,Y.total_in=Y.total_out=ve.total=0,Y.msg="",ve.wrap&&(Y.adler=1&ve.wrap),ve.mode=U,ve.last=0,ve.havedict=0,ve.dmax=32768,ve.head=null,ve.hold=0,ve.bits=0,ve.lencode=ve.lendyn=new b.Buf32(O),ve.distcode=ve.distdyn=new b.Buf32(P),ve.sane=1,ve.back=-1,j):A}function x(Y){var ve;return Y&&Y.state?((ve=Y.state).wsize=0,ve.whave=0,ve.wnext=0,J(Y)):A}function D(Y,ve){var T,Ie;return Y&&Y.state?(Ie=Y.state,ve<0?(T=0,ve=-ve):(T=1+(ve>>4),ve<48&&(ve&=15)),ve&&(ve<8||15<ve)?A:(Ie.window!==null&&Ie.wbits!==ve&&(Ie.window=null),Ie.wrap=T,Ie.wbits=ve,x(Y))):A}function Q(Y,ve){var T,Ie;return Y?(Ie=new L,(Y.state=Ie).window=null,(T=D(Y,ve))!==j&&(Y.state=null),T):A}var te,fe,oe=!0;function Se(Y){if(oe){var ve;for(te=new b.Buf32(512),fe=new b.Buf32(32),ve=0;ve<144;)Y.lens[ve++]=8;for(;ve<256;)Y.lens[ve++]=9;for(;ve<280;)Y.lens[ve++]=7;for(;ve<288;)Y.lens[ve++]=8;for(C(z,Y.lens,0,288,te,0,Y.work,{bits:9}),ve=0;ve<32;)Y.lens[ve++]=5;C(V,Y.lens,0,32,fe,0,Y.work,{bits:5}),oe=!1}Y.lencode=te,Y.lenbits=9,Y.distcode=fe,Y.distbits=5}function Xe(Y,ve,T,Ie){var ce,ue=Y.state;return ue.window===null&&(ue.wsize=1<<ue.wbits,ue.wnext=0,ue.whave=0,ue.window=new b.Buf8(ue.wsize)),Ie>=ue.wsize?(b.arraySet(ue.window,ve,T-ue.wsize,ue.wsize,0),ue.wnext=0,ue.whave=ue.wsize):(Ie<(ce=ue.wsize-ue.wnext)&&(ce=Ie),b.arraySet(ue.window,ve,T-Ie,ce,ue.wnext),(Ie-=ce)?(b.arraySet(ue.window,ve,T-Ie,Ie,0),ue.wnext=Ie,ue.whave=ue.wsize):(ue.wnext+=ce,ue.wnext===ue.wsize&&(ue.wnext=0),ue.whave<ue.wsize&&(ue.whave+=ce))),0}G.inflateReset=x,G.inflateReset2=D,G.inflateResetKeep=J,G.inflateInit=function(Y){return Q(Y,15)},G.inflateInit2=Q,G.inflate=function(Y,ve){var T,Ie,ce,ue,Fe,Oe,N,W,q,Ce,Ae,Me,He,yt,Qe,pt,We,Dt,be,Ge,_,me,Ee,M,B=0,se=new b.Buf8(4),we=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return A;(T=Y.state).mode===12&&(T.mode=13),Fe=Y.next_out,ce=Y.output,N=Y.avail_out,ue=Y.next_in,Ie=Y.input,Oe=Y.avail_in,W=T.hold,q=T.bits,Ce=Oe,Ae=N,me=j;e:for(;;)switch(T.mode){case U:if(T.wrap===0){T.mode=13;break}for(;q<16;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(2&T.wrap&&W===35615){se[T.check=0]=255&W,se[1]=W>>>8&255,T.check=S(T.check,se,2,0),q=W=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&W)<<8)+(W>>8))%31){Y.msg="incorrect header check",T.mode=30;break}if((15&W)!=8){Y.msg="unknown compression method",T.mode=30;break}if(q-=4,_=8+(15&(W>>>=4)),T.wbits===0)T.wbits=_;else if(_>T.wbits){Y.msg="invalid window size",T.mode=30;break}T.dmax=1<<_,Y.adler=T.check=1,T.mode=512&W?10:12,q=W=0;break;case 2:for(;q<16;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(T.flags=W,(255&T.flags)!=8){Y.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){Y.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=W>>8&1),512&T.flags&&(se[0]=255&W,se[1]=W>>>8&255,T.check=S(T.check,se,2,0)),q=W=0,T.mode=3;case 3:for(;q<32;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}T.head&&(T.head.time=W),512&T.flags&&(se[0]=255&W,se[1]=W>>>8&255,se[2]=W>>>16&255,se[3]=W>>>24&255,T.check=S(T.check,se,4,0)),q=W=0,T.mode=4;case 4:for(;q<16;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}T.head&&(T.head.xflags=255&W,T.head.os=W>>8),512&T.flags&&(se[0]=255&W,se[1]=W>>>8&255,T.check=S(T.check,se,2,0)),q=W=0,T.mode=5;case 5:if(1024&T.flags){for(;q<16;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}T.length=W,T.head&&(T.head.extra_len=W),512&T.flags&&(se[0]=255&W,se[1]=W>>>8&255,T.check=S(T.check,se,2,0)),q=W=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(Oe<(Me=T.length)&&(Me=Oe),Me&&(T.head&&(_=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),b.arraySet(T.head.extra,Ie,ue,Me,_)),512&T.flags&&(T.check=S(T.check,Ie,Me,ue)),Oe-=Me,ue+=Me,T.length-=Me),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(Oe===0)break e;for(Me=0;_=Ie[ue+Me++],T.head&&_&&T.length<65536&&(T.head.name+=String.fromCharCode(_)),_&&Me<Oe;);if(512&T.flags&&(T.check=S(T.check,Ie,Me,ue)),Oe-=Me,ue+=Me,_)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(Oe===0)break e;for(Me=0;_=Ie[ue+Me++],T.head&&_&&T.length<65536&&(T.head.comment+=String.fromCharCode(_)),_&&Me<Oe;);if(512&T.flags&&(T.check=S(T.check,Ie,Me,ue)),Oe-=Me,ue+=Me,_)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;q<16;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(W!==(65535&T.check)){Y.msg="header crc mismatch",T.mode=30;break}q=W=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),Y.adler=T.check=0,T.mode=12;break;case 10:for(;q<32;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}Y.adler=T.check=w(W),q=W=0,T.mode=11;case 11:if(T.havedict===0)return Y.next_out=Fe,Y.avail_out=N,Y.next_in=ue,Y.avail_in=Oe,T.hold=W,T.bits=q,2;Y.adler=T.check=1,T.mode=12;case 12:if(ve===5||ve===6)break e;case 13:if(T.last){W>>>=7&q,q-=7&q,T.mode=27;break}for(;q<3;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}switch(T.last=1&W,q-=1,3&(W>>>=1)){case 0:T.mode=14;break;case 1:if(Se(T),T.mode=20,ve!==6)break;W>>>=2,q-=2;break e;case 2:T.mode=17;break;case 3:Y.msg="invalid block type",T.mode=30}W>>>=2,q-=2;break;case 14:for(W>>>=7&q,q-=7&q;q<32;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if((65535&W)!=(W>>>16^65535)){Y.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&W,q=W=0,T.mode=15,ve===6)break e;case 15:T.mode=16;case 16:if(Me=T.length){if(Oe<Me&&(Me=Oe),N<Me&&(Me=N),Me===0)break e;b.arraySet(ce,Ie,ue,Me,Fe),Oe-=Me,ue+=Me,N-=Me,Fe+=Me,T.length-=Me;break}T.mode=12;break;case 17:for(;q<14;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(T.nlen=257+(31&W),W>>>=5,q-=5,T.ndist=1+(31&W),W>>>=5,q-=5,T.ncode=4+(15&W),W>>>=4,q-=4,286<T.nlen||30<T.ndist){Y.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;q<3;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}T.lens[we[T.have++]]=7&W,W>>>=3,q-=3}for(;T.have<19;)T.lens[we[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,Ee={bits:T.lenbits},me=C(0,T.lens,0,19,T.lencode,0,T.work,Ee),T.lenbits=Ee.bits,me){Y.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;pt=(B=T.lencode[W&(1<<T.lenbits)-1])>>>16&255,We=65535&B,!((Qe=B>>>24)<=q);){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(We<16)W>>>=Qe,q-=Qe,T.lens[T.have++]=We;else{if(We===16){for(M=Qe+2;q<M;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(W>>>=Qe,q-=Qe,T.have===0){Y.msg="invalid bit length repeat",T.mode=30;break}_=T.lens[T.have-1],Me=3+(3&W),W>>>=2,q-=2}else if(We===17){for(M=Qe+3;q<M;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}q-=Qe,_=0,Me=3+(7&(W>>>=Qe)),W>>>=3,q-=3}else{for(M=Qe+7;q<M;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}q-=Qe,_=0,Me=11+(127&(W>>>=Qe)),W>>>=7,q-=7}if(T.have+Me>T.nlen+T.ndist){Y.msg="invalid bit length repeat",T.mode=30;break}for(;Me--;)T.lens[T.have++]=_}}if(T.mode===30)break;if(T.lens[256]===0){Y.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,Ee={bits:T.lenbits},me=C(z,T.lens,0,T.nlen,T.lencode,0,T.work,Ee),T.lenbits=Ee.bits,me){Y.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,Ee={bits:T.distbits},me=C(V,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,Ee),T.distbits=Ee.bits,me){Y.msg="invalid distances set",T.mode=30;break}if(T.mode=20,ve===6)break e;case 20:T.mode=21;case 21:if(6<=Oe&&258<=N){Y.next_out=Fe,Y.avail_out=N,Y.next_in=ue,Y.avail_in=Oe,T.hold=W,T.bits=q,E(Y,Ae),Fe=Y.next_out,ce=Y.output,N=Y.avail_out,ue=Y.next_in,Ie=Y.input,Oe=Y.avail_in,W=T.hold,q=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;pt=(B=T.lencode[W&(1<<T.lenbits)-1])>>>16&255,We=65535&B,!((Qe=B>>>24)<=q);){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(pt&&(240&pt)==0){for(Dt=Qe,be=pt,Ge=We;pt=(B=T.lencode[Ge+((W&(1<<Dt+be)-1)>>Dt)])>>>16&255,We=65535&B,!(Dt+(Qe=B>>>24)<=q);){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}W>>>=Dt,q-=Dt,T.back+=Dt}if(W>>>=Qe,q-=Qe,T.back+=Qe,T.length=We,pt===0){T.mode=26;break}if(32&pt){T.back=-1,T.mode=12;break}if(64&pt){Y.msg="invalid literal/length code",T.mode=30;break}T.extra=15&pt,T.mode=22;case 22:if(T.extra){for(M=T.extra;q<M;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}T.length+=W&(1<<T.extra)-1,W>>>=T.extra,q-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;pt=(B=T.distcode[W&(1<<T.distbits)-1])>>>16&255,We=65535&B,!((Qe=B>>>24)<=q);){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if((240&pt)==0){for(Dt=Qe,be=pt,Ge=We;pt=(B=T.distcode[Ge+((W&(1<<Dt+be)-1)>>Dt)])>>>16&255,We=65535&B,!(Dt+(Qe=B>>>24)<=q);){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}W>>>=Dt,q-=Dt,T.back+=Dt}if(W>>>=Qe,q-=Qe,T.back+=Qe,64&pt){Y.msg="invalid distance code",T.mode=30;break}T.offset=We,T.extra=15&pt,T.mode=24;case 24:if(T.extra){for(M=T.extra;q<M;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}T.offset+=W&(1<<T.extra)-1,W>>>=T.extra,q-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){Y.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(N===0)break e;if(Me=Ae-N,T.offset>Me){if((Me=T.offset-Me)>T.whave&&T.sane){Y.msg="invalid distance too far back",T.mode=30;break}He=Me>T.wnext?(Me-=T.wnext,T.wsize-Me):T.wnext-Me,Me>T.length&&(Me=T.length),yt=T.window}else yt=ce,He=Fe-T.offset,Me=T.length;for(N<Me&&(Me=N),N-=Me,T.length-=Me;ce[Fe++]=yt[He++],--Me;);T.length===0&&(T.mode=21);break;case 26:if(N===0)break e;ce[Fe++]=T.length,N--,T.mode=21;break;case 27:if(T.wrap){for(;q<32;){if(Oe===0)break e;Oe--,W|=Ie[ue++]<<q,q+=8}if(Ae-=N,Y.total_out+=Ae,T.total+=Ae,Ae&&(Y.adler=T.check=T.flags?S(T.check,ce,Ae,Fe-Ae):I(T.check,ce,Ae,Fe-Ae)),Ae=N,(T.flags?W:w(W))!==T.check){Y.msg="incorrect data check",T.mode=30;break}q=W=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;q<32;){if(Oe===0)break e;Oe--,W+=Ie[ue++]<<q,q+=8}if(W!==(4294967295&T.total)){Y.msg="incorrect length check",T.mode=30;break}q=W=0}T.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return A}return Y.next_out=Fe,Y.avail_out=N,Y.next_in=ue,Y.avail_in=Oe,T.hold=W,T.bits=q,(T.wsize||Ae!==Y.avail_out&&T.mode<30&&(T.mode<27||ve!==4))&&Xe(Y,Y.output,Y.next_out,Ae-Y.avail_out)?(T.mode=31,-4):(Ce-=Y.avail_in,Ae-=Y.avail_out,Y.total_in+=Ce,Y.total_out+=Ae,T.total+=Ae,T.wrap&&Ae&&(Y.adler=T.check=T.flags?S(T.check,ce,Ae,Y.next_out-Ae):I(T.check,ce,Ae,Y.next_out-Ae)),Y.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(Ce==0&&Ae===0||ve===4)&&me===j&&(me=-5),me)},G.inflateEnd=function(Y){if(!Y||!Y.state)return A;var ve=Y.state;return ve.window&&(ve.window=null),Y.state=null,j},G.inflateGetHeader=function(Y,ve){var T;return Y&&Y.state?(2&(T=Y.state).wrap)==0?A:((T.head=ve).done=!1,j):A},G.inflateSetDictionary=function(Y,ve){var T,Ie=ve.length;return Y&&Y.state?(T=Y.state).wrap!==0&&T.mode!==11?A:T.mode===11&&I(1,ve,Ie,0)!==T.check?-3:Xe(Y,ve,Ie,Ie)?(T.mode=31,-4):(T.havedict=1,j):A},G.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(u,p,G){var b=u("../utils/common"),I=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],S=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(z,V,j,A,U,O,P,w){var L,J,x,D,Q,te,fe,oe,Se,Xe=w.bits,Y=0,ve=0,T=0,Ie=0,ce=0,ue=0,Fe=0,Oe=0,N=0,W=0,q=null,Ce=0,Ae=new b.Buf16(16),Me=new b.Buf16(16),He=null,yt=0;for(Y=0;Y<=15;Y++)Ae[Y]=0;for(ve=0;ve<A;ve++)Ae[V[j+ve]]++;for(ce=Xe,Ie=15;1<=Ie&&Ae[Ie]===0;Ie--);if(Ie<ce&&(ce=Ie),Ie===0)return U[O++]=20971520,U[O++]=20971520,w.bits=1,0;for(T=1;T<Ie&&Ae[T]===0;T++);for(ce<T&&(ce=T),Y=Oe=1;Y<=15;Y++)if(Oe<<=1,(Oe-=Ae[Y])<0)return-1;if(0<Oe&&(z===0||Ie!==1))return-1;for(Me[1]=0,Y=1;Y<15;Y++)Me[Y+1]=Me[Y]+Ae[Y];for(ve=0;ve<A;ve++)V[j+ve]!==0&&(P[Me[V[j+ve]]++]=ve);if(te=z===0?(q=He=P,19):z===1?(q=I,Ce-=257,He=S,yt-=257,256):(q=E,He=C,-1),Y=T,Q=O,Fe=ve=W=0,x=-1,D=(N=1<<(ue=ce))-1,z===1&&852<N||z===2&&592<N)return 1;for(;;){for(fe=Y-Fe,Se=P[ve]<te?(oe=0,P[ve]):P[ve]>te?(oe=He[yt+P[ve]],q[Ce+P[ve]]):(oe=96,0),L=1<<Y-Fe,T=J=1<<ue;U[Q+(W>>Fe)+(J-=L)]=fe<<24|oe<<16|Se|0,J!==0;);for(L=1<<Y-1;W&L;)L>>=1;if(L!==0?(W&=L-1,W+=L):W=0,ve++,--Ae[Y]==0){if(Y===Ie)break;Y=V[j+P[ve]]}if(ce<Y&&(W&D)!==x){for(Fe===0&&(Fe=ce),Q+=T,Oe=1<<(ue=Y-Fe);ue+Fe<Ie&&!((Oe-=Ae[ue+Fe])<=0);)ue++,Oe<<=1;if(N+=1<<ue,z===1&&852<N||z===2&&592<N)return 1;U[x=W&D]=ce<<24|ue<<16|Q-O|0}}return W!==0&&(U[Q+W]=Y-Fe<<24|64<<16|0),w.bits=ce,0}},{"../utils/common":41}],51:[function(u,p,G){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(u,p,G){var b=u("../utils/common"),I=0,S=1;function E(B){for(var se=B.length;0<=--se;)B[se]=0}var C=0,z=29,V=256,j=V+1+z,A=30,U=19,O=2*j+1,P=15,w=16,L=7,J=256,x=16,D=17,Q=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Xe=new Array(2*(j+2));E(Xe);var Y=new Array(2*A);E(Y);var ve=new Array(512);E(ve);var T=new Array(256);E(T);var Ie=new Array(z);E(Ie);var ce,ue,Fe,Oe=new Array(A);function N(B,se,we,Be,le){this.static_tree=B,this.extra_bits=se,this.extra_base=we,this.elems=Be,this.max_length=le,this.has_stree=B&&B.length}function W(B,se){this.dyn_tree=B,this.max_code=0,this.stat_desc=se}function q(B){return B<256?ve[B]:ve[256+(B>>>7)]}function Ce(B,se){B.pending_buf[B.pending++]=255&se,B.pending_buf[B.pending++]=se>>>8&255}function Ae(B,se,we){B.bi_valid>w-we?(B.bi_buf|=se<<B.bi_valid&65535,Ce(B,B.bi_buf),B.bi_buf=se>>w-B.bi_valid,B.bi_valid+=we-w):(B.bi_buf|=se<<B.bi_valid&65535,B.bi_valid+=we)}function Me(B,se,we){Ae(B,we[2*se],we[2*se+1])}function He(B,se){for(var we=0;we|=1&B,B>>>=1,we<<=1,0<--se;);return we>>>1}function yt(B,se,we){var Be,le,Ve=new Array(P+1),Ye=0;for(Be=1;Be<=P;Be++)Ve[Be]=Ye=Ye+we[Be-1]<<1;for(le=0;le<=se;le++){var k=B[2*le+1];k!==0&&(B[2*le]=He(Ve[k]++,k))}}function Qe(B){var se;for(se=0;se<j;se++)B.dyn_ltree[2*se]=0;for(se=0;se<A;se++)B.dyn_dtree[2*se]=0;for(se=0;se<U;se++)B.bl_tree[2*se]=0;B.dyn_ltree[2*J]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function pt(B){8<B.bi_valid?Ce(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function We(B,se,we,Be){var le=2*se,Ve=2*we;return B[le]<B[Ve]||B[le]===B[Ve]&&Be[se]<=Be[we]}function Dt(B,se,we){for(var Be=B.heap[we],le=we<<1;le<=B.heap_len&&(le<B.heap_len&&We(se,B.heap[le+1],B.heap[le],B.depth)&&le++,!We(se,Be,B.heap[le],B.depth));)B.heap[we]=B.heap[le],we=le,le<<=1;B.heap[we]=Be}function be(B,se,we){var Be,le,Ve,Ye,k=0;if(B.last_lit!==0)for(;Be=B.pending_buf[B.d_buf+2*k]<<8|B.pending_buf[B.d_buf+2*k+1],le=B.pending_buf[B.l_buf+k],k++,Be===0?Me(B,le,se):(Me(B,(Ve=T[le])+V+1,se),(Ye=te[Ve])!==0&&Ae(B,le-=Ie[Ve],Ye),Me(B,Ve=q(--Be),we),(Ye=fe[Ve])!==0&&Ae(B,Be-=Oe[Ve],Ye)),k<B.last_lit;);Me(B,J,se)}function Ge(B,se){var we,Be,le,Ve=se.dyn_tree,Ye=se.stat_desc.static_tree,k=se.stat_desc.has_stree,qe=se.stat_desc.elems,ut=-1;for(B.heap_len=0,B.heap_max=O,we=0;we<qe;we++)Ve[2*we]!==0?(B.heap[++B.heap_len]=ut=we,B.depth[we]=0):Ve[2*we+1]=0;for(;B.heap_len<2;)Ve[2*(le=B.heap[++B.heap_len]=ut<2?++ut:0)]=1,B.depth[le]=0,B.opt_len--,k&&(B.static_len-=Ye[2*le+1]);for(se.max_code=ut,we=B.heap_len>>1;1<=we;we--)Dt(B,Ve,we);for(le=qe;we=B.heap[1],B.heap[1]=B.heap[B.heap_len--],Dt(B,Ve,1),Be=B.heap[1],B.heap[--B.heap_max]=we,B.heap[--B.heap_max]=Be,Ve[2*le]=Ve[2*we]+Ve[2*Be],B.depth[le]=(B.depth[we]>=B.depth[Be]?B.depth[we]:B.depth[Be])+1,Ve[2*we+1]=Ve[2*Be+1]=le,B.heap[1]=le++,Dt(B,Ve,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(Ze,ht){var pi,Ct,wi,$,R,ee,ie=ht.dyn_tree,Ue=ht.max_code,At=ht.stat_desc.static_tree,ds=ht.stat_desc.has_stree,Os=ht.stat_desc.extra_bits,Xi=ht.stat_desc.extra_base,g=ht.stat_desc.max_length,y=0;for($=0;$<=P;$++)Ze.bl_count[$]=0;for(ie[2*Ze.heap[Ze.heap_max]+1]=0,pi=Ze.heap_max+1;pi<O;pi++)g<($=ie[2*ie[2*(Ct=Ze.heap[pi])+1]+1]+1)&&($=g,y++),ie[2*Ct+1]=$,Ue<Ct||(Ze.bl_count[$]++,R=0,Xi<=Ct&&(R=Os[Ct-Xi]),ee=ie[2*Ct],Ze.opt_len+=ee*($+R),ds&&(Ze.static_len+=ee*(At[2*Ct+1]+R)));if(y!==0){do{for($=g-1;Ze.bl_count[$]===0;)$--;Ze.bl_count[$]--,Ze.bl_count[$+1]+=2,Ze.bl_count[g]--,y-=2}while(0<y);for($=g;$!==0;$--)for(Ct=Ze.bl_count[$];Ct!==0;)Ue<(wi=Ze.heap[--pi])||(ie[2*wi+1]!==$&&(Ze.opt_len+=($-ie[2*wi+1])*ie[2*wi],ie[2*wi+1]=$),Ct--)}}(B,se),yt(Ve,ut,B.bl_count)}function _(B,se,we){var Be,le,Ve=-1,Ye=se[1],k=0,qe=7,ut=4;for(Ye===0&&(qe=138,ut=3),se[2*(we+1)+1]=65535,Be=0;Be<=we;Be++)le=Ye,Ye=se[2*(Be+1)+1],++k<qe&&le===Ye||(k<ut?B.bl_tree[2*le]+=k:le!==0?(le!==Ve&&B.bl_tree[2*le]++,B.bl_tree[2*x]++):k<=10?B.bl_tree[2*D]++:B.bl_tree[2*Q]++,Ve=le,ut=(k=0)===Ye?(qe=138,3):le===Ye?(qe=6,3):(qe=7,4))}function me(B,se,we){var Be,le,Ve=-1,Ye=se[1],k=0,qe=7,ut=4;for(Ye===0&&(qe=138,ut=3),Be=0;Be<=we;Be++)if(le=Ye,Ye=se[2*(Be+1)+1],!(++k<qe&&le===Ye)){if(k<ut)for(;Me(B,le,B.bl_tree),--k!=0;);else le!==0?(le!==Ve&&(Me(B,le,B.bl_tree),k--),Me(B,x,B.bl_tree),Ae(B,k-3,2)):k<=10?(Me(B,D,B.bl_tree),Ae(B,k-3,3)):(Me(B,Q,B.bl_tree),Ae(B,k-11,7));Ve=le,ut=(k=0)===Ye?(qe=138,3):le===Ye?(qe=6,3):(qe=7,4)}}E(Oe);var Ee=!1;function M(B,se,we,Be){Ae(B,(C<<1)+(Be?1:0),3),function(le,Ve,Ye,k){pt(le),Ce(le,Ye),Ce(le,~Ye),b.arraySet(le.pending_buf,le.window,Ve,Ye,le.pending),le.pending+=Ye}(B,se,we)}G._tr_init=function(B){Ee||(function(){var se,we,Be,le,Ve,Ye=new Array(P+1);for(le=Be=0;le<z-1;le++)for(Ie[le]=Be,se=0;se<1<<te[le];se++)T[Be++]=le;for(T[Be-1]=le,le=Ve=0;le<16;le++)for(Oe[le]=Ve,se=0;se<1<<fe[le];se++)ve[Ve++]=le;for(Ve>>=7;le<A;le++)for(Oe[le]=Ve<<7,se=0;se<1<<fe[le]-7;se++)ve[256+Ve++]=le;for(we=0;we<=P;we++)Ye[we]=0;for(se=0;se<=143;)Xe[2*se+1]=8,se++,Ye[8]++;for(;se<=255;)Xe[2*se+1]=9,se++,Ye[9]++;for(;se<=279;)Xe[2*se+1]=7,se++,Ye[7]++;for(;se<=287;)Xe[2*se+1]=8,se++,Ye[8]++;for(yt(Xe,j+1,Ye),se=0;se<A;se++)Y[2*se+1]=5,Y[2*se]=He(se,5);ce=new N(Xe,te,V+1,j,P),ue=new N(Y,fe,0,A,P),Fe=new N(new Array(0),oe,0,U,L)}(),Ee=!0),B.l_desc=new W(B.dyn_ltree,ce),B.d_desc=new W(B.dyn_dtree,ue),B.bl_desc=new W(B.bl_tree,Fe),B.bi_buf=0,B.bi_valid=0,Qe(B)},G._tr_stored_block=M,G._tr_flush_block=function(B,se,we,Be){var le,Ve,Ye=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(k){var qe,ut=4093624447;for(qe=0;qe<=31;qe++,ut>>>=1)if(1&ut&&k.dyn_ltree[2*qe]!==0)return I;if(k.dyn_ltree[18]!==0||k.dyn_ltree[20]!==0||k.dyn_ltree[26]!==0)return S;for(qe=32;qe<V;qe++)if(k.dyn_ltree[2*qe]!==0)return S;return I}(B)),Ge(B,B.l_desc),Ge(B,B.d_desc),Ye=function(k){var qe;for(_(k,k.dyn_ltree,k.l_desc.max_code),_(k,k.dyn_dtree,k.d_desc.max_code),Ge(k,k.bl_desc),qe=U-1;3<=qe&&k.bl_tree[2*Se[qe]+1]===0;qe--);return k.opt_len+=3*(qe+1)+5+5+4,qe}(B),le=B.opt_len+3+7>>>3,(Ve=B.static_len+3+7>>>3)<=le&&(le=Ve)):le=Ve=we+5,we+4<=le&&se!==-1?M(B,se,we,Be):B.strategy===4||Ve===le?(Ae(B,2+(Be?1:0),3),be(B,Xe,Y)):(Ae(B,4+(Be?1:0),3),function(k,qe,ut,Ze){var ht;for(Ae(k,qe-257,5),Ae(k,ut-1,5),Ae(k,Ze-4,4),ht=0;ht<Ze;ht++)Ae(k,k.bl_tree[2*Se[ht]+1],3);me(k,k.dyn_ltree,qe-1),me(k,k.dyn_dtree,ut-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,Ye+1),be(B,B.dyn_ltree,B.dyn_dtree)),Qe(B),Be&&pt(B)},G._tr_tally=function(B,se,we){return B.pending_buf[B.d_buf+2*B.last_lit]=se>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&se,B.pending_buf[B.l_buf+B.last_lit]=255&we,B.last_lit++,se===0?B.dyn_ltree[2*we]++:(B.matches++,se--,B.dyn_ltree[2*(T[we]+V+1)]++,B.dyn_dtree[2*q(se)]++),B.last_lit===B.lit_bufsize-1},G._tr_align=function(B){Ae(B,2,3),Me(B,J,Xe),function(se){se.bi_valid===16?(Ce(se,se.bi_buf),se.bi_buf=0,se.bi_valid=0):8<=se.bi_valid&&(se.pending_buf[se.pending++]=255&se.bi_buf,se.bi_buf>>=8,se.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(u,p,G){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(u,p,G){(function(b){(function(I,S){if(!I.setImmediate){var E,C,z,V,j=1,A={},U=!1,O=I.document,P=Object.getPrototypeOf&&Object.getPrototypeOf(I);P=P&&P.setTimeout?P:I,E={}.toString.call(I.process)==="[object process]"?function(x){process.nextTick(function(){L(x)})}:function(){if(I.postMessage&&!I.importScripts){var x=!0,D=I.onmessage;return I.onmessage=function(){x=!1},I.postMessage("","*"),I.onmessage=D,x}}()?(V="setImmediate$"+Math.random()+"$",I.addEventListener?I.addEventListener("message",J,!1):I.attachEvent("onmessage",J),function(x){I.postMessage(V+x,"*")}):I.MessageChannel?((z=new MessageChannel).port1.onmessage=function(x){L(x.data)},function(x){z.port2.postMessage(x)}):O&&"onreadystatechange"in O.createElement("script")?(C=O.documentElement,function(x){var D=O.createElement("script");D.onreadystatechange=function(){L(x),D.onreadystatechange=null,C.removeChild(D),D=null},C.appendChild(D)}):function(x){setTimeout(L,0,x)},P.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var D=new Array(arguments.length-1),Q=0;Q<D.length;Q++)D[Q]=arguments[Q+1];var te={callback:x,args:D};return A[j]=te,E(j),j++},P.clearImmediate=w}function w(x){delete A[x]}function L(x){if(U)setTimeout(L,0,x);else{var D=A[x];if(D){U=!0;try{(function(Q){var te=Q.callback,fe=Q.args;switch(fe.length){case 0:te();break;case 1:te(fe[0]);break;case 2:te(fe[0],fe[1]);break;case 3:te(fe[0],fe[1],fe[2]);break;default:te.apply(S,fe)}})(D)}finally{w(x),U=!1}}}}function J(x){x.source===I&&typeof x.data=="string"&&x.data.indexOf(V)===0&&L(+x.data.slice(V.length))}})(typeof self>"u"?b===void 0?this:b:self)}).call(this,typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(pf)),pf.exports}var mN=_N();const Q_=l$(mN);class TN extends um.EventEmitter{constructor(){super()}}class EN{constructor(){}download(ze,u){const p=document.createElement("a");p.href=URL.createObjectURL(ze),p.download=u,p.click(),p.remove()}openFile(ze){return new Promise((u,p)=>{const G=new FileReader,b=document.createElement("input");b.type="file",b.accept=ze,G.onload=function(I){u(I.target.result)},G.onerror=function(I){p(I)},b.addEventListener("change",I=>{G.readAsArrayBuffer(I.target.files[0])}),b.click()})}}class bN extends um.EventEmitter{constructor(){super(),this.runtime=new TN,this.util=new EN,this.objects={},this.assetStore={}}async saveWorkspace(){const ze=new Q_;ze.file("project.json",JSON.stringify(gN(window.BlocklyWorkspace))),ze.generateAsync({type:"blob"}).then(u=>this.util.download(u,"My project.bs"))}async loadProject(ze){if(!(ze instanceof ArrayBuffer))throw new Error("Project input must be array buffer");const u=await new Q_().loadAsync(ze);if(!u.file("project.json"))throw new Error("project.json not found in project file");const p=JSON.parse(await u.file("project.json").async("string"));fN(p,BlocklyWorkspace),this.emit("projectLoaded")}}window.vm=new bN;function SN(){return ki.jsx("div",{className:"app",children:ki.jsx(dN,{})})}zm.createRoot(document.getElementById("root")).render(ki.jsx(SN,{}));
